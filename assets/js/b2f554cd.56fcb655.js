"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[1477],{10:n=>{n.exports=JSON.parse('{"blogPosts":[{"id":"card-note","metadata":{"permalink":"/blog/card-note","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2023-06-24-\u5361\u7247\u7b14\u8bb0\u5199\u4f5c\u6cd5.mdx","source":"@site/blog/2023-06-24-\u5361\u7247\u7b14\u8bb0\u5199\u4f5c\u6cd5.mdx","title":"\u5361\u7247\u7b14\u8bb0\u5199\u4f5c\u6cd5","description":"\u8fd9\u672c\u4e66\u4e0d\u662f\u6559\u5927\u5bb6\u5199\u4f5c\u6280\u5de7\u7684\uff0c\u5b83\u6bd4\u8f83\u5f3a\u8c03\u5199\u4f5c\u524d\u7684\u51c6\u5907\u3002","date":"2023-06-24T00:00:00.000Z","formattedDate":"2023\u5e746\u670824\u65e5","tags":[{"label":"\u5361\u7247\u7b14\u8bb0","permalink":"/blog/tags/\u5361\u7247\u7b14\u8bb0"},{"label":"\u5199\u4f5c","permalink":"/blog/tags/\u5199\u4f5c"}],"readingTime":12.405,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"slug":"card-note","tags":["\u5361\u7247\u7b14\u8bb0","\u5199\u4f5c"],"authors":"xiongtao"},"nextItem":{"title":"\u5982\u4f55\u8bfb\u61c2 TC39","permalink":"/blog/how-to-read-tc39-spec"}},"content":"\u8fd9\u672c\u4e66\u4e0d\u662f\u6559\u5927\u5bb6\u5199\u4f5c\u6280\u5de7\u7684\uff0c\u5b83\u6bd4\u8f83\u5f3a\u8c03\u5199\u4f5c\u524d\u7684\u51c6\u5907\u3002\\n\\n\u5199\u4f5c\u7684\u56f0\u96be\u662f\u4ec0\u4e48\uff0c\u662f\u4f60\u5bf9\u7740\u4e00\u5f20\u767d\u7eb8\u96be\u4ee5\u4e0b\u624b\uff0c\u4e0d\u77e5\u9053\u5199\u4ec0\u4e48\uff0c\u6216\u662f\u5199\u7684\u8fc7\u7a0b\u5f88\u56f0\u96be\uff0c\u56e0\u4e3a\u4f60\u5728\u7ede\u5c3d\u8111\u6c41\u9760\u8bb0\u5fc6\u5728\u5199\u4f5c\u3002\u6b64\u65f6\u60f3\u8c61\u5982\u679c\u4f60\u6709\u4e00\u4e2a\u7d20\u6750\u5e93\uff0c\u91cc\u9762\u5305\u542b\u4e86\u6587\u7ae0\u7684\u89c2\u70b9\u3001\u8bba\u70b9\uff0c\u4f60\u8981\u505a\u7684\u53ea\u662f\u5bf9\u7d20\u6750\u7684\u7ec4\u7ec7\uff0c\u90a3\u662f\u4e0d\u662f\u5f88\u5bb9\u6613\u5462\uff0c\u8fd9\u672c\u4e66\u7684\u5185\u5bb9\u5c31\u662f\u5728\u8bb2\u5982\u4f55\u6784\u5efa\u8fd9\u4e48\u4e00\u4e2a\u7d20\u6750\u5e93\uff0c\u5373\u5361\u7247\u7b14\u8bb0\u76d2\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n\u4f3c\u4e4e\u542c\u8d77\u6765\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u505a\u7b14\u8bb0\u7136\u540e\u653e\u5165\u5230\u5361\u7247\u76d2\u4e2d\uff0c\u4f46\u662f\u5361\u7247\u76d2\u4e2d\u7684\u7b14\u8bb0\u4e0e\u4e00\u822c\u7684\u7b14\u8bb0\u4e0d\u540c\uff0c\u5b83\u5f3a\u8c03\u7b14\u8bb0\u53ea\u6709\u5728\u4e00\u5b9a\u7684\u4e0a\u4e0b\u6587\u624d\u6709\u610f\u4e49\uff0c\u56e0\u6b64\u7279\u522b\u91cd\u89c6\u7b14\u8bb0\u4e0e\u7b14\u8bb0\u4e4b\u95f4\u7684\u8054\u7cfb\uff0c\u53ea\u662f\u5c06\u7b14\u8bb0\u5806\u79ef\u8d77\u6765\u6ca1\u6709\u610f\u4e49\uff0c\u4e00\u4e2a\u4e2a\u5b64\u7acb\u7684\u77e5\u8bc6\u70b9\u65e0\u6cd5\u5185\u5316\u4e3a\u6211\u4eec\u7684\u5b66\u95ee\u3002\u5728\u6211\u4eec\u6bcf\u6b21\u5411\u7b14\u8bb0\u76d2\u4e2d\u63d2\u5165\u4e00\u6761\u7b14\u8bb0\u65f6\uff0c\u6211\u4eec\u90fd\u9700\u8981\u53bb\u601d\u8003\u8fd9\u6761\u65b0\u7684\u7b14\u8bb0\u4e0e\u5df2\u6709\u7b14\u8bb0\u7cfb\u7edf\u4e4b\u95f4\u7684\u8054\u7cfb\uff0c\u5e76\u4e14\u5efa\u7acb\u8fd9\u79cd\u8054\u7cfb\uff0c\u968f\u7740\u7b14\u8bb0\u76d2\u4e2d\u7684\u7b14\u8bb0\u968f\u6765\u8d8a\u591a\uff0c\u7b14\u8bb0\u7684\u8054\u7cfb\u5f62\u6210\u4e86\u4e00\u4e2a\u5a01\u529b\u5de8\u5927\u7684\u77e5\u8bc6\u7cfb\u7edf\uff0c\u5b83\u5c06\u6210\u4e3a\u4f60\u7684\u7b2c\u4e8c\u5927\u8111\u3002\\n\\n\u4e3a\u4ec0\u4e48\u8981\u8fd9\u4e48\u5f3a\u8c03\u8054\u7cfb\uff0c\u56e0\u4e3a\u5355\u72ec\u7684\u770b\u4e00\u4e2a\u4e1c\u897f\u6ca1\u6709\u610f\u4e49\uff0c\u9664\u975e\u662f\u53c2\u52a0\u7ade\u7b54\u6bd4\u8d5b\u3002\u53ea\u6709\u5f53\u6211\u4eec\u7684\u77e5\u8bc6\u5f62\u6210\u7cfb\u7edf\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5bf9\u4e8b\u7269\u7684\u7406\u89e3\u624d\u4f1a\u6df1\u523b\uff0c\u5e76\u4e14\u5f88\u96be\u9057\u5fd8\uff0c\u751a\u81f3\u5f53\u6211\u4eec\u5b66\u4e60\u65b0\u77e5\u8bc6\u65f6\uff0c\u5728\u6211\u4eec\u7684\u77e5\u8bc6\u4f53\u7cfb\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5\u5f88\u5feb\u7684\u63a5\u53d7\u5e76\u7406\u89e3\u8fd9\u4e9b\u65b0\u77e5\u8bc6\u3002\\n\\n\u56e0\u6b64\u5728\u5b66\u4e60\u65b0\u77e5\u8bc6\u65f6\uff0c\u6211\u4eec\u4e00\u5b9a\u8981\u5b66\u4f1a\u53bb\u7406\u89e3\u5b83\uff0c\u53ea\u6709\u7406\u89e3\u4e86\u624d\u80fd\u5c06\u5b83\u7eb3\u5165\u5230\u6211\u4eec\u7684\u77e5\u8bc6\u4f53\u7cfb\u4e2d\uff0c\u8fd9\u5c31\u5f3a\u8c03\u6211\u4eec\u5728\u5b66\u4e60\u65f6\u8981\u601d\u8003\uff0c\u800c\u4e0d\u662f\u6b7b\u8bb0\u786c\u80cc\uff0c\u6b7b\u8bb0\u786c\u80cc\u53ea\u80fd\u5e94\u4ed8\u4e34\u65f6\u7684\u6d4b\u9a8c\u3002\u56e0\u6b64\u4e00\u4e9b\u5b66\u4e60\u7684\u4e60\u60ef\u4e5f\u662f\u6beb\u65e0\u610f\u4e49\u7684\uff0c\u6bd4\u5982\u5728\u4e66\u4e2d\u5212\u7ebf\uff0c\u8fd9\u79cd\u884c\u4e3a\u5e76\u4e0d\u80fd\u4fc3\u8fdb\u6211\u4eec\u8fdb\u4e00\u6b65\u7684\u601d\u8003\uff1b\u4e0a\u8bfe\u65f6\u6284\u677f\u4e66\uff0c\u771f\u4e0d\u5982\u4e0a\u8bfe\u65f6\u8ba4\u771f\u542c\u8bb2\uff0c\u4e0b\u8bfe\u540e\u51ed\u501f\u81ea\u5df1\u7684\u7406\u89e3\u5c3d\u53ef\u80fd\u7684\u5199\u4e00\u904d\u3002\\n\\n\u5728\u5b66\u4e60\u65f6\u6211\u4eec\u5e94\u8be5\u5982\u4f55\u505a\u7b14\u8bb0\u5462\uff1f\u8bb0\u7b14\u8bb0\u8981\u6c42\u7528\u81ea\u5df1\u7684\u8bdd\u5728\u4e0d\u6539\u53d8\u539f\u610f\u7684\u60c5\u51b5\u4e0b\u590d\u8ff0\u4e00\u904d\uff0c\u800c\u4e0d\u662f\u5bf9\u8bfb\u5230\u7684\u5185\u5bb9\u8fdb\u884c\u6458\u6284\uff0c\u6709\u4e24\u4e2a\u539f\u56e0\uff1a1. \u7b14\u8bb0\u662f\u5728\u4e0a\u4e0b\u6587\u4e2d\u624d\u6709\u610f\u4e49\u7684\uff0c\u6211\u4eec\u8bfb\u5230\u7684\u5185\u5bb9\u662f\u5b58\u5728\u4e8e\u4e66\u4e0a\u7684\u4e0a\u4e0b\u6587\u4e2d\u7684\uff0c\u6211\u4eec\u8981\u5c06\u5176\u6784\u5efa\u4e8e\u6211\u4eec\u7b14\u8bb0\u7684\u4e0a\u4e0b\u6587\u4e2d\uff1b2. \u7528\u81ea\u5df1\u7684\u8bdd\u590d\u8ff0\u4e00\u904d\uff0c\u53ea\u6709\u5728\u6211\u4eec\u5bf9\u8fd9\u6bb5\u5185\u5bb9\u7406\u89e3\u4e86\u4e4b\u540e\u624d\u80fd\u5199\u51fa\u6765\u7684\uff0c\u8fd9\u5c31\u8981\u6c42\u6211\u4eec\u4f1a\u4e0d\u65ad\u7684\u601d\u8003\u3002\\n\\n\u8fd9\u4e2a\u8981\u6c42\u5176\u5b9e\u4e0e\u8d39\u66fc\u5b66\u4e60\u6cd5\u6709\u5f02\u66f2\u540c\u5de5\uff0c\u8d39\u66fc\u5b66\u4e60\u6cd5\u8bb2\u7a76\u7684\u662f\u4ee5\u6559\u4e3a\u5b66\uff0c\u5982\u679c\u6211\u4eec\u80fd\u628a\u5b66\u4e60\u5230\u7684\u77e5\u8bc6\u6559\u4f1a\u7ed9\u522b\u4eba\uff0c\u66f4\u8fd1\u4e00\u6b65\uff0c\u8fd9\u4e2a\u4eba\u662f\u4e00\u4e2a\u5b8c\u5168\u7684\u95e8\u5916\u6c49\uff0c\u90a3\u5c31\u8bf4\u660e\u4f60\u5bf9\u8fd9\u4e9b\u5185\u5bb9\u7406\u89e3\u7684\u975e\u5e38\u6df1\u523b\u3002\u56e0\u6b64\u5728\u5199\u4f5c\u65f6\u4f60\u60f3\u8c61\u4f60\u5728\u8bd5\u56fe\u6559\u4f1a\u8fd9\u4e48\u4e00\u4e2a\u4eba\uff0c\u5982\u679c\u4e0d\u80fd\u901a\u4fd7\u6613\u61c2\u7684\u8bb2\u660e\u767d\uff0c\u5c31\u4e0d\u80fd\u8bf4\u4f60\u7684\u7406\u89e3\u662f\u6df1\u523b\u7684\uff0c\u5f53\u7136\u5bf9\u4e8e\u8bb0\u7b14\u8bb0\u8fd9\u4e2a\u8981\u6c42\u53ef\u4ee5\u964d\u4f4e\u4e00\u4e9b\uff0c\u60f3\u8c61\u8fd9\u4e2a\u4eba\u662f\u672a\u6765\u7684\u4f60\uff0c\u5728\u4f60\u5df2\u7ecf\u5fd8\u8bb0\u8fd9\u4e9b\u5185\u5bb9\u7684\u60c5\u51b5\u4e0b\uff0c\u770b\u5230\u8fd9\u6bb5\u6587\u5b57\u65f6\u80fd\u5426\u6e05\u695a\u8fd9\u6bb5\u6587\u5b57\u8868\u8fbe\u7684\u610f\u601d\u3002\\n\\n\u5de7\u7684\u662f\u6211\u4e2a\u4eba\u6b63\u53cd\u4e24\u4e2a\u6848\u4f8b\u90fd\u6709\uff0c\u673a\u68b0\u7684\u6458\u6284\u4e0e\u7528\u81ea\u5df1\u7684\u8bdd\u5199\u51fa\u6765\u3002\\n\\n\u5728\u521a\u4e0a\u5927\u5b66\u65f6\uff0c\u7531\u4e8e\u8bfe\u7a0b\u5f88\u96be\uff0c\u6211\u5b66\u4e60\u975e\u5e38\u7684\u8d39\u529b\uff0c\u5f80\u5f80\u6211\u770b\u5b8c\u4e00\u904d\u4e66\u4e4b\u540e\uff0c\u90fd\u4e0d\u77e5\u9053\u81ea\u5df1\u770b\u4e86\u4ec0\u4e48\uff0c\u6240\u4ee5\u5f53\u65f6\u5c31\u89c9\u5f97\u6211\u9700\u8981\u505a\u7b14\u8bb0\uff0c\u6211\u90a3\u65f6\u4e3a\u6bcf\u95e8\u79d1\u76ee\u90fd\u51c6\u5907\u4e86\u4e00\u4e2a\u7b14\u8bb0\u672c\uff0c\u5f62\u5f0f\u611f\u5f88\u8db3\uff0c\u4e0d\u8fc7\u90a3\u65f6\u7684\u6211\u505a\u7b14\u8bb0\u7684\u65b9\u6cd5\u4e00\u822c\u5c31\u662f\u6284\u4e00\u904d PPT\u3002\u660e\u663e\u8fd9\u79cd\u673a\u68b0\u7684\u6458\u6284\uff0c\u6ca1\u6709\u4efb\u4f55\u7684\u4f5c\u7528\uff0c\u8fd8\u6d6a\u8d39\u4e86\u5927\u91cf\u7684\u65f6\u95f4\uff0c\u53ea\u80fd\u8bf4\u611f\u52a8\u4e86\u81ea\u5df1\u3002\u5f53\u65f6\u6211\u4e5f\u4e0d\u662f\u6ca1\u6709\u53cd\u7701\u8fc7\uff0c\u6284 PPT \u6709\u7528\u4e48\uff0c\u6709\u8fd9\u529f\u592b\u4e0d\u5982\u5c06 PPT \u6253\u5370\u4e0b\u6765\uff0c\u56de\u53bb\u6162\u6162\u770b\uff0c\u8ddf\u4f60\u6284\u7684\u4e5f\u5dee\u4e0d\u591a\uff0c\u6240\u4ee5\u4e2d\u95f4\u4e5f\u505c\u8fc7\u4e00\u6bb5\u65f6\u95f4\uff0c\u4f46\u662f\u6ca1\u6709\u627e\u5230\u66f4\u597d\u7684\u7834\u5c40\u4e4b\u6cd5\uff0c\u7136\u540e\u53c8\u53bb\u6284 PPT \u4e86\u3002\\n\\n\u540e\u9762\u63a5\u89e6\u4e86\u7f16\u7a0b\uff0c\u4f60\u77e5\u9053\u5728\u7a0b\u5e8f\u5458\u4e4b\u95f4\u90fd\u6bd4\u8f83\u6d41\u884c\u5199\u535a\u5ba2\uff0c\u5199\u4e86\u51e0\u7bc7\u6709\u5173\u4e8e\u7f16\u7a0b\u7684\u535a\u5ba2\u4e4b\u540e\uff0c\u89c9\u5f97\u7684\u786e\u4e0d\u9519\uff0c\u5c31\u5f00\u59cb\u5728\u5b66\u4e60\u300a\u6570\u5b57\u4fe1\u53f7\u5904\u7406\u300b\u65f6\u4e5f\u4ee5\u5199\u535a\u5ba2\u7684\u5f62\u5f0f\u6765\u8bb0\u7b14\u8bb0\uff0c\u4e00\u4e2a\u5b66\u671f\u8fc7\u540e\uff0c\u6211\u5199\u4e86\u5927\u7ea6 20 \u591a\u7bc7\u6587\u7ae0\uff0c\u5b8c\u5168\u662f\u6309\u7167\u81ea\u5df1\u7684\u7406\u89e3\u5199\u7684\uff0c\u800c\u4e0d\u662f\u5bf9\u4e66\u672c\u7684\u6458\u6284\uff0c\u5f53\u6211\u5199\u5b8c\u8fd9\u4e9b\u6587\u7ae0\u7684\u65f6\u5019\uff0c\u771f\u7684\u5c31\u611f\u89c9\u81ea\u5df1\u5bf9\u8fd9\u95e8\u8bfe\u901a\u900f\u4e86\uff0c\u5e76\u4e14\u5728\u5199\u7684\u8fc7\u7a0b\u4f1a\u78b0\u5230\u5f88\u591a\u7591\u60d1\uff0c\u8fd9\u4fc3\u8fdb\u6211\u4e0d\u65ad\u7684\u601d\u8003\uff0c\u4e0d\u65ad\u7684\u5bfb\u627e\u7b54\u6848\uff0c\u8fd9\u4f7f\u5f97\u6211\u5bf9\u8fd9\u95e8\u8bfe\u6709\u975e\u5e38\u591a\u81ea\u5df1\u4e2a\u4eba\u7684\u89c1\u89e3\u3002\u8fd9\u95e8\u8bfe\u8003\u8bd5\u7684\u65f6\u5019\uff0c\u6211\u601d\u8def\u7279\u522b\u7684\u987a\u7545\uff0c\u5f88\u5feb\u6211\u5c31\u5199\u5b8c\u4e86\uff0c\u5e76\u63d0\u524d\u4ea4\u5377\uff0c\u867d\u7136\u6ca1\u6709\u6ee1\u5206\uff0c\u4f46\u662f\u6211\u81ea\u8ba4\u4e3a\u8fd9\u95e8\u8bfe\u6211\u5b66\u7684\u975e\u5e38\u7684\u597d\u3002\\n\\n\u4ece\u6b64\u6211\u610f\u8bc6\u5230\u4e86\u5199\u4f5c\u5bf9\u601d\u8003\u7684\u91cd\u8981\uff0c\u5e76\u6539\u53d8\u4e86\u5b66\u4e60\u65b9\u6cd5\uff0c\u90a3\u5c31\u662f\u4ee5\u5199\u4e3a\u5b66\u3002\\n\\n\u300a\u8340\u5b50\u300b\u8bf4\uff1a\u201c\u5982\u5207\u5982\u78cb\uff0c\u5982\u7422\u5982\u83ab\uff0c\u8c13\u5b66\u95ee\u4e5f\u201d\uff0c\u5b66\u95ee\u662f\u9700\u8981\u4e0d\u505c\u7684\u7422\u78e8\u7684\uff0c\u6211\u4eec\u5bf9\u77e5\u8bc6\u53cd\u590d\u7684\u63a8\u6572\u6253\u78e8\uff0c\u624d\u80fd\u5f62\u6210\u81ea\u5df1\u7684\u5b66\u95ee\u3002\u4f46\u662f\u5982\u679c\u4ec5\u4ec5\u662f\u5728\u8111\u4e2d\u8fdb\u884c\uff0c\u5374\u662f\u6709\u975e\u5e38\u5927\u7684\u96be\u5ea6\uff0c\u56e0\u4e3a\u5927\u8111\u5b83\u5bb9\u91cf\u548c\u7b97\u529b\u6709\u9650\uff0c\u4e14\u6709\u65f6\u4e5f\u4e0d\u53ef\u9760\uff0c\u65f6\u4e0d\u65f6\u4f1a\u9057\u6f0f\u6389\u4e00\u4e9b\u7ec6\u8282\uff0c\u751a\u81f3\u6709\u65f6\u8fd8\u80fd\u4ea7\u751f\u5e7b\u89c9\uff0c\u7ed9\u4f60\u65e0\u4e2d\u751f\u6709\u3002\u4e3a\u4e86\u66f4\u597d\u7684\u6253\u78e8\u6211\u4eec\u7684\u77e5\u8bc6\uff0c\u6211\u4eec\u6709\u5fc5\u8981\u628a\u8111\u4e2d\u7684\u77e5\u8bc6\u5f62\u6210\u6587\u5b57\uff0c\u8fd9\u6837\u624d\u80fd\u4e0d\u65ad\u5730\u8fdb\u884c\u6253\u78e8\uff0c\u4e0d\u65ad\u5730\u5b8c\u5584\u6211\u4eec\u7684\u60f3\u6cd5\uff0c\u4ece\u800c\u5f62\u6210\u6211\u4eec\u7684\u5b66\u95ee\u3002\\n\\n\u6211\u4eec\u5728\u8111\u4e2d\u60f3\u4e00\u4e2a\u95ee\u9898\u65f6\uff0c\u5374\u600e\u4e48\u4e5f\u634b\u4e0d\u6e05\u695a\uff0c\u6b64\u65f6\u6211\u4eec\u6709\u5fc5\u8981\u628a\u8fd9\u4e2a\u60f3\u6cd5\u5199\u4e0b\u6765\uff0c\u6216\u5728\u5199\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6216\u5728\u9605\u8bfb\u4e86\u5df2\u6709\u7684\u6587\u5b57\u540e\uff0c\u6211\u4eec\u7684\u5927\u8111\u4e5f\u5728\u4e0d\u505c\u5730\u601d\u8003\uff0c\u7136\u540e\u6211\u4eec\u4e5f\u4f1a\u4e0d\u505c\u5730\u8c03\u6574\u6587\u5b57\uff0c\u8fd9\u4e2a\u601d\u8003\u5199\u4f5c\u7684\u8fc7\u7a0b\u4e0d\u65ad\u7684\u4ea4\u66ff\u8fdb\u884c\uff0c\u6162\u6162\u5730\u8fd9\u4e2a\u60f3\u6cd5\u4e0d\u65ad\u7684\u6210\u719f\uff0c\u4ece\u800c\u5f62\u6210\u4e86\u6211\u4eec\u81ea\u5df1\u7684\u5b66\u95ee\u3002\\n\\n\u4ece\u4e00\u4e2a\u7a0d\u5927\u7684\u89d2\u5ea6\u770b\uff0c\u5199\u4f5c\u4e0d\u4ec5\u4ec5\u662f\u601d\u8003\u7684\u7ed3\u679c\uff0c\u751a\u81f3\u5b83\u5c31\u662f\u601d\u8003\u672c\u8eab\uff0c\u5199\u4f5c\u7684\u8fc7\u7a0b\u5c31\u662f\u601d\u8003\u7684\u8fc7\u7a0b\uff0c\u5199\u4f5c\u5728\u7eb8\u4e0a\uff0c\u601d\u8003\u5728\u8111\u4e2d\uff0c\u4e8c\u8005\u4e0d\u505c\u7684\u4ea4\u6362\u4fe1\u606f\uff0c\u4f7f\u60f3\u6cd5\u5f97\u4ee5\u5b8c\u5584\u3002\u5f88\u96be\u60f3\u8c61\u6ca1\u6709\u5199\u4f5c\u7684\u601d\u8003\uff0c\u80fd\u60f3\u51fa\u4ec0\u4e48\u9ad8\u6df1\u7684\u5b66\u95ee\u3002\\n\\n\u5362\u66fc\u662f\u5361\u7247\u76d2\u7b14\u8bb0\u6cd5\u7684\u521b\u59cb\u4eba\uff0c\u4ed6\u4e00\u751f\u5199\u4e86 58 \u672c\u4e66\u548c\u767e\u7bc7\u6587\u7ae0\uff0c\u5341\u5206\u7684\u9ad8\u4ea7\uff0c\u79d8\u8bc0\u5c31\u662f\u8fd9\u5957\u5361\u7247\u76d2\u7b14\u8bb0\u6cd5\u3002\u4ed6\u5c06\u7b14\u8bb0\u5206\u4e3a\u4e86\u4e09\u7c7b\uff1a\u95ea\u5ff5\u7b14\u8bb0\u3001\u6587\u732e\u7b14\u8bb0\u548c\u6c38\u4e45\u7b14\u8bb0\u3002\u95ea\u5ff5\u7b14\u8bb0\u8bb0\u5f55\u7684\u662f\u4e00\u4e9b\u7a81\u7136\u7684\u60f3\u6cd5\uff0c\u95ea\u8fc7\u7684\u7075\u611f\uff0c\u6211\u4eec\u8981\u53ca\u65f6\u7684\u8bb0\u5f55\u4e0b\u6765\uff1b\u6587\u732e\u7b14\u8bb0\u662f\u4f60\u9605\u8bfb\u4e00\u4e9b\u6587\u732e\u65f6\uff0c\u770b\u5230\u611f\u5174\u8da3\u6216\u8005\u503c\u5f97\u8bb0\u5f55\u7684\u5185\u5bb9\uff0c\u7ed3\u5408\u6587\u732e\u7684\u4e0a\u4e0b\u6587\u5199\u4e0b\u4f60\u7684\u60f3\u6cd5\uff0c\u5f62\u6210\u6587\u732e\u7b14\u8bb0\uff1b\u6c38\u4e45\u7b14\u8bb0\u662f\u6700\u91cd\u8981\u7684\uff0c\u5b83\u624d\u662f\u653e\u5728\u5361\u7247\u76d2\u4e2d\u7684\u7b14\u8bb0\uff0c\u5b83\u4e00\u822c\u662f\u5728\u4e0a\u9762\u4e24\u79cd\u7b14\u8bb0\u4e4b\u4e0a\u5f62\u6210\u7684\uff0c\u901a\u8fc7\u5b9a\u671f\u7684\u56de\u987e\u95ea\u5ff5\u7b14\u8bb0\u548c\u6587\u732e\u7b14\u8bb0\uff08\u6700\u597d\u662f\u5728\u5fd8\u8bb0\u4e3a\u4ec0\u4e48\u8bb0\u4e4b\u524d\uff09\uff0c\u5728\u6b64\u4e4b\u4e0a\u5b8c\u5584\u81ea\u5df1\u7684\u60f3\u6cd5\uff0c\u5f62\u6210\u6c38\u4e45\u7b14\u8bb0\u653e\u5165\u5230\u6211\u4eec\u7684\u7b14\u8bb0\u76d2\u4e2d\uff0c\u5f53\u7136\u5982\u679c\u65f6\u95f4\u6bd4\u8f83\u5145\u88d5\u7684\u8bdd\uff0c\u53ef\u4ee5\u76f4\u63a5\u505a\u6c38\u4e45\u7b14\u8bb0\uff0c\u8981\u6ce8\u610f\uff0c\u5728\u653e\u5165\u5230\u5361\u7247\u76d2\u4e2d\u65f6\uff0c\u4e00\u5b9a\u8981\u601d\u8003\u4e0e\u5df2\u6709\u7b14\u8bb0\u7684\u8054\u7cfb\uff0c\u5e76\u5efa\u7acb\u8fd9\u79cd\u8054\u7cfb\u3002\\n\\n\u4ee5\u5361\u7247\u7684\u5f62\u5f0f\u8bb0\u7b14\u8bb0\u6709\u4e2a\u597d\u5904\u662f\u5b83\u591f\u5c0f\uff0c\u8bb0\u4e00\u5f20\u5361\u7247\u7b14\u8bb0\u82b1\u4e0d\u4e86\u5f88\u957f\u7684\u65f6\u95f4\u3002\u4e00\u4e2a\u5927\u7684\u4efb\u52a1\u6240\u82b1\u7684\u65f6\u95f4\u5e76\u6ca1\u6709\u60f3\u8c61\u7684\u90a3\u4e48\u4e45\uff0c\u5373\u4f7f\u6bcf\u5929\u79ef\u7d2f\u5341\u5206\u949f\uff0c\u7ecf\u8fc7\u4e00\u5b9a\u65f6\u95f4\u540e\uff0c\u4e5f\u4f1a\u6709\u5f88\u5927\u7684\u8fdb\u5c55\uff0c\u4f46\u662f\u73b0\u5b9e\u662f\uff0c\u5f88\u957f\u4e00\u6bb5\u65f6\u95f4\u8fc7\u540e\uff0c\u8fdb\u5c55\u751a\u5fae\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u4efb\u52a1\u592a\u5927\u4e86\uff0c\u5927\u5230\u8ba9\u6211\u4eec\u6050\u60e7\uff0c\u4ee5\u81f3\u4e8e\u6ca1\u6709\u505a\u7684\u6b32\u671b\u3002\u5982\u679c\u4f7f\u7528\u5361\u7247\u7b14\u8bb0\u6cd5\uff0c\u56e0\u4e3a\u5199\u4e00\u5f20\u5361\u7247\u4e0d\u9700\u8981\u5f88\u4e45\uff0c\u53ef\u80fd\u4e5f\u5c31\u5341\u5206\u949f\uff0c\u6211\u4eec\u6bcf\u4e2a\u4eba\u90fd\u53ef\u4ee5\u5f88\u8f7b\u677e\u7684\u505a\u5230\uff0c\u6240\u4ee5\u6bcf\u5929\u5199\u4e2a\u51e0\u5f20\u5361\u7247\u95ee\u9898\u4e0d\u5927\uff0c\u65e5\u79ef\u6708\u7d2f\uff0c\u6211\u4eec\u7684\u5361\u7247\u76d2\u4f1a\u8d8a\u6765\u8d8a\u5f3a\u5927\u3002\\n\\n\u7efc\u4e0a\uff0c\u5361\u7247\u76d2\u7b14\u8bb0\u6cd5\u5b9e\u8df5\u8d77\u6765\u5e76\u4e0d\u590d\u6742\uff0c\u603b\u7ed3\u8981\u70b9\u5982\u4e0b\uff1a\\n\\n1. \u8981\u52e4\u505a\u7b14\u8bb0\uff0c\u7b14\u8bb0\u76d2\u4e2d\u7b14\u8bb0\u6570\u91cf\u8d8a\u591a\uff0c\u5a01\u529b\u8d8a\u5f3a\u5927\uff0c\u5982\u679c\u8bfb\u5b8c\u4e00\u672c\u4e66\uff0c\u6ca1\u6709\u505a\u4efb\u4f55\u7684\u7b14\u8bb0\uff0c\u8fd9\u672c\u4e66\u5c31\u76f8\u5f53\u4e8e\u767d\u8bfb\u3002\\n2. \u4e0d\u8981\u6458\u6284\u4e66\u4e2d\u7684\u5185\u5bb9\uff0c\u8981\u7528\u81ea\u5df1\u7684\u8bdd\uff0c\u5728\u4e0d\u6539\u53d8\u539f\u610f\u7684\u60c5\u51b5\u4e0b\u590d\u8ff0\u4e00\u904d\uff0c\u8fd9\u6837\u624d\u80fd\u878d\u4e8e\u6211\u4eec\u7684\u77e5\u8bc6\u4f53\u7cfb\uff0c\u4ee5\u8d39\u66fc\u5b66\u4e60\u6cd5\u7684\u8981\u6c42\u53bb\u5199\uff0c\u81f3\u5c11\u4fdd\u8bc1\u518d\u8fc7\u4e00\u6bb5\u65f6\u95f4\u540e\u81ea\u5df1\u80fd\u770b\u61c2\u3002\\n3. \u5728\u5f62\u6210\u65b0\u7684\u6c38\u4e45\u7b14\u8bb0\u65f6\uff0c\u8981\u601d\u8003\u65b0\u7b14\u8bb0\u4e0e\u5df2\u6709\u77e5\u8bc6\u4f53\u7cfb\u7684\u8054\u7cfb\uff0c\u6b63\u662f\u8fd9\u79cd\u8054\u7cfb\u7684\u5b58\u5728\uff0c\u4f7f\u5f97\u6211\u4eec\u7b14\u8bb0\u8d8a\u591a\uff0c\u6211\u4eec\u7684\u7b14\u8bb0\u76d2\u8d8a\u6765\u8d8a\u5f3a\u5927\uff0c\u5426\u5219\u4ec5\u662f\u7b14\u8bb0\u7684\u7b80\u5355\u5806\u53e0\uff0c\u7b14\u8bb0\u8d8a\u5927\u8d8a\u663e\u6742\u4e71"},{"id":"how-to-read-tc39-spec","metadata":{"permalink":"/blog/how-to-read-tc39-spec","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2023-03-09-\u5982\u4f55\u8bfb\u61c2 TC39.mdx","source":"@site/blog/2023-03-09-\u5982\u4f55\u8bfb\u61c2 TC39.mdx","title":"\u5982\u4f55\u8bfb\u61c2 TC39","description":"TC39 \u662f\u4ec0\u4e48\uff1a\u662f\u4e00\u4e2a\u7531 JavaScript \u5f00\u53d1\u8005\u3001\u5b9e\u73b0\u8005\u3001\u5b66\u8005\u7b49\u7ec4\u6210\u7684\u56e2\u4f53\uff0c\u4e0e JavaScript \u793e\u533a\u5408\u4f5c\u7ef4\u62a4\u548c\u53d1\u5c55 JavaScript \u7684\u6807\u51c6\u3002","date":"2023-03-09T00:00:00.000Z","formattedDate":"2023\u5e743\u67089\u65e5","tags":[{"label":"TC39","permalink":"/blog/tags/tc-39"}],"readingTime":11.98,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"slug":"how-to-read-tc39-spec","tags":["TC39"],"authors":"xiongtao"},"prevItem":{"title":"\u5361\u7247\u7b14\u8bb0\u5199\u4f5c\u6cd5","permalink":"/blog/card-note"},"nextItem":{"title":"\u79fb\u52a8\u7aef\u6587\u5b57\u5782\u76f4\u5c45\u4e2d\u65b9\u6848","permalink":"/blog/mobile-text-middle"}},"content":"TC39 \u662f\u4ec0\u4e48\uff1a\u662f\u4e00\u4e2a\u7531 JavaScript \u5f00\u53d1\u8005\u3001\u5b9e\u73b0\u8005\u3001\u5b66\u8005\u7b49\u7ec4\u6210\u7684\u56e2\u4f53\uff0c\u4e0e JavaScript \u793e\u533a\u5408\u4f5c**\u7ef4\u62a4\u548c\u53d1\u5c55 JavaScript \u7684\u6807\u51c6**\u3002\\n\\nTC39 \u5305\u542b\u56db\u4e2a\u89c4\u8303\uff1a\\n\\n- ECMA-262\uff1aECMAScript\\n- ECMA-402\uff1a\u56fd\u9645\u5316 API\\n- ECMA-404\uff1aJSON\\n- ECMA-414\uff1a\u89c4\u5b9a\u54ea\u4e9b\u89c4\u8303\u662f\u4e0e ECMAScript \u6709\u5173\u7684\uff0c\u76ee\u524d\u53ea\u6709 262\u3001402 \u548c 404\\n\\n\x3c!--truncate--\x3e\\n\\n## \u4e3a\u4ec0\u4e48\u9700\u8981\u8bfb\u89c4\u8303\\n\\n\u5173\u4e8e\u52a0\u6cd5\u8fd0\u7b97\u7b26\u4f60\u77e5\u9053\u591a\u5c11\uff1f\\n\\n```js\\n[] + {} // \'[object Object]\'\\n[] + [] // \'\'\\n{} + [] // 0\\n{} + {} // NaN\\n[] + {} == {} + [] // true\\n{} + [] != [] + {} // true\\n```\\n\\n\u4e3a\u4ec0\u4e48\u6709\u4e9b\u65b9\u6cd5\u5728\u539f\u578b\u4e0a\u5de5\u4f5c\uff0c\u6709\u4e9b\u4e0d\u884c\uff1f\\n\\n```js\\n> Array.prototype.push(42)\\n1\\n> Array.prototype\\n[ 42 ]\\n> Array.isArray(Array.prototype)\\ntrue\\n> Set.prototype.add(42)\\nTypeError: Method Set.prototype.add called on incompatible receiver #<Set>\\n    at Set.add (<anonymous>)\\n> Set.prototype\\nSet {}\\n```\\n\\n\u4f60\u80fd\u56de\u7b54\u4e0a\u9762\u7684\u95ee\u9898\u5417\uff0c\u4e5f\u8bb8\u4f60\u4f1a\u53bb\u67e5\u9605 MDN \u6216\u8005\u4e00\u4e9b\u535a\u6587\uff0c\u4f46\u662f\u4e0a\u9762\u7ed9\u7684\u89e3\u91ca\u53ef\u80fd\u90fd\u662f\u542b\u7cca\u4e0d\u6e05\u6216\u8005\u4e92\u76f8\u77db\u76fe\u7684\uff0c\u8fd9\u4e2a\u65f6\u5019\u4f60\u5c31\u9700\u8981\u67e5\u770b\u89c4\u8303\u4e86\u3002\\n\\n## \u53d1\u7248\u6d41\u7a0b\\n\\n\u4ece ES5 \u5230 ES6 \u7ecf\u8fc7\u4e86\u5341\u5e74\uff0c\u4ece ES6 \u6765\u770b\uff0c\u53d1\u7248\u5468\u671f\u8fc7\u957f\u5b58\u5728 2 \u4e2a\u95ee\u9898\uff1a\\n\\n- \u7248\u672c\u4e4b\u95f4\u7684\u65f6\u95f4\u8de8\u5ea6\u592a\u957f\uff0c\u63d0\u65e9\u5b9a\u7a3f\u7684\u7279\u6027\u8981\u7b49\u5f85\u975e\u5e38\u957f\u7684\u65f6\u95f4\uff0c\u4e00\u76f4\u7b49\u5230\u89c4\u8303\u6b63\u5f0f\u53d1\u5e03\uff08\u624d\u80fd\u88ab\u5b9e\u73b0\u548c\u4f7f\u7528\uff09\uff0c\u800c\u9760\u540e\u7684\u7279\u6027\u5f80\u5f80\u8d76\u5728\u6700\u540e\u53d1\u7248\u671f\u9650\u4e4b\u524d\u624d\u5b9a\u7a3f\uff0c\u5b58\u5728\u98ce\u9669\\n- \u8bed\u8a00\u7279\u6027\u7684\u8bbe\u8ba1\u4e0e\u5b9e\u73b0\u548c\u4f7f\u7528\u76f8\u9694\u592a\u4e45\uff0c\u5728\u5b9e\u73b0\u548c\u4f7f\u7528\u9636\u6bb5\u624d\u53d1\u73b0\u8bbe\u8ba1\u7f3a\u9677\u4e3a\u65f6\u5df2\u665a\\n\\n\u4e3a\u6b64\uff0c[TC39](https://www.ecma-international.org/memento/tc39-m.htm)\uff08ECMA \u56fd\u9645\u7ec4\u7ec7\u7b2c 39 \u53f7\u6280\u672f\u59d4\u5458\u4f1a\uff09\u542f\u52a8\u4e86\u65b0\u7684\u6d41\u7a0b\uff0c\u4e00\u4efd\u63d0\u6848\u8981\u6210\u4e3a JavaScript \u6807\u51c6\uff0c\u8981\u7ecf\u8fc7[\u4e94\u4e2a\u6d41\u7a0b](https://tc39.es/process-document/)\uff1a\\n\\n1. Stage 0\uff1a\u7a3b\u8349\u4eba\u9636\u6bb5\uff08strawman\uff09\\n    1. \u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u63d0\u4ea4 pull request \u5230\xa0[GitHub - tc39/ecma262: Status, process, and documents for ECMA262](https://github.com/tc39/ecma262)\\n    2. \u53ef\u4ee5\u662f\u4e00\u4e2a\u63d0\u8bae\uff0c\u60f3\u6cd5\uff0c\u521d\u6b65\u63cf\u8ff0\\n2. Stage 1\uff1a\u63d0\u6848\u9636\u6bb5\uff08proposal\uff09\\n    1. TC39 \u6210\u5458\u4f5c\u4e3a champion\\n    2. TC39 \u5ba1\u9605\u901a\u8fc7\\n    3. \u6709\u5b9e\u73b0\u7684 Demo \u6216\u8005 Polyfill\\n    4. \u521d\u6b65\u63cf\u5199\u6807\u51c6\u7684\u8bed\u4e49\u8bed\u6cd5\uff0c\u7b97\u6cd5\u590d\u6742\u5ea6\uff0c\u89e3\u51b3\u7684\u95ee\u9898\u7b49\\n3. Stage 2\uff1a\u8349\u6848\u9636\u6bb5\uff08Draft\uff09\\n    1. \u6709\u4e24\u4e2a\u6216\u4e24\u4e2a\u4ee5\u4e0a\u7684\u5b9e\u73b0\uff08\u5305\u62ec babel \u8fd9\u7c7b\u7684\u8f6c\u8bd1\u5b9e\u73b0\uff09\\n    2. \u4f7f\u7528\u6b63\u5f0f\u7684\u8bed\u8a00\u63cf\u8ff0\u8be5\u8bed\u6cd5\uff0capi \u7b49\\n4. Stage 3\uff1a\u5019\u9009\u9636\u6bb5\uff08candidate\uff09\\n    1. \u81f3\u5c11 2 \u4e2a\u5b9e\u73b0\uff0c\u53ef\u4ee5\u4e3a\u5b9e\u9a8c\u6027\u5b9e\u73b0\\n    2. ECMAScript spec editor \u901a\u8fc7\u5ba1\u6838\\n    3. TC39 review \u901a\u8fc7\\n    4. \u6587\u6863\u7f16\u5199\u5b8c\u6210\\n5. Stage 4\uff1a\u5b8c\u6210\u9636\u6bb5\uff08finished\uff09\\n    1. \u7f16\u5199 test 262 \u6d4b\u8bd5\u7528\u4f8b\\n    2. \u901a\u8fc7\u4e24\u4e2a\u5b9e\u73b0\u8be5\u7279\u6027\u7684\u5185\u6838\u6d4b\u8bd5\\n    3. ECMAScript spec editor \u901a\u8fc7\u5ba1\u6838\\n    4. \u5f00\u53d1\u8005\u8868\u793a\u652f\u6301\u548c\u8ba4\u53ef\\n\\n\u5728 [Github](https://github.com/tc39/ecma262/) \u4e0a\u516c\u5e03\u4e86\u6240\u6709\u7684\u63d0\u6848\uff0c\u6bcf\u4e24\u4e2a\u6708\u8ba8\u8bba\u4e00\u6b21\u63d0\u6848\u3002\\n\\nTC39 \u6bcf\u5e74\u90fd\u4f1a\u9009\u53d6\u4e00\u4e2a\u65f6\u95f4\u70b9\uff0c\u5bf9\u89c4\u8303\u8fdb\u884c\u5feb\u7167\uff0c\u4f7f\u5176\u6210\u4e3a\u5f53\u5e74\u7684 ECMAScript \u8bed\u8a00\u6807\u51c6\uff0c\u5e76\u9644\u4e0a\u7248\u672c\u53f7\u3002\\n\\n:::note\\n\\n\u5176\u5b9e\u6211\u89c9\u5f97\u6211\u4eec\u73b0\u5728\u4e0d\u5fc5\u5173\u6ce8\u6bcf\u5e74\u53d1\u5e03\u4e86\u4ec0\u4e48\u7279\u6027\uff0c\u6bd4\u5982 ES2023 \u53d1\u5e03\u4e86\u4ec0\u4e48\u7279\u6027\uff0c\u800c\u53ea\u9700\u8981\u5173\u6ce8\u6709\u4ec0\u4e48\u63d0\u6848\u5b8c\u6210\u4e86\u5373\u53ef\uff0c\u5b98\u65b9\u6bcf\u5e74\u90fd\u63a8\u51fa\u4e00\u4e2a\u7248\u672c\u53ef\u80fd\u662f\u60f3\u8868\u793a\u6bcf\u5e74\u90fd\u6709\u4e00\u4e2a\u4ec0\u4e48\u6837\u7684\u8fdb\u5c55\u5427\uff0c\u4f46\u5176\u5b9e\u4e0d\u516c\u5e03\u4e5f\u6ca1\u4e8b\uff0c\u5177\u4f53\u843d\u5230\u5b9e\u5904\u7684\u8fd8\u662f\u770b\u6709\u4ec0\u4e48\u63d0\u6848\u5b8c\u6210\u4e86\uff0c\u50cf\u5176\u4ed6\u7684\u89c4\u8303\uff0c\u6bd4\u5982 CSS \u89c4\u8303\u5c31\u6ca1\u6709\u8981\u6bcf\u5e74\u53d1\u5e03\u4e00\u4e2a\u7248\u672c\uff0c\u751a\u81f3\u5df2\u7ecf\u6ca1\u6709\u7248\u672c\u7684\u6982\u5ff5\u4e86\uff0c\u867d\u7136\u4e00\u76f4\u8bf4\u7684\u662f CSS3\uff0c\u4f46\u662f\u5df2\u7ecf\u662f\u5212\u5206\u4e3a\u591a\u4e2a\u6a21\u5757\uff0c\u5404\u4e2a\u6a21\u5757\u72ec\u81ea\u53d1\u5c55\u3002 \\n\\n:::\\n\\n## ECMA-262\\n\\nECMA-262 \u662f\u6709\u5173\u4e8e ECMAScript \u7684\u89c4\u8303\uff0c\u91cc\u9762\u63cf\u8ff0\u4e86\u8bed\u8a00\u7684\u6240\u6709\u7ec6\u8282\uff0c\u6d4f\u89c8\u5668\u548c Node.js \u5747\u662f\u4ee5\u6b64\u89c4\u8303\u800c\u8fdb\u884c\u5b9e\u73b0\u7684\u3002\u4f46\u662f\u9664\u6b64\u4e4b\u5916\uff0c\u6d4f\u89c8\u5668\u548c Node.js \u8fd8\u5b9e\u73b0\u4e86\u4e00\u4e9b\u5b83\u4eec\u7279\u6709\u7684\u4e1c\u897f\uff0c\u6211\u4eec\u6765\u770b\u4e0b\u54ea\u4e9b\u662f ECMAScript \u89c4\u8303\uff1a\\n\\n| \u8bed\u6cd5\uff0c\u5982 for ... in | \u2705 |\\n|-- | -- |\\n| \u8bed\u4e49\uff0c\u5982 typeof null | \u2705 |\\n| Object, Array, Function, Number, Math, Proxy, globalThis, ... | \u2705 |\\n| console, setTimeout, setInterval, clearTimeout, clearInterval | \u274c \u8fd9\u4e9b\u4e1c\u897f\u5728\u6d4f\u89c8\u5668\u548c Node.js \u4e2d\u90fd\u6709\uff0c\u4f46\u90fd\u662f\u975e\u6807\u51c6\u7684\u3002 |\\n| Buffer, process, global | \u274c \u8fd9\u4e9b\u90fd\u662f\u53ea\u9488\u5bf9 Node.js \u7684 globals\uff0cglobalThis \u662f\u7531\u6807\u51c6\u5b9a\u4e49\u7684\uff0c\u5e76\u4e14\u6d4f\u89c8\u5668\u8fdb\u884c\u4e86\u5b9e\u73b0 |\\n| module, exports, require, \\\\_\\\\_dirname, \\\\_\\\\_filename | \u274c \u8fd9\u4e9b\u662f\u4ec5\u9002\u7528\u4e8e Node.js \u6a21\u5757\u7684\u5168\u5c40\u503c |\\n| window, alert, confirm, document, ... | \u274c \u6d4f\u89c8\u5668\u72ec\u6709 |\\n\\n\u7531\u4e8e\u8fd9\u662f\u4e00\u95e8\u89c4\u8303\uff0c\u4e8b\u65e0\u5de8\u7ec6\u7684\u5305\u542b\u4e86\u8bed\u8a00\u7684\u6240\u6709\u7ec6\u8282\uff0c\u56e0\u6b64\u4e0d\u4f1a\u6709\u4eba\u4ece\u5934\u5230\u5c3e\u8bfb\u4e00\u904d\u7684\uff0c\u76f8\u53cd\uff0c\u53ea\u770b\u4e0e\u4f60\u8bd5\u56fe\u5bfb\u627e\u7684\u4e1c\u897f\u76f8\u5bf9\u5e94\u7684\u90e8\u5206\uff0c\u5e76\u4e14\u5728\u8be5\u90e8\u5206\u53ea\u770b\u4f60\u9700\u8981\u7684\u4e1c\u897f\u3002\\n\\n\u8fd9\u91cc\u7ed9\u4e00\u4e2a `String.prototype.substring` \u4f8b\u5b50\u6765\u8bf4\u660e\u600e\u4e48\u770b\u89c4\u8303\u3002\u73b0\u5728\u5047\u8bbe\u6211\u6709\u4ee5\u4e0b\u7591\u95ee\\n\\n:::info\\n\\n\u4e0d\u8fd0\u884c\u4ee3\u7801\uff0c\u4e0b\u9762\u7684\u4ee3\u7801\u4f1a\u8fd4\u56de\u4ec0\u4e48\uff1a\\n\\n```js\\nString.prototype.substring.call(undefined, 2, 4);\\n```\\n\\n:::\\n\\n\u8fd9\u91cc\u6211\u4eec\u6709\u4e24\u79cd\u731c\u60f3\uff1a\\n\\n1. \u5c06 undefined \u8f6c\u5316\u4e3a \\"undefined\\"\uff0c\u7136\u540e\u8fd4\u56de [2, 4) \u7684\u503c\uff0c\u5373 \\"de\\"\\n2. \u62d2\u7edd\u5c06 undefined \u4f5c\u4e3a\u53c2\u6570\uff0c\u76f4\u63a5\u629b\u51fa\u9519\u8bef\\n\\n\u8fd9\u65f6\u4f60\u53bb\u641c [MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/substring)\uff0c\u4f46\u662f MDN \u4e5f\u6ca1\u6709\u7ed9\u51fa\u8fd9\u79cd\u60c5\u51b5\u7684\u89e3\u91ca\uff0c\u8fd9\u4e2a\u65f6\u5019\u4f60\u5c31\u9700\u8981\u770b\u89c4\u8303\u4e86\u3002\\n\\n\u6253\u5f00 https://tc39.es/ecma262/ \uff0c\u7136\u540e\u641c\u7d22 `String.prototype.substring` \u53ef\u4ee5\u770b\u5230\u4e00\u6761\u8bb0\u5f55\uff0c\u8be6\u7ec6\u7684\u63cf\u8ff0\u4e86\u529f\u80fd\u548c\u6574\u4e2a\u7684\u7b97\u6cd5\u6d41\u7a0b\uff1a\\n\\n![](https://cdn.staticaly.com/gh/LastKnightCoder/image-for-2022@master/Pasted-image-20230305151212.7dp7c1zr1oo0.png)\\n\\n\u6211\u4eec\u770b\u7b2c\u4e00\u6b65\uff1a\\n\\n> Let\xa0O\xa0be ?\xa0[RequireObjectCoercible](https://tc39.es/ecma262/#sec-requireobjectcoercible) (this\xa0value).\\n\\n\u9996\u5148\u5bf9 `this` \u8fdb\u884c\u4e86 `RequireObjectCoercible` \u62bd\u8c61\u64cd\u4f5c\uff0c\u5728\u8fd9\u4e2a\u62bd\u8c61\u64cd\u4f5c\u7684\u524d\u9762\u6709\u4e00\u4e2a `?` \u8868\u793a\u8fd9\u4e2a\u62bd\u8c61\u64cd\u4f5c\u53ef\u80fd\u629b\u51fa\u9519\u8bef\uff0c\u5982\u679c\u662f `!` \u5c31\u8868\u793a\u4e0d\u4f1a\u629b\u51fa\u9519\u8bef\u3002\u63a5\u7740\u6211\u4eec\u770b\u4e0b `RequireObjectCoercible` \u8fd9\u4e2a\u62bd\u8c61\u64cd\u4f5c\u505a\u4e86\u4ec0\u4e48\uff0c\u5b83\u8bd5\u56fe\u5c06\u503c\u8f6c\u5316\u4e3a\u5bf9\u8c61\uff0c\u5982\u679c\u4e0d\u80fd\u8f6c\u6362\uff0c\u5219\u629b\u51fa\u9519\u8bef\uff0c\u4ece\u8868\u4e2d\u53ef\u4ee5\u770b\u5230\uff0c\u5bf9\u4e8e `undefined` \u4f1a\u629b\u51fa\u4e00\u4e2a `TypeError`\u3002\\n\\n![](https://cdn.staticaly.com/gh/LastKnightCoder/image-for-2022@master/Pasted-image-20230305151502.4qmhvgjbb4o0.png)\\n\\n\u4e0b\u56fe\u662f\u5728\u8c37\u6b4c\u6d4f\u89c8\u5668\u4e2d\u7684\u8fd0\u884c\u7ed3\u679c\uff1a\\n\\n![](https://cdn.staticaly.com/gh/LastKnightCoder/image-for-2022@master/Pasted-image-20230305151912.h4zplh7djog.png)\\n\\n\u63a8\u8350\u4e00\u7bc7\u6587\u7ae0\uff0c\u53ef\u4ee5\u5e2e\u52a9\u4f60\u66f4\u597d\u7684\u7406\u89e3\u6807\u51c6\u4e2d\u7684\u4e00\u4e9b\u7b80\u5199\u548c\u7b26\u53f7\uff0c\u5e76\u4e14\u4e5f\u7ed9\u51fa\u4e86\u4e00\u4e9b\u4f8b\u5b50\uff0c\u6559\u4f60\u5982\u4f55\u770b\u89c4\u8303\uff0c\u4e0a\u9762\u7684\u4f8b\u5b50\u5c31\u53d6\u81ea\u4e8e\u8fd9\u7bc7\u6587\u7ae0\uff1a [How to Read The ECMAScript Specification](https://timothygu.me/es-howto/)\u3002\\n\\n## ECMA-402\\n\\n\u63d0\u4f9b\u8bed\u8a00\u654f\u611f\u529f\u80fd\uff0c\u4f5c\u4e3a ECMAScript \u7684\u8865\u5145\uff0c\u652f\u6301\u9700\u8981\u9002\u5e94\u4e0d\u540c\u4eba\u7c7b\u8bed\u8a00\u548c\u56fd\u5bb6\u4f7f\u7528\u7684\u8bed\u8a00\u548c\u6587\u5316\u4e60\u60ef\u7684\u7a0b\u5e8f\u3002\\n\\nECMAScript \u63d0\u4f9b\u4e86\u4e00\u4e9b\u672c\u5730\u5316\u7684\u51fd\u6570\uff0c\u4f46\u7528\u6237\u5bf9\u6b64\u6ca1\u6709\u63a7\u5236\u6743\uff0c\u5176\u884c\u4e3a\u7531\u5b9e\u73b0\u5b9a\u4e49\uff0c\u5982\uff1a\\n\\n- Array.prototype.toLocaleString\\n- String.prototype.localeCompare\\n- Date.prototype.toLocaleString\\n- ...\\n\\n\u56fd\u9645\u5316 API \u63d0\u4f9b\u4e86\u51e0\u4e2a\u5173\u952e\u7684\u8bed\u8a00\u654f\u611f\u529f\u80fd\uff0c\u5305\u62ec\uff1a\\n\\n- \u5b57\u7b26\u4e32\u6bd4\u8f83\\n- \u6570\u5b57\u683c\u5f0f\u5316\\n- \u65e5\u671f\u548c\u65f6\u95f4\u683c\u5f0f\u5316\\n- \u76f8\u5bf9\u65f6\u95f4\u683c\u5f0f\u5316\\n- \u540d\u79f0\u663e\u793a\\n- \u5217\u8868\u683c\u5f0f\u5316\\n- \u5730\u57df\u9009\u62e9\u548c\u64cd\u4f5c\\n- \u590d\u6570\u89c4\u5219\\n- \u5927\u5c0f\u5199\u8f6c\u6362\u548c\u6587\u672c\u5206\u6bb5\\n\\n\u6240\u6709\u7684\u529f\u80fd\u90fd\u6253\u5305\u5728 `Intl` \u5bf9\u8c61\u4e2d\uff0c\u4ee5\u514d\u547d\u540d\u51b2\u7a81\uff1a\\n\\n- Intl.Collator\\n- Intl.DateTimeFormat\\n- Intl.DisplayNames\\n- Intl.NumberFormat\\n- ...\\n\\n\u672c\u5730\u5316\u5b57\u7b26\u6bd4\u8f83\uff0c\u6839\u636e\u62fc\u97f3\u6392\u5e8f\uff1a\\n\\n```js\\nconst username = [\\n  \\"\u9648\u5764\\",\\n  \\"\u9093\u8d85\\",\\n  \\"\u675c\u6df3\\",\\n  \\"\u51af\u7ecd\u5cf0\\",\\n  \\"\u97e9\u5e9a\\",\\n  \\"\u80e1\u6b4c\\",\\n  \\"\u9ec4\u6653\u660e\\",\\n  \\"\u8d3e\u4e43\u4eae\\",\\n  \\"\u674e\u6668\\",\\n  \\"\u674e\u6613\u5cf0\\",\\n  \\"\u9e7f\u6657\\",\\n  \\"\u4e95\u67cf\u7136\\",\\n  \\"\u5218\u70e8\\",\\n  \\"\u9646\u6bc5\\",\\n  \\"\u5b59\u7ea2\u96f7\\",\\n];\\n// [\'\u9648\u5764\', \'\u9093\u8d85\', \'\u675c\u6df3\', \'\u51af\u7ecd\u5cf0\', \'\u97e9\u5e9a\', \'\u80e1\u6b4c\', \'\u9ec4\u6653\u660e\', \'\u8d3e\u4e43\u4eae\', \'\u4e95\u67cf\u7136\', \'\u674e\u6668\', \'\u674e\u6613\u5cf0\', \'\u5218\u70e8\', \'\u9646\u6bc5\', \'\u9e7f\u6657\', \'\u5b59\u7ea2\u96f7\']\\nusername.sort(new Intl.Collator(\\"zh\\").compare);\\n```\\n\\n\u65e5\u671f\u683c\u5f0f\u5316\uff1a\\n\\n```js\\n// 2023/03/09 18:43:47\\nconst res = new Intl.DateTimeFormat(\\"zh\\", { \\n  year: \\"numeric\\",\\n  // \u5982\u679c\u4e0d\u8db3\u4e24\u4f4d\uff0c\u4f1a\u81ea\u52a8\u8865\u96f6\\n  month: \\"2-digit\\", \\n  day: \\"2-digit\\", \\n  hour: \\"2-digit\\", \\n  minute: \\"2-digit\\", \\n  second: \\"2-digit\\", \\n  // \u8bbe\u7f6e\u4e3a false \u8868\u793a\u91c7\u752824\u5c0f\u65f6\u5236 \\n  hour12: false, }\\n).format(new Date());\\n```\\n\\n\u6570\u5b57\u683c\u5f0f\u5316\uff1a\\n\\n```js\\n// 12,345.68\u4eba\u6c11\u5e01\\nnew Intl.NumberFormat(\\"zh-Hans\\", {\\n  style: \\"currency\\",\\n  currency: \\"CNY\\",\\n  currencyDisplay: \\"name\\",\\n}).format(12345.6789);\\n```\\n\\n## ECMA-404\\n\\nJSON \u662f\u4e00\u4e2a\u5728\u591a\u8bed\u8a00\u4e4b\u95f4\u8fdb\u884c\u6570\u636e\u4ea4\u6362\u7684\u4e00\u79cd\u683c\u5f0f\uff0c\u5b83\u662f\u7eaf\u6587\u672c\uff0c\u4e0d\u8fc7\u662f\u7ed3\u6784\u5316\u7684\uff0c\u6700\u521d\u8d77\u6e90\u4e8e JavaScript\uff0c\u4e0d\u8fc7\u73b0\u5728\u5df2\u7ecf\u6210\u4e3a\u4e86\u591a\u8bed\u8a00\u4e4b\u95f4\u8fdb\u884c\u6570\u636e\u4ea4\u6362\u7684\u4e00\u79cd\u683c\u5f0f\u3002\u4e3a\u4e86\u5728\u591a\u4e2a\u8bed\u8a00\u4e4b\u95f4\u6b63\u786e\u89e3\u6790\u6570\u636e\uff0c\u9700\u8981\u89c4\u5b9a JSON \u7684\u683c\u5f0f\uff0cECMA-404 \u6b63\u662f\u89c4\u5b9a JSON \u6587\u672c\u683c\u5f0f\u7684\u89c4\u8303\u3002 \\n\\nJSON \u7684\u6587\u672c\u7531\u9075\u5faa JSON \u503c\u8bed\u6cd5\u7684 token \u7ec4\u6210\uff0c\u8fd9\u4e9b token \u7531\u516d\u4e2a\u7ed3\u6784\u5316 token\u3001strings, numbers, \u548c\u5176\u4ed6\u4e09\u4e2a\u5b57\u9762\u503c\u7ec4\u6210\u3002\\n\\n\u516d\u4e2a\u7ed3\u6784\u5316 token\uff1a\\n\\n- `[`\\n- `{`\\n- `]`\\n- `}`\\n- `:`\\n- `,`\\n\\n\u4e09\u4e2a\u5b57\u9762\u503c\uff1a\\n\\n- `true`\\n- `false`\\n- `null`\\n\\nJSON \u7684\u503c\u53ea\u80fd\u4e3a object, array, number, string, true, false, null\u3002\\n\\n### Objects\\n\\n\u5bf9\u4e8e object\uff0c\u5b83\u7531\u4e00\u5bf9 `{}` \u8fdb\u884c\u5305\u88f9\uff0c\u5176\u4e2d\u5305\u62ec 0 \u4e2a\u6216\u66f4\u591a\u7684\u952e\u503c\u5bf9\uff0c\u952e\u662f string\uff0cvalue \u662f\u4e00\u4e2a\u5408\u6cd5\u7684 JOSN \u7684\u503c\uff0c\u6bcf\u5bf9\u952e\u503c\u5bf9\u4f7f\u7528 `,` \u8fdb\u884c\u5206\u9694\u3002\\n\\n![](https://cdn.staticaly.com/gh/LastKnightCoder/image-for-2022@master/Pasted-image-20230307165626.1teonebuy63k.png)\\n\\n\u5bf9\u4e8e\u4f5c\u4e3a\u952e\u7684\u5b57\u7b26\u4e32\uff0cJSON \u8bed\u6cd5\u6ca1\u6709\u4ec0\u4e48\u9650\u5236\uff0c\u4e0d\u8981\u6c42\u552f\u4e00\uff0c\u4e0d\u8981\u6c42\u6709\u7279\u522b\u7684\u987a\u5e8f\u3002\\n\\n\u4e0d\u652f\u6301\u5faa\u73af\u5f15\u7528\u3002\\n\\n### Arrays\\n\\narray \u7531\u4e00\u5bf9 `[]` \u8fdb\u884c\u5305\u88f9\uff0c\u5176\u4e2d\u5305\u542b 0+ \u4e2a JOSN \u503c\uff0c\u503c\u4e4b\u95f4\u901a\u8fc7 `,` \u8fdb\u884c\u5206\u9694\uff0cJSON \u8bed\u6cd5\u5bf9\u503c\u7684\u987a\u5e8f\u6ca1\u6709\u8981\u6c42\u3002\\n\\n![](https://cdn.staticaly.com/gh/LastKnightCoder/image-for-2022@master/Pasted-image-20230307165644.1vy983ck2zr4.png)\\n\\n### Numbers\\n\\nnumber \u662f\u4e00\u7cfb\u5217\u4e00\u4e2a\u4e0d\u5305\u542b\u5148\u5bfc 0 \u7684\u5341\u8fdb\u5236\u6570\u5b57\uff0c\u53ef\u80fd\u5728\u6570\u5b57\u524d\u5305\u542b `-` \u53f7\uff0c\u968f\u540e\u53ef\u80fd\u5305\u542b\u4ee5\u5c0f\u6570\u70b9\u4e3a\u524d\u7f00\u7684\u5c0f\u6570\u90e8\u5206\uff0c\u968f\u540e\u4e5f\u53ef\u80fd\u5305\u542b\u6307\u6570 `e/E-/+` \u7ec4\u6210\u3002\\n\\n![](https://cdn.staticaly.com/gh/LastKnightCoder/image-for-2022@master/Pasted-image-20230307165707.5w4say5ufww0.png)\\n\\n\u6b63\u786e\u7684\u4f8b\u5b50\\n\\n- -0.5\\n- 1.5\\n- 2.1e5\\n- 2.1E-3\\n- 34\\n\\n\u9519\u8bef\u7684\u4f8b\u5b50\uff1a\\n\\n- 03\uff1a\u5305\u542b\u524d\u5bfc\u96f6\\n- .6\uff1a\u5c0f\u6570\u70b9\u524d\u8981\u6709\u6570\u5b57\\n\\n### String\\n\\nstring \u7531\u4e00\u5bf9 `\\"\\"` \u8fdb\u884c\u5305\u88f9\uff0c\u9664\u4e86\u4e00\u4e9b\u9700\u8981\u8f6c\u4e49\u7684\u7279\u6b8a\u5b57\u7b26\uff0c\u5176\u4e2d\u53ef\u4ee5\u653e\u4efb\u4f55\u7684 Unicode \u5b57\u7b26\uff0c\u9700\u8981\u8f6c\u4e49\u5b57\u7b26\u5305\u62ec\uff1a`\\"` `\\\\` \u4ee5\u53ca\u63a7\u5236\u5b57\u7b26 `U+0000 - U+001F`\u3002\\n  \\n\u901a\u8fc7\u4e24\u4e2a\u5b57\u7b26\u7684\u8f6c\u4e49\u5e8f\u5217\u6765\u8868\u793a\u4e00\u4e9b\u5b57\u7b26\uff1a\\n\\n- `\\\\\\"`\\n- `\\\\\\\\`\\n- `\\\\/`\\n- `\\\\b`\\n- `\\\\n`\\n- ... ...\\n\\n\u8fd8\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7 Unicode \u7801\u70b9\u76f4\u63a5\u8868\u793a\u5b57\u7b26\uff08\u5305\u62ec\u8f6c\u4e49\u5b57\u7b26\uff09\\n\\n- `\\\\u002F`\\n- `\\\\u002f`\\n- `\\\\/`\\n\\n![](https://cdn.staticaly.com/gh/LastKnightCoder/image-for-2022@master/Pasted-image-20230307165728.1ty2yfu33vpc.png)\\n\\n## ECMA-414\\n\\nECMA 414 \u5219\u89c4\u5b9a\u4e86\u54ea\u4e9b\u89c4\u8303\u662f\u548c ECMAScript \u6709\u5173\u7684\u3002\u76ee\u524d\u5185\u90e8\u5c31\u5305\u542b\u4e86 262\uff0c402 \u548c 404\u3002"},{"id":"mobile-text-middle","metadata":{"permalink":"/blog/mobile-text-middle","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2022-10-17-\u79fb\u52a8\u7aef\u6587\u5b57\u5782\u76f4\u5c45\u4e2d\u65b9\u6848.mdx","source":"@site/blog/2022-10-17-\u79fb\u52a8\u7aef\u6587\u5b57\u5782\u76f4\u5c45\u4e2d\u65b9\u6848.mdx","title":"\u79fb\u52a8\u7aef\u6587\u5b57\u5782\u76f4\u5c45\u4e2d\u65b9\u6848","description":"\u6709\u8fc7\u79fb\u52a8\u7aef\u5f00\u53d1\u7ecf\u9a8c\u7684\u4eba\uff0c\u60f3\u5fc5\u90fd\u5bf9\u6587\u5b57\u5782\u76f4\u5c45\u4e2d\u5934\u75db\u4e0d\u5df2\uff0c\u56e0\u4e3a\u4f7f\u7528\u5e38\u89c4\u624b\u6bb5\u5b9e\u73b0\u6587\u5b57\u5782\u76f4\u5c45\u4e2d\u5728\u90e8\u5206 Android \u624b\u673a\u4e0a\u4f1a\u51fa\u73b0\u6587\u5b57\u504f\u4e0a\u7684\u60c5\u51b5\uff0c\u5f80\u5f80\u9700\u8981\u5404\u79cd\u624b\u6bb5\u8fdb\u884c\u5fae\u8c03\uff0c\u82e6\u4e0d\u582a\u8a00\u3002\u4e0b\u9762\u662f\u6211\u5c1d\u8bd5\u7684\u51e0\u79cd\u6587\u5b57\u5782\u76f4\u5c45\u4e2d\u65b9\u6848\uff1a","date":"2022-10-17T00:00:00.000Z","formattedDate":"2022\u5e7410\u670817\u65e5","tags":[{"label":"SVG","permalink":"/blog/tags/svg"},{"label":"Canvas","permalink":"/blog/tags/canvas"},{"label":"\u6587\u5b57\u5782\u76f4\u5c45\u4e2d","permalink":"/blog/tags/\u6587\u5b57\u5782\u76f4\u5c45\u4e2d"}],"readingTime":13.405,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"slug":"mobile-text-middle","tags":["SVG","Canvas","\u6587\u5b57\u5782\u76f4\u5c45\u4e2d"],"authors":"xiongtao"},"prevItem":{"title":"\u5982\u4f55\u8bfb\u61c2 TC39","permalink":"/blog/how-to-read-tc39-spec"},"nextItem":{"title":"MutationObserver","permalink":"/blog/MutationObserver"}},"content":"import Tabs from \'@theme/Tabs\';\\nimport TabItem from \'@theme/TabItem\';\\n\\n\u6709\u8fc7\u79fb\u52a8\u7aef\u5f00\u53d1\u7ecf\u9a8c\u7684\u4eba\uff0c\u60f3\u5fc5\u90fd\u5bf9\u6587\u5b57\u5782\u76f4\u5c45\u4e2d\u5934\u75db\u4e0d\u5df2\uff0c\u56e0\u4e3a\u4f7f\u7528\u5e38\u89c4\u624b\u6bb5\u5b9e\u73b0\u6587\u5b57\u5782\u76f4\u5c45\u4e2d\u5728\u90e8\u5206 Android \u624b\u673a\u4e0a\u4f1a\u51fa\u73b0\u6587\u5b57\u504f\u4e0a\u7684\u60c5\u51b5\uff0c\u5f80\u5f80\u9700\u8981\u5404\u79cd\u624b\u6bb5\u8fdb\u884c\u5fae\u8c03\uff0c\u82e6\u4e0d\u582a\u8a00\u3002\u4e0b\u9762\u662f\u6211\u5c1d\u8bd5\u7684\u51e0\u79cd\u6587\u5b57\u5782\u76f4\u5c45\u4e2d\u65b9\u6848\uff1a\\n\\n`line-height` \u5b9e\u73b0\u5782\u76f4\u5c45\u4e2d:\\n\\n<Tabs>\\n<TabItem value=\'html\' label=\'HTML\'>\\n\\n```html\\n<div id=\\"line-height\\">\u67e5\u770b\u66f4\u591a</div>\\n```\\n\\n</TabItem>\\n<TabItem value=\'css\' label=\'CSS\' default>\\n\\n```css\\n#line-height {\\n  width: 200px;\\n  text-align: center;\\n  \\n  height: 56px;\\n  line-height: 56px;\\n  \\n  font-size: 26px;\\n  color: black;  \\n  \\n  border: 1px solid;\\n  border-radius: 28px;\\n}\\n```  \\n\\n</TabItem>\\n</Tabs>\\n\\n\x3c!--truncate--\x3e\\n\\n`display: flex` \u5b9e\u73b0\u5782\u76f4\u5c45\u4e2d\uff1a\\n\\n<Tabs>\\n<TabItem value=\'html\' label=\'HTML\'>\\n\\n```html\\n<div id=\\"flex\\">\u67e5\u770b\u66f4\u591a</div>\\n```\\n\\n</TabItem>\\n<TabItem value=\'css\' label=\'CSS\' default>\\n\\n```css\\n#flex {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  width: 200px;\\n  height: 56px;\\n  font-size: 26px;\\n  color: black;\\n  border: 1px solid;\\n  border-radius: 28px;\\n}\\n```\\n\\n</TabItem>\\n</Tabs>\\n\\n`padding` \u5b9e\u73b0\u5782\u76f4\u5c45\u4e2d\uff1a\\n\\n<Tabs>\\n<TabItem value=\'html\' label=\'HTML\'>\\n\\n```html\\n<div id=\\"padding\\">\u67e5\u770b\u66f4\u591a</div>\\n```\\n\\n</TabItem>\\n<TabItem value=\'css\' label=\'CSS\' default>\\n\\n```css\\n#padding {\\n  width: 200px;\\n  text-align: center;\\n  box-sizing: border-box;\\n  height: 56px;\\n  font-size: 26px;\\n  line-height: 1;\\n  padding: 15px 0;\\n  color: black;\\n  border: 1px solid;\\n  border-radius: 28px;\\n}\\n```\\n\\n</TabItem>\\n</Tabs>\\n\\nCanvas \u5b9e\u73b0\u5782\u76f4\u5c45\u4e2d\uff1a \\n\\n<Tabs>\\n<TabItem value=\'html\' label=\'HTML\'>\\n\\n```html\\n<div id=\\"canvas-container\\">\\n  <canvas id=\\"canvas\\" width=\\"200\\" height=\\"56\\"></canvas>\\n</div>\\n```\\n\\n</TabItem>\\n<TabItem value=\'css\' label=\'CSS\'>\\n\\n```css\\n#canvas-container {\\n  width: 200px;\\n  height: 56px;\\n  color: black;\\n  border: 1px solid;\\n  border-radius: 28px;\\n}\\n#canvas {\\n  width: 200px;\\n  height: 56px;\\n}\\n```\\n\\n</TabItem>\\n<TabItem value=\'js\' label=\'JavaScript\' default>\\n\\n```js\\nconst canvas = document.querySelector(\'#canvas\');\\nconst ctx = canvas.getContext(\'2d\');\\n\\n// \u89e3\u51b3\u9ad8\u6e05\u5c4f\u6a21\u7cca\u7684\u95ee\u9898\\nconst computedStyle = window.getComputedStyle(canvas);\\nconst dpr = window.devicePixelRatio;\\ncanvas.width = parseFloat(computedStyle.width) * dpr;\\ncanvas.height = parseFloat(computedStyle.height) * dpr;\\nctx.scale(dpr, dpr);\\n\\nconst text = \'\u67e5\u770b\u66f4\u591a\';\\nconst fontSize = 26;\\nctx.font = `${fontSize}px normal`;\\nconst textWidth = ctx.measureText(text).width;\\n// \u8fd9\u91cc\u7684 0.75 \u662f\u56e0\u4e3a\u57fa\u7ebf\u5728\u884c\u6846\u76d2\u5b50\u4e4b\u4e0a\uff0c\u5927\u7ea6\u662f 10%-15%\uff0c\u8fd9\u91cc\u53d6 12.5%\\nctx.fillText(text, (canvas.width / dpr - textWidth) / 2, (canvas.height / dpr + 0.75 * fontSize) / 2);\\n```\\n\\n</TabItem>\\n</Tabs>\\n\\nSVG \u5b9e\u73b0\u5782\u76f4\u5c45\u4e2d\uff1a\\n\\n<Tabs>\\n<TabItem value=\'html\' label=\'HTML\' default>\\n\\n```html\\n<div id=\\"svg-container\\">\\n  <svg width=\\"200\\" height=\\"56\\" viewBox=\\"0 0 200 56\\">\\n    <text\\n      text-anchor=\\"middle\\"\\n      fill=\\"currentColor\\"\\n      x=\\"100\\"\\n      y=\\"37.75\\"\\n      font-size=\\"26\\"\\n    >\\n      \u67e5\u770b\u66f4\u591a\\n    </text>\\n  </svg>\\n</div>\\n```\\n\\n</TabItem>\\n<TabItem value=\'css\' label=\'CSS\'>\\n\\n```css\\n#svg-container {\\n  width: 200px;\\n  height: 56px;\\n  color: black;\\n  border: 1px solid;\\n  border-radius: 28px;\\n}\\n```\\n\\n</TabItem>\\n</Tabs>\\n\\n\u4e3a\u4ec0\u4e48\u79fb\u52a8\u7aef\u7684\u6587\u5b57\u8fd9\u4e48\u96be\u4ee5\u5c45\u4e2d\uff0c\u8fd9\u662f\u56e0\u4e3a\u884c\u9ad8 `line-height` \u5bfc\u81f4\u7684\uff0c\u4e00\u822c\u800c\u8a00\uff0c\u5f53 `line-height` \u5927\u4e8e\u5b57\u4f53\u5927\u5c0f\u65f6\uff0c\u5b57\u4f53\u7684\u4e0a\u4e0b\u95f4\u8ddd\u5e94\u5f53\u662f\u5e73\u5206\u7684\uff0c\u4f46\u662f\u5728\u90e8\u5206\u673a\u578b\u5374\u4e0d\u662f\u8fd9\u6837\uff0c\u5982 HONOR 20 Pro \u4e2d\u51fa\u73b0\u4e0a\u9762\u7684\u8ddd\u79bb\u5c0f\u4e8e\u4e0b\u9762\u7684\u8ddd\u79bb\u3002**\u4f46\u662f\u5f53\u8bbe\u7f6e `line-height: normal` \u65f6\uff0c\u5373\u9ed8\u8ba4\u503c\uff0c\u4f1a\u60ca\u8bb6\u7684\u53d1\u73b0\u5b57\u4f53\u4e0a\u4e0b\u95f4\u8ddd\u8fd1\u4e4e\u76f8\u7b49**\uff0c\u6240\u4ee5\u5982\u679c\u4f7f\u5f97\u6587\u5b57\u5782\u76f4\u5c45\u4e2d\uff0c\u4e00\u5b9a\u4e0d\u8981\u8bbe\u7f6e `line-height`\u3002\\n\\n\u4e0a\u9762\u7684\u524d\u4e24\u79cd\u65b9\u6848 `line-height` \u4e0e `padding` \u90fd\u8bbe\u7f6e\u4e86 `line-height`\uff0c\u56e0\u6b64\u5728\u79fb\u52a8\u7aef\u4f1a\u504f\u4e0a\u3002\u800c `display: flex` \u6ca1\u6709\u8bbe\u7f6e `line-height`\uff0c\u6240\u4ee5\u6709\u8fd1\u4e4e\u5c45\u4e2d\u7684\u6548\u679c\uff0c\u4f46\u662f\u8fd8\u662f\u6709\u8bef\u5dee\uff0c\u5728\u4e0d\u540c\u7684\u673a\u578b\u4e0a\u8fd8\u662f\u6709\u4e0d\u540c\u7684\u8868\u73b0\u3002\\n\\n\u901a\u8fc7\u5728\u4e0d\u540c\u673a\u578b\u4e0a\u7684\u5bf9\u6bd4\uff0c\u53d1\u73b0 Canvas \u548c SVG \u7684\u65b9\u6848\u5728\u5404\u4e2a\u673a\u578b\u4e0b\u9762\u5747\u4fdd\u6301\u4e00\u81f4\u7684\u5c45\u4e2d\u6548\u679c\uff0c\u56e0\u6b64\u51b3\u5b9a\u5c06\u5176\u62bd\u79bb\u4e3a\u4e00\u4e2a React \u7ec4\u4ef6\uff0c\u4e0b\u9762\u5c31\u8be6\u7ec6\u8bb2\u89e3\u8be5\u7ec4\u4ef6\u7684\u5f00\u53d1\u601d\u8def\u3002\\n\\n\u672c\u6587\u4ee5 SVG \u4e3a\u4f8b\uff0cCanvas \u5f00\u53d1\u601d\u8def\u662f\u4e00\u6837\u7684\uff0c\u5728\u6587\u7ae0\u7684\u6700\u540e\u7ed9\u51fa Canvas \u7684\u5b9e\u73b0\uff0c\u4f9b\u4ee5\u53c2\u8003\u3002\\n\\n## \u4f7f\u7528\u65b9\u6cd5\\n\\n\u4e3a\u5b9e\u73b0\u5782\u76f4\u5c45\u4e2d\u529f\u80fd\uff0c\u7ec4\u4ef6\u9700\u8981\u56db\u4e2a\u53c2\u6570\\n\\n- `height`\uff1a\u5bb9\u5668\u9ad8\u5ea6\uff0c\u5355\u4f4d\u4e3a `px`\\n- `fontSize`\uff1a\u5b57\u4f53\u5927\u5c0f\uff0c\u5355\u4f4d\u4e3a `px`\\n- `text`\uff1a\u6587\u5b57\u5185\u5bb9\\n- `color`\uff1a\u6587\u5b57\u989c\u8272\\n\\n\u8fd9\u56db\u4e2a\u53c2\u6570\u662f\u5fc5\u987b\u4f20\u9012\u7684\uff0c\u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b\uff1a\\n\\n```jsx\\n// \u4f7f\u7528\u65b9\u5f0f\u4e00\\n<TextMiddle fontSize={28} height={60} color={\'deepskyblue\'} text={\'\u67e5\u770b\u66f4\u591a\'} />\\n```\\n\\n\u9664\u4e86\u4e0a\u9762\u56db\u4e2a\u5c5e\u6027\uff0c\u8fd8\u652f\u6301\u4f20\u9012 `className` \u4e0e `style`\u3002\\n\\n:::note\\n\\n\u8fd9\u91cc\u9ad8\u5ea6\u548c\u5b57\u4f53\u5927\u5c0f\u7684\u5355\u4f4d\u90fd\u662f `px`\uff0c\u5728\u7ec4\u4ef6\u7684\u5185\u90e8\u4f1a\u5c06\u5176\u8f6c\u4e3a `rem`\u3002\\n\\n:::\\n\\n## SVG \u5782\u76f4\u5c45\u4e2d\u539f\u7406\\n\\n\u5728 SVG \u4e2d\u901a\u8fc7 `text` \u6807\u7b7e\u6765\u663e\u793a\u6587\u5b57\uff0c\u53ef\u4ee5\u901a\u8fc7 `x` \u548c `y` \u5c5e\u6027\u6765\u8bbe\u7f6e\u6587\u5b57\u7684\u4f4d\u7f6e\uff0c\u8fd9\u91cc\u6211\u4eec\u5173\u6ce8\u5230 `y`\uff0c\u5b83\u8bbe\u7f6e\u7684\u662f\u6587\u5b57\u57fa\u7ebf\u5728 SVG \u753b\u5e03\u4e2d\u7684\u4f4d\u7f6e\\n\\n```html\\n<svg width=\\"200\\" height=\\"60\\" viewBox=\\"0 0 200 60\\">\\n  <text font-size=\\"26\\" fill=\\"currentColor\\" y=\\"37.75\\">\\n    \u67e5\u770b\u66f4\u591a\\n  </text>\\n</svg>\\n```\\n\\n\u8fd9\u91cc `y` \u7684\u8ba1\u7b97\u662f `y=\\"(height + 0.75 * fontSize) / 2\\"`\uff0c\u56e0\u4e3a\u8fd9\u91cc `y` \u6307\u7684\u662f\u6587\u5b57\u57fa\u7ebf\u7684\u4f4d\u7f6e\uff0c\u800c\u57fa\u7ebf\u662f\u6bd4\u6587\u5b57\u7684\u5e95\u90e8\u8981\u9ad8\u7684\uff0c\u53c2\u8003\u4e0b\u56fe\\n\\n<img src=\\"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/image.75qa29adc040.webp\\" style={{ zoom: \'50%\' }} />\\n\\n\u5b57\u6bcd `x` \u7684\u5e95\u90e8\u5c31\u662f\u57fa\u7ebf\u7684\u4f4d\u7f6e\uff0c\u5b83\u8ddd\u79bb\u884c\u6846\u76d2\u5b50\u5e95\u90e8\u6709\u4e00\u6bb5\u8ddd\u79bb\uff0c\u8fd9\u4e2a\u8ddd\u79bb\u4e0e\u5b57\u4f53\u5927\u5c0f\u6210\u6bd4\u4f8b\uff0c\u4e0e\u5b57\u4f53\u5927\u5c0f\u6709\u5173\uff0c\u8fd9\u4e2a\u6bd4\u4f8b\u4e0d\u59a8\u8bbe\u4e3a `r`\uff0c\u90a3\u4e48 `y` \u7684\u8ba1\u7b97\u516c\u5f0f\u4e3a `y = (height + fontSize) / 2 - r * fontSize = (height + (1 - 2r)fontSize) / 2`\u3002\u7ecf\u8c03\u7814\uff0c\u6bd4\u4f8b `r` \u4e0e\u5b57\u4f53\u6709\u5173\uff0c\u5206\u5e03\u5728 10% - 15%\uff0c\u8fd9\u91cc\u6211\u4eec\u53d6 12.5%\uff0c\u6240\u4ee5 `y = (height + 0.75 * fontSize) / 2`\u3002\\n\\n\u5bf9\u4e8e\u4e0d\u540c\u7684\u5b57\u4f53\uff0c\u6700\u5927\u7684\u8bef\u5dee\u4e3a `2.5%` \u7684\u5b57\u4f53\u5927\u5c0f\uff0c\u4e5f\u5c31\u662f\u8bf4\u5b57\u4f53\u5927\u5c0f `40px` \u624d\u4f1a\u6709 `1px` \u7684\u8bef\u5dee\uff0c\u79fb\u52a8\u7aef\u7684\u5b57\u4f53\u5927\u5c0f\u5c11\u6709\u8d85\u8fc7 `15px` \u7684\uff0c\u6700\u5927\u8bef\u5dee\u8fde\u534a\u4e2a\u50cf\u7d20\u90fd\u4e0d\u5230\uff0c\u53ef\u5b9e\u73b0\u4e0d\u540c\u5e73\u53f0\u4e0a\u7684\u4f2a\u5c45\u4e2d\u3002\\n\\n\u6839\u636e\u4e0a\u9762\u7684\u539f\u7406\uff0c\u53ef\u4ee5\u5199\u51fa\u7b2c\u4e00\u7248\u7684 `TextMiddle` \u5b9e\u73b0\\n\\n```jsx\\nimport React, { useEffect, useRef } from \\"react\\";\\n\\nconst TextMiddle = props => {\\n  const { height, fontSize, color, text, className = \'\', style = {} } = props;\\n  const container = useRef();\\n\\n  const actualStyle = {\\n    ...style,\\n    height: `${height / 100}rem`,\\n    fontSize: `${fontSize / 100}rem`,\\n    color\\n  };\\n\\n  useEffect(() => {\\n    const computedStyle = window.getComputedStyle(container.current);\\n    const actualHeight = parseFloat(computedStyle.height);\\n    const actualFontSize = parseFloat(computedStyle.fontSize);\\n    const actualWidth = parseFloat(computedStyle.width);\\n\\n    const svg = `\\n      <svg width=\\"${actualWidth}\\" height=\\"${actualHeight}\\" viewBox=\\"0 0 ${actualWidth} ${actualHeight}\\">\\n        <text\\n          font-size=\\"${actualFontSize}\\"\\n          fill=\\"currentColor\\"\\n          y=\\"${(actualHeight + 0.75 * actualFontSize) / 2}\\"\\n        >\\n          ${text}\\n        </text>\\n      </svg>\\n    `;\\n    container.current.innerHTML = svg;\\n  }, [text]);\\n\\n  return (\\n    <div ref={container} className={className} style={actualStyle}>\\n      {text}\\n    </div>\\n  )\\n}\\n\\nexport default TextMiddle;\\n```\\n\\n## \u6587\u5b57\u8d85\u51fa\\n\\n\u4e8b\u60c5\u5230\u8fd9\u8fd8\u6ca1\u6709\u7ed3\u675f\uff0c\u6211\u4eec\u4f7f\u7528 `SVG` \u8fd9\u79cd\u65b9\u6848\u662f\u6709\u7f3a\u70b9\u7684\uff0c\u90a3\u5c31\u662f\u7f3a\u5931\u4e86\u6d41\u52a8\u6027\uff0c\u6587\u5b57\u53ea\u80fd\u4e00\u884c\u5c55\u793a\uff0c\u4e0d\u4f1a\u6362\u884c\uff0c\u591a\u4f59\u7684\u6587\u5b57\u4f1a\u88ab\u9690\u85cf\u4e0d\u53ef\u89c1\u3002\\n\\n\u8003\u8651\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u4e00\u822c\u90fd\u662f\u5355\u884c\u6587\u672c\u5b9e\u73b0\u5782\u76f4\u5c45\u4e2d\uff0c\u6240\u4ee5\u5c31\u4e0d\u5bf9\u6362\u884c\u8fdb\u884c\u5904\u7406\uff0c\u4f46\u662f\u6587\u5b57\u8d85\u51fa\u8fd8\u662f\u6bd4\u8f83\u5e38\u89c1\u7684\uff0c\u6240\u4ee5\u6709\u5fc5\u8981\u5bf9\u6587\u5b57\u8d85\u51fa\u8fdb\u884c\u8fdb\u884c\u5904\u7406\uff0c\u8fd9\u91cc\u5bf9\u8d85\u51fa\u7684\u6587\u5b57\u4f7f\u7528 `...` \u4ee3\u66ff\u3002\\n\\n\u600e\u4e48\u5224\u65ad\u6587\u5b57\u662f\u5426\u8d85\u51fa\u4e86\u5462\uff1f\u6211\u4eec\u9700\u8981\u77e5\u9053\u6587\u5b57\u7684\u957f\u5ea6\uff0c\u5982\u679c\u6587\u5b57\u7684\u957f\u5ea6\u5927\u4e8e\u5bb9\u5668\u7684\u957f\u5ea6\uff0c\u5c31\u8bf4\u660e\u8d85\u51fa\u4e86\uff0c\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u9700\u8981\u8fdb\u884c\u6253\u70b9\u3002\u53ef\u4ee5\u901a\u8fc7 `Canvas` \u7684 `measureText` \u6765\u83b7\u5f97\u6587\u672c\u7684\u5bbd\u5ea6\\n\\n```js\\nconst canvas = document.createElement(\'canvas\');\\nconst ctx = canvas.getContext(\'2d\');\\nconst getTextLength = (text, fontSize) => {\\n  ctx.font= `${fontSize}px normal`;\\n  const metrics = ctx.measureText(text);\\n  return parseInt(\'\' + metrics.width);\\n}\\n```\\n\\n\u8fd9\u91cc\u5bf9\u6587\u5b57\u7684\u957f\u5ea6\u8fdb\u884c\u4e86\u53d6\u6574\uff0c\u8fd9\u662f\u56e0\u4e3a\u5728\u5c0f\u6570\u90e8\u5206\u5b58\u5728\u8bef\u5dee\uff0c\u56e0\u6b64\u6211\u4eec\u4e5f\u9700\u8981\u5bf9\u5bb9\u5668\u7684\u957f\u5ea6\u8fdb\u884c\u53d6\u6574\uff0c\u7531\u4e8e\u53d6\u6574\u4e4b\u540e\uff0c\u53ef\u80fd\u5b58\u5728 `1px` \u7684\u8bef\u5dee\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u8bbe\u7f6e\u5bb9\u5668\u7684\u5bbd\u5ea6\u4e3a\u53d6\u6574\u540e `+1`\\n\\n```js\\nconst actualWidth = parseInt(computedStyle.width) + 1;\\nconst textLength = getTextLength(text, actualFontSize);\\nif (textLength > actualWidth) {\\n\\t// \u6587\u5b57\u8d85\u51fa\u5904\u7406\\n}\\n```\\n\\n\u63a5\u4e0b\u6765\u6211\u4eec\u53ea\u9700\u8981\u8ba1\u7b97\u8d85\u51fa\u7684\u6587\u5b57\u5206\u754c\u70b9\uff0c\u7136\u540e\u8fdb\u884c\u622a\u65ad\\n\\n```js\\nconst actualWidth = parseInt(computedStyle.width) + 1;\\nconst textLength = getTextLength(text, actualFontSize);\\nlet actualText = text;\\n// \u8ba1\u7b97\u622a\u65ad\u70b9\u4ee5\u53ca\u5b9e\u9645\u6587\u672c\\nif (textLength > actualWidth) {\\n  actualText = text.slice(0, 1) + \'...\';\\n  for (let i = 1; i < text.length; i++) {\\n    const adjustText = text.slice(0, i) + \'...\';\\n    const adjustWidth = getTextLength(adjustText, actualFontSize);\\n    if (adjustWidth > actualWidth) {\\n      break;\\n    }\\n    actualText = adjustText;\\n  }\\n}\\nconst svg = `\\n  <svg width=\\"${actualWidth}\\" height=\\"${actualHeight}\\" viewBox=\\"0 0 ${actualWidth} ${actualHeight}\\">\\n    <text\\n      font-size=\\"${actualFontSize}\\"\\n      fill=\\"currentColor\\"\\n      y=\\"${(actualHeight + 0.75 * actualFontSize) / 2}\\"\\n    >\\n      ${actualText}\\n    </text>\\n  </svg>\\n`;\\ncontainer.current.innerHTML = svg;\\n```\\n\\n## \u6027\u80fd\u4f18\u5316\\n\\n\u5f53\u9875\u9762\u4e0a\u6709\u592a\u591a\u7684 SVG \u8981\u6e32\u67d3\u65f6\uff0c\u4f1a\u6709\u8f83\u5927\u7684\u767d\u5c4f\u65f6\u95f4\uff0c\u7ecf\u6d4b\u8bd5\uff0c\u540c\u65f6\u6709 1000 \u4e2a SVG \u6e32\u67d3\uff0c\u5c06\u4f1a\u6709\u63a5\u8fd1 1s \u7684\u767d\u5c4f\u65f6\u95f4\uff0c\u8fd9\u4e2a\u662f\u4e0d\u53ef\u63a5\u53d7\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 `IntersectionObserver` \u6765\u8fdb\u884c\u4e00\u4e2a\u6027\u80fd\u4f18\u5316\uff0c\u53ea\u6709\u5f53\u8be5\u7ec4\u4ef6\u5373\u5c06\u51fa\u73b0\u5728\u89c6\u53e3\u4e2d\u65f6\uff0c\u6211\u4eec\u624d\u6e32\u67d3\u4e3a SVG\u3002\\n\\n```js\\nconst svg = `\\n  <svg width=\\"${actualWidth}\\" height=\\"${actualHeight}\\" viewBox=\\"0 0 ${actualWidth} ${actualHeight}\\">\\n    <text\\n      font-size=\\"${actualFontSize}\\"\\n      fill=\\"currentColor\\"\\n      y=\\"${(actualHeight + 0.75 * actualFontSize) / 2}\\"\\n    >\\n      ${actualText}\\n    </text>\\n  </svg>\\n`;\\nconst observer = new IntersectionObserver(entries => {\\n  entries.forEach(entry => {\\n    // \u8fdb\u5165\u89c6\u53e3\u65f6\u6216\u5df2\u7ecf\u5728\u89c6\u53e3\u4e2d\\n    if (entry.isIntersecting) {\\n      container.current.innerHTML = svg;\\n      // \u53d6\u6d88\u76d1\u542c\\n      observer.unobserve(container.current);\\n    }\\n  })\\n}, {\\n  // \u89c6\u53e3\u8303\u56f4\u5411\u4e0b\u6269\u5927 500px\uff0c\u63d0\u524d\u52a0\u8f7d\\n  rootMargin: \'0px 0px 500px 0px\'\\n});\\nobserver.observe(container.current);\\n```\\n\\n\u53e6\u4e00\u4e2a\u5c31\u662f\u5bf9\u4e8e\u82f9\u679c\u624b\u673a\uff0c\u6211\u4eec\u6ca1\u6709\u5fc5\u8981\u4f7f\u7528 SVG \u7684\u65b9\u6848\uff0c\u56e0\u4e3a\u82f9\u679c\u624b\u673a\u7684\u517c\u5bb9\u6027\u5f88\u597d\uff0c\u5bf9\u4e8e\u82f9\u679c\u624b\u673a\u5c31\u4f7f\u7528\u8bbe\u7f6e\u884c\u9ad8\u7b49\u4e8e\u9ad8\u5ea6\u7684\u65b9\u6848\\n\\n```js\\nconst isIos = /ipad|iphone|macintosh/gim.test(window.navigator.userAgent);\\nconst actualStyle = {\\n  overflow: \'hidden\',\\n  whiteSpace: \'nowrap\',\\n  textOverflow: \'ellipsis\',\\n  ...style,\\n  height: `${height / 100}rem`,\\n  lineHeight: `${height / 100}rem`,\\n  fontSize: `${fontSize / 100}rem`,\\n  color\\n};\\n\\nuseEffect(() => {\\n\\tif (isIos) {\\n\\t  return;\\n\\t}\\n\\t// ... \u5176\u5b83\u903b\u8f91\\n}, []);\\n```\\n\\n:::warning\\n\u4e0d\u8981\u4e3a `TextMiddle` \u6dfb\u52a0 `display: flex;`\uff0c\u5426\u5219 `text-overflow` \u4f1a\u5931\u6548\uff0c\u9664\u975e\u4f60\u786e\u5b9a\u4f60\u7684\u6587\u672c\u4e00\u5b9a\u4e0d\u4f1a\u8d85\u51fa\u5bb9\u5668\u7684\u5bbd\u5ea6\u3002\\n:::\\n\\n## \u6700\u7ec8\u4ee3\u7801\\n\\n### SVG\\n\\n```jsx\\nimport React, { useEffect, useRef } from \\"react\\";\\n\\nconst canvas = document.createElement(\'canvas\');\\nconst ctx = canvas.getContext(\'2d\');\\nconst getTextLength = (text, fontSize) => {\\n  ctx.font= `${fontSize}px normal`;\\n  const metrics = ctx.measureText(text);\\n  return parseInt(\'\' + metrics.width);\\n}\\n\\nconst TextMiddle = props => {\\n  const { height, fontSize, color, text, className = \'\', style = {} } = props;\\n  const container = useRef();\\n  const isIos = /ipad|iphone|macintosh/gim.test(window.navigator.userAgent);\\n  const actualStyle = {\\n    overflow: \'hidden\',\\n    whiteSpace: \'nowrap\',\\n    textOverflow: \'ellipsis\',\\n    ...style,\\n    height: `${height / 100}rem`,\\n    lineHeight: `${height / 100}rem`,\\n    fontSize: `${fontSize / 100}rem`,\\n    color\\n  };\\n\\n  useEffect(() => {\\n    if (isIos) {\\n      return;\\n    }\\n    const computedStyle = window.getComputedStyle(container.current);\\n    const actualHeight = parseFloat(computedStyle.height);\\n    const actualFontSize = parseFloat(computedStyle.fontSize);\\n    const actualWidth = parseInt(computedStyle.width) + 1;\\n    const textLength = getTextLength(text, actualFontSize);\\n    let actualText = text;\\n    if (textLength > actualWidth) {\\n      actualText = text.slice(0, 1) + \'...\';\\n      for (let i = 1; i < text.length; i++) {\\n        const adjustText = text.slice(0, i) + \'...\';\\n        const adjustWidth = getTextLength(adjustText, actualFontSize);\\n        if (adjustWidth > actualWidth) {\\n          break;\\n        }\\n        actualText = adjustText;\\n      }\\n    }\\n\\n    const svg = `\\n      <svg width=\\"${actualWidth}\\" height=\\"${actualHeight}\\" viewBox=\\"0 0 ${actualWidth} ${actualHeight}\\">\\n        <text\\n          font-size=\\"${actualFontSize}\\"\\n          fill=\\"currentColor\\"\\n          y=\\"${(actualHeight + 0.75 * actualFontSize) / 2}\\"\\n        >\\n          ${actualText}\\n        </text>\\n      </svg>\\n    `;\\n    const observer = new IntersectionObserver(entries => {\\n      entries.forEach(entry => {\\n        // \u8fdb\u5165\u89c6\u53e3\u65f6\u6216\u5df2\u7ecf\u5728\u89c6\u53e3\u4e2d\\n        if (entry.isIntersecting) {\\n          container.current.innerHTML = svg;\\n          observer.unobserve(container.current);\\n        }\\n      })\\n    }, {\\n      // \u89c6\u53e3\u8303\u56f4\u5411\u4e0b\u6269\u5927 500px\uff0c\u63d0\u524d\u52a0\u8f7d\\n      rootMargin: \'0px 0px 500px 0px\'\\n    });\\n    observer.observe(container.current);\\n  }, [text]);\\n\\n  return (\\n    <div ref={container} className={className} style={actualStyle}>\\n      {text}\\n    </div>\\n  )\\n}\\n\\nexport default TextMiddle;\\n```\\n\\n### Canvas\\n\\n```jsx\\nimport React, { useEffect, useRef } from \\"react\\";\\n\\nconst isIos = /ipad|iphone|macintosh/gim.test(window.navigator.userAgent);\\n\\nconst canvas = document.createElement(\'canvas\');\\nconst ctx = canvas.getContext(\'2d\');\\nconst getTextLength = (text, fontSize) => {\\n  ctx.font= `${fontSize}px normal`;\\n  const metrics = ctx.measureText(text);\\n  return parseInt(\'\' + metrics.width);\\n}\\n\\nconst TextMiddle = props => {\\n  const { text, color, height, fontSize, className = \'\', style = {} } = props;\\n  const container = useRef();\\n\\n  const actualStyle = {\\n    overflow: \'hidden\',\\n    whiteSpace: \'nowrap\',\\n    textOverflow: \'ellipsis\',\\n    ...style,\\n    height: `${height / 100}rem`,\\n    lineHeight: `${height / 100}rem`,\\n    fontSize: `${fontSize / 100}rem`,\\n    color\\n  };\\n\\n  useEffect(() => {\\n    if (isIos) {\\n      return;\\n    }\\n\\n    const computedStyle = window.getComputedStyle(container.current);\\n    const actualHeight = parseFloat(computedStyle.height);\\n    const actualFontSize = parseFloat(computedStyle.fontSize);\\n    const actualWidth = parseInt(computedStyle.width) + 1;\\n    \\n    // \u9ad8\u5206\u5c4f\u6a21\u7cca\u5904\u7406\\n    const canvas = document.createElement(\'canvas\');\\n    const ctx = canvas.getContext(\'2d\');\\n    canvas.style.width = actualWidth + \'px\';\\n    canvas.style.height = actualHeight + \'px\';\\n    const dpr = window.devicePixelRatio;\\n    canvas.width = actualWidth * dpr;\\n    canvas.height = actualHeight * dpr;\\n    ctx.scale(dpr, dpr);\\n\\n    // \u6587\u5b57\u8d85\u51fa\u5904\u7406\\n    const textLength = getTextLength(text, actualFontSize);\\n    let actualText = text;\\n    if (textLength > actualWidth) {\\n      actualText = text.slice(0, 1) + \'...\';\\n      for (let i = 1; i < text.length; i++) {\\n        const adjustText = text.slice(0, i) + \'...\';\\n        const adjustWidth = getTextLength(adjustText, actualFontSize);\\n        if (adjustWidth > actualWidth) {\\n          break;\\n        }\\n        actualText = adjustText;\\n      }\\n    }\\n\\n    ctx.font = `${actualFontSize}px normal`;\\n    ctx.fillStyle = color;\\n    ctx.textBaseline = \'bottom\';\\n    ctx.fillText(actualText, 0, (canvas.height / dpr + 0.75 * actualFontSize) / 2);\\n\\n    const observer = new IntersectionObserver(entries => {\\n      entries.forEach(entry => {\\n        if (entry.isIntersecting) {\\n          container.current.removeChild(container.current.firstChild);\\n          container.current.append(canvas);\\n          observer.unobserve(container.current);\\n        }\\n      });\\n    }, {\\n      rootMargin: \'0px 0px 500px 0px\'\\n    });\\n    observer.observe(container.current);\\n  }, [text, color]);\\n\\n  return (\\n    <div ref={container} className={className} style={actualStyle}>\\n      {text}\\n    </div>\\n  )\\n}\\n\\nexport default TextMiddle;\\n```"},{"id":"MutationObserver","metadata":{"permalink":"/blog/MutationObserver","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2022-10-11-MutationObserver.mdx","source":"@site/blog/2022-10-11-MutationObserver.mdx","title":"MutationObserver","description":"\u5728\u590d\u6742\u7684\u7f51\u9875\u5e94\u7528\u4e2d\uff0cDOM \u7ed3\u6784\u4f1a\u9891\u7e41\u7684\u53d1\u751f\u53d8\u5316\uff0c\u6709\u7684\u65f6\u5019\u6211\u4eec\u9700\u8981\u6839\u636e\u53d8\u5316\u6765\u8fdb\u884c\u76f8\u5e94\u7684\u64cd\u4f5c\uff0c\u4ee5\u5f80\u901a\u8fc7 Mutation Events \u6765\u76d1\u542c DOM \u7684\u53d8\u5316\uff0c\u76ee\u524d\u5b83\u5df2\u7ecf\u5e9f\u5f03\u4e86\uff0c\u88ab MutationObserver \u6240\u53d6\u4ee3\u3002MutationObserver \u7684\u517c\u5bb9\u6027\u5f88\u597d\uff0c\u53ef\u4ee5\u653e\u5fc3\u5927\u80c6\u7684\u4f7f\u7528\u3002","date":"2022-10-11T00:00:00.000Z","formattedDate":"2022\u5e7410\u670811\u65e5","tags":[{"label":"MutationObserver","permalink":"/blog/tags/mutation-observer"},{"label":"DOM","permalink":"/blog/tags/dom"}],"readingTime":16.795,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"slug":"MutationObserver","tags":["MutationObserver","DOM"],"authors":"xiongtao","date":"2022-10-11T00:00:00.000Z"},"prevItem":{"title":"\u79fb\u52a8\u7aef\u6587\u5b57\u5782\u76f4\u5c45\u4e2d\u65b9\u6848","permalink":"/blog/mobile-text-middle"},"nextItem":{"title":"IntersectionObserver","permalink":"/blog/IntersectionObserver"}},"content":"import Tabs from \'@theme/Tabs\';\\nimport TabItem from \'@theme/TabItem\';\\n\\n\u5728\u590d\u6742\u7684\u7f51\u9875\u5e94\u7528\u4e2d\uff0cDOM \u7ed3\u6784\u4f1a\u9891\u7e41\u7684\u53d1\u751f\u53d8\u5316\uff0c\u6709\u7684\u65f6\u5019\u6211\u4eec\u9700\u8981\u6839\u636e\u53d8\u5316\u6765\u8fdb\u884c\u76f8\u5e94\u7684\u64cd\u4f5c\uff0c\u4ee5\u5f80\u901a\u8fc7 `Mutation Events` \u6765\u76d1\u542c DOM \u7684\u53d8\u5316\uff0c\u76ee\u524d\u5b83\u5df2\u7ecf\u5e9f\u5f03\u4e86\uff0c\u88ab `MutationObserver` \u6240\u53d6\u4ee3\u3002`MutationObserver` \u7684\u517c\u5bb9\u6027\u5f88\u597d\uff0c\u53ef\u4ee5\u653e\u5fc3\u5927\u80c6\u7684\u4f7f\u7528\u3002\\n\\n<img src=\\"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/image.70ve24867iw.webp\\" style={{ zoom: \'50%\'}} />\\n\\n## \u57fa\u672c\u7528\u6cd5\\n\\n`MutationObserver` \u7684\u57fa\u672c\u7528\u6cd5\u5982\u4e0b\\n\\n```js\\nconst observer = new MutationObserver(mutations => {\\n\\n});\\nobserver.observe(element, options);\\n```\\n\\n\x3c!--truncate--\x3e\\n\\n\u6211\u4eec\u901a\u8fc7 `new MutationObserver()` \u521b\u5efa\u4e00\u4e2a `MutationObserver` \u5bf9\u8c61\uff0c\u6784\u9020\u51fd\u6570\u63a5\u6536\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\uff0c\u5f53\u88ab\u76d1\u542c\u7684\u5143\u7d20 DOM \u53d1\u751f\u53d8\u5316\u65f6\uff0c\u8be5\u56de\u8c03\u51fd\u6570\u5c06\u4f1a\u6267\u884c\u3002\\n\\n\u56de\u8c03\u51fd\u6570\u63a5\u6536\u4e00\u4e2a\u53c2\u6570\uff0c\u8be5\u53c2\u6570\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u5176\u4e2d\u5143\u7d20\u7c7b\u578b\u4e3a `MutationRecord`\uff0c`MutationRecord` \u5305\u542b\u5982\u4e0b\u5c5e\u6027\uff1a\\n\\n```js\\n{\\n\\ttype: \'attributes\',\\n\\ttarget: div#container,\\n\\taddedNodes: [],\\n\\tremoveNodes: [],\\n\\tpreviousSibling: null,\\n\\tnextSibling: null,\\n\\tattributeName: \'\',\\n\\tattributeNamespace: null,\\n\\toldValue: \'\'\\n}\\n```\\n\\n\u5728\u540e\u7eed\u5185\u5bb9\u4e2d\u4f1a\u8be6\u7ec6\u4ecb\u7ecd\u6bcf\u4e2a\u5b57\u6bb5\u7684\u4f5c\u7528\u3002\\n\\n\u901a\u8fc7 `observe(element, options)` \u5bf9\u5143\u7d20 `element` \u8fdb\u884c\u76d1\u542c\uff0c\u9664\u4e86\u9700\u8981\u4f20\u5165\u8981\u76d1\u542c\u7684\u5143\u7d20\u4ee5\u5916\uff0c\u8fd8\u9700\u8981\u4f20\u9012\u4e00\u4e2a `options` \u5bf9\u8c61\uff0c\u5b83\u5305\u62ec\u5982\u4e0b\u5b57\u6bb5\uff1a\\n\\n```js\\n{\\n\\tchildList: true,\\n\\tattributes: true,\\n\\tattributeFilter: [\'class\', \'style\'],\\n\\tattributeOldValue: true,\\n\\tcharacterData: true,\\n\\tcharacterDataOldValue: true,\\n\\tsubtree: true\\n}\\n```\\n\\n\u8fd9\u91cc\u4e3a\u4e86\u5b8c\u6574\u6027\u5c06\u53ef\u8bbe\u7f6e\u7684\u6240\u6709\u53c2\u6570\u5217\u4e86\u51fa\u6765\uff0c\u5b9e\u9645\u5728 `options` \u53c2\u6570\u5e76\u4e0d\u9700\u8981\u6307\u5b9a\u6bcf\u4e00\u4e2a\u5c5e\u6027\u3002\\n\\n\u53ef\u4ee5\u89c2\u5bdf\u5230\u9664\u4e86 `attributeFilter` \u5c5e\u6027\u5916\uff0c\u5176\u5b83\u5c5e\u6027\u90fd\u662f\u5e03\u5c14\u503c\uff0c\u4e5f\u5c31\u8bf4\u8fd9\u4e9b\u5c5e\u6027\u76f8\u5f53\u4e8e\u4e00\u4e2a\u5f00\u5173\uff0c\u8bbe\u7f6e\u67d0\u4e2a\u5c5e\u6027\u4e3a `true` \u5c31\u76f8\u5f53\u4e8e\u5f00\u542f\u67d0\u4e2a\u7279\u6027\uff0c\u540e\u9762\u4f1a\u8be6\u7ec6\u4ecb\u7ecd\u6bcf\u4e2a\u5c5e\u6027\u7684\u4f5c\u7528\u3002\\n\\n:::note note\\n\u867d\u7136\u4e0d\u9700\u8981\u6307\u5b9a\u6bcf\u4e00\u4e2a\u5c5e\u6027\uff0c\u4f46\u662f `childList`, `attributes`, `characterData` \u8fd9\u4e09\u4e2a\u5c5e\u6027\u5fc5\u987b\u6709\u4e00\u4e2a\u8bbe\u7f6e\u4e3a `true`\u3002\\n:::\\n\\n\u5982\u679c\u4e0d\u518d\u9700\u8981\u76d1\u542c DOM \u7684\u53d8\u5316\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7 `observer.disconnect()` \u65b9\u6cd5\u505c\u6b62\u76d1\u542c\u3002\\n\\n\u6765\u770b\u4e00\u4e2a\ud83c\udf30\u3002\\n\\n<Tabs>\\n<TabItem value=\'html\' label=\'HTML\' default>\\n\\n```html\\n<div id=\\"container\\">\\n  <p>\u4e16\u754c\u8fd9\u4e48\u5927\uff0c\u6211\u60f3\u53bb\u770b\u770b</p>\\n</div>\\n<button id=\\"btn\\">\u5220\u9664\u5143\u7d20</button>\\n```\\n\\n</TabItem>\\n\\n<TabItem value=\'js\' label=\'JavaScript\'>\\n\\n```js\\nconst observer = new MutationObserver(mutations => {\\n  console.log(mutations);\\n});\\nobserver.observe(document.getElementById(\'container\'), {\\n  childList: true\\n});\\n\\nconst btn = document.getElementById(\'btn\');\\nbtn.addEventListener(\'click\', () => {\\n  document.getElementById(\'container\').removeChild(\\n    document.querySelector(\'#container p\')\\n  );\\n});\\n```  \\n\\n</TabItem>\\n</Tabs>\\n\\n\u9875\u9762\u4e2d\u6709\u4e00\u4e2a `id` \u4e3a `container` \u7684\u5143\u7d20\uff0c\u5176\u4e2d\u6709\u4e00\u4e2a `p` \u6807\u7b7e\uff0c `p` \u6807\u7b7e\u4e2d\u5176\u4e2d\u5305\u542b\u4e00\u4e9b\u6587\u5b57\u3002\u9875\u9762\u4e2d\u8fd8\u6709\u4e00\u4e2a\u6309\u94ae\uff0c\u5f53\u70b9\u51fb\u6309\u94ae\u65f6\uff0c\u4f1a\u5c06 `p` \u6807\u7b7e\u4ece `container` \u4e2d\u79fb\u9664\u3002\\n\\n\u73b0\u5728\u6211\u4eec\u521b\u5efa\u4e00\u4e2a `MutationObserver`\uff0c\u5e76\u76d1\u542c\u4e86 `container` \u5143\u7d20\uff0c\u8bbe\u7f6e `options` \u4e2d\u7684 `childList` \u4e3a `true`\uff0c\u8868\u793a\u5f53 `container` \u7684\u5b50\u8282\u70b9\u53d1\u751f\u53d8\u5316\u65f6\uff08\u65b0\u589e\u6216\u5220\u9664\uff09\uff0c\u5c06\u4f1a\u88ab\u76d1\u542c\u5230\uff0c\u4ece\u800c\u89e6\u53d1\u56de\u8c03\u51fd\u6570\u7684\u6267\u884c\u3002\u5728\u56de\u8c03\u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u53ea\u662f\u7b80\u5355\u7684\u6253\u5370\u4e86\u56de\u8c03\u51fd\u6570\u7684\u53c2\u6570\u3002\\n\\n\u53ef\u4ee5\u89c2\u5bdf\u5230\uff0c\u5f53\u6211\u4eec\u5220\u9664 `p` \u6807\u7b7e\u65f6\uff0c\u63a7\u5236\u53f0\u6253\u5370\u4e86\u5185\u5bb9\uff0c\u8868\u793a `container` \u7684\u53d8\u5316\u88ab\u76d1\u542c\u5230\u4e86\u3002\\n\\n<video controls src=\\"https://video-obsidian.oss-cn-beijing.aliyuncs.com/MutationObserver-base.mp4\\"></video>\\n\\n:::info info\\n\u901a\u8fc7 `MutationObserver` \u53ef\u4ee5\u76d1\u89c6\u5230\u4e09\u79cd DOM \u53d8\u5316\uff1a\\n\\n1. \u5b50\u5143\u7d20\u53d1\u751f\u53d8\u5316\uff08\u65b0\u589e\u6216\u5220\u9664\uff09\\n2. \u5c5e\u6027\u53d1\u751f\u53d8\u5316\\n3. \u5305\u542b\u7684\u6587\u672c\u53d1\u751f\u53d8\u5316\\n\\n\u53ef\u901a\u8fc7 `MutationRecord` \u5bf9\u8c61\u7684 `type` \u5c5e\u6027\u6765\u533a\u5206\u662f\u4f55\u79cd\u53d8\u5316\uff0c\u5b83\u6709\u4e09\u4e2a\u503c\u5206\u522b\u4e0e\u4e0a\u8ff0\u53d8\u5316\u5bf9\u5e94\uff1a\\n\\n1. `childList`\\n2. `attributes`\\n3. `characterData`\\n:::\\n\\n## \u901a\u8fc7 `childList` \u6765\u76d1\u542c\u5b50\u5143\u7d20\u7684\u53d8\u5316\\n\\n### childList\\n\\n\u5f53 `options` \u4e2d\u7684 `childList` \u8bbe\u7f6e\u4e3a `true` \u65f6\uff0c\u8868\u793a\u76d1\u542c\u5b50\u5143\u7d20\u7684\u53d8\u5316\uff0c\u5373\u5b50\u5143\u7d20\u7684\u65b0\u589e\u4e0e\u5220\u9664\u3002\\n\\n\u540c\u6837\u5728\u9875\u9762\u4e0a\u5b58\u5728\u4e00\u4e2a `container` \u5143\u7d20\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u4e00\u4e2a `p` \u6807\u7b7e\uff1b\u9875\u9762\u4e0a\u540c\u65f6\u5b58\u5728\u4e00\u4e2a\u6309\u94ae\uff0c\u5f53\u70b9\u51fb\u6309\u94ae\u65f6\u4f1a\u5220\u9664 `p` \u6807\u7b7e\u6216\u8005\u521b\u5efa `p` \u6807\u7b7e\u3002\\n\\n<Tabs>\\n<TabItem value=\'html\' label=\'HTML\' default>\\n\\n```html\\n<div id=\\"container\\">\\n  <p>\u4e16\u754c\u8fd9\u4e48\u5927\uff0c\u6211\u60f3\u53bb\u770b\u770b</p>\\n</div>\\n<button id=\\"btn\\">\u5220\u9664/\u65b0\u589e</button>\\n```\\n\\n</TabItem>\\n\\n<TabItem value=\'js\' label=\'JavaScript\'>\\n\\n```js\\nconst container = document.querySelector(\'#container\');\\nconst observer = new MutationObserver(mutations => {\\n  console.log(mutations);\\n});\\nobserver.observe(container, {\\n  childList: true\\n});\\n\\nconst btn = document.querySelector(\'#btn\');\\nbtn.addEventListener(\'click\', () => {\\n  const p = container.querySelector(\'p\');\\n  if (p) {\\n    container.removeChild(p);\\n  } else {\\n    container.innerHTML = \'<p>\u4e16\u754c\u8fd9\u4e48\u5927\uff0c\u6211\u60f3\u53bb\u770b\u770b</p>\';\\n  }\\n});\\n```  \\n\\n</TabItem>\\n</Tabs>\\n\\n<video controls src=\\"https://video-obsidian.oss-cn-beijing.aliyuncs.com/MutationObserver-childList1.mp4\\"></video>\\n\\n\u4ece\u89c6\u9891\u53ef\u4ee5\u89c2\u5bdf\u5230\uff0c\u5f53 `p` \u6807\u7b7e\u7684\u5220\u9664\u4e0e\u65b0\u589e\u65f6\uff0c\u5747\u4f1a\u89e6\u53d1\u56de\u8c03\u51fd\u6570\u7684\u6267\u884c\u3002\\n\\n\u901a\u8fc7 `MutationRecord` \u5bf9\u8c61\u7684 `addedNodes` \u4e0e `removedNodes` \u5c5e\u6027\u53ef\u4ee5\u8bbf\u95ee\u5230\u6dfb\u52a0\u7684\u8282\u70b9\u4ee5\u53ca\u5220\u9664\u7684\u8282\u70b9\u3002\u901a\u8fc7 `nextSibling` \u4e0e `prevSibling` \u53ef\u4ee5\u83b7\u5f97\u88ab\u5220\u9664\u6216\u65b0\u589e\u8282\u70b9\u7684\u524d\u540e\u5144\u5f1f\u8282\u70b9\uff08\u5982\u679c\u4e0d\u5b58\u5728\u5219\u4e3a `null`\uff09\u3002\\n\\n```js\\nconst observer = new MutationObserver(mutations => {\\n  mutations.forEach(mutation => {\\n    console.log(mutation.addedNodes);\\n    console.log(mutation.removedNodes);\\n  })\\n});\\nobserver.observe(container, {\\n  childList: true\\n});\\n```\\n<video src=\\"https://video-obsidian.oss-cn-beijing.aliyuncs.com/MutationObserver-childList3.mp4\\" controls></video>\\n\\n### subtree\\n\\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8bbe\u7f6e `childList` \u4e3a `true`\uff0c\u53ea\u80fd\u76d1\u542c**\u76f4\u63a5\u5b50\u5143\u7d20**\u7684\u65b0\u589e\u4e0e\u5220\u9664\uff0c\u5bf9\u4e8e\u66f4\u6df1\u5c42\u6b21\u7684\u5b50\u5143\u7d20\u7684\u53d8\u5316\u65e0\u6cd5\u76d1\u542c\u3002\\n\\n<Tabs>\\n<TabItem value=\'html\' label=\'HTML\' default>\\n\\n```html\\n<div id=\\"container\\">\\n  <div id=\\"inner-container\\">\\n    <p>\u4e16\u754c\u8fd9\u4e48\u5927\uff0c\u6211\u60f3\u53bb\u770b\u770b</p>\\n  </div>\\n</div>\\n<button id=\\"btn\\">\u5220\u9664/\u65b0\u589e</button>\\n```\\n\\n</TabItem>\\n\\n<TabItem value=\'js\' label=\'JavaScript\'>\\n\\n```js\\nconst container = document.querySelector(\'#container\');\\nconst observer = new MutationObserver(mutations => {\\n  console.log(mutations);\\n});\\nobserver.observe(container, {\\n  childList: true\\n});\\n    \\nconst btn = document.querySelector(\'#btn\');\\nbtn.addEventListener(\'click\', () => {\\n  const innerContainer = document.querySelector(\'#inner-container\');\\n  const p = innerContainer.querySelector(\'p\');\\n  if (p) {\\n    innerContainer.removeChild(p);\\n  } else {\\n    innerContainer.innerHTML = \'<p>\u4e16\u754c\u8fd9\u4e48\u5927\uff0c\u6211\u60f3\u53bb\u770b\u770b</p>\';\\n  }\\n});\\n```  \\n\\n</TabItem>\\n</Tabs>\\n\\n\u76f8\u6bd4\u4e8e\u4e0a\u4f8b\uff0c\u5728 `p` \u6807\u7b7e\u4e0e `container` \u4e4b\u95f4\u6dfb\u52a0\u4e86\u4e00\u4e2a `inner-container` \u5143\u7d20\uff0c\u6211\u4eec\u8fd8\u662f\u76d1\u542c `container` \u5143\u7d20\uff0c\u70b9\u51fb\u6309\u94ae\u65f6\u5bf9 `p` \u6807\u7b7e\u8fdb\u884c\u79fb\u9664\u6216\u8005\u6dfb\u52a0\u3002\\n\\n<video controls src=\\"https://video-obsidian.oss-cn-beijing.aliyuncs.com/MutationObserver-childList2.mp4\\"></video>\\n\\n\u56e0\u4e3a\u53ea\u80fd\u76d1\u542c\u76f4\u63a5\u5b50\u5143\u7d20\uff0c\u800c `p` \u6807\u7b7e\u5e76\u4e0d\u662f `container` \u7684 \u76f4\u63a5\u5b50\u5143\u7d20\uff0c\u6240\u4ee5 `p` \u6807\u7b7e\u7684\u5220\u9664\u4e0e\u65b0\u589e\u65e0\u6cd5\u88ab\u76d1\u542c\u5230\uff0c\u6240\u4ee5\u56de\u8c03\u51fd\u6570\u4e0d\u4f1a\u88ab\u6267\u884c\uff0c\u63a7\u5236\u53f0\u4e0d\u4f1a\u6709\u4efb\u4f55\u7684\u8f93\u51fa\u3002\\n\\n\u90a3\u6709\u6ca1\u6709\u529e\u6cd5\u8fdb\u884c\u6df1\u5c42\u6b21\u7684\u76d1\u542c\u5462\uff1f\u7b54\u6848\u662f\u6709\uff0c\u9700\u8981\u914d\u5408 `subtree` \u5c5e\u6027\u3002\u9664\u4e86\u9700\u8981\u6307\u5b9a `childList` \u4e3a `true` \u4ee5\u5916\u8fd8\u9700\u8981\u6307\u5b9a `subtree` \u4e3a `true`\u3002\\n\\n<Tabs>\\n<TabItem value=\'html\' label=\'HTML\' default>\\n\\n```html\\n<div id=\\"container\\">\\n  <div id=\\"inner-container\\">\\n    <p>\u4e16\u754c\u8fd9\u4e48\u5927\uff0c\u6211\u60f3\u53bb\u770b\u770b</p>\\n  </div>\\n</div>\\n<button id=\\"btn\\">\u5220\u9664/\u65b0\u589e</button>\\n```\\n\\n</TabItem>\\n\\n<TabItem value=\'js\' label=\'JavaScript\'>\\n\\n```js\\nconst container = document.querySelector(\'#container\');\\nconst observer = new MutationObserver(mutations => {\\n  console.log(mutations);\\n});\\nobserver.observe(container, {\\n  childList: true,\\n  subtree: true\\n});\\n    \\nconst btn = document.querySelector(\'#btn\');\\nbtn.addEventListener(\'click\', () => {\\n  const innerContainer = document.querySelector(\'#inner-container\');\\n  const p = innerContainer.querySelector(\'p\');\\n  if (p) {\\n    innerContainer.removeChild(p);\\n  } else {\\n    innerContainer.innerHTML = \'<p>\u4e16\u754c\u8fd9\u4e48\u5927\uff0c\u6211\u60f3\u53bb\u770b\u770b</p>\';\\n  }\\n});\\n```  \\n\\n</TabItem>\\n</Tabs>\\n\\n<video controls src=\\"https://video-obsidian.oss-cn-beijing.aliyuncs.com/MutationObserver-childList4.mp4\\"></video>\\n\\n## \u901a\u8fc7 `attributes` \u6765\u76d1\u542c\u5c5e\u6027\u7684\u53d8\u5316\\n\\n### attributes\\n\\n\u5f53\u8bbe\u7f6e `attributes` \u5c5e\u6027\u4e3a `true` \u65f6\uff0c\u5c31\u53ef\u4ee5\u76d1\u542c\u5230\u5c5e\u6027\u7684\u53d8\u5316\uff0c\u5305\u62ec\u81ea\u5b9a\u4e49\u5c5e\u6027\u3002\\n\\n<Tabs>\\n<TabItem value=\'html\' label=\'HTML\' default>\\n\\n```html\\n<div id=\\"container\\" class=\\"red\\">\\n  <p>\u4e16\u754c\u8fd9\u4e48\u5927\uff0c\u6211\u60f3\u53bb\u770b\u770b</p>\\n</div>\\n<button id=\\"btn\\">\u6539\u53d8\u989c\u8272</button>\\n```\\n\\n</TabItem>\\n\\n<TabItem value=\'css\' label=\'CSS\'>\\n\\n```css\\n.red {\\n  color: red;\\n}\\n.green {\\n  color: green;\\n}\\n```\\n\\n</TabItem>\\n\\n<TabItem value=\'js\' label=\'JavaScript\'>\\n\\n```js\\nconst container = document.querySelector(\'#container\');\\nconst observer = new MutationObserver(mutations => {\\n  console.log(mutations);\\n});\\nobserver.observe(container, {\\n  attributes: true\\n});\\n\\nconst btn = document.querySelector(\'#btn\');\\nbtn.addEventListener(\'click\', () => {\\n  container.classList.toggle(\'red\');\\n  container.classList.toggle(\'green\');\\n});\\n```  \\n\\n</TabItem>\\n</Tabs>\\n\\n\u5728\u4e0a\u8ff0\u4ee3\u7801\u4e2d\uff0c\u6bcf\u6b21\u70b9\u51fb\u6309\u94ae\u65f6\uff0c\u90fd\u4f1a\u5bf9 `container` \u7684\u7c7b\u540d\u8fdb\u884c\u6539\u53d8\uff0c\u4ea4\u66ff\u7684\u6dfb\u52a0\u548c\u5220\u9664 `red` \u548c `green` \u7c7b\uff0c\u4ece\u800c\u4f7f\u5f97\u6587\u5b57\u7684\u6837\u5f0f\u53d1\u751f\u53d8\u5316\u3002\\n\\n<video controls src=\\"https://video-obsidian.oss-cn-beijing.aliyuncs.com/MutationObserver-attributes1.mp4\\"></video>\\n\\n\u4ece\u89c6\u9891\u4e2d\u7684\u6253\u5370\u7ed3\u679c\u770b\uff0c\u6bcf\u6b21\u6211\u4eec\u4fee\u6539 `class` \u65f6\uff0c\u56de\u8c03\u51fd\u6570\u90fd\u88ab\u6267\u884c\u4e86\uff0c\u53ef\u4ee5\u770b\u5230\u8fd9\u6b21\u7684\u6570\u7ec4\u4e2d\u5305\u542b\u4e24\u4e2a\u5143\u7d20\uff0c\u4e00\u4e2a\u662f\u5220\u9664\u7c7b\u7684\u53d8\u52a8\uff0c\u4e00\u4e2a\u662f\u65b0\u589e\u7c7b\u7684\u53d8\u52a8\u3002\\n\\n<img src=\\"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/image.1uex3gw8w2rk.webp\\" style={{ zoom: \'50%\'}} />\\n\\n\u53ef\u89c1\u770b\u5230\uff0c\u5c5e\u6027\u53d8\u52a8\u5bf9\u5e94\u7684 `MutationRecord` \u5bf9\u8c61\u7684 `type` \u4e3a `attributes`\uff0c\u901a\u8fc7 `attributeName` \u53ef\u4ee5\u77e5\u9053\u4ec0\u4e48\u5c5e\u6027\u53d1\u751f\u4e86\u53d8\u5316\u3002\\n\\n### attributeOldValue\\n\\n\u901a\u8fc7\u8bbe\u7f6e `attributeOldValue` \u4e3a `true`\uff0c\u53ef\u4ee5\u77e5\u9053\u53d8\u52a8\u4e4b\u524d\u7684\u5c5e\u6027\u503c\u3002\u770b\u4e00\u4e2a\ud83c\udf30\\n\\n<Tabs>\\n<TabItem value=\'html\' label=\'HTML\' default>\\n\\n```html\\n<div id=\\"container\\" data-text=\\"Hello World\\"></div>\\n<button id=\\"btn\\">\u6539\u53d8\u81ea\u5b9a\u4e49\u5c5e\u6027</button>\\n```\\n\\n</TabItem>\\n\\n<TabItem value=\'css\' label=\'CSS\'>\\n\\n```css\\n#container::before {\\n  content: attr(data-text);\\n}\\n```\\n\\n</TabItem>\\n\\n<TabItem value=\'js\' label=\'JavaScript\'>\\n\\n```js\\nconst container = document.querySelector(\'#container\');\\nconst observer = new MutationObserver(mutations => {\\n  mutations.forEach(mutation => {\\n    console.log(mutation.oldValue);\\n  });\\n});\\nobserver.observe(container, {\\n  attributes: true,\\n  attributeOldValue: true\\n});\\n\\nconst texts = [\'Hello World\', \'\u4f60\u597d\u4e16\u754c\'];\\nlet count = 0;\\nconst btn = document.querySelector(\'#btn\');\\nbtn.addEventListener(\'click\', () => {\\n  container.dataset.text = texts[++count % 2];\\n});\\n```  \\n\\n</TabItem>\\n</Tabs>\\n\\n\u5728\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u4e3a `container` \u5143\u7d20\u8bbe\u7f6e\u4e86\u81ea\u5b9a\u4e49\u5c5e\u6027 `data-text`\uff0c\u5e76\u8bbe\u7f6e\u5176\u4f2a\u5143\u7d20 `::before` \u7684 `content` \u4e3a `data-text`\uff0c\u968f\u540e\u6211\u4eec\u70b9\u51fb\u6309\u94ae\uff0c\u6539\u53d8 `data-text` \u7684\u503c\uff0c`content` \u968f\u4e4b\u6539\u53d8\uff0c\u9875\u9762\u53d1\u751f\u53d8\u5316\u3002\u6211\u4eec\u4f7f\u7528 `MutationObserver` \u68c0\u6d4b\u5230\u8fd9\u4e00\u53d8\u5316\uff0c\u5e76\u4e14\u53ef\u4ee5\u901a\u8fc7 `MutationRecord` \u5bf9\u8c61\u7684 `oldValue` \u5c5e\u6027\u6765\u8bbf\u95ee\u5230\u53d8\u5316\u4e4b\u524d\u7684\u5c5e\u6027\u503c\u3002\\n\\n<video controls src=\\"https://video-obsidian.oss-cn-beijing.aliyuncs.com/MutationObserver-attrOldValue.mp4?x=2\\"></video>\\n\\n### attributeFilter\\n\\n\u901a\u8fc7\u6307\u5b9a `attributeFilter` \u5c5e\u6027\uff0c\u53ef\u4ee5\u53ea\u5173\u76d1\u542c\u7279\u5b9a\u5c5e\u6027\u7684\u53d8\u5316\uff0c\u5b83\u7684\u503c\u4e3a\u4e00\u4e2a\u6570\u7ec4\uff0c\u53ea\u76d1\u542c\u6570\u7ec4\u4e2d\u5305\u542b\u7684\u5c5e\u6027\u7684\u53d8\u5316\\n\\n<Tabs>\\n\\n<TabItem value=\'html\'label=\'HTML\'>\\n\\n```html\\n<div class=\\"red\\" id=\\"container\\" data-text=\\"Hello World\\"></div>\\n<button id=\\"btn\\">\u6539\u503c\u4e0e\u6539\u8272</button>\\n```\\n\\n</TabItem>\\n\\n<TabItem value=\'css\'label=\'CSS\'>\\n\\n```css\\n#container::before {\\n  content: attr(data-text);\\n}\\n.red {\\n  color: red;\\n}\\n.green {\\n  color: green;\\n}\\n```\\n\\n</TabItem>\\n\\n<TabItem value=\'js\'label=\'JavaScript\'>\\n\\n```javascript\\nconst container = document.querySelector(\'#container\');\\nconst observer = new MutationObserver(mutations => {\\n  mutations.forEach(mutation => {\\n    // \u6253\u5370\u51fa\u53d8\u52a8\u7684\u5c5e\u6027\\n    console.log(mutation.attributeName);\\n  })\\n});\\nobserver.observe(container, {\\n  attributes: true,\\n  // \u53ea\u76d1\u542c data-text \u7684\u53d8\u5316\\n  attributeFilter: [\'data-text\']\\n});\\n\\nlet count = 0;\\nconst texts = [\'Hello World\', \'\u4f60\u597d\u4e16\u754c\'];\\nconst btn = document.querySelector(\'#btn\');\\nbtn.addEventListener(\'click\', () => {\\n  container.classList.toggle(\'red\');\\n  container.classList.toggle(\'green\');\\n  container.dataset.text = texts[++count % 2];\\n});\\n```\\n\\n</TabItem>\\n\\n</Tabs>\\n\\n\u5728\u4e0a\u9762\u6211\u4eec\u540c\u65f6\u6539\u53d8 `class` \u5c5e\u6027\u4e0e `data-text` \u5c5e\u6027\uff0c\u4f46\u662f\u5728 `options` \u4e2d\u6211\u4eec\u8bbe\u7f6e\u4e86 `attributeFilter: [\'data-text\']`\uff0c\u5373\u53ea\u76d1\u542c `data-text` \u5c5e\u6027\u3002\u6211\u4eec\u5728\u56de\u8c03\u51fd\u6570\u4e2d\u6253\u5370\u51fa\u76d1\u542c\u7684\u5c5e\u6027\u3002\\n\\n<video controls src=\\"https://video-obsidian.oss-cn-beijing.aliyuncs.com/MutationObserver-attrFilter.mp4\\"></video>\\n\\n\u4ece\u89c6\u9891\u4e2d\u53ef\u4ee5\u770b\u5230\uff0c\u53ea\u6253\u5370\u4e86 `data-text`\uff0c\u5e76\u6ca1\u6709\u6253\u5370 `class`\u3002\\n\\n### subtree\\n\\n`attributes` \u5c5e\u6027\u4e5f\u53ef\u4ee5\u914d\u5408 `subtree` \u4f7f\u7528\uff0c\u9664\u4e86\u53ef\u4ee5\u76d1\u542c\u6307\u5b9a\u5143\u7d20\u4e0a\u5c5e\u6027\u7684\u53d8\u5316\uff0c\u8fd8\u53ef\u4ee5\u76d1\u542c\u5230\u8be5\u5143\u7d20\u5305\u542b\u7684\u5b50\u5143\u7d20\u4e0a\u7684\u5c5e\u6027\u7684\u53d8\u5316\u3002\\n\\n<Tabs>\\n\\n<TabItem value=\'html\'label=\'HTML\'>\\n\\n```html\\n<div id=\\"container\\">\\n  <p class=\\"red\\">Hello World!</p>\\n</div>\\n```\\n\\n</TabItem>\\n\\n<TabItem value=\'css\'label=\'CSS\'>\\n\\n```css\\n.red {\\n  color: red;\\n}\\n.green {\\n  color: green;\\n}\\n```\\n\\n</TabItem>\\n\\n<TabItem value=\'js\'label=\'JavaScript\'>\\n\\n```javascript\\nconst container = document.querySelector(\'#container\');\\nconst observer = new MutationObserver(mutations => {\\n  mutations.forEach(mutation => {\\n    console.log(mutation);\\n  });\\n});\\nobserver.observe(container, {\\n  attributes: true,\\n  subtree: true\\n});\\n\\nsetTimeout(()=> {\\n  const p = container.querySelector(\'p\');\\n  p.className = \'green\';\\n}, 3000);\\n```\\n\\n</TabItem>\\n\\n</Tabs>\\n\\n\u5728 `container` \u91cc\u9762\u6709\u4e00\u4e2a `p` \u6807\u7b7e\uff0c`p` \u6807\u7b7e\u5305\u542b\u4e00\u4e2a `class` \u5c5e\u6027\u3002\u6211\u4eec\u4f7f\u7528 \\n`MutationObserver` \u76f4\u63a5\u76d1\u542c `container`\uff0c\u7136\u540e\u5f00\u542f\u4e00\u4e2a\u5b9a\u65f6\u5668\uff0c\u5728\u5b9a\u65f6\u5668\u4e2d\u4fee\u6539 `p` \u6807\u7b7e\u7684 `class` \u5c5e\u6027\uff0c\u7531\u4e8e\u5728 `options` \u4e2d\u8bbe\u7f6e\u4e86 `subtree: true`\uff0c\u6240\u4ee5\u5373\u4f7f\u6211\u4eec\u76d1\u542c\u7684\u662f `container`\uff0c\u4f46\u662f `p` \u6807\u7b7e\u5c5e\u6027\u7684\u53d8\u5316\u8fd8\u662f\u80fd\u88ab\u76d1\u542c\u5230\u3002\\n\\n<video controls src=\\"https://video-obsidian.oss-cn-beijing.aliyuncs.com/MutationObserver-attributes2.mp4\\"></video>\\n\\n## \u901a\u8fc7 `characterData` \u6765\u76d1\u542c\u6587\u672c\u7684\u53d8\u5316\\n\\n### characterData\\n\\n\u901a\u8fc7\u5c06 `characterData` \u8bbe\u7f6e\u4e3a `true` \u6765\u76d1\u542c\u6587\u672c\u8282\u70b9\u7684\u53d8\u5316\u3002\u5176\u76f8\u5e94\u7684 `MutationRecord` \u5bf9\u8c61\u7684 `type` \u5c5e\u6027\u4e3a `characterData`\u3002\\n\\n<Tabs>\\n\\n<TabItem value=\'html\'label=\'HTML\'>\\n\\n```html\\n<div id=\\"container\\" contenteditable=\\"true\\">\u4e16\u754c\u8fd9\u4e48\u5927\uff0c\u6211\u60f3\u53bb\u770b\u770b</div>\\n```\\n\\n</TabItem>\\n\\n<TabItem value=\'js\'label=\'JavaScript\'>\\n\\n```javascript\\nconst container = document.querySelector(\'#container\');\\nconst observer = new MutationObserver(mutations => {\\n  mutations.forEach(mutation => {\\n    console.log(mutation);\\n  });\\n});\\nobserver.observe(container.firstChild, {\\n  characterData: true\\n});\\n```\\n\\n</TabItem>\\n\\n</Tabs>\\n\\n\u6211\u4eec\u51c6\u5907\u4e86\u4e00\u4e2a `div`\uff0c\u5e76\u4e14\u8bbe\u7f6e\u4e86\u5176 `contenteditable` \u5c5e\u6027\u4e3a `true`\uff0c\u5373\u5185\u90e8\u6587\u5b57\u53ef\u7f16\u8f91\u3002\u968f\u540e\u6211\u4eec\u76d1\u542c\u4e86 `div` \u4e0b\u7684\u6587\u672c\u8282\u70b9\uff0c\u8bbe\u7f6e\u4e86 `characterData` \u5c5e\u6027\u4e3a `true`\uff0c\u5373\u76d1\u542c\u6587\u5b57\u7684\u53d8\u5316\u3002\\n\\n<video controls src=\\"https://video-obsidian.oss-cn-beijing.aliyuncs.com/MutationObserver-characterData1.mp4\\"></video>\\n\\n:::note note\\n\\n1. \u5f53\u4f7f\u7528 <kbd>Ctrl + B</kbd> \u6216\u8005 <kbd>Ctrl + I</kbd> \u4f7f\u5f97\u6587\u672c\u52a0\u7c97\u6216\u8005\u503e\u659c\u65f6\uff0c\u4f1a\u4f7f\u5f97\u539f\u6587\u672c\u8282\u70b9\u53d8\u4e3a\u591a\u4e2a\u8282\u70b9\uff0c\u8fd9\u65f6\u4f60\u518d\u7f16\u8f91\u6587\u5b57\uff0c\u4f1a\u53d1\u73b0 `MutationObserver` \u4e0d\u8d77\u4f5c\u7528\uff0c\u9664\u975e\u4f60\u7f16\u8f91\u7684\u6587\u5b57\u88ab\u8ba4\u4e3a\u662f\u539f\u59cb\u7684\u6587\u672c\u8282\u70b9\u3002\\n2. \u5f53\u4f60\u5c06\u6587\u672c\u8282\u70b9\u5305\u542b\u7684\u6240\u6709\u6587\u5b57\u90fd\u5220\u9664\u540e\uff0c`MutationObserver` \u4e0d\u518d\u89e6\u53d1\u56de\u8c03\u51fd\u6570\uff0c\u56e0\u4e3a\u4e00\u65e6\u6587\u5b57\u5220\u9664\u540e\uff0c\u539f\u6587\u672c\u8282\u70b9\u5c31\u88ab\u79fb\u9664\u4e86\uff0c\u518d\u6b21\u8f93\u5165\u7684\u6587\u5b57\u5f62\u6210\u4e86\u4e00\u4e2a\u65b0\u7684\u6587\u672c\u8282\u70b9\uff0c\u800c\u8fd9\u4e2a\u6587\u672c\u8282\u70b9\u5e76\u6ca1\u6709\u88ab\u76d1\u542c\u3002\u5982\u679c\u4ee5 `childList: true` \u76d1\u542c\u6587\u672c\u8282\u70b9\u7236\u5bb9\u5668\uff0c\u53ef\u4ee5\u89c2\u5bdf\u5230\u5220\u9664\u6240\u6709\u6587\u672c\u7684\u65f6\u5019\u4f1a\u89e6\u53d1\u4e00\u6b21\u56de\u8c03\u51fd\u6570\uff0c\u56e0\u4e3a\u6b64\u65f6\u6587\u672c\u8282\u70b9\u88ab\u5220\u9664\u4e86\uff0c\u800c\u5220\u5b8c\u4e4b\u540e\u65b0\u589e\u6587\u5b57\u53c8\u4f1a\u89e6\u53d1\u4e00\u6b21\u56de\u8c03\u51fd\u6570\uff0c\u56e0\u4e3a\u6b64\u65f6\u65b0\u589e\u4e86\u4e00\u4e2a\u6587\u672c\u8282\u70b9\u3002\\n3. \u8f93\u5165\u4e2d\u6587\u5b57\u7b26\u65f6 `MutationObserver`\u65e0\u6cd5\u76d1\u542c\u5230\u5bf9\u5e94\u53d8\u5316\u3002\\n\\n:::\\n\\n### subtree\\n\\n\u4ee5\u4e0a\u4e09\u4e2a\u95ee\u9898\u5747\u53ef\u4ee5\u901a\u8fc7\u914d\u5408 `subtree` \u6765\u89e3\u51b3\uff0c\u5f53\u8bbe\u7f6e `subtree` \u4e3a `true` \u65f6\uff0c\u53ef\u4ee5\u76d1\u542c\u5230\u5b50\u8282\u70b9\u4e2d\u6587\u672c\u7684\u53d8\u5316\uff0c\u6240\u4ee5\u4e0d\u7ba1\u662f\u5206\u88c2\u4e3a\u591a\u4e2a\u8282\u70b9\u8fd8\u662f\u539f\u8282\u70b9\u88ab\u5220\u9664\u7136\u540e\u65b0\u589e\uff0c\u6240\u6709\u6587\u672c\u7684\u53d8\u5316\u90fd\u53ef\u4ee5\u88ab\u68c0\u6d4b\u5230\u3002\\n\\n```js\\nconst container = document.querySelector(\'#container\');\\nconst observer = new MutationObserver(mutations => {\\n  mutations.forEach(mutation => {\\n    console.log(mutation);\\n  });\\n});\\nobserver.observe(container, {\\n  characterData: true,\\n  subtree: true\\n});\\n```\\n\\n<video controls src=\\"https://video-obsidian.oss-cn-beijing.aliyuncs.com/MutationObserver-characterData2.mp4\\"></video>\\n\\n:::note note\\n\u9009\u62e9\u6587\u5b57\u7136\u540e\u8fdb\u884c\u5220\u9664\uff0c\u8fd9\u4e2a\u6587\u672c\u53d8\u5316\u597d\u50cf\u68c0\u67e5\u4e0d\u5230\uff0c\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\uff0c\u8ddf\u9009\u533a\u6709\u5173\u5417\uff1f\\n:::\\n\\n### characterDataOldValue \\n\\n\u8bbe\u7f6e `characterDataOldValue` \u4e3a `true` \u540e\uff0c\u53ef\u4ee5\u901a\u8fc7 `MutationRecord` \u5bf9\u8c61\u7684 `oldValue` \u5c5e\u6027\u83b7\u5f97\u53d8\u52a8\u4e4b\u524d\u7684\u6587\u672c\u3002\\n\\n```js\\nconst container = document.querySelector(\'#container\');\\nconst observer = new MutationObserver(mutations => {\\n  mutations.forEach(mutation => {\\n    console.log(mutation.oldValue);\\n  });\\n});\\nobserver.observe(container, {\\n  characterData: true,\\n  characterDataOldValue: true,\\n  subtree: true,\\n});\\n```\\n\\n<video controls src=\\"https://video-obsidian.oss-cn-beijing.aliyuncs.com/MutationObserver-chatacterData3.mp4\\"></video>\\n\\n## \u901a\u8fc7 `takeRecords` \u62e6\u622a\u53d8\u5316\\n\\n\u901a\u8fc7 `takeRecords()` \u65b9\u6cd5\uff0c\u53ef\u4ee5\u5728 `mutations` \u88ab\u56de\u8c03\u51fd\u6570\u5904\u7406\u4e4b\u524d\u62e6\u622a\u5230\u3002\\n\\n<Tabs>\\n\\n<TabItem value=\'html\'label=\'HTML\'>\\n\\n```html\\n<ul id=\\"list\\">\\n  <li>\u7bee\u7403</li>\\n  <li>\u8db3\u7403</li>\\n  <li>\u7fbd\u6bdb\u7403</li>\\n</ul>\\n```\\n\\n</TabItem>\\n\\n<TabItem value=\'js\'label=\'JavaScript\'>\\n\\n```javascript\\nconst list = document.querySelector(\'#list\');\\nconst observer = new MutationObserver(mutations => {\\n  console.log(\'callback:\', mutations);\\n});\\nobserver.observe(list, {\\n  childList: true\\n});\\n\\nsetTimeout(() => {\\n  list.insertAdjacentHTML(\'beforeend\', \'\\\\\\\\n<li>\u4e52\u4e53\u7403</li>\');\\n  const records = observer.takeRecords();\\n  console.log(\'takeRecords:\', records);\\n}, 3000);\\n```\\n\\n</TabItem>\\n\\n</Tabs>\\n\\n\u4e0a\u9762\u6211\u4eec\u51c6\u5907\u4e86\u4e00\u4e2a\u5217\u8868\uff0c\u4f7f\u7528\u4e00\u4e2a\u5b9a\u65f6\u5668\u5411\u5217\u8868\u4e2d\u6dfb\u52a0\u4e00\u9879\u5185\u5bb9\uff0c\u6dfb\u52a0\u5185\u5bb9\u4e4b\u540e\uff0c\u6211\u4eec\u9a6c\u4e0a\u4f7f\u7528 `takeRecords()` \u8fdb\u884c\u4e86\u62e6\u622a\uff0c\u56e0\u6b64\u4e0d\u4f1a\u89e6\u53d1\u56de\u8c03\u51fd\u6570\u7684\u6267\u884c\u3002\\n\\n<video src=\\"https://video-obsidian.oss-cn-beijing.aliyuncs.com/MutationObserver-takeRecords.mp4\\" controls></video>\\n\\n## \u76d1\u542c\u591a\u4e2a\u5143\u7d20\\n\\n\u540c\u4e00\u4e2a `MutationObserver` \u53ef\u4ee5\u540c\u65f6\u76d1\u542c\u591a\u4e2a\u5143\u7d20\uff0c\u53ef\u901a\u8fc7 `disconnect` \u53d6\u6d88\u6240\u6709\u5143\u7d20\u7684\u76d1\u542c\u3002\\n\\n<Tabs>\\n\\n<TabItem value=\'html\'label=\'HTML\'>\\n\\n```html\\n<div id=\\"text1\\" contenteditable=\\"true\\">Hello World!</div>\\n<div id=\\"text2\\" contenteditable=\\"true\\">\u4f60\u597d\uff0c\u4e16\u754c\uff01</div>\\n<button id=\\"btn1\\">\u76d1\u542ctext1</button>\\n<button id=\\"btn2\\">\u76d1\u542ctext2</button>\\n<button id=\\"stopBtn\\">\u53d6\u6d88\u76d1\u542c</button>\\n```\\n\\n</TabItem>\\n\\n<TabItem value=\'js\'label=\'JavaScript\'>\\n\\n```javascript\\nconst observer = new MutationObserver(mutations => {\\n  console.log(mutations);\\n});\\n\\nbtn1.addEventListener(\'click\', () => {\\n  observer.observe(text1, {\\n    characterData: true,\\n    subtree: true\\n  });\\n});\\nbtn2.addEventListener(\'click\', () => {\\n  observer.observe(text2, {\\n    characterData: true,\\n    subtree: true\\n  });\\n});\\nstopBtn.addEventListener(\'click\', () => {\\n  observer.disconnect();\\n});\\n```\\n\\n</TabItem>\\n\\n</Tabs>\\n\\n<video controls src=\\"https://video-obsidian.oss-cn-beijing.aliyuncs.com/MutationObserver-disconnect.mp4\\"></video>\\n\\n:::info info\\n\u8c03\u7528 `disconnect()` \u4f1a\u53d6\u6d88\u6240\u6709\u5143\u7d20\u7684\u76d1\u542c\uff0c\u8fd9\u662f\u6211\u89c9\u5f97\u4e0d\u65b9\u4fbf\u7684\u5730\u65b9\uff0c\u4e0d\u50cf `IntersectionObserver` \u53ef\u4ee5\u901a\u8fc7 `unobserve()` \u65b9\u6cd5\u53d6\u6d88\u76d1\u542c\u6307\u5b9a\u7684\u5143\u7d20\u3002\\n:::"},{"id":"IntersectionObserver","metadata":{"permalink":"/blog/IntersectionObserver","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2022-09-28-IntersectionObserver.mdx","source":"@site/blog/2022-09-28-IntersectionObserver.mdx","title":"IntersectionObserver","description":"\u5982\u679c\u6211\u4eec\u9700\u8981\u76d1\u542c\u67d0\u4e2a\u5143\u7d20\u662f\u5426\u51fa\u73b0\u5728\u89c6\u53e3\u4e2d\uff0c\u4e00\u822c\u505a\u6cd5\u662f\u76d1\u542c scroll \u4e8b\u4ef6\uff0c\u7136\u540e\u67e5\u8be2\u5143\u7d20\u79bb\u89c6\u53e3\u9876\u90e8\u7684\u8ddd\u79bb\uff0c\u4f46\u662f\u76d1\u542c scroll \u4e8b\u4ef6\u5b58\u5728\u6027\u80fd\u95ee\u9898\u3002","date":"2022-09-28T00:00:00.000Z","formattedDate":"2022\u5e749\u670828\u65e5","tags":[{"label":"IntersectionObserver","permalink":"/blog/tags/intersection-observer"},{"label":"\u5ef6\u8fdf\u52a0\u8f7d","permalink":"/blog/tags/\u5ef6\u8fdf\u52a0\u8f7d"},{"label":"\u65e0\u9650\u6eda\u52a8","permalink":"/blog/tags/\u65e0\u9650\u6eda\u52a8"},{"label":"\u6027\u80fd\u4f18\u5316","permalink":"/blog/tags/\u6027\u80fd\u4f18\u5316"}],"readingTime":9.155,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"slug":"IntersectionObserver","tags":["IntersectionObserver","\u5ef6\u8fdf\u52a0\u8f7d","\u65e0\u9650\u6eda\u52a8","\u6027\u80fd\u4f18\u5316"],"authors":"xiongtao","date":"2022-09-28T00:00:00.000Z"},"prevItem":{"title":"MutationObserver","permalink":"/blog/MutationObserver"},"nextItem":{"title":"Selection\u4e0eRange","permalink":"/blog/selection-and-range"}},"content":"import Tabs from \'@theme/Tabs\';\\nimport TabItem from \'@theme/TabItem\';\\n\\n\u5982\u679c\u6211\u4eec\u9700\u8981\u76d1\u542c\u67d0\u4e2a\u5143\u7d20\u662f\u5426\u51fa\u73b0\u5728\u89c6\u53e3\u4e2d\uff0c\u4e00\u822c\u505a\u6cd5\u662f\u76d1\u542c `scroll` \u4e8b\u4ef6\uff0c\u7136\u540e\u67e5\u8be2\u5143\u7d20\u79bb\u89c6\u53e3\u9876\u90e8\u7684\u8ddd\u79bb\uff0c\u4f46\u662f\u76d1\u542c `scroll` \u4e8b\u4ef6\u5b58\u5728\u6027\u80fd\u95ee\u9898\u3002\\n\\n\u6d4f\u89c8\u5668\u539f\u751f\u63d0\u4f9b\u4e86 `IntersectionObserver` \u76d1\u542c\u5668\uff0c\u53ef\u4ee5\u76d1\u542c\u67d0\u4e2a\u5143\u7d20\u662f\u5426\u51fa\u73b0\u5728\u89c6\u53e3\u4e2d\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u4f7f\u7528\u65b9\u6cd5\\n\\n1. \u9996\u5148\u901a\u8fc7 `new IntersectionObserver(callback, options)` \u521b\u5efa\u4e00\u4e2a\u76d1\u89c6\u5668\uff0c\u5176\u4e2d callback \u662f\u5f53\u76d1\u542c\u7684\u5143\u7d20\u51fa\u73b0\u5728\u89c6\u53e3\u65f6\u6267\u884c\u7684\u56de\u8c03\u51fd\u6570\uff0coptions \u662f\u4e00\u4e9b\u9009\u9879\uff0c\u7a0d\u540e\u4ecb\u7ecd\u3002\\n2. \u7136\u540e\u901a\u8fc7\u76d1\u89c6\u5668\u7684 `observe` \u65b9\u6cd5\u76d1\u542c\u611f\u5174\u8da3\u7684\u5143\u7d20\u3002\\n\\n<Tabs>\\n<TabItem value=\'html\' label=\'HTML\' default>\\n\\n```html\\n<div id=\\"box\\"></div>\\n```\\n\\n</TabItem>\\n<TabItem value=\'css\' label=\'CSS\'>\\n\\n```css\\n#box {\\n  width: 100%;\\n  height: 500px;\\n  background: deeppink;\\n  position: relative;\\n  top: calc(100vh + 100px);\\n}\\n```  \\n\\n</TabItem>\\n\\n<TabItem value=\'js\' label=\'JavaScript\'>\\n\\n```js\\nconst observer = new IntersectionObserver(entries => {\\n    console.log(\'entries: \', entries);\\n});\\n\\nobserver.observe(document.getElementById(\'box\'));\\n```  \\n\\n</TabItem>\\n</Tabs>\\n\\n<video controls src=\\"https://video-obsidian.oss-cn-beijing.aliyuncs.com/IntersectionObserver-base.mp4\\"></video>\\n\\n## options\\n\\n### threshold\\n\\n\u901a\u8fc7 `threshold` \u53ef\u4ee5\u6307\u5b9a\u5143\u7d20\u4e0e\u89c6\u53e3\u76f8\u4ea4\u7684\u6bd4\u4f8b\u6765\u89e6\u53d1\u56de\u8c03\u51fd\u6570\uff0c\u5b83\u7684\u503c\u662f\u4e00\u4e2a\u6570\u5b57\u6216\u4e00\u4e2a\u6570\u7ec4\uff0c\u9ed8\u8ba4\u662f `0`\uff0c\u5373\u5143\u7d20\u4e00\u51fa\u73b0\u5728\u89c6\u53e3\u4e2d\u5c31\u6267\u884c\\n\\n```js\\nconst observer = new IntersectionObserver(entries => {  \\n  console.log(entries);  \\n}, {  \\n  threshold: [0.5, 1]  \\n});\\n```\\n\\n\u4e0a\u8ff0\u4ee3\u7801\u8868\u793a\u5f53\u5143\u7d20\u4e00\u534a\u51fa\u73b0\u5728\u89c6\u53e3\u4e2d\u6216\u8005\u5143\u7d20\u5168\u90e8\u51fa\u73b0\u5728\u89c6\u53e3\u4e2d\u65f6\uff0c\u5747\u4f1a\u6267\u884c\u56de\u8c03\u51fd\u6570\u3002\\n\\n<video controls src=\\"https://video-obsidian.oss-cn-beijing.aliyuncs.com/IntersectionObserver-threshold.mp4\\"></video>\\n\\n### root\\n\\n\u6211\u4eec\u4e0d\u6b62\u53ef\u4ee5\u76d1\u542c\u5143\u7d20\u5728\u89c6\u53e3\u4e2d\u51fa\u73b0\u4e0e\u6d88\u5931\uff0c\u5728\u4efb\u610f\u53ef\u6eda\u52a8\u7684\u5143\u7d20\u4e2d\u5747\u53ef\u4ee5\u76d1\u542c\uff0c\u6211\u4eec\u901a\u8fc7 `root` \u6765\u6307\u5b9a\u6eda\u52a8\u7684\u5bb9\u5668\uff0c`root` \u7684\u9ed8\u8ba4\u503c\u4e3a `null`\uff0c\u5f53\u503c\u4e3a `null`\uff0c\u4f7f\u7528 `document` \u4f5c\u4e3a\u6eda\u52a8\u5bb9\u5668\u3002\\n\\n<Tabs>\\n<TabItem value=\'html\' label=\'HTML\' default>\\n\\n```html\\n<div id=\\"box-container\\">\\n  <div id=\\"box\\"></div>\\n  <div id=\\"box-after\\"></div>\\n</div>\\n```\\n\\n</TabItem>\\n<TabItem value=\'css\' label=\'CSS\'>\\n\\n```css\\nbody {\\n    margin: 0;\\n    padding: 0;\\n}\\n\\n#box-container {\\n    height: 300px;\\n    overflow: auto;\\n    width: 300px;\\n    margin: 100px auto;\\n}\\n\\n#box {\\n    width: 100%;\\n    height: 300px;\\n    background: deepskyblue;\\n    position: relative;\\n    top: 300px;\\n}\\n\\n#box-after {\\n    position: relative;\\n    height: 300px;\\n    top: 300px;\\n}\\n```  \\n\\n</TabItem>\\n\\n<TabItem value=\'js\' label=\'JavaScript\'>\\n\\n```js\\nconst observer = new IntersectionObserver(entries => {\\n  console.log(\'entries: \', entries);\\n}, {\\n  threshold: [0.5, 1],\\n  root: document.getElementById(\'box-container\'),\\n});\\n\\nobserver.observe(document.getElementById(\'box\'));\\n```  \\n\\n</TabItem>\\n</Tabs>\\n\\n<video controls src=\\"https://video-obsidian.oss-cn-beijing.aliyuncs.com/IntersectionObserver-root.mp4\\"></video>\\n\\n### rootMargin\\n\\n`rootMargin `\u53ef\u4ee5\u589e\u5927\u6216\u7f29\u5c0f\u89c6\u53e3\u7684\u533a\u57df\uff0c\u4e0e `margin` \u5c5e\u6027\u7684\u53d6\u503c\u76f8\u4f3c\uff0c\u4e0d\u8fc7\u8fd9\u91cc\u7684 `rootMargin` \u8fd8\u53ef\u4ee5\u4e3a\u8d1f\u503c\u3002\\n\\n<Tabs>\\n<TabItem value=\'html\' label=\'HTML\' default>\\n\\n```html\\n<div id=\\"box\\"></div>\\n```\\n\\n</TabItem>\\n<TabItem value=\'css\' label=\'CSS\'>\\n\\n```css\\n#box {\\n  width: 100%;\\n  height: 500px;\\n  background: deeppink;\\n  position: relative;\\n  top: calc(100vh + 100px);\\n}\\n```  \\n\\n</TabItem>\\n\\n<TabItem value=\'js\' label=\'JavaScript\'>\\n\\n```js\\nconst observer = new IntersectionObserver(entries => {\\n  console.log(entries);\\n}, {\\n  threshold: [0.5, 1],\\n  rootMargin: \'-100px 0px -100px 0px\'\\n});\\n```  \\n\\n</TabItem>\\n</Tabs>\\n\\n\u4e0a\u9762\u8bbe\u7f6e\u4e86 `rootMargin` \u4e3a `-100px 0px 0px -100px`\uff0c\u4f7f\u5f97\u89c6\u53e3\u4e0e\u5143\u7d20\u4ea4\u53c9\u533a\u57df\u7684\u8ba1\u7b97\u4e0d\u518d\u662f\u84dd\u8272\uff0c\u800c\u53d8\u4e3a\u4e86\u9ec4\u8272\\n\\n<img src=\\"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/BoundingRect-\u7b2c-2-\u9875.6z20zf4eop40.png\\" style={{zoom: \'50%\'}} />\\n\\n\u5982\u679c\u5143\u7d20\u4e0b\u9762\u6ca1\u6709\u5176\u4ed6\u7a7a\u95f4\uff0c\u90a3\u4e48\u5143\u7d20\u4e0d\u53ef\u80fd\u5b8c\u5168\u4f4d\u4e8e\u9ec4\u8272\u533a\u57df\u4e2d\uff0c`threshold `\u8bbe\u7f6e\u4e3a `1` \u6ca1\u6709\u610f\u4e49\u3002\\n\\n<video controls src=\\"https://video-obsidian.oss-cn-beijing.aliyuncs.com/IntersectionObserver-rootMargin.mp4\\"></video>\\n\\n\u867d\u7136\u6211\u4eec\u8bbe\u7f6e\u4e86 `threshold: [0.5, 1]` \uff0c\u4f46\u662f\u4ece\u89c6\u9891\u53ef\u4ee5\u770b\u5230\u51fa\u73b0\u548c\u6d88\u5931\u5206\u522b\u53ea\u6253\u5370\u4e86\u4e00\u6b21\u3002\\n\\n## entries\\n\\n\u4f20\u5165\u8be5\u56de\u8c03\u51fd\u6570\u7684\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u56e0\u4e3a\u53ef\u4ee5\u540c\u65f6\u76d1\u542c\u591a\u4e2a\u5bf9\u8c61\uff0c\u591a\u4e2a\u5bf9\u8c61\u53ef\u80fd\u540c\u65f6\u51fa\u73b0\u5728\u89c6\u53e3\u4e2d\uff0c\u56e0\u6b64\u662f\u4e00\u4e2a\u6570\u7ec4\u3002\u6570\u7ec4\u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f\u5bf9\u8c61\uff0c\u5305\u542b\u4ee5\u4e0b\u5b57\u6bb5\uff1a\\n\\n- `intersectionRatio`\uff1a\u51fa\u73b0\u5728\u89c6\u53e3\u4e2d\u7684\u5143\u7d20\u4e0e\u6574\u4f53\u7684\u6bd4\u4f8b\\n- `boundingClientRect`\uff1a\u5143\u7d20\u7684\u5927\u5c0f\u53ca\u4f4d\u7f6e\u4fe1\u606f\\n- `intersectionRect`\uff1a\u5143\u7d20\u51fa\u73b0\u5728\u89c6\u53e3\u4e2d\u8fd9\u90e8\u5206\u7684\u5927\u5c0f\u53ca\u4f4d\u7f6e\u4fe1\u606f\\n- `rootBounds`\uff1aroot \u7684\u5927\u5c0f\u53ca\u4f4d\u7f6e\u4fe1\u606f\\n- `target`\uff1a\u88ab\u76d1\u542c\u7684\u5143\u7d20\\n- `time`\uff1a\u89e6\u53d1\u8be5\u4e8b\u4ef6\u7684\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u9875\u9762\u52a0\u8f7d\u65f6\u4e3a 0\\n- `isIntersecting`\uff1a\u662f\u51fa\u73b0\u8fd8\u662f\u6d88\u5931\\n\\n### intersectionRatio\\n\\n`intersectionRatio` \u8868\u793a\u5143\u7d20\u51fa\u73b0\u5728\u89c6\u53e3\u4e2d\u7684\u90e8\u5206\u4e0e\u5143\u7d20\u6574\u4f53\u7684\u6bd4\u4f8b\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/BoundingRect-\u7b2c 3 \u9875.png\\" alt=\\"BoundingRect-\u7b2c 3 \u9875\\" style={{zoom: \'50%\'}} />\\n\\n### boundingClientRect\u3001intersectionRect \u4e0e rootBounds\\n\\n`boundingClientRect`\u3001`intersectionRect` \u4e0e `rootBounds` \u7684\u503c\u90fd\u662f `DOMRect` \u5bf9\u8c61\uff0c\u63d0\u4f9b\u4e86\u5143\u7d20\u7684\u5927\u5c0f\u4ee5\u53ca\u76f8\u5bf9\u4e8e\u89c6\u53e3\u7684\u4f4d\u7f6e\u5173\u7cfb\uff0c\u5177\u4f53\u53ef\u4ee5\u53c2\u8003 `Element.getBoundingClientRect()` \u65b9\u6cd5\uff0c\u5404\u5b57\u6bb5\u542b\u4e49\u5982\u4e0b\u6240\u793a\u3002\\n\\n<img src=\\"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/BoundingRect-\u7b2c-1-\u9875.61y0smwvqk00.png\\" style={{ zoom: \'50%\'}} />\\n\\n`boundingClientRect` \u8868\u793a\u7684\u662f\u88ab\u76d1\u542c\u7684\u5143\u7d20\u7684\u5927\u5c0f\u4e0e `root` \u7684\u4f4d\u7f6e\u5173\u7cfb\uff0c`intersectionRect` \u8868\u793a\u5143\u7d20\u4e0e\u89c6\u53e3\u4ea4\u53c9\u533a\u57df\u90e8\u5206\u7684\u5927\u5c0f\u4e0e `root` \u7684\u4f4d\u7f6e\u5173\u7cfb\uff0c`rootBounds` \u8868\u793a\u7684\u662f `root` \u7684\u5927\u5c0f\u4e0e\u89c6\u53e3\u7684\u4f4d\u7f6e\u5173\u7cfb\u3002\\n\\n`rootBounds` \u7684\u5927\u5c0f\u53ca\u4f4d\u7f6e\u5747\u4f1a\u6536\u5230 `rootMargin` \u7684\u5f71\u54cd\u3002\\n\\n### target\\n\\n`target` \u8868\u793a\u7684\u5c31\u662f\u88ab\u76d1\u542c\u7684\u5143\u7d20\u3002\\n\\n### isIntersecting\\n\\n```js\\nconst observer = new IntersectionObserver(entries => {  \\n  for (const entry of entries) {  \\n    console.log(entry.isIntersecting);  \\n  }  \\n}, {  \\n  threshold: [0.5],  \\n});  \\n  \\nobserver.observe(document.getElementById(\'box\'));\\n```\\n\\n\u5f53\u88ab\u76d1\u542c\u7684\u5143\u7d20\u8fdb\u5165\u6216\u6d88\u5931\u4e8e\u89c6\u53e3\u4e2d\u65f6\uff0c\u5747\u4f1a\u89e6\u53d1\u56de\u8c03\u51fd\u6570\u7684\u6267\u884c\uff0c`isIntersecting` \u7684\u503c\u53ef\u4ee5\u8868\u793a\u662f\u51fa\u73b0\u5728\u89c6\u53e3\u4e2d\u8fd8\u662f\u6d88\u5931\u5728\u89c6\u53e3\u4e2d\uff0c\u5f53\u503c\u4e3a `true` \u65f6\uff0c\u8868\u793a\u51fa\u73b0\u5728\u89c6\u53e3\u4e2d\uff0c\u4e3a `false` \u8868\u793a\u6d88\u5931\u5728\u89c6\u53e3\u4e2d\u3002\\n\\n<video controls src=\\"https://video-obsidian.oss-cn-beijing.aliyuncs.com/IntersectionObserver-isIntersecting.mp4\\"></video>\\n\\n### time\\n\\n\u53ef\u89c1\u6027\u53d1\u751f\u53d8\u5316\u7684\u65f6\u95f4\uff0c\u662f\u4e00\u4e2a\u9ad8\u7cbe\u5ea6\u65f6\u95f4\u6233\uff0c\u5355\u4f4d\u4e3a\u6beb\u79d2\u3002\\n\\n## \u6848\u4f8b\\n\\n### \u56fe\u7247\u61d2\u52a0\u8f7d\\n\\n\u5982\u679c\u4e00\u4e2a\u9875\u9762\u4e2d\u56fe\u7247\u7684\u6570\u91cf\u592a\u591a\uff0c\u4f1a\u5f71\u54cd\u9875\u9762\u7684\u52a0\u8f7d\u901f\u5ea6\uff0c\u5bf9\u7f51\u7ad9\u6027\u80fd\u9020\u6210\u5f71\u54cd\uff0c\u6211\u4eec\u53ef\u4ee5\u5f53\u56fe\u7247\u51fa\u73b0\u5728\u89c6\u53e3\u4e2d\u65f6\u624d\u5bf9\u56fe\u7247\u8fdb\u884c\u52a0\u8f7d\uff0c\u4f20\u7edf\u7684\u65b9\u6cd5\u9700\u8981\u76d1\u542c `scroll` \u4e8b\u4ef6\uff0c\u7136\u540e\u5224\u65ad\u56fe\u7247\u662f\u5426\u5728\u89c6\u53e3\u4e2d\u3002\u4f46\u662f `scroll` \u89e6\u53d1\u7684\u5341\u5206\u9891\u7e41\uff0c\u5177\u6709\u6027\u80fd\u95ee\u9898\u3002\u73b0\u5728\u53ef\u4ee5\u901a\u8fc7 `IntersectionObserver` \u6765\u5b9e\u73b0\uff0c\u5e76\u4e14\u6709\u8f83\u597d\u7684\u6027\u80fd\u3002\\n\\n<Tabs>\\n<TabItem value=\'html\' label=\'HTML\' default>\\n\\n```html\\n<div id=\\"before\\"></div>\\n<div id=\\"image-list\\">\\n  <img class=\\"lazy-image\\" data-src=\\"images/01.jpg\\" />\\n  <img class=\\"lazy-image\\" data-src=\\"images/02.jpg\\" />\\n  <img class=\\"lazy-image\\" data-src=\\"images/03.jpg\\" />\\n  <img class=\\"lazy-image\\" data-src=\\"images/04.jpg\\" />\\n</div>\\n```\\n\\n</TabItem>\\n<TabItem value=\'css\' label=\'CSS\'>\\n\\n```css\\n#before {\\n  height: calc(100vh + 10px);\\n}\\n\\n#image-list {\\n  display: flex;\\n  justify-content: space-between;\\n  margin: 100px 50px;\\n}\\n\\n#image-list .lazy-image {\\n  width: 200px;\\n  height: 200px;\\n  object-fit: cover;\\n}\\n```  \\n\\n</TabItem>\\n\\n<TabItem value=\'js\' label=\'JavaScript\'>\\n\\n```js\\nconst observer = new IntersectionObserver(entries => {\\n  entries.forEach(entry => {\\n    // \u5f53\u5411\u4e0b\u6ed1\u52a8\u7684\u65f6\u5019\\n    if (entry.isIntersecting) {\\n      const img = entry.target;\\n      const src = img.dataset.src;\\n      img.src = src;\\n      // \u53d6\u6d88\u76d1\u542c\\n      observer.unobserve(img);\\n    }\\n  });\\n});\\n\\nconst lazyImages = document.getElementsByClassName(\'lazy-image\');\\nfor (let lazyImage of lazyImages) {\\n  observer.observe(lazyImage);\\n}\\n```  \\n\\n</TabItem>\\n</Tabs>\\n\\n\u6211\u4eec\u5c06\u56fe\u7247\u7684\u94fe\u63a5\u8bbe\u7f6e\u5728\u81ea\u5b9a\u4e49\u5c5e\u6027 `data-src` \u4e0a\uff0c\u800c\u4e0d\u662f `src` \u5c5e\u6027\uff0c\u7136\u540e\u6211\u4eec\u76d1\u542c\u8fd9\u4e9b\u56fe\u50cf\uff0c\u5f53\u56fe\u50cf\u51fa\u73b0\u5728\u89c6\u53e3\u4e2d\u65f6\uff0c\u6211\u4eec\u83b7\u53d6\u56fe\u50cf\u7684 `data-src` \u5c5e\u6027\uff0c\u5e76\u8bbe\u7f6e\u5230 `src` \u5c5e\u6027\u4e0a\uff0c\u5e76\u4e14\u53d6\u6d88\u76d1\u542c\u5bf9\u8c61\u3002\\n\\n<video controls src=\\"https://video-obsidian.oss-cn-beijing.aliyuncs.com/IntersectionObserver-%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD.mp4\\"></video>\\n\\n### \u65e0\u9650\u6eda\u52a8\\n\\n\u5047\u8bbe\u6709\u4e00\u4e2a\u5546\u54c1\u5c55\u793a\u9875\uff0c\u56e0\u4e3a\u5546\u54c1\u592a\u591a\uff0c\u6211\u4eec\u4e0d\u4f1a\u4e00\u6b21\u6027\u5168\u90e8\u8bf7\u6c42\uff0c\u800c\u662f\u5f53\u7528\u6237\u5411\u4e0b\u6d4f\u89c8\u67e5\u770b\u5546\u54c1\u65f6\uff0c\u5f53\u5230\u8fbe\u9875\u9762\u5e95\u90e8\u65f6\uff0c\u8bf7\u6c42\u66f4\u591a\u7684\u5546\u54c1\u8fdb\u884c\u5c55\u793a\u3002\u4e00\u822c\u7684\u505a\u6cd5\u662f\u76d1\u542c `scroll` \u4e8b\u4ef6\uff0c\u67e5\u8be2\u6eda\u52a8\u6761\u79bb\u5e95\u90e8\u7684\u8ddd\u79bb\uff0c\u5f53\u5c0f\u4e8e\u4e00\u5b9a\u9608\u503c\u65f6\uff0c\u81ea\u52a8\u7684\u8bf7\u6c42\u6570\u636e\u52a0\u8f7d\u3002\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 `IntersectionObserver` \u83b7\u5f97\u66f4\u597d\u7684\u6027\u80fd\u3002\\n\\n\u6211\u4eec\u5728\u5546\u54c1\u7684\u4e0b\u9762\u653e\u7f6e\u4e00\u4e2a\u5143\u7d20\uff0c\u5f53\u6ed1\u5230\u5e95\u90e8\u65f6\uff0c\u8be5\u5143\u7d20\u51fa\u73b0\u5728\u89c6\u53e3\u4e2d\uff0c\u6b64\u65f6\u52a0\u8f7d\u66f4\u591a\u7684\u5546\u54c1\u3002\\n\\n<Tabs>\\n<TabItem value=\'html\' label=\'HTML\' default>\\n\\n```html\\n<div id=\\"goods\\">\\n  <div class=\\"good\\"></div>\\n  <div class=\\"good\\"></div>\\n  <div class=\\"good\\"></div>\\n  <div class=\\"good\\"></div>\\n  <div class=\\"good\\"></div>\\n  <div class=\\"good\\"></div>\\n  <div class=\\"good\\"></div>\\n  <div class=\\"good\\"></div>\\n  <div class=\\"good\\"></div>\\n  <div class=\\"good\\"></div>\\n</div>\\n<div id=\\"footer\\"></div>\\n```\\n\\n</TabItem>\\n<TabItem value=\'css\' label=\'CSS\'>\\n\\n```css\\n#goods {\\n  width: 320px;\\n  display: grid;\\n  grid-template-columns: 1fr 1fr;\\n  gap: 20px;\\n  margin: 20px auto;\\n}\\n\\n.good {\\n  height: 150px;\\n  background: deeppink;\\n}\\n\\n#footer {\\n  background: transparent;\\n  height: 10px;\\n}\\n```  \\n\\n</TabItem>\\n\\n<TabItem value=\'js\' label=\'JavaScript\'>\\n\\n```js\\nconst observer = new IntersectionObserver(entries => {\\n  entries.forEach(entry => {\\n    if (entry.isIntersecting) {\\n      loadMore(10);\\n    }\\n  });\\n}, {\\n  // \u6269\u5c55\u89c6\u53e3\u7684\u5e95\u90e8\u533a\u57df\uff0c\u63d0\u524d\u52a0\u8f7d\\n  rootMargin: \'0px 0px 100px 0px\'\\n});\\n\\nconst loadMore = (n) => {\\n  let appendedGoods = \'\';\\n  for (let i = 0; i < n; i++) {\\n    appendedGoods += \'<div class=\\"good\\"></div>\'\\n  }\\n  const goods = document.getElementById(\'goods\');\\n  goods.innerHTML = goods.innerHTML + appendedGoods;\\n}\\n\\nconst footer = document.getElementById(\'footer\');\\nobserver.observe(footer);\\n```  \\n\\n</TabItem>\\n\\n</Tabs>\\n\\n\\n<video controls src=\\"https://video-obsidian.oss-cn-beijing.aliyuncs.com/IntersectionObserver-%E6%97%A0%E9%99%90%E5%8A%A0%E8%BD%BD.mp4\\"></video>\\n\\n:::info Info\\nIntersectionObserver API \u662f\u5f02\u6b65\u7684\uff0c\u4e0d\u968f\u7740\u76ee\u6807\u5143\u7d20\u7684\u6eda\u52a8\u540c\u6b65\u89e6\u53d1\u3002\\n:::"},{"id":"selection-and-range","metadata":{"permalink":"/blog/selection-and-range","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2022-09-23-Selection\u4e0eRange.mdx","source":"@site/blog/2022-09-23-Selection\u4e0eRange.mdx","title":"Selection\u4e0eRange","description":"\u672c\u6587\u53c2\u8003//segmentfault.com/a/1190000041457245","date":"2022-09-23T00:00:00.000Z","formattedDate":"2022\u5e749\u670823\u65e5","tags":[{"label":"\u9009\u533a","permalink":"/blog/tags/\u9009\u533a"},{"label":"Selection","permalink":"/blog/tags/selection"},{"label":"Range","permalink":"/blog/tags/range"}],"readingTime":7.49,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"slug":"selection-and-range","authors":"xiongtao","date":"2022-09-23T00:00:00.000Z","tags":["\u9009\u533a","Selection","Range"]},"prevItem":{"title":"IntersectionObserver","permalink":"/blog/IntersectionObserver"},"nextItem":{"title":"\u4f7f\u7528CSS\u52a8\u753b\u53d6\u4ee3\u5b9a\u65f6\u5668","permalink":"/blog/css-animation-timer"}},"content":":::info\\n\\n\u672c\u6587\u53c2\u8003: https://segmentfault.com/a/1190000041457245\\n\\n:::\\n\\n\\n## \u5149\u6807\u4e0e\u9009\u533a\\n\\n\u5149\u6807\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u9009\u533a\u3002\\n\\n1. `Selection` \u5bf9\u8c61\u8868\u793a\u7528\u6237\u9009\u62e9\u7684\u6587\u672c\u8303\u56f4\u6216\u63d2\u5165\u7b26\u53f7\u7684\u5f53\u524d\u4f4d\u7f6e\u3002\u5b83\u4ee3\u8868\u9875\u9762\u4e2d\u7684\u6587\u672c\u9009\u533a\uff0c\u53ef\u80fd\u6a2a\u8de8\u591a\u4e2a\u5143\u7d20\u3002\u901a\u5e38\u7531\u7528\u6237\u62d6\u62fd\u9f20\u6807\u7ecf\u8fc7\u6587\u5b57\u800c\u4ea7\u751f\u3002\\n2. `Range`\u5bf9\u8c61\u8868\u793a\u5305\u542b\u8282\u70b9\u548c\u90e8\u5206\u6587\u672c\u8282\u70b9\u7684\u6587\u6863\u7247\u6bb5\u3002\u901a\u8fc7 `selection` \u5bf9\u8c61\u83b7\u5f97\u7684 `range` \u5bf9\u8c61\u624d\u662f\u6211\u4eec\u64cd\u4f5c\u5149\u6807\u7684\u91cd\u70b9\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n```js\\nconst selection = window.getSelection();\\n```\\n\\n\u901a\u5e38\u60c5\u51b5\u4e0b\u6211\u4eec\u4e0d\u4f1a\u76f4\u63a5\u64cd\u4f5c `selection` \u5bf9\u8c61\uff0c\u800c\u662f\u9700\u8981\u64cd\u4f5c\u7528 `seleciton` \u5bf9\u8c61\u6240\u5bf9\u5e94\u7684\u7528\u6237\u9009\u62e9\u7684 `range` \u3002\\n\\n```js\\nconst range = selection.getRangeAt(0);\\n```\\n\\n**\u53ef\u80fd\u5b58\u5728\u591a\u4e2a\u9009\u533a\uff0c\u76ee\u524d\u53ea\u6709 Firefox \u652f\u6301\u591a\u9009\u533a\u3002**\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\u90fd\u4e0d\u9700\u8981\u8003\u8651\u591a\u9009\u533a\u7684\u60c5\u51b5\u3002\\n\\n\\nRange \u5bf9\u8c61\u4e0a\u6709\u4e00\u4e2a\u5c5e\u6027\uff0c`collapsed`\uff0c\u8868\u793a\u8d77\u70b9\u548c\u7ec8\u70b9\u662f\u5426\u91cd\u53e0\uff0c\u5f53 `collapsed` \u4e3a `true` \u65f6\uff0c\u9009\u4e2d\u533a\u57df\u88ab\u538b\u7f29\u6210\u4e00\u4e2a\u70b9\uff0c\u5bf9\u4e8e\u666e\u901a\u7684\u5143\u7d20\uff0c\u53ef\u80fd\u4ec0\u4e48\u90fd\u770b\u4e0d\u5230\uff0c\u5982\u679c\u662f\u5728\u53ef\u7f16\u8f91\u5143\u7d20\u4e0a\uff0c\u90a3\u8fd9\u4e2a\u88ab\u538b\u7f29\u7684\u70b9\u5c31\u53d8\u6210\u4e86\u53ef\u4ee5\u95ea\u70c1\u7684\u5149\u6807\u3002 \\n\\n## \u53ef\u7f16\u8f91\u5143\u7d20\\n\\n\u9009\u533a\u548c\u5143\u7d20\u662f\u5426\u53ef\u7f16\u8f91\u5e76\u6ca1\u6709\u76f4\u63a5\u5173\u7cfb\uff0c\u552f\u4e00\u7684\u533a\u522b\u5c31\u662f\uff0c\u5728\u53ef\u7f16\u8f91\u5143\u7d20\u4e0a\u53ef\u4ee5\u770b\u5230\u5149\u6807\u3002\\n\\n```html\\n<input type=\\"text\\">\\n<textarea></textarea>\\n<div contenteditable=\\"true\\"></div>\\n```\\n\\n```css\\ndiv{\\n    -webkit-user-modify: read-write;\\n}\\n```\\n\\n\u8fd9\u4e24\u79cd\u6709\u4ec0\u4e48\u533a\u522b\u5462\uff1f\u7b80\u5355\u6765\u8bf4\uff0c\u8868\u5355\u5143\u7d20\u66f4\u5bb9\u6613\u63a7\u5236\uff0c\u6d4f\u89c8\u5668\u63d0\u4f9b\u4e86\u66f4\u76f4\u89c2\u7684 API \u6765\u64cd\u63a7\u9009\u533a\u3002\\n\\n## input \u4e0e textarea\\n\\n```js\\ninputElement.setSelectionRange(selectionStart, selectionEnd [, selectionDirection]);\\n```\\n\\n\u9009\u62e9\u5168\u90e8 \\n\\n```js\\ntxt.select();\\ntxt.focus();\\n```\\n\\n\u66ff\u6362\u5185\u5bb9\\n\\n```js\\ninputElement.setRangeText(replacement);\\ninputElement.setRangeText(replacement, start, end [, selectMode]);\\n```\\n\\n- replacement\uff1a\u66ff\u6362\u7684\u6587\u672c\\n- start\uff1a\u8d77\u59cb\u4f4d\u7f6e\\n- end\uff1a\u7ec8\u6b62\u4f4d\u7f6e\\n- selectMode\uff1a\u66ff\u6362\u540e\u7684\u9009\u53d6\u72b6\u6001\\n  - preserve\uff1a\u9ed8\u8ba4\u503c\uff0c\u4fdd\u7559\u9009\u533a\\n\\n\u5047\u8bbe\u624b\u52a8\u9009\u4e2d\u7684\u533a\u57df\u662f `[9,10]`\uff0c\u5982\u679c\u5728 `[1,2]` \u7684\u4f4d\u7f6e\u66ff\u6362\u65b0\u5185\u5bb9\uff0c\u90a3\u4e48\u9009\u533a\u4ecd\u7136\u5728\u4e4b\u524d\u4f4d\u7f6e\u3002\u5982\u679c\u5728 `[8,11]` \u7684\u4f4d\u7f6e\u66ff\u6362\u65b0\u5185\u5bb9\uff0c\u7531\u4e8e\u65b0\u5185\u5bb9\u7684\u4f4d\u7f6e\u8986\u76d6\u4e86\u4e4b\u524d\u7684\u9009\u533a\uff0c\u539f\u9009\u533a\u4e5f\u5c31\u4e0d\u5b58\u5728\u4e86\uff0c\u90a3\u4e48\u66ff\u6362\u5b8c\u4e4b\u540e\uff0c\u9009\u533a\u4f1a\u9009\u4e2d\u521a\u521a\u63d2\u5165\u7684\u65b0\u5185\u5bb9\u3002\\n\\n## \u666e\u901a\u5143\u7d20\u7684\u9009\u533a\u64cd\u4f5c\\n\\n\u9700\u8981\u7528\u5230\u524d\u9762\u63d0\u5230\u7684 `Selection` \u548c `Range` \u76f8\u5173\u65b9\u6cd5\u3002\\n\\n### \u4e3b\u52a8\u9009\u62e9\u67d0\u533a\u57df\\n\\n\u9700\u521b\u5efa\u4e00\u4e2a Range \u5bf9\u8c61\uff0c\u8bbe\u7f6e\u8303\u56f4\uff0c\u7136\u540e\u6dfb\u52a0\u5230 `Selection` \u5bf9\u8c61\u4e2d\\n\\n```javascript\\nrange.setStart(startNode, startOffset);\\nrange.setEnd(endNode, endOffset);\\n```\\n\\n\u56e0\u4e3a\u666e\u901a\u5143\u7d20\u53ef\u80fd\u5305\u542b\u591a\u4e2a\u5143\u7d20\uff0c\u6240\u4ee5\u9009\u533a\u521b\u5efa\u6bd4\u8868\u5355\u590d\u6742\u3002\\n\\n```js\\n// \u79fb\u9664\u6240\u6709\u9009\u533a\\nselection.removeAllRanges()\\n// \u6dfb\u52a0\u9009\u533a\\nselection.addRange(range)\\n```\\n\\n> \u5982\u679c\u8d77\u59cb\u8282\u70b9\u7c7b\u578b\u662f Text \uff0c Comment , or CDATASection \u4e4b\u4e00, \u90a3\u4e48 startOffset \u6307\u7684\u662f\u4ece\u8d77\u59cb\u8282\u70b9\u7b97\u8d77\u5b57\u7b26\u7684\u504f\u79fb\u91cf\u3002 \u5bf9\u4e8e\u5176\u4ed6 Node \u7c7b\u578b\u8282\u70b9\uff0c startOffset \u662f\u6307\u4ece\u8d77\u59cb\u7ed3\u70b9\u5f00\u59cb\u7b97\u8d77\u5b50\u8282\u70b9\u7684\u504f\u79fb\u91cf\u3002\\n\\n### \u9009\u62e9\u8282\u70b9\\n\\n```javascript\\n// \u9009\u4e2d\u8282\u70b9\u5185\u5bb9\uff0c\u5e76\u9009\u4e2d\u6807\u7b7e\\nrange.selectNode();\\n// \u53ea\u9009\u4e2d\u8282\u70b9\u5185\u7684Text\u5185\u5bb9\uff0c\u4e0d\u9009\u4e2d\u6807\u7b7e\\nrange.selectNodeContents();\\n```\\n\\n```info\\n\u6709\u70b9\u50cf innerHTML \u4e0e outerHTML \u7684\u5173\u7cfb\u3002\\n```\\n\\n### \u76f4\u63a5\u6839\u636e\u7236\u5143\u7d20\u9009\u62e9\u6587\u672c\\n\\n\u5982\u4f55\u901a\u8fc7\u76f8\u5bf9\u5916\u5c42\u7684\u504f\u79fb\u91cf\u83b7\u53d6\u5230\u6700\u91cc\u5c42\u5143\u7d20\u7684\u4fe1\u606f\u5462\uff1f\u6574\u4f53\u601d\u8def\u5c31\u662f**\u6df1\u5ea6\u4f18\u5148\u904d\u5386**\u6807\u7b7e\uff0c\u53d6\u5f97\u6240\u6709\u7684 TextNode\uff0c\u5e76\u5f97\u5230\u6bcf\u4e2a TextNode \u6240\u5728\u7684\u533a\u95f4\u3002\u7136\u540e\u627e\u5230\u8d77\u59cb\u70b9\u548c\u7ec8\u6b62\u70b9\u6240\u5728\u7684\u533a\u95f4\uff0c\u8fd4\u56de\u8be5\u533a\u95f4\u7684 TextNode \u4ee5\u53ca\u76f8\u5e94\u7684\u504f\u79fb\u91cf\u3002\\n\\n```js\\nconst getNodeAndOffset = (ele, start = 0, end = 0) => {\\n  const txtList = [];\\n  const dfs = (childNodes) => {\\n    [...childNodes].forEach(node => {\\n      if (node.nodeName === \'#text\') {\\n        txtList.push(node);\\n      } else {\\n        dfs(node.childNodes);\\n      }\\n    })\\n  }\\n  dfs(ele.childNodes);\\n  const clips = txtList.reduce((arr, el, index) => {\\n    const endPosition = el.textContent.length + (index > 0 ? arr[index - 1][2] : 0);\\n    const startPosition = endPosition - el.textContent.length;\\n    arr.push([el, startPosition, endPosition]);\\n    return arr;\\n  }, []);\\n  \\n  const startNode = clips.find(item => start >= item[1] && start < item[2]);\\n  // \u5982\u679c end \u8d85\u8fc7\u4e86\u957f\u5ea6\u8981\u4e0d\u8981\u76f4\u63a5\u8bbe\u7f6e\u4e3a\u672b\u5c3e\\n  const endNode = clips.find(item => end >= item[1] && end < item[2]);\\n  // startNode \u548c endNode \u6ca1\u6709\u627e\u5230\u600e\u4e48\u529e\\n  return [startNode[0], start - startNode[1], endNode[0], end - endNode[1]];\\n}\\n```\\n\\n### \u8fd8\u539f\u9009\u533a\\n\\n```html\\n<div id=\\"txt\\" contenteditable=\\"true\\">\\n  \u5929\u4e0d\u751f\u592b\u5b50\uff0c\u4e07\u53e4\u5982\u957f\u591c\uff01\\n</div>\\n<button id=\\"restore\\">\u8fd8\u539f\u9009\u533a</button>\\n```\\n\\n\u65b9\u6848\u4e00\uff0c\u4fdd\u5b58 Range \u5bf9\u8c61\uff0c\u7136\u540e\u6062\u590d\uff0c\u4f46\u662f\u5f53\u5185\u5bb9\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u539f\u5148\u7684\u9009\u533a\u5c31\u5931\u6548\u4e86\\n\\n```js\\nlet lastRange = null;\\ntxt.addEventListener(\'mouseup\', () => {\\n  const selection = document.getSelection();\\n  lastRange = selection.getRangeAt(0);\\n})\\nconst restore = document.getElementById(\'restore\');\\nrestore.addEventListener(\'click\', () => {\\n  const selection = document.getSelection();\\n  selection.removeAllRanges();\\n  selection.addRange(lastRange);\\n});\\n```\\n\\n\u65b9\u6848\u4e8c\uff0c\u83b7\u5f97\u7edd\u5bf9\u504f\u79fb\u91cf\uff0c\u5373\u4f7f\u5185\u5bb9\u53d1\u751f\u6539\u53d8\uff0c\u4e5f\u4e0d\u5f71\u54cd\u3002\u83b7\u5f97\u7edd\u5bf9\u504f\u79fb\u91cf\u7684\u601d\u8def\u8fd8\u662f\u5148\u83b7\u5f97\u6240\u6709\u6587\u672c\u5143\u7d20\u7684\u533a\u95f4\uff0c\u7136\u540e\u627e\u5230\u88ab\u9009\u4e2d\u7684\u8d77\u59cb\u8282\u70b9\u548c\u7ed3\u675f\u8282\u70b9\uff0c\u83b7\u5f97\u5176\u8d77\u59cb\u504f\u79fb\u548c\u7ed3\u675f\u504f\u79fb\uff0c\u5206\u522b\u52a0\u4e0a\u8282\u70b9\u6240\u5728\u533a\u95f4\u7684\u8d77\u59cb\u503c\u5373\u53ef\u3002\\n\\n```js\\nconst getRangeOffset = ele => {\\n  const txtList = [];\\n  const dfs = (childNodes) => {\\n    [...childNodes].forEach(node => {\\n      if (node.nodeName === \'#text\') {\\n        txtList.push(node);\\n      } else {\\n        dfs(node.childNodes);\\n      }\\n    })\\n  }\\n  dfs(ele.childNodes);\\n  const clips = txtList.reduce((arr, el, index) => {\\n    const endPosition = el.textContent.length + (index > 0 ? arr[index - 1][2] : 0);\\n    const startPosition = endPosition - el.textContent.length;\\n    arr.push([el, startPosition, endPosition]);\\n    return arr;\\n  }, []);\\n  const selection = document.getSelection();\\n  const range = selection.getRangeAt(0);\\n  const startNode = clips.find(item => range.startContainer === item[0]);\\n  const endNode = clips.find(item => range.endContainer === item[0]);\\n  return [startNode[1] + range.startOffset, endNode[1] + range.endOffset];\\n}\\n```\\n\\n```js\\nlet lastRange = {};\\ntxt.addEventListener(\'mouseup\', () => {\\n  const [startOffset, endOffset] = getRangeOffset(txt);\\n  lastRange = {\\n    start: startOffset,\\n    end: endOffset\\n  }\\n})\\nconst restore = document.getElementById(\'restore\');\\nrestore.addEventListener(\'click\', () => {\\n  const selection = document.getSelection();\\n  const range = document.createRange();\\n  const [startNode, startPosition, endNode, endPosition] = getNodeAndOffset(txt, lastRange.start, lastRange.end);\\n  range.setStart(startNode, startPosition);\\n  range.setEnd(endNode, endPosition);\\n  selection.removeAllRanges();\\n  selection.addRange(range);\\n});\\n```\\n\\n### \u63d2\u5165\u5185\u5bb9\\n\\n`range.insertNode()` \u65e2\u53ef\u4ee5\u63d2\u5165\u6587\u672c\u5185\u5bb9\uff0c\u4e5f\u53ef\u4ee5\u63d2\u5165\u6807\u7b7e\u3002\u5b83\u4e0d\u4f1a\u66ff\u6362\u5df2\u9009\u62e9\u7684\u5185\u5bb9\uff0c\u800c\u662f\u5728\u8d77\u70b9\u5904\u63d2\u5165\u4e00\u4e2a\u8282\u70b9\u3002\u5982\u679c\u8981\u66ff\u6362\uff0c\u53ef\u4ee5\u5148\u5220\u9664\u5728\u6dfb\u52a0\uff0c\u901a\u8fc7 `range.deleteContents` \u8fdb\u884c\u5220\u9664\u3002\\n\\n```js\\nconst textNode = document.createTextNode(\'\u65b0\u5185\u5bb9\');\\nrange.deleteContents();\\nrange.insertNode(textNode);\\n```\\n\\n```js\\nconst mark = document.createElement(\'mark\');\\nmark.textContent = \'\u65b0\u5185\u5bb9\';\\nrange.insertNode(mark);\\n```\\n\\n### \u7ed9\u9009\u4e2d\u5185\u5bb9\u5305\u88f9\u6807\u7b7e\\n\\n`range.surroundContents` \u7ed9\u9009\u533a\u5305\u88f9\u4e00\u5c42\u6807\u7b7e\\n\\n```js\\nconst mark = document.createElement(\'mark\');\\nrange.surroundContents(mark);\\n```\\n\\n\u4f46\u662f\u5f53\u9009\u533a\u6a2a\u8de8\u591a\u4e2a\u6807\u7b7e\u65f6\uff0c\u5c31\u4f1a\u53d1\u751f\u9519\u8bef\u3002\u53e6\u4e00\u79cd\u65b9\u6848\uff0c\u901a\u8fc7 `range.extractContents` \u63d0\u53d6\u9009\u533a\u5185\u5bb9\uff0c\u662f\u4e00\u4e2a `DocumentFragment`\uff0c\u7136\u540e\u63d2\u5165\u65b0\u5185\u5bb9\\n\\n```js\\nconst mark = document.createElement(\'mark\');\\nmark.append(range.extractContents());\\nrange.insertNode(mark);\\n```"},{"id":"css-animation-timer","metadata":{"permalink":"/blog/css-animation-timer","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2022-09-15-\u4f7f\u7528CSS\u52a8\u753b\u53d6\u4ee3\u5b9a\u65f6\u5668.mdx","source":"@site/blog/2022-09-15-\u4f7f\u7528CSS\u52a8\u753b\u53d6\u4ee3\u5b9a\u65f6\u5668.mdx","title":"\u4f7f\u7528CSS\u52a8\u753b\u53d6\u4ee3\u5b9a\u65f6\u5668","description":"\u8be5\u7b14\u8bb0\u662f\u6765\u6e90\u4e8e\u516c\u4f17\u53f7\u6587\u7ae0\u8fd8\u5728\u7528\u5b9a\u65f6\u5668\u5417\uff1f\u501f\u52a9 CSS \u6765\u76d1\u542c\u4e8b\u4ef6\u3002","date":"2022-09-15T00:00:00.000Z","formattedDate":"2022\u5e749\u670815\u65e5","tags":[{"label":"CSS","permalink":"/blog/tags/css"},{"label":"\u52a8\u753b","permalink":"/blog/tags/\u52a8\u753b"},{"label":"\u5b9a\u65f6\u5668","permalink":"/blog/tags/\u5b9a\u65f6\u5668"},{"label":"\u795e\u6765\u4e4b\u7b14","permalink":"/blog/tags/\u795e\u6765\u4e4b\u7b14"}],"readingTime":2.305,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"slug":"css-animation-timer","authors":"xiongtao","date":"2022-09-15T00:00:00.000Z","tags":["CSS","\u52a8\u753b","\u5b9a\u65f6\u5668","\u795e\u6765\u4e4b\u7b14"]},"prevItem":{"title":"Selection\u4e0eRange","permalink":"/blog/selection-and-range"},"nextItem":{"title":"encodeURI\u4e0eencodeURIComponent","permalink":"/blog/encodeURI\u4e0eencodeURIComponent"}},"content":":::info\\n\\n\u8be5\u7b14\u8bb0\u662f\u6765\u6e90\u4e8e\u516c\u4f17\u53f7\u6587\u7ae0[\u8fd8\u5728\u7528\u5b9a\u65f6\u5668\u5417\uff1f\u501f\u52a9 CSS \u6765\u76d1\u542c\u4e8b\u4ef6](https://mp.weixin.qq.com/s/N25KcGneKPgvBa8zBownlw)\u3002\\n\\n:::\\n\\n## hover\u5ef6\u65f6\u89e6\u53d1\\n\\n### \u4e00\u822c\u65b9\u6cd5\\n\\n\u9f20\u6807\u8fdb\u5165\u65f6\u5f00\u59cb\u5b9a\u65f6\u5668\\n\\n```js\\nvar timer = null\\nel.addEventListener(\'mouseover\', () => {\\n  timer && clearTimeout(timer)\\n  timer = setTimeout(() => {\\n    // \u5177\u4f53\u903b\u8f91\\n  }, 1000)\\n})\\n```\\n\\n\u9f20\u6807\u79bb\u5f00\u65f6\u53d6\u6d88\u5b9a\u65f6\u5668\\n\\n```js\\nel.addEventListener(\'mouseout\', () => {\\n  timer && clearTimeout(timer)\\n})\\n```\\n\\n\x3c!--truncate--\x3e\\n\\n### \u5229\u7528\u52a8\u753b\u7ed3\u675f\u4e8b\u4ef6\\n\\n\u4e3a\u5143\u7d20\u6dfb\u52a0\u5ef6\u65f6\u52a8\u753b\\n\\n```css\\nbutton:hover{\\n  opacity: 0.999; /*\u65e0\u5173\u7d27\u8981\u7684\u6837\u5f0f*/\\n  transition: 0s 1s opacity; /*\u5ef6\u65f6 1s */\\n}\\n```\\n\\n\u76d1\u542c\u52a8\u753b\u7ed3\u675f\u4e8b\u4ef6\\n\\n```js\\nel.addEventListener(\'transitionend\', () => {\\n  // \u5177\u4f53\u903b\u8f91\\n})\\n```\\n\\n\u65e0\u9700\u5b9a\u65f6\u5668\uff0c\u4e5f\u65e0\u9700\u53d6\u6d88\uff0c\u66f4\u65e0\u9700\u8003\u8651 dom \u7ed3\u6784\uff0c\u5b8c\u7f8e\u5b9e\u73b0\u3002\\n\\n## \u957f\u6309\u89e6\u53d1\\n\\n### \u4e00\u822c\u65b9\u6cd5\\n\\n\u501f\u52a9\u5b9a\u65f6\u5668\uff0c\u6309\u4e0b\u65f6\u5f00\u542f\u5b9a\u65f6\u5668\uff0c\u79bb\u5f00\u65f6\u53d6\u6d88\u5b9a\u65f6\u5668\\n\\n```js\\n\\nel.onmousedown = function(){\\n    this.timer && clearTimeout(this.timer);\\n    this.timer = settimeout(function(){\\n        //\u4e1a\u52a1\u4ee3\u7801\\n    },1000)\\n}\\nel.onmouseup = function(){\\n    this.timer && clearTimeout(this.timer);\\n}\\n```\\n\\n### \u5229\u7528\u52a8\u753b\u7ed3\u675f\u4e8b\u4ef6\\n\\n\u4e3a `:active` \u4f2a\u7c7b\u6dfb\u52a0\u5ef6\u65f6\u52a8\u753b\\n\\n```css\\nbutton:hover:active{\\n  opacity: .999; /*\u65e0\u5173\u7d27\u8981\u7684\u6837\u5f0f*/\\n  transition: opacity 1s; /*\u5ef6\u65f6 1s */\\n}\\n```\\n\\n\u7136\u540e\u518d\u76d1\u542c `transitionend` \u4e8b\u4ef6\\n\\n```js\\nel.addEventListener(\'transitionend\', () => {\\n  // \u5177\u4f53\u903b\u8f91\\n})\\n```\\n\\n## \u8f6e\u64ad\u548c\u6682\u505c\\n\\n### \u4e00\u822c\u65b9\u6cd5\\n\\n\u9f20\u6807\u653e\u4e0a\u53bb\u65f6\u6682\u505c\uff0c\u9f20\u6807\u79bb\u5f00\u65f6\u81ea\u52a8\u6eda\u52a8\uff0c\u501f\u52a9\u5b9a\u65f6\u5668 `setInterveal` \u8fdb\u884c\u8f6e\u64ad\uff0c\u9f20\u6807\u653e\u4e0a\u53bb\u65f6\u6e05\u9664\u5b9a\u65f6\u5668\uff0c\u9f20\u6807\u79bb\u5f00\u65f6\u65b0\u5efa\u5b9a\u65f6\u5668\\n\\n```js\\nfunction autoPlay(){\\n  timer && clearInterval(timer)\\n  timer = setInterval(function(){\\n    // \u8f6e\u64ad\u903b\u8f91\\n  }, 1000)\\n}\\nautoPlay()\\nview.onmouseover = function(){\\n    timer && clearInterval(timer)\\n}\\nel.onmouseout = function(){\\n    autoPlay()\\n}\\n```\\n\\n## animationiteration \u4e8b\u4ef6\\n\\n\u8bbe\u7f6e\u52a8\u753b\u4e3a\u65e0\u9650\u6b21\u6570\uff0c\u6bcf\u6b21\u52a8\u753b\u5f00\u59cb\u65f6\u90fd\u4f1a\u89e6\u53d1 animationiteration \u4e8b\u4ef6\uff0c\u9f20\u6807\u653e\u4e0a\u53bb\u65f6\u52a8\u753b\u6682\u505c\\n\\n```css\\n.view {\\n  animation: scroll 1s infinite; /*\u6bcf1s\u52a8\u753b\uff0c\u65e0\u9650\u5faa\u73af*/\\n}\\n.view:hover{\\n  animation-play-state: paused; /*hover\u6682\u505c*/\\n}\\n@keyframes scroll {\\n  to {\\n    transform: translateZ(.1px); /*\u65e0\u5173\u7d27\u8981\u7684\u6837\u5f0f*/\\n  }\\n}\\n```\\n\\n```js\\n\\nview.addEventListener(\\"animationiteration\\", () => {\\n  // \u8f6e\u64ad\u903b\u8f91\\n})\\n```"},{"id":"encodeURI\u4e0eencodeURIComponent","metadata":{"permalink":"/blog/encodeURI\u4e0eencodeURIComponent","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2022-08-10-encodeURI\u4e0eencodeURIComponent.mdx","source":"@site/blog/2022-08-10-encodeURI\u4e0eencodeURIComponent.mdx","title":"encodeURI\u4e0eencodeURIComponent","description":"encodeURI \u4e0e encodeURIComponent \u90fd\u662f\u5bf9 URI \u8fdb\u884c\u7f16\u7801\u7684\uff0c\u7531\u4e8e URI \u4ec5\u652f\u6301 ASCII \u5b57\u7b26\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u7279\u6b8a\u7684\u5b57\u7b26\u9700\u8981\u8fdb\u884c\u7f16\u7801\uff0c\u4f8b\u5982\u6c49\u5b57\u3001& \u3001? \u7b49\u6709\u610f\u4e49\u7684\u7279\u6b8a\u7b26\u53f7\u3002","date":"2022-08-10T00:00:00.000Z","formattedDate":"2022\u5e748\u670810\u65e5","tags":[{"label":"\u7f16\u7801","permalink":"/blog/tags/\u7f16\u7801"},{"label":"encodeURI","permalink":"/blog/tags/encode-uri"},{"label":"encodeURIComponent","permalink":"/blog/tags/encode-uri-component"}],"readingTime":1.545,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"slug":"encodeURI\u4e0eencodeURIComponent","authors":"xiongtao","tags":["\u7f16\u7801","encodeURI","encodeURIComponent"]},"prevItem":{"title":"\u4f7f\u7528CSS\u52a8\u753b\u53d6\u4ee3\u5b9a\u65f6\u5668","permalink":"/blog/css-animation-timer"},"nextItem":{"title":"Rust\u751f\u547d\u5468\u671f","permalink":"/blog/2022/06/12/Rust\u751f\u547d\u5468\u671f"}},"content":"`encodeURI` \u4e0e `encodeURIComponent` \u90fd\u662f\u5bf9 URI \u8fdb\u884c\u7f16\u7801\u7684\uff0c\u7531\u4e8e URI \u4ec5\u652f\u6301 ASCII \u5b57\u7b26\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u7279\u6b8a\u7684\u5b57\u7b26\u9700\u8981\u8fdb\u884c\u7f16\u7801\uff0c\u4f8b\u5982\u6c49\u5b57\u3001`&` \u3001`?` \u7b49\u6709\u610f\u4e49\u7684\u7279\u6b8a\u7b26\u53f7\u3002\\n\\n- `encodeURI` \u4e0d\u4f1a\u5bf9 `~!@#$&*()=:/,;?+\'` \u8fd9\u4e9b\u7279\u6b8a\u5b57\u7b26\u8fdb\u884c\u7f16\u7801\\n- `encodeURIComponent` \u4e0d\u4f1a\u5bf9 `~!*()\'` \u8fd9\u4e9b\u7279\u6b8a\u5b57\u7b26\u8fdb\u884c\u7f16\u7801\\n\\n\u6570\u5b57\u4e0e\u5b57\u6bcd\uff080-9\uff0ca-z\uff0cA-Z\uff09\u662f\u4e0d\u4f1a\u88ab\u7f16\u7801\u7684\uff0c`_-.~!*\'()` \u8fd9\u4e9b\u5b57\u7b26\u4e5f\u4e0d\u4f1a\u88ab\u7f16\u7801 \u3002\u53ef\u4ee5\u89c2\u5bdf\u5230\u4e8c\u8005\u7684\u533a\u522b\u662f `encodeURIComponent` \u4f1a\u5bf9\u66f4\u591a\u7684\u5b57\u7b26\u8fdb\u884c\u7f16\u7801\uff0c\u800c `encodeURI` \u5bf9\u6709\u4e9b\u7279\u6b8a\u5b57\u7b26\u4e0d\u4f1a\u7f16\u7801\uff0c\u5982 `&, :, /`\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n`encodeURI` \u4e00\u822c\u7528\u4e8e\u5bf9\u6574\u4e2a `URI` \u8fdb\u884c\u7f16\u7801\uff0c\u5982\\n\\n```js\\nconst url = \'https://xxx.github.io/my first page.html\'\\n// https://xxx.github.io/my%20first%20page.html\\nconst encodeUrl = encodeURI(url) \\n```\\n\u4e0a\u9762\u5c06\u7a7a\u683c\u7f16\u7801\u4e3a\u4e86 `%20`\u3002\\n\\n\u5982\u679c\u4f7f\u7528 `encodeURIComponent` \u5bf9\u6574\u4e2a URI \u7f16\u7801\uff0c\u5b83\u4f1a\u4f7f\u5f97 `://` \u7b49\u5b57\u7b26\u4e5f\u88ab\u7f16\u7801\uff0c\u6240\u4ee5 `encodeURIComponent` \u4e0d\u7528\u5bf9\u6574\u4e2a URI \u8fdb\u884c\u7f16\u7801\u3002\\n\\n```js\\nconst url = \'https://xxx.github.io/my first page.html\'\\n// https%3A%2F%2Fxxx.github.io%2Fmy%20first%20page.html\\nconst encodeUrl = encodeURIComponent(url) \\n```\\n`encodeURIComponent` \u4e00\u822c\u7528\u6765\u7f16\u7801\u53c2\u6570\\n\\n```js\\nconst username = \'Li & Wang\'\\n// https://xxx.github.io?username=Li & Wang&age=18\\nconst url = `https://xxx.github.io?username=${username}&age=18` \\n```\\n\\n\u7531\u4e8e `&` \u5728\u53c2\u6570\u4e2d\u662f\u8fde\u63a5\u7b26\uff0c`username` \u4e0d\u662f\u4e00\u4e2a\u6574\u4f53\uff0c\u4e0e\u6211\u4eec\u7684\u9884\u671f\u4e0d\u7b26\uff0c\u6211\u4eec\u9700\u8981\u5bf9\u53c2\u6570\u8fdb\u884c\u7f16\u7801\u624d\u80fd\u53d1\u9001\u6b63\u786e\u7684\u53c2\u6570\\n\\n```js\\nconst username = \'Li & Wang\'\\n// https://xxx.github.io?username=Li%20%26%20Wang&age=18\\nconst url = `https://xxx.github.io?username=${encodeURIComponent(username)}&age=18` \\n```"},{"id":"/2022/06/12/Rust\u751f\u547d\u5468\u671f","metadata":{"permalink":"/blog/2022/06/12/Rust\u751f\u547d\u5468\u671f","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2022-06-12-Rust\u751f\u547d\u5468\u671f.mdx","source":"@site/blog/2022-06-12-Rust\u751f\u547d\u5468\u671f.mdx","title":"Rust\u751f\u547d\u5468\u671f","description":"\u5f53\u6211\u4eec\u501f\u7528\u4e00\u4e2a\u53d8\u91cf\u65f6\uff0c\u5982\u679c\u53d8\u91cf\u88ab\u9500\u6bc1\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u4e0d\u80fd\u901a\u8fc7\u8be5\u501f\u7528\u7684\u5f15\u7528\u8bbf\u95ee\u6570\u636e\uff0c\u56e0\u4e3a\u53d8\u91cf\u4ee5\u53ca\u88ab\u9500\u6bc1\u4e86\uff0c\u6b64\u65f6\u8bbf\u95ee\u7684\u6570\u636e\u662f\u4e0d\u53ef\u77e5\u7684\u3002","date":"2022-06-12T00:00:00.000Z","formattedDate":"2022\u5e746\u670812\u65e5","tags":[],"readingTime":6.27,"hasTruncateMarker":true,"authors":[],"frontMatter":{},"prevItem":{"title":"encodeURI\u4e0eencodeURIComponent","permalink":"/blog/encodeURI\u4e0eencodeURIComponent"},"nextItem":{"title":"\u90e8\u7f72YOLOv5\u8bad\u7ec3","permalink":"/blog/2022/05/17/\u90e8\u7f72YOLOv5\u8bad\u7ec3"}},"content":"\u5f53\u6211\u4eec\u501f\u7528\u4e00\u4e2a\u53d8\u91cf\u65f6\uff0c\u5982\u679c\u53d8\u91cf\u88ab\u9500\u6bc1\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u4e0d\u80fd\u901a\u8fc7\u8be5\u501f\u7528\u7684\u5f15\u7528\u8bbf\u95ee\u6570\u636e\uff0c\u56e0\u4e3a\u53d8\u91cf\u4ee5\u53ca\u88ab\u9500\u6bc1\u4e86\uff0c\u6b64\u65f6\u8bbf\u95ee\u7684\u6570\u636e\u662f\u4e0d\u53ef\u77e5\u7684\u3002\\n\\n```rust\\nfn main() {\\n  let x;\\n  {\\n    let y = 5;\\n    x = &y;\\n  }\\n  println!(\\"{}\\", x);\\n}\\n```\\n\\n\u5982\u679c\u6211\u4eec\u5c1d\u8bd5\u7f16\u8bd1\u8be5\u4ee3\u7801\uff0c\u7f16\u8bd1\u5668\u5c06\u4f1a\u7ed9\u51fa\u9519\u8bef\\n\\n```rust\\nerror[E0597]: `y` does not live long enough\\n --\x3e hello5.rs:5:9\\n  |\\n5 |     x = &y;\\n  |         ^^ borrowed value does not live long enough\\n6 |   }\\n  |   - `y` dropped here while still borrowed\\n7 |   println!(\\"{}\\", x);\\n  |                  - borrow later used here\\n\\nerror: aborting due to previous error\\n\\nFor more information about this error, try `rustc --explain E0597`.\\n```\\n\\n\x3c!--truncate--\x3e\\n\\n\u6211\u4eec\u4f7f\u7528\xa0`x`\xa0\u53d8\u91cf\u501f\u7528\xa0`y`\xa0\u7684\u5f15\u7528\uff0c\u4f46\u662f\u5728\xa0`y`\xa0\u53d8\u91cf\u9500\u6bc1\u4ee5\u540e\uff0c`x`\xa0\u53d8\u91cf\u5c31\u4e0d\u80fd\u8bbf\u95ee\xa0`y`\xa0\u7684\u6570\u636e\u4e86\uff0c\u5b83\u662f\u4e00\u4e2a\u60ac\u7a7a\u6307\u9488\u3002\u597d\u5728\u6211\u4eec\u4e0d\u9700\u8981\u62c5\u5fc3\u8fd9\u4e2a\u95ee\u9898\uff0c\u7f16\u8bd1\u5668\u53ef\u4ee5\u627e\u5230\u95ee\u9898\u5e76\u4e3a\u6211\u4eec\u89e3\u51b3\u3002\u7f16\u8bd1\u5668\u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u5c31\u5f97\u77e5\u9053\u53d8\u91cf\u7684\u58f0\u660e\u5468\u671f\uff0c\u4f8b\u5982\u4e0a\u9762\xa0`x, y`\xa0\u7684\u58f0\u660e\u5468\u671f\u3002\\n\\n\u4f46\u662f\u5982\u679c\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u5f15\u7528\u7684\u8bdd\uff0c\u51fd\u6570\u662f\u4e0d\u77e5\u9053\u8fd4\u56de\u7684\u53d8\u91cf\u7684\u58f0\u660e\u5468\u671f\\n\\n```rust\\nfn get_one(x: &i32, y: &i32) -> &i32 {\\n  &x\\n}\\n```\\n\\n\u5982\u679c\u6211\u4eec\u5c1d\u8bd5\u5b9a\u4e49\u4e0a\u9762\u7684\u51fd\u6570\uff0c\u7f16\u8bd1\u5668\u4f1a\u7ed9\u51fa\u4e00\u4e2a\u9519\u8bef\\n\\n```rust\\nerror[E0106]: missing lifetime specifier\\n  --\x3e hello6.rs:13:33\\n   |\\n13 | fn get_one(x: &i32, y: &i32) -> &i32 {\\n   |               ----     ----     ^ expected named lifetime parameter\\n   |\\n   = help: this function\'s return type contains a borrowed value, but the signature does not say whether it is borrowed from `x` or `y`\\nhelp: consider introducing a named lifetime parameter\\n   |\\n13 | fn get_one<\'a>(x: &\'a i32, y: &\'a i32) -> &\'a i32 {\\n   |           ++++     ++          ++          ++\\n\\nerror: aborting due to previous error\\n\\nFor more information about this error, try `rustc --explain E0106`.\\n```\\n\\n\u8fd9\u662f\u56e0\u4e3a\u7f16\u8bd1\u5668\u4e0d\u77e5\u9053\u8fd4\u56de\u7684\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\uff0c\u5982\u679c\u4e0d\u77e5\u9053\u751f\u547d\u5468\u671f\u7684\u8bdd\uff0c\u5b83\u5c31\u4e0d\u80fd\u68c0\u6d4b\u60ac\u7a7a\u6307\u9488\u7684\u95ee\u9898\uff0c\u6240\u4ee5\u7f16\u8bd1\u5c31\u4e0d\u4f1a\u901a\u8fc7\uff0c\u6211\u4eec\u9700\u8981\u6307\u5b9a\u8fd4\u56de\u7684\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\u3002\\n\\n\u4e3a\u4e86\u907f\u514d\u8fd9\u6837\u7684\u4e8b\u60c5\u53d1\u751f\uff0c\u5728\u6211\u4eec\u5b9a\u4e49\u51fd\u6570\u65f6\uff0c\u9700\u8981\u4e3a\u53d8\u91cf\u6dfb\u52a0\u751f\u547d\u5468\u671f\u6807\u8bb0\uff0c\u751f\u547d\u5468\u671f\u6807\u8bb0\u4f7f\u7528\xa0`\'`\xa0\u5f00\u5934\uff0c\u540e\u9762\u8ddf\u82e5\u5e72\u5b57\u7b26\u7528\u4e8e\u6807\u8bb0\uff0c\u4e00\u822c\u6211\u4eec\u4f7f\u7528\u5355\u4e2a\u5b57\u7b26\uff0c\u5982\xa0`\'a, \'b`\u3002\\n\\n```rust\\nfn get_one<\'a, \'b>(x: &\'a i32, y: &\'b i32) -> &\'a i32 {\\n  &x\\n}\\n```\\n\\n\u4e0a\u9762\u6211\u4eec\u6dfb\u52a0\u7684\xa0`\'a, \'b`\xa0\u5c31\u662f\u751f\u547d\u5468\u671f\u6807\u8bb0\uff0c\u5bf9\u4e8e\u65b9\u6cd5\u4e2d\u4f7f\u7528\u7684\u6807\u8bb0\uff0c\u90fd\u8981\u5728\u65b9\u6cd5\u540d\u540e\u7684\xa0`<>`\xa0\u4e2d\u58f0\u660e\uff0c\u4f8b\u5982\xa0`add<\'a, \'b>`\uff0c\u65b9\u6cd5\u7684\u8f93\u5165\u5206\u522b\u88ab\u6807\u8bb0\u4e86\u4e0d\u540c\u7684\u751f\u547d\u5468\u671f\u7b26\u53f7\uff0c`x: &\'a i32, y: &\'b i32`\xa0\u8868\u793a\u5b83\u4eec\u5177\u6709\u4e0d\u540c\u7684\u751f\u547d\u5468\u671f\uff0c\u8fd4\u56de\u7684\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\u65f6\xa0`\'a`\uff0c\u8bf4\u660e\u5b83\u4e0e\xa0`x: &\'a i32`\xa0\u7684\u751f\u547d\u5468\u671f\u76f8\u540c\u3002\\n\\n\u5177\u6709\u8fd9\u4e9b\u4fe1\u606f\uff0c\u7f16\u8bd1\u5668\u5c31\u53ef\u4ee5\u68c0\u6d4b\u60ac\u7a7a\u6307\u9488\u7684\u95ee\u9898\u4e86\u3002\u770b\u4e0b\u9762\u7684\u4e00\u4e2a\u4f8b\u5b50\uff1a\\n\\n```rust\\nfn main() {\\n  let x = 1;\\n  let z;\\n  {\\n    let y = 2;\\n    z = get_one(&x, &y);\\n  }\\n\\n  println!(\\"{}\\", z);\\n}\\n\\nfn get_one<\'a, \'b>(x: &\'a i32, y: &\'b i32) -> &\'b i32 {\\n  &y\\n}\\n```\\n\\n`get_one`\xa0\u51fd\u6570\u63a5\u6536\u4e24\u4e2a\xa0`i32`\xa0\u7684\u5f15\u7528\uff0c\u5206\u522b\u58f0\u660e\u4e86\u4e0d\u540c\u7684\u751f\u547d\u5468\u671f\uff0c\u7136\u540e\u8fd4\u56de\u4e00\u4e2a\xa0`i32`\xa0\u7684\u5f15\u7528\uff0c\u5176\u751f\u547d\u5468\u671f\u4e3a\xa0`\'b`\uff0c\u4e0e\u7b2c\u4e8c\u4e2a\u53c2\u6570\u7684\u751f\u547d\u5468\u671f\u76f8\u540c\u3002\\n\\n\u7136\u540e\u6211\u4eec\u5728\xa0`main`\xa0\u51fd\u6570\u4e2d\u8c03\u7528\xa0`get_one`\uff0c\u5206\u522b\u4f20\u5165\xa0`&x, &y`\uff0c\u8fd4\u56de\u7684\u5f15\u7528\u8d4b\u503c\u7ed9\xa0`z`\uff0c\u8fd4\u56de\u7684\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\u4e0e\u7b2c\u4e8c\u4e2a\u53c2\u6570\u76f8\u540c\uff0c\u4e5f\u5c31\u662f\u4e0e\xa0`y`\xa0\u76f8\u540c\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u4e0d\u80fd\u5728\xa0`y`\xa0\u7684\u751f\u547d\u5468\u671f\u4e4b\u5916\u8bbf\u95ee\xa0`z`\uff0c\u5426\u5219\u5c31\u4f1a\u5bfc\u81f4\u60ac\u7a7a\u6307\u9488\u7684\u95ee\u9898\uff0c\u4f46\u662f\u4e0a\u9762\u7684\u7a0b\u5e8f\u4e2d\u6211\u4eec\u5728\xa0`y`\xa0\u6240\u5728\u7684\u5757\u4e4b\u5916\u8bbf\u95ee\u4e86\xa0`z`\uff0c\u6240\u4ee5\u4f1a\u7f16\u8bd1\u51fa\u9519\\n\\n```rust\\nwarning: unused variable: `x`\\n  --\x3e hello6.rs:13:20\\n   |\\n13 | fn get_one<\'a, \'b>(x: &\'a i32, y: &\'b i32) -> &\'b i32 {\\n   |                    ^ help: if this is intentional, prefix it with an underscore: `_x`\\n   |\\n   = note: `#[warn(unused_variables)]` on by default\\n\\nerror[E0597]: `y` does not live long enough\\n --\x3e hello6.rs:6:21\\n  |\\n6 |     z = get_one(&x, &y);\\n  |                     ^^ borrowed value does not live long enough\\n7 |   }\\n  |   - `y` dropped here while still borrowed\\n8 |\\n9 |   println!(\\"{}\\", z);\\n  |                  - borrow later used here\\n\\nerror: aborting due to previous error; 1 warning emitted\\n\\nFor more information about this error, try `rustc --explain E0597`.\\n```\\n\\n\u7ed9\u51fa\u7684\u9519\u8bef\u662f\u8bf4\uff0c`y`\xa0\u5df2\u7ecf\u88ab\u9500\u6bc1\u4e86\uff0c\u4f46\u662f\u5728\u540e\u9762\u88ab\u5f15\u7528\u7684\xa0`z`\xa0\u4f7f\u7528\u4e86\u3002\\n\\n\u5982\u679c\u6211\u4eec\u4fee\u6539\u4e0a\u9762\u7684\u51fd\u6570\u4e3a\\n\\n```rust\\nfn get_one<\'a, \'b>(x: &\'a i32, y: &\'b i32) -> &\'a i32 {\\n  &x\\n}\\n```\\n\\n\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u8fd4\u56de\u7684\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\u662f\xa0`\'a`\uff0c\u4e0e\u7b2c\u4e00\u4e2a\u53c2\u6570\u7684\u751f\u547d\u5468\u671f\u76f8\u540c\uff0c\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u8c03\u7528\u51fd\u6570\uff0c\u56e0\u4e3a\u8fd4\u56de\u7684\u5f15\u7528\u7684\u751f\u547d\u5468\u671f\u4e0e\xa0`x`\xa0\u7684\u751f\u547d\u5468\u76f8\u540c\uff0c\u5728\xa0`x`\xa0\u88ab\u9500\u6bc1\u4ee5\u524d\u90fd\u53ef\u4ee5\u4f7f\u7528\uff0c\u6240\u4ee5\u7a0b\u5e8f\u53ef\u4ee5\u6b63\u786e\u7f16\u8bd1\u3002\\n\\n```rust\\nwarning: unused variable: `y`\\n  --\x3e hello6.rs:13:32\\n   |\\n13 | fn get_one<\'a, \'b>(x: &\'a i32, y: &\'b i32) -> &\'a i32 {\\n   |                                ^ help: if this is intentional, prefix it with an underscore: `_y`\\n   |\\n   = note: `#[warn(unused_variables)]` on by default\\n\\nwarning: 1 warning emitted\\n\\n1\\n```\\n\\n\u7a0b\u5e8f\u6b63\u786e\u6253\u5370\u51fa\u4e86\xa0`x`\xa0\u7684\u503c\xa0`1`\uff08\u5f53\u7136\u8fd8\u7ed9\u51fa\u4e86\u4e00\u4e9b\u8b66\u544a\uff0c\u56e0\u4e3a\u6211\u4eec\u5728\xa0`get_one`\xa0\u51fd\u6570\u91cc\u9762\u53ea\u7528\u4e86\xa0`x`\uff0c\u6ca1\u6709\u7528\xa0`y`\uff09\u3002"},{"id":"/2022/05/17/\u90e8\u7f72YOLOv5\u8bad\u7ec3","metadata":{"permalink":"/blog/2022/05/17/\u90e8\u7f72YOLOv5\u8bad\u7ec3","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2022-05-17-\u90e8\u7f72YOLOv5\u8bad\u7ec3.mdx","source":"@site/blog/2022-05-17-\u90e8\u7f72YOLOv5\u8bad\u7ec3.mdx","title":"\u90e8\u7f72YOLOv5\u8bad\u7ec3","description":"\u4e0b\u8f7d\u6e90\u7801\u5305\uff0c\u89e3\u538b","date":"2022-05-17T00:00:00.000Z","formattedDate":"2022\u5e745\u670817\u65e5","tags":[{"label":"\u6df1\u5ea6\u5b66\u4e60","permalink":"/blog/tags/\u6df1\u5ea6\u5b66\u4e60"},{"label":"YOLO","permalink":"/blog/tags/yolo"},{"label":"\u76ee\u6807\u68c0\u6d4b","permalink":"/blog/tags/\u76ee\u6807\u68c0\u6d4b"}],"readingTime":3.045,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"authors":"xiongtao","tags":["\u6df1\u5ea6\u5b66\u4e60","YOLO","\u76ee\u6807\u68c0\u6d4b"]},"prevItem":{"title":"Rust\u751f\u547d\u5468\u671f","permalink":"/blog/2022/06/12/Rust\u751f\u547d\u5468\u671f"},"nextItem":{"title":"\u884c\u5185\u6837\u5f0f\u4f7f\u7528 important","permalink":"/blog/2022/04/10/\u884c\u5185\u6837\u5f0f\u4f7f\u7528 important"}},"content":"\u4e0b\u8f7d[\u6e90\u7801\u5305](https://github.com/ultralytics/yolov5/archive/refs/tags/v6.1.tar.gz)\uff0c\u89e3\u538b\\n\\n```bash\\nwget https://github.com/ultralytics/yolov5/archive/refs/tags/v6.1.tar.gz\\ntar -zxvf yolov5-6.1.tar.gz\\n```\\n\\n\u8fdb\u5165\u89e3\u538b\u76ee\u5f55\uff0c\u5b89\u88c5\u4f9d\u8d56\\n\\n```bash\\ncd yolov5-6.1\\npip install -r requirements.txt\\n```\\n\\n\u4e0b\u8f7d\u9884\u8bad\u7ec3\u6a21\u578b [yolov5s6.pt](https://github.com/ultralytics/yolov5/releases/download/v6.1/yolov5s6.pt)\uff0c\u5728\u9879\u76ee\u6839\u76ee\u5f55\u65b0\u5efa weights \u6587\u4ef6\u5939\uff0c\u5c06\u4e0b\u8f7d\u7684\u9884\u8bad\u7ec3\u6a21\u578b\u653e\u5165\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n\u4f7f\u7528 labelImg \u6807\u6ce8\u81ea\u5df1\u7684\u6570\u636e\u96c6\uff0c\u5728\u9879\u76ee\u6839\u76ee\u5f55\u65b0\u5efa  datasets \u6587\u4ef6\u5939\uff0c\u7136\u540e\u5c06\u6570\u636e\u96c6\u653e\u5165\uff0cdatasets \u6587\u4ef6\u5939\u7684\u7ed3\u6784\u5982\u4e0b\uff0c\u6bcf\u4e00\u4e2a\u6570\u636e\u96c6\u90fd\u5305\u542b\u4e09\u4e2a\u6587\u4ef6\u5939 `train, test, valid`\uff0c\u5176\u4e2d `test` \u6587\u4ef6\u5939\u4e0d\u662f\u5fc5\u987b\u7684\uff0c\u6bcf\u4e2a\u6587\u4ef6\u5939\u90fd\u5305\u542b\u4e24\u4e2a\u6587\u4ef6\u5939 `images` \u548c `labels`\uff0c\u5206\u522b\u653e\u7f6e\u56fe\u7247\u548c\u6807\u7b7e\u3002\\n\\n```text\\ndatasets\\n\u251c\u2500\u2500 multi-class-denoise\\n\u2502   \u251c\u2500\u2500 test\\n\u2502   \u2502   \u251c\u2500\u2500 images\\n\u2502   \u2502   \u2514\u2500\u2500 labels\\n\u2502   \u251c\u2500\u2500 train\\n\u2502   \u2502   \u251c\u2500\u2500 images\\n\u2502   \u2502   \u2514\u2500\u2500 labels\\n\u2502   \u2514\u2500\u2500 valid\\n\u2502       \u251c\u2500\u2500 images\\n\u2502       \u2514\u2500\u2500 labels\\n\u251c\u2500\u2500 one-class-denoise\\n\u2502   \u251c\u2500\u2500 test\\n\u2502   \u2502   \u251c\u2500\u2500 images\\n\u2502   \u2502   \u2514\u2500\u2500 labels\\n\u2502   \u251c\u2500\u2500 train\\n\u2502   \u2502   \u251c\u2500\u2500 images\\n\u2502   \u2502   \u2514\u2500\u2500 labels\\n\u2502   \u2514\u2500\u2500 valid\\n\u2502       \u251c\u2500\u2500 images\\n\u2502       \u2514\u2500\u2500 labels\\n\u2514\u2500\u2500 one-class-noise\\n    \u251c\u2500\u2500 test\\n    \u2502   \u251c\u2500\u2500 images\\n    \u2502   \u2514\u2500\u2500 labels\\n    \u251c\u2500\u2500 train\\n    \u2502   \u251c\u2500\u2500 images\\n    \u2502   \u2514\u2500\u2500 labels\\n    \u2514\u2500\u2500 valid\\n        \u251c\u2500\u2500 images\\n        \u2514\u2500\u2500 labels\\n```\\n\\n\u5728\u6839\u76ee\u5f55\u4e0b\u7684 data \u6587\u4ef6\u5939\u4e0b\u65b0\u5efa `xxx.yaml` \u8bad\u7ec3\u914d\u7f6e\u6587\u4ef6\uff0c\u7528\u4ee5\u6307\u5b9a\u6570\u636e\u96c6\u7684\u4f4d\u7f6e\u4ee5\u53ca\u8981\u8bc6\u522b\u7684\u7c7b\u522b\u6570\u76ee\uff0c\u4e00\u4e2a\u53c2\u8003\u5982\u4e0b `data/one-class-denoise.yaml`\uff1a\\n\\n```yaml\\npath: ../datasets/one-class-denoise \xa0# dataset root dir\\n\\ntrain: train/images \xa0# train images (relative to \'path\')\\nval: valid/images \xa0# val images (relative to \'path\')\\ntest: test/images # test images (optional)\\n\\n# Classes\\nnc: 1 \xa0# number of classes\\nnames: [\'obj\'] \xa0# class names\\n```\\n\\n\u7136\u540e\u5c31\u53ef\u4ee5\u6109\u5feb\u7684\u8bad\u7ec3\u4e86\\n\\n```bash\\npython3 train.py --img 640 --batch 16 --epochs 200 --data ./data/one-class-denoise.yaml --cfg ./models/yolov5s.yaml --weights ./weights/yolov5s6.pt\\n```\\n\\n- `--img`\uff1a\u6307\u5b9a\u56fe\u7247\u5927\u5c0f\\n- `--batch`\uff1a\u6307\u5b9a\u6279\u91cf\u5927\u5c0f\\n- `--epochs`\uff1a\u6307\u5b9a\u8bad\u7ec3\u8f6e\u6b21\\n- `--data`\uff1a\u6307\u5b9a\u8bad\u7ec3\u914d\u7f6e\u6587\u4ef6\u5730\u5740\\n- `--cfg`\uff1a\u6307\u5b9a\u4f7f\u7528\u7684\u6a21\u578b\\n- `--weights`\uff1a\u6307\u5b9a\u4f7f\u7528\u7684\u9884\u8bad\u7ec3\u6743\u91cd\\n\\n\u8bad\u7ec3\u7684\u7ed3\u679c\u653e\u5728 `runs/train/` \u4e0b\u9762\uff0c\u53ef\u4ee5\u901a\u8fc7 `results.csv` \u89c2\u5bdf\u5230\u8bad\u7ec3\u7ed3\u679c\uff0c\u6216\u8005\u901a\u8fc7 `tensorboard` \u89c2\u5bdf\u7ed3\u679c \\n\\n```bash\\ntensorboard --logdir runs/train --port 6009\\n```\\n\\n\u7136\u540e\u5728\u6d4f\u89c8\u5668\u901a\u8fc7 `localhost:6009` \u5373\u53ef\u5b9e\u65f6\u67e5\u770b\u5230\u8bad\u7ec3\u7ed3\u679c\u3002\\n\\n\u5728 `runs/train/exp/weights` \u4e0b\u4fdd\u5b58\u7740\u8bad\u7ec3\u597d\u7684\u6a21\u578b\uff0c\u6709\u4e24\u4e2a\u6a21\u578b `best.pt` \u4ee5\u53ca `last.pt`\uff0c\u5206\u522b\u8868\u793a\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u6700\u597d\u7684\u6a21\u578b\u4ee5\u53ca\u6700\u540e\u4e00\u4e2a\u6a21\u578b\u3002\u6211\u4eec\u968f\u540e\u4fbf\u53ef\u4f7f\u7528\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u8fdb\u884c\u63a8\u7406\\n\\n```bash\\npython3 detect.py --source datasets/one-class-denoise/test/images/ --weights ./runs/train/exp/weights/best.pt\\n```\\n\\n- `--source`\uff1a\u6307\u5b9a\u8981\u63a8\u7406\u7684\u56fe\u50cf\u6765\u6e90\uff0c\u53ef\u4ee5\u662f\u5177\u4f53\u7684\u56fe\u7247\uff0c\u4e5f\u53ef\u4ee5\u662f\u89c6\u9891\uff0c\u4e5f\u53ef\u4ee5\u5b58\u653e\u56fe\u50cf\u7684\u6587\u4ef6\u5939\u5730\u5740\\n- `--weights`\uff1a\u6307\u5b9a\u8981\u4f7f\u7528\u7684\u6a21\u578b\u53c2\u6570\uff0c\u4f7f\u7528\u6307\u5b9a\u8bad\u7ec3\u597d\u7684 `best.pt` \u6216\u8005 `last.pt`"},{"id":"/2022/04/10/\u884c\u5185\u6837\u5f0f\u4f7f\u7528 important","metadata":{"permalink":"/blog/2022/04/10/\u884c\u5185\u6837\u5f0f\u4f7f\u7528 important","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2022-04-10-\u884c\u5185\u6837\u5f0f\u4f7f\u7528 important.mdx","source":"@site/blog/2022-04-10-\u884c\u5185\u6837\u5f0f\u4f7f\u7528 important.mdx","title":"\u884c\u5185\u6837\u5f0f\u4f7f\u7528 important","description":"React \u4e0d\u652f\u6301\u5728\u884c\u5185\u6837\u5f0f\u8bbe\u7f6e !important","date":"2022-04-10T00:00:00.000Z","formattedDate":"2022\u5e744\u670810\u65e5","tags":[{"label":"React","permalink":"/blog/tags/react"},{"label":"CSS","permalink":"/blog/tags/css"},{"label":"\\\\!important","permalink":"/blog/tags/important"}],"readingTime":0.305,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"date":"2022-04-10T00:00:00.000Z","authors":"xiongtao","tags":["React","CSS","\\\\!important"]},"prevItem":{"title":"\u90e8\u7f72YOLOv5\u8bad\u7ec3","permalink":"/blog/2022/05/17/\u90e8\u7f72YOLOv5\u8bad\u7ec3"},"nextItem":{"title":"HTTP2\u4e4b\u65c5","permalink":"/blog/2022/03/11/HTTP2\u4e4b\u65c5"}},"content":"React \u4e0d\u652f\u6301\u5728\u884c\u5185\u6837\u5f0f\u8bbe\u7f6e `!important`\\n\\n```jsx\\n// \u65e0\u6548\\n<p style={{fontSize: \'20px !important\'}}>Hello World</p>\\n```\\n\\n\x3c!--truncate--\x3e\\n\\n\u901a\u8fc7 `ref` \u6765\u8bbe\u7f6e\\n\\n```jsx\\n<p ref={(node) => {\\n  if (node) {\\n    node.setProperty(\'font-size\', \'20px\', \'important\')\\n  }\\n}}>Hello World</p>\\n```\\n\\n\u53c2\u8003\uff1a\\n\\n- [react \u884c\u5185\u6837\u5f0f\u7684!important\u4e0d\u751f\u6548\u600e\u4e48\u5904\u7406](https://blog.csdn.net/hzxOnlineOk/article/details/106728437)"},{"id":"/2022/03/11/HTTP2\u4e4b\u65c5","metadata":{"permalink":"/blog/2022/03/11/HTTP2\u4e4b\u65c5","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2022-03-11-HTTP2\u4e4b\u65c5.mdx","source":"@site/blog/2022-03-11-HTTP2\u4e4b\u65c5.mdx","title":"HTTP2\u4e4b\u65c5","description":"\u672c\u7bc7\u6587\u7ae0\u7ffb\u8bd1\u81f3 https://kamranahmed.info/blog/2016/08/13/http-in-depth/","date":"2022-03-11T00:00:00.000Z","formattedDate":"2022\u5e743\u670811\u65e5","tags":[],"readingTime":22.62,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"HTTP2\u4e4b\u65c5"},"prevItem":{"title":"\u884c\u5185\u6837\u5f0f\u4f7f\u7528 important","permalink":"/blog/2022/04/10/\u884c\u5185\u6837\u5f0f\u4f7f\u7528 important"},"nextItem":{"title":"\u4ece\u624b\u6284\u7b14\u8bb0\u5230\u4e2a\u4eba\u535a\u5ba2","permalink":"/blog/2022/01/12/\u4ece\u624b\u6284\u7b14\u8bb0\u5230\u4e2a\u4eba\u535a\u5ba2"}},"content":":::info info\\n\u672c\u7bc7\u6587\u7ae0\u7ffb\u8bd1\u81f3 https://kamranahmed.info/blog/2016/08/13/http-in-depth/\\n\\n\u4f5c\u8005\uff1aKamran Ahmed\\n:::\\n\\nHTTP \u662f\u6bcf\u4e2a\u5f00\u53d1\u8005\u90fd\u77e5\u9053\u7684\u534f\u8bae\uff0c\u56e0\u4e3a\u6240\u6709\u7684\u7f51\u9875\u90fd\u5728\u4f7f\u7528\u5b83\uff0c\u4e86\u89e3\u5b83\u7edd\u5bf9\u53ef\u4ee5\u5e2e\u52a9\u4f60\u5199\u51fa\u66f4\u597d\u7684\u5e94\u7528\u3002\u5728\u8fd9\u7bc7\u6587\u7ae0\u4e2d\uff0c\u6211\u4f1a\u63a2\u8ba8 HTTP \u662f\u4ec0\u4e48\uff0c\u5b83\u662f\u5982\u4f55\u5f62\u6210\u7684\uff0c\u4ee5\u53ca\u672a\u6765\u53c8\u5c06\u5982\u4f55\u3002\\n\\n## \u4ec0\u4e48\u662f HTTP\\n\\n\u9996\u5148\u9700\u8981\u63a2\u8ba8\u7684\u662f\uff0c\u4ec0\u4e48\u662f `HTTP`\uff1f`HTTP` \u662f\u57fa\u4e8e `TCP/IP` \u7684\u5e94\u7528\u5c42\u901a\u4fe1\u534f\u8bae\uff0c\u5b83\u89c4\u5b9a\u4e86\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u6bb5\u4e4b\u95f4\u5982\u4f55\u901a\u4fe1\u3002\u5b83\u5b9a\u4e49\u4e86\u5185\u5bb9\u662f\u5982\u4f55\u5728\u56e0\u7279\u7f51\u4e0a\u88ab\u8bf7\u6c42\u548c\u4f20\u8f93\u7684\u3002\u5e94\u7528\u5c42\u534f\u8bae\u53ea\u662f\u4e00\u4e2a\u62bd\u8c61\u5c42\u534f\u8bae\uff0c\u5b83\u89c4\u8303\u4e86\u4e3b\u673a(\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668)\u662f\u5982\u4f55\u901a\u4fe1\u7684\uff0c\u5b83\u672c\u8eab\u4f9d\u8d56\u4e8e `TCP/IP` \u6765\u83b7\u5f97\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u8bf7\u6c42\u548c\u54cd\u5e94\u3002`HTTP` \u9ed8\u8ba4\u4f7f\u7528 `80`   \u7aef\u53e3\uff0c\u4f46\u662f\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5176\u4ed6\u7aef\u53e3\u3002`HTTPS` \u4f7f\u7528 `443` \u7aef\u53e3\u3002\\n\\n## HTTP/0.9 - \u53ea\u6709\u4e00\u884c(1991)\\n\\n`HTTP` \u7684\u7b2c\u4e00\u4e2a\u7248\u672c\u662f `HTTP/0.9`\uff0c\u4e8e 1991 \u5e74\u88ab\u63d0\u51fa\u3002\u5b83\u662f\u6700\u7b80\u5355\u7684\u534f\u8bae\uff0c\u53ea\u6709\u4e00\u4e2a `GET` \u65b9\u6cd5\u3002\u5982\u679c\u5ba2\u6237\u7aef\u60f3\u8981\u83b7\u53d6\u670d\u52a1\u5668\u4e0a\u7684\u4e00\u4e2a\u7f51\u9875\uff0c\u5b83\u53ef\u80fd\u53d1\u51fa\u5982\u4e0b\u8bf7\u6c42\\n\\n```http\\nGET /index.html\\n```\\n\\n\u6765\u81ea\u670d\u52a1\u5668\u7684\u54cd\u5e94\u4f1a\u662f\u5982\u4e0b\u7684\u5f62\u5f0f\\n\\n```http\\n(response body)\\n(connection closed)\\n```\\n\\n\x3c!--truncate--\x3e\\n\\n\u4e5f\u5c31\u662f\u8bf4\uff0c\u670d\u52a1\u5668\u83b7\u5f97\u8bf7\u6c42\u4e4b\u540e\uff0c\u5c06 `HTML` \u4f5c\u4e3a\u54cd\u5e94\u8fd4\u56de\uff0c\u4e00\u65e6\u5185\u5bb9\u4f20\u9001\u5b8c\u6bd5\uff0c\u8fde\u63a5\u5c31\u4f1a\u5173\u95ed\u3002\\n\\n`HTTP/0.9` \u6709\u5982\u4e0b\u7279\u70b9\uff1a\\n\\n- \u6ca1\u6709\u5934\u90e8\\n- \u53ea\u5141\u8bb8 `GET` \u65b9\u6cd5\\n- \u54cd\u5e94\u5fc5\u987b\u662f `HTML`\\n\\n\u6b63\u5982\u4f60\u6240\u770b\u5230\u7684\uff0c\u8be5\u534f\u8bae\u9664\u4e86\u6210\u4e3a\u672a\u6765\u7684\u57ab\u811a\u77f3\u5916\uff0c\u771f\u7684\u6ca1\u6709\u5176\u4ed6\u5185\u5bb9\u3002\\n\\n## HTTP/1.0 -1996\\n\\n1996 \u5e74\uff0c`HTTP` \u7684\u4e0b\u4e00\u4e2a\u7248\u672c `HTTP/1.0` \u8fdb\u5316\u800c\u51fa\uff0c\u5b83\u6781\u5927\u7684\u6539\u8fdb\u4e86\u4e4b\u524d\u7684\u7248\u672c\u3002\\n\\n\u4e0d\u50cf `HTTP/0.9` \u88ab\u8bbe\u8ba1\u4e3a\u53ea\u80fd\u8fd4\u56de `HTML`\uff0c`HTTP/1.0` \u53ef\u4ee5\u5904\u7406\u5176\u4ed6\u7c7b\u578b\u7684\u683c\u5f0f\uff0c\u4f8b\u5982\u56fe\u7247\u3001\u89c6\u9891\u6587\u4ef6\uff0c\u6587\u672c\u6216\u8005\u5176\u4ed6\u5185\u5bb9\u3002\u5b83\u6dfb\u52a0\u4e86\u66f4\u591a\u7684\u65b9\u6cd5(\u4f8b\u5982 `POST` \u548c `HEAD`)\uff0c\u8bf7\u6c42/\u54cd\u5e94\u683c\u5f0f\u4e5f\u53d1\u751f\u4e86\u6539\u53d8\uff0c\u5728\u8bf7\u6c42\u548c\u54cd\u5e94\u4e2d\u6dfb\u52a0\u4e86\u5934\u90e8\uff0c\u5728\u54cd\u5e94\u4e2d\u6dfb\u52a0\u4e86\u72b6\u6001\u7801\uff0c\u5b57\u7b26\u96c6\u7684\u652f\u6301\u4e5f\u88ab\u5f15\u5165\uff0c`multi-part` \u7c7b\u578b\uff0c\u8ba4\u8bc1\uff0c\u7f13\u5b58\uff0c\u5185\u5bb9\u7f16\u7801\u4ee5\u53ca\u66f4\u591a\u7684\u4e1c\u897f\u88ab\u6dfb\u52a0\u8fdb\u6765\u3002\\n\\n`HTTP/1.0` \u7684\u8bf7\u6c42\u7684\u4e00\u4e2a\u4f8b\u5b50\u5982\u4e0b\uff1a\\n\\n```http\\nGET / HTTP/1.0\\nHost: kamranahmed.info\\nUser-Agent: Mpzilla/5.0 (Macintosh; Intel Mac OS)\\nAccept: */*\\n```\\n\\n\u6b63\u5982\u4f60\u6240\u770b\u5230\u7684\uff0c\u9664\u4e86\u8bf7\u6c42\u4e4b\u5916\uff0c\u5ba2\u6237\u7aef\u8fd8\u53d1\u9001\u4e86\u5b83\u7684\u4e2a\u4eba\u4fe1\u606f\u548c\u9700\u8981\u7684\u54cd\u5e94\u7c7b\u578b\u3002\u8fd9\u4e2a\u5728 `HTTP/0.9` \u7684\u5ba2\u6237\u7aef\u4e2d\u662f\u4e0d\u4f1a\u53d1\u9001\u7684\uff0c\u56e0\u4e3a `HTTP/0.9` \u6ca1\u6709\u5934\u90e8\u3002\\n\\n\u5982\u4e0a\u8bf7\u6c42\u7684\u4e00\u4e2a\u54cd\u5e94\u53ef\u80fd\u5982\u4e0b\uff1a\\n\\n```http\\nHTTP/1.0 200 OK \\nContent-Type: text/plain\\nContent-Length: 137582\\nExpires: Thu, 05 Dec 1997 16:00:00 GMT\\nLast-Modified: Wed, 5 August 1996 15:55:28 GMT\\nServer: Apache 0.84\\n\\n(response body)\\n(connection closed)\\n```\\n\\n\u5728\u54cd\u5e94\u7684\u6700\u5f00\u59cb\u662f `HTTP/1.0` (\u8ddf\u5728 `HTTP` \u540e\u9762\u7684\u6570\u5b57\u8868\u793a\u7248\u672c\u53f7)\uff0c\u7136\u540e\u662f\u72b6\u6001\u7801 `200`\uff0c\u7136\u540e\u662f\u72b6\u6001\u4fe1\u606f(\u4f60\u4e5f\u53ef\u4ee5\u6210\u4e3a\u662f\u72b6\u6001\u5417\u7684\u63cf\u8ff0)\u3002\\n\\n\u5728\u8fd9\u4e2a\u7248\u672c\u4e2d\uff0c\u8bf7\u6c42\u548c\u54cd\u5e94\u4e2d\u7684\u5934\u90e8\u90fd\u5fc5\u987b\u4ee5 `ASCII` \u7f16\u7801\uff0c\u4f46\u662f\u54cd\u5e94\u4f53\u53ef\u4ee5\u662f\u4efb\u4f55\u7684\u7c7b\u578b\uff0c\u4f8b\u5982\u56fe\u50cf\u3001\u89c6\u9891\u3001`HTML`\u3001\u7eaf\u6587\u672c\u6216\u8005\u5176\u4ed6\u7c7b\u578b\u3002\u6240\u4ee5\uff0c\u670d\u52a1\u5668\u73b0\u5728\u53ef\u4ee5\u53d1\u751f\u4efb\u4f55\u7c7b\u578b\u7ed9\u5ba2\u6237\u7aef\uff0c\u5728\u5f15\u5165\u4e0d\u4e45\u4e4b\u540e\uff0c`HTTP` \u4e2d\u7684 `\\"Hyper Text\\"` \u6210\u4e86\u8bef\u79f0\uff0c`HMTP` \u6216\u8005 `Hypermeida transfer protocol` \u662f\u66f4\u51c6\u786e\u7684\u79f0\u547c\uff0c\u4f46\u662f\u6211\u731c\u6d4b\u6211\u4eec\u5c06\u4f1a\u4e00\u76f4\u4f7f\u7528 `HTTP` \u8fd9\u4e2a\u540d\u79f0\u3002\\n\\n`HTTP/1.0` \u7684\u4e00\u4e2a\u4e3b\u8981\u7f3a\u70b9\u5c31\u662f\u4f60\u4e0d\u80fd\u5728\u6bcf\u4e00\u4e2a\u8fde\u63a5\u4e2d\u53d1\u9001\u591a\u4e2a\u8bf7\u6c42\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e0d\u7ba1\u4ec0\u4e48\u65f6\u5019\u5ba2\u6237\u7aef\u5411\u670d\u52a1\u5668\u8bf7\u6c42\u6570\u636e\uff0c\u5b83\u90fd\u9700\u8981\u6253\u5f00\u4e00\u4e2a\u65b0\u7684 `TCP` \u8fde\u63a5\uff0c\u7136\u540e\u5f53\u8fd9\u4e2a\u8bf7\u6c42\u88ab\u5904\u7406\u5b8c\u6bd5\u4e4b\u540e\uff0c\u8fde\u63a5\u5c31\u4f1a\u88ab\u5173\u95ed\u3002\u7136\u540e\u4e0b\u4e00\u6b21\u53d1\u9001\u8bf7\u6c42\u7684\u65f6\u5019\uff0c\u5b83\u9700\u8981\u91cd\u65b0\u6253\u5f00\u4e00\u4e2a\u65b0\u8fde\u63a5\u3002\u4e3a\u4ec0\u4e48\u8fd9\u6837\u4e0d\u884c\u5462? \u6211\u4eec\u5047\u8bbe\u4f60\u8bbf\u95ee\u4e00\u4e2a\u7f51\u9875\uff0c\u5b83\u6709 10 \u5f20\u56fe\u7247\uff0c5 \u4e2a\u6837\u5f0f\u8868\u4ee5\u53ca 5 \u4e2a `javascript` \u6587\u4ef6\uff0c\u5f53\u6211\u4eec\u8bbf\u95ee\u8fd9\u4e2a\u7f51\u9875\u7684\u65f6\u5019\uff0c\u603b\u5171 20 \u4e2a\u8d44\u6e90\u9700\u8981\u88ab\u83b7\u53d6\u3002\u56e0\u4e3a\u670d\u52a1\u5668\u6bcf\u6b21\u5904\u7406\u5b8c\u4e00\u4e2a\u54cd\u5e94\u4e4b\u540e\u5c31\u5173\u95ed\u8fde\u63a5\uff0c\u56e0\u6b64\u4f1a\u6709 20 \u6761\u5355\u72ec\u7684\u8fde\u63a5\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u8d44\u6e90\u670d\u52a1\u5668\u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a\u8fde\u63a5\u3002\u56e0\u4e3a `TCP` \u8fde\u63a5\u7684\u4e09\u6b21\u63e1\u624b\u4ee5\u53ca\u6162\u542f\u52a8\uff0c\u6bcf\u4e00\u4e2a\u8fde\u63a5\u90fd\u4f1a\u5e26\u6765\u6027\u80fd\u95ee\u9898\uff0c \u56e0\u6b64\u6570\u76ee\u5de8\u5927\u7684\u8fde\u63a5\u6570\u4f1a\u5bfc\u81f4\u6027\u80fd\u6025\u5267\u4e0b\u964d\u3002\\n\\n### \u4e09\u6b21\u63e1\u624b\\n\\n\u5728\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4ea4\u6362\u5b83\u4eec\u7684\u5e94\u7528\u6570\u636e\u4e4b\u524d\u90fd\u9700\u8981\u7ecf\u5386 `TCP` \u4e09\u6b21\u63e1\u624b\\n\\n- `SYN`\uff1a\u5ba2\u6237\u7aef\u751f\u6210\u4e00\u4e2a\u968f\u673a\u6570\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a `x`\uff0c\u7136\u540e\u53d1\u9001\u7ed9\u670d\u52a1\u5668\\n- `SYN ACK`\uff1a\u670d\u52a1\u5668\u901a\u8fc7\u53d1\u9001\u4e00\u4e2a `ACK x + 1` \u5305\u7ed9\u5ba2\u6237\u7aef\u8868\u793a\u6536\u5230\u4e86 `x`\uff0c\u5e76\u4e14\u4e5f\u4f1a\u751f\u6210\u4e00\u4e2a\u968f\u673a\u6570\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a `y`\uff0c\u5c06\u5176\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\\n- `ACK`\uff1a\u5ba2\u6237\u7aef\u8fd4\u56de `ACK y + 1`\uff0c\u8868\u793a\u6536\u5230\u4e86\u670d\u52a1\u7aef\u7684\u6570\u636e\\n\\n\u4e00\u65e6\u4e09\u6b21\u63e1\u624b\u5b8c\u6210\u4e4b\u540e\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u5c31\u5f00\u59cb\u53d1\u9001\u6570\u636e\u3002\u6211\u4eec\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5f53\u5ba2\u6237\u7aef\u53d1\u9001\u5b8c\u6700\u540e\u4e00\u4e2a `ACK` \u4fe1\u53f7\u4e4b\u540e\uff0c\u5ba2\u6237\u7aef\u4e5f\u8bb8\u4f1a\u7acb\u9a6c\u53d1\u9001\u5e94\u7528\u5c42\u6570\u636e\uff0c\u4f46\u662f\u670d\u52a1\u5668\u4ecd\u7136\u9700\u8981\u7b49\u5f85 `ACK` \u5305\u7684\u5230\u6765\u4e4b\u540e\u624d\u80fd\u5904\u7406\u8bf7\u6c42\u3002\\n\\n\u7136\u540e\uff0c\u4e00\u4e2a `HTTP/1.0` \u7684\u5b9e\u73b0\u901a\u8fc7\u5f15\u5165\u4e00\u4e2a\u79f0\u4e3a `Connection: keep-alive` \u7684\u65b0\u7684\u5934\u90e8\u6765\u514b\u670d\u4e0a\u8ff0\u95ee\u9898\uff0c\u8fd9\u4e2a\u5934\u90e8\u7684\u610f\u601d\u5c31\u662f\u544a\u8bc9\u670d\u52a1\u5668\uff1a\u201c\u55e8\u670d\u52a1\u5668\uff0c\u4e0d\u8981\u5173\u95ed\u8fde\u63a5\u54e6\uff01\u6211\u5f85\u4f1a\u8fd8\u6709\u7528\u201d\u3002\u4f46\u662f\u5b83\u6ca1\u6709\u88ab\u5e7f\u6cdb\u7684\u652f\u6301\uff0c\u56e0\u6b64\u95ee\u9898\u4ecd\u7136\u5b58\u5728\u3002\\n\\n\u9664\u4e86\u662f\u65e0\u8fde\u63a5\u4e4b\u5916\uff0c`HTTP` \u8fd8\u662f\u4e00\u4e2a\u65e0\u72b6\u6001\u7684\u534f\u8bae\uff0c\u4e5f\u5c31\u662f\u8bf4\u670d\u52a1\u5668\u4e0d\u4f1a\u4fdd\u5b58\u5ba2\u6237\u7aef\u7684\u4fe1\u606f\uff0c\u4e3a\u4e86\u8ba9\u670d\u52a1\u5668\u5904\u7406\u8bf7\u6c42\uff0c\u6bcf\u4e2a\u8bf7\u6c42\u90fd\u9700\u8981\u643a\u5e26\u5fc5\u8981\u7684\u4fe1\u606f\uff0c\u6bcf\u4e2a\u8fde\u63a5\u4e0e\u4e4b\u524d\u7684\u8fde\u63a5\u90fd\u6ca1\u6709\u5173\u7cfb\u3002\u8fd9\u66f4\u52a0\u7684\u706b\u4e0a\u6d47\u6cb9\u4e86\uff0c\u4e0d\u4ec5\u5ba2\u6237\u7aef\u9700\u8981\u5efa\u7acb\u5927\u91cf\u7684\u8fde\u63a5\uff0c\u800c\u4e14\u6bcf\u6b21\u90fd\u9700\u8981\u53d1\u9001\u5197\u4f59\u7684\u6570\u636e\uff0c\u8fd9\u4f1a\u589e\u52a0\u5e26\u5bbd\u7684\u4f7f\u7528\u3002\\n\\n## HTTP/1.1 - 1999\\n\\n\u5728 `HTTP/1.0` \u53d1\u5e03\u4e09\u5e74\u4e4b\u540e\uff0c\u4e0b\u4e00\u4e2a\u7248\u672c `HTTP/1.1` \u4e8e 1999 \u5e74\u53d1\u5e03\uff0c\u5728\u4e4b\u524d\u57fa\u7840\u4e0a\u505a\u51fa\u4e86\u5f88\u591a\u7684\u6539\u8fdb\u3002`HTTP/1.1` \u4e3b\u8981\u7684\u6539\u8fdb\u5305\u62ec\uff1a\\n\\n- \u6dfb\u52a0\u4e86\u65b0\u7684 `HTTP` \u65b9\u6cd5\uff0c\u5305\u62ec `PUT`, `PATCH`, `OPTIONS`, `DELETE`\\n- \u5728 `HTTP/1.0` \u4e2d\uff0c`Host` \u5934\u90e8\u4e0d\u662f\u5fc5\u987b\u7684\uff0c\u4f46\u662f\u5728 `HTTP/1.1` \u4e2d\u5b83\u662f\u5fc5\u987b\u7684\u3002\\n- \u6301\u4e45\u8fde\u63a5\uff0c\u6b63\u5982\u4e0a\u6587\u8ba8\u8bba\u7684\u4e00\u6837\uff0c\u5728 `HTTP/1.0` \u4e2d\uff0c\u6bcf\u4e00\u4e2a\u8fde\u63a5\u53ea\u6709\u4e00\u4e2a\u8bf7\u6c42\uff0c\u6bcf\u5f53\u8bf7\u6c42\u88ab\u5904\u7406\u5b8c\u6bd5\u4e4b\u540e\u8fde\u63a5\u7acb\u9a6c\u88ab\u5173\u95ed\uff0c\u8fd9\u4f1a\u9020\u6210\u6027\u80fd\u7684\u6025\u5267\u4e0b\u964d\u4ee5\u53ca\u65f6\u5ef6\u95ee\u9898\u3002`HTTP/1.1` \u5f15\u5165\u4e86\u6301\u4e45\u8fde\u63a5\uff0c\u4e5f\u5c31\u662f\u8bf4\u8fde\u63a5\u9ed8\u8ba4\u4e0d\u4f1a\u5173\u95ed\uff0c\u5b83\u53ef\u4ee5\u591a\u4e2a\u8fde\u7eed\u7684\u8bf7\u6c42\u3002\u4e3a\u4e86\u5173\u95ed\u8fde\u63a5\uff0c\u9700\u8981\u5728\u8bf7\u6c42\u4e2d\u8bbe\u7f6e `Connection: close`\u3002\u5ba2\u6237\u7aef\u4e00\u822c\u4e0d\u4f1a\u6700\u540e\u4e00\u4e2a\u8bf7\u6c42\u4e2d\u53d1\u9001\u6b64\u5934\u90e8\u6765\u5173\u95ed\u8fde\u63a5\u3002\\n- \u6d41\u6c34\u7ebf\uff0c\u5728 `HTTP/1.1` \u4e2d\u4e5f\u5f15\u5165\u4e86\u5bf9\u6d41\u6c34\u7ebf\u7684\u652f\u6301\uff0c\u5373\u5728\u540c\u4e00\u6761\u8fde\u63a5\u4e2d\uff0c\u5ba2\u6237\u7aef\u4e2d\u53ef\u4ee5\u540c\u65f6\u53d1\u9001\u591a\u6761\u8bf7\u6c42\u800c\u4e0d\u5fc5\u7b49\u5f85\u670d\u52a1\u5668\u505a\u51fa\u54cd\u5e94\uff0c\u670d\u52a1\u5668\u5fc5\u987b\u6309\u63a5\u6536\u5230\u8bf7\u6c42\u7684\u987a\u5e8f\u505a\u51fa\u54cd\u5e94\u3002\u4f46\u662f\u4f60\u53ef\u80fd\u4f1a\u95ee\uff0c\u5ba2\u6237\u7aef\u662f\u5982\u4f55\u77e5\u9053\u7b2c\u4e00\u4e2a\u54cd\u5e94\u63a5\u6536\u5b8c\u6210\u4e86\uff0c\u4e0b\u4e00\u4e2a\u54cd\u5e94\u5185\u5bb9\u5f00\u59cb\u4e86\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u5fc5\u987b\u4f7f\u7528 `Content-Length` \u5934\u90e8\u6765\u8868\u793a\u54cd\u5e94\u4f53\u7684\u6570\u636e\u6709\u591a\u957f\uff0c\u8fd9\u6837\u5ba2\u6237\u7aef\u5c31\u53ef\u4ee5\u6839\u636e\u63a5\u6536\u5230\u7684\u6570\u636e\u957f\u5ea6\u6765\u5224\u65ad\u8fd9\u4e2a\u54cd\u5e94\u662f\u5426\u7ed3\u675f\u4e86\u3002\\n\\n  \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e3a\u4e86\u4ece\u6301\u4e45\u8fde\u63a5\u548c\u6d41\u6c34\u7ebf\u4e2d\u83b7\u76ca\uff0c\u5728\u54cd\u5e94\u4e2d\u643a\u5e26 `Content-Length` \u5934\u90e8\u662f\u5fc5\u9700\u7684\uff0c\u56e0\u4e3a\u901a\u8fc7\u5b83\u5ba2\u6237\u7aef\u5c31\u53ef\u4ee5\u77e5\u9053\u4f20\u8f93\u4ec0\u4e48\u65f6\u5019\u5b8c\u6210\uff0c\u5ba2\u6237\u7aef\u5c31\u53ef\u4ee5\u53d1\u9001\u4e0b\u4e00\u4e2a\u8bf7\u6c42\u4e86(\u901a\u5e38\u53d1\u9001\u8fde\u7eed\u7684\u8bf7\u6c42)\u6216\u8005\u5f00\u59cb\u7b49\u5f85\u4e0b\u4e00\u4e2a\u54cd\u5e94\u6570\u636e(\u5982\u679c\u5141\u8bb8\u4ee5\u6d41\u6c34\u7ebf\u53d1\u9001\u8bf7\u6c42)\\n\\n  \u4f46\u662f\u4f7f\u7528\u8fd9\u79cd\u65b9\u6cd5\u4ecd\u7136\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u5f53\u6570\u636e\u662f\u52a8\u6001\u7684\uff0c\u670d\u52a1\u5668\u4e0d\u6e05\u695a\u53d1\u9001\u7684\u6570\u636e\u6709\u591a\u957f\uff0c\u8fd9\u4e2a\u65f6\u5019\u600e\u4e48\u529e? \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4f60\u5c31\u4e0d\u80fd\u4ece\u6301\u4e45\u8fde\u63a5\u4e2d\u83b7\u5f97\u76ca\u5904\u4e86\uff01\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c`HTTP/1.1` \u5f15\u5165\u4e86\u5206\u5757\u7f16\u7801(chunked encoding)\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u4f1a\u7701\u7565 `Content-Length`\uff0c\u800c\u652f\u6301\u5206\u5757\u7f16\u7801(\u7a0d\u540e\u518d\u8c08)\u3002\u7136\u540e\uff0c\u5982\u4f55\u5b83\u4eec\u4e24\u4e2a\u90fd\u4e0d\u53ef\u7528\uff0c\u90a3\u4e48\u5728\u8be5\u8bf7\u6c42\u5904\u7406\u5b8c\u6bd5\u4e4b\u540e\u8fde\u63a5\u5c31\u5fc5\u987b\u88ab\u5173\u95ed\u3002\\n\\n- \u5206\u5757\u4f20\u8f93\uff0c\u5f53\u4f20\u8f93\u52a8\u6001\u5185\u5bb9\u65f6\uff0c\u670d\u52a1\u5668\u4e0d\u77e5\u9053 `Conetnt-Length` \u7684\u503c\uff0c\u670d\u52a1\u5668\u5c31\u4f1a\u4ee5\u5757\u7684\u5f62\u5f0f\u53d1\u9001\u6570\u636e(\u4e00\u5757\u4e00\u5757\u7684\u53d1\u9001\u6570\u636e)\uff0c\u5e76\u4e14\u53d1\u9001\u7684\u65f6\u5019\u4e3a\u6bcf\u4e00\u4e2a\u5757\u6dfb\u52a0 `Content-Length`\u3002\u5f53\u6240\u6709\u7684\u5757\u88ab\u53d1\u9001\u5b8c\u6bd5\u4e4b\u540e\uff0c\u6574\u4e2a\u4f20\u8f93\u5b8c\u6210\u4e4b\u540e\uff0c\u670d\u52a1\u5668\u4f1a\u53d1\u9001\u4e00\u4e2a\u7a7a\u7684\u5757\uff0c\u5b83\u7684 `Conetnt-Length` \u5927\u5c0f\u88ab\u8bbe\u7f6e\u4e3a `0` \u6765\u6307\u793a\u4f20\u8f93\u5df2\u7ecf\u5b8c\u6210\u4e86\u3002\u4e3a\u4e86\u901a\u77e5\u5ba2\u6237\u7aef\u8fd9\u4e2a\u54cd\u5e94\u662f\u5206\u5757\u4f20\u8f93\u7684\uff0c\u670d\u52a1\u5668\u9700\u8981\u5305\u542b\u4e00\u4e2a\u5934\u90e8 `Transfer-Encoding: chunked`\u3002\\n- \u4e0d\u50cf HTTP/1.0 \u53ea\u6709\u57fa\u672c\u8ba4\u8bc1\uff0cHTTP/1.1 \u5305\u62ec\u6458\u8981\u548c\u4ee3\u7406\u8ba4\u8bc1\u3002\\n- \u7f13\u5b58\\n- \u5b57\u8282\u8303\u56f4\\n- \u5b57\u7b26\u96c6\\n- \u8bed\u8a00\u534f\u5546\\n- \u5ba2\u6237\u7aef cookies\\n- \u66f4\u5f3a\u7684\u538b\u7f29\u65b9\u5f0f\u652f\u6301\\n- \u65b0\u7684\u72b6\u6001\u7801\\n- ...\u4ee5\u53ca\u66f4\u591a\\n\\n\u6211\u4e0d\u6253\u7b97\u5728\u8fd9\u7247\u6587\u7ae0\u4e2d\u6df1\u5165\u8bb2\u89e3\u5173\u4e8e `HTTP/1.1` \u7684\u7279\u6027\uff0c\u56e0\u4e3a\u5b83\u672c\u8eab\u5c31\u662f\u4e00\u4e2a\u8bdd\u9898\uff0c\u4f60\u53ef\u4ee5\u627e\u5230\u5f88\u591a\u5173\u4e8e\u5b83\u7684\u5185\u5bb9\u3002\u6211\u4f1a\u63a8\u8350\u4e00\u7bc7\u6587\u6863\u7ed9\u4f60 [Key differences between HTTP/1.0 and HTTP/1.1](http://www.ra.ethz.ch/cdstore/www8/data/2136/pdf/pd1.pdf) \u4ee5\u53ca\u5b83\u7684 `RFC` \u6587\u6863\u94fe\u63a5 [origin RFC](https://tools.ietf.org/html/rfc2616)\u3002\\n\\n`HTTP/1.1` \u662f\u5728 1999 \u5e74\u63a8\u51fa\u7684\uff0c\u5b83\u5df2\u7ecf\u662f\u4e00\u4e2a\u591a\u5e74\u7684\u6807\u51c6\u3002\u5373\u4f7f\u5b83\u76f8\u5bf9\u4e8e\u4e4b\u524d\u7684\u7248\u672c\u505a\u51fa\u4e86\u5f88\u5927\u7684\u6539\u8fdb\uff0c\u4f46\u662f web \u6bcf\u5929\u90fd\u5728\u53d8\u5316\uff0c\u5b83\u5f00\u59cb\u8868\u73b0\u7684\u8fc7\u65f6\u4e86\u3002\u5982\u4eca\uff0c\u52a0\u8f7d\u4e00\u4e2a\u7f51\u9875\u6bd4\u4ee5\u524d\u66f4\u8017\u8d39\u8d44\u6e90\u3002\u5982\u4eca\u7684\u4e00\u4e2a\u7b80\u5355\u7f51\u9875\u90fd\u9700\u8981\u6253\u5f00\u8d85\u8fc7 30 \u4e2a\u8fde\u63a5\u3002\u4f60\u53ef\u80fd\u4f1a\u8bf4\uff0c\u4e3a\u4ec0\u4e48 `HTTP/1.1` \u90fd\u6709\u6301\u4e45\u8fde\u63a5\u4e86\uff0c\u8fd8\u9700\u8981\u6253\u5f00\u8fd9\u4e48\u591a\u8fde\u63a5\u5462? \u539f\u56e0\u662f\uff0c\u5728 `HTTP/1.1` \u4e2d\uff0c\u5b83\u5728\u4efb\u4f55\u65f6\u5019\u90fd\u53ea\u80fd\u6709\u4e00\u4e2a\u672a\u51b3\u7684\u8fde\u63a5\u3002`HTTP/1.1` \u8bd5\u56fe\u901a\u8fc7\u5f15\u5165\u6d41\u6c34\u7ebf\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u4f46\u5b83\u5e76\u6ca1\u6709\u5b8c\u5168\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u56e0\u4e3a\u961f\u5934\u963b\u585e\uff0c\u4e00\u4e2a\u8017\u65f6\u8f83\u957f\u7684\u8bf7\u6c42\u53ef\u80fd\u4f1a\u963b\u585e\u540e\u9762\u7684\u8bf7\u6c42\uff0c\u53ea\u6709\u7b49\u5f85\u8fd9\u4e2a\u8bf7\u6c42\u88ab\u670d\u52a1\u5668\u5904\u7406\u5b8c\u6bd5\u4ee5\u540e\uff0c\u4e0b\u4e00\u4e2a\u8bf7\u6c42\u624d\u4f1a\u88ab\u670d\u52a1\u5668\u5904\u7406\u3002\u4e3a\u4e86\u514b\u670d `HTTP/1.1` \u7684\u7f3a\u70b9\uff0c\u5f00\u53d1\u8005\u76f8\u51fa\u4e86\u4e00\u4e9b\u53d8\u901a\u7684\u6cd5\u5b50\uff0c\u4f8b\u5982\u4f7f\u7528\u7cbe\u7075\u56fe\uff0c`CSS` \u4e2d\u7684\u7f16\u7801\u56fe\u50cf\uff0c\u5355\u4e2a\u5de8\u5927\u7684 `CSS/JavaSCript` \u6587\u4ef6\uff0c\u57df\u540d\u5206\u7247\u7b49\u7b49\u3002\\n\\n## SPDY - 2009\\n\\nGoogle \u5e26\u5934\u51b2\u950b\u5f00\u59cb\u7814\u7a76\u53e6\u4e00\u4e2a\u534f\u8bae\u6765\u4f7f\u7f51\u9875\u66f4\u5feb\uff0c\u4ee5\u53ca\u5728\u51cf\u5c11\u7f51\u9875\u65f6\u5ef6\u7684\u540c\u65f6\u63d0\u9ad8\u7f51\u9875\u7684\u5b89\u5168\u6027\u3002\u5728 2009 \u5e74\uff0c\u4ed6\u4eec\u5ba3\u5e03\u4e86 `SPDY`\u3002\\n\\n:::note note\\n\\n`SPDY` \u662f Google \u7684\u5546\u6807\u800c\u4e0d\u662f\u7f29\u5199\u3002\\n\\n:::\\n\\n\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u5982\u679c\u6211\u4eec\u6301\u7eed\u7684\u589e\u52a0\u5e26\u5bbd\uff0c\u7f51\u7edc\u7684\u6027\u80fd\u5728\u4e00\u5f00\u59cb\u4f1a\u589e\u52a0\uff0c\u4e00\u65e6\u5230\u8fbe\u67d0\u4e2a\u70b9\u540e\uff0c\u6027\u80fd\u7684\u589e\u76ca\u5c31\u4e0d\u660e\u663e\u4e86\u3002\u4f46\u662f\u5982\u679c\u4f60\u5bf9\u65f6\u5ef6\u505a\u540c\u6837\u7684\u5904\u7406\uff0c\u5982\u679c\u6211\u4eec\u4e0d\u65ad\u7684\u964d\u4f4e\u65f6\u5ef6\uff0c\u5c31\u53ef\u4ee5\u6709\u4e00\u4e2a\u7a33\u5b9a\u7684\u6027\u80fd\u589e\u76ca\u3002\u8fd9\u5c31\u662f `SPDY` \u83b7\u5f97\u6027\u80fd\u589e\u76ca\u80cc\u540e\u7684\u6838\u5fc3\u601d\u60f3\uff1a\u51cf\u5c11\u65f6\u5ef6\u6765\u63d0\u9ad8\u7f51\u7edc\u6027\u80fd\u3002\\n\\n \u6211\u4e0d\u6253\u7b97\u8ba8\u8bba `SPDY` \u7684\u7ec6\u8282\uff0c\u56e0\u4e3a\u5f53\u6211\u4eec\u5728\u4e0b\u4e00\u8282\u8ba8\u8bba `HTTP/2` \u7684\u7ec6\u8282\u65f6\uff0c\u4f60\u4f1a\u660e\u767d\u7684\uff0c\u56e0\u4e3a\u6211\u8bf4\u8fc7` HTTP/2` \u7684\u7075\u611f\u4e3b\u8981\u6765\u81ea `SPDY`\u3002\\n\\n`SPDY` \u4e0d\u662f\u5c1d\u8bd5\u8981\u53d6\u4ee3 `HTTP`\uff0c\u5b83\u662f\u4e00\u4e2a\u57fa\u4e8e `HTTP` \u7684\u8f6c\u4e49\u5c42\uff0c\u5b83\u5b58\u5728\u4e8e\u5e94\u7528\u5c42\uff0c\u5728\u6bcf\u6b21\u53d1\u9001\u8bf7\u6c42\u4e4b\u524d\u5b83\u4f1a\u5bf9\u8bf7\u6c42\u8fdb\u884c\u66f4\u6539\u3002`SPDY` \u5df2\u7ecf\u5f00\u59cb\u6210\u4e3a\u4e8b\u5b9e\u4e0a\u7684\u6807\u51c6\uff0c\u5927\u591a\u6570\u6d4f\u89c8\u5668\u5f00\u59cb\u5b9e\u73b0\u5b83\u3002\\n\\n\u5728 2015 \u5e74\uff0cGoogle \u4e0d\u60f3\u6709\u4e24\u4e2a\u7ade\u4e89\u7684\u6807\u51c6\uff0c\u4e8e\u662f\u5b83\u4eec\u51b3\u5b9a\u5c06\u5176\u878d\u5165\u5230 `HTTP` \u4e2d\uff0c\u8fd9\u5c31\u5bfc\u81f4\u4e86 `HTTP/2` \u7684\u8bde\u751f\u4ee5\u53ca `SPDY` \u7684\u5e9f\u5f03\u3002\\n\\n## HTTP/2 - 2015\\n\\n\u73b0\u5728\u4f60\u4e00\u5b9a\u660e\u767d\u6211\u4eec\u4e3a\u4ec0\u4e48\u8981\u5bf9 `HTTP` \u505a\u4e00\u6b21\u4fee\u8ba2\u3002`HTTP/2` \u88ab\u8bbe\u8ba1\u7528\u6765\u4ee5\u4f4e\u65f6\u5ef6\u4f20\u8f93\u5185\u5bb9\u3002\u4e0e\u8001\u7248\u672c `HTTP/1.1` \u4e0d\u540c\u7684\u5173\u952e\u7279\u6027\u5305\u62ec\uff1a\\n\\n- \u4e8c\u8fdb\u5236\u800c\u4e0d\u662f\u6587\u672c\\n- \u591a\u8def\u590d\u7528\u2014\u2014\u5728\u4e00\u6761\u8fde\u63a5\u4e0a\u53d1\u9001\u591a\u4e2a\u5f02\u6b65\u8bf7\u6c42\\n- \u4f7f\u7528 `HPACK` \u8fdb\u884c\u5934\u90e8\u538b\u7f29\\n- \u670d\u52a1\u5668\u63a8\u9001\u2014\u2014\u5bf9\u4e8e\u5355\u4e2a\u8bf7\u6c42\u6709\u591a\u4e2a\u54cd\u5e94\\n- \u8bf7\u6c42\u4f18\u5148\u7ea7\\n- \u5b89\u5168\\n\\n### 1. \u4e8c\u8fdb\u5236\u534f\u8bae\\n\\n`HTTP/2`  \u901a\u8fc7\u4f7f\u7528\u4e8c\u8fdb\u5236\u534f\u8bae\u6765\u89e3\u51b3\u5728 `HTTP/1.x` \u4e2d\u5b58\u5728\u7684\u9ad8\u65f6\u5ef6\u95ee\u9898\u3002\u4e8c\u8fdb\u5236\u534f\u8bae\u66f4\u5bb9\u6613\u88ab\u89e3\u6790\uff0c\u867d\u7136\u4e0d\u50cf `HTTP/1.x` \u90a3\u6837\u4eba\u773c\u53ef\u8bfb\u3002`HTTP/2` \u7684\u4e3b\u8981\u7ec4\u6210\u5feb\u662f\u5e27\u548c\u6d41\u3002\\n\\n**\u5e27\u548c\u6d41\uff1a**\\n\\n`HTTP` \u6d88\u606f\u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u5e27\u7ec4\u6210\u3002\u5934\u90e8\u5e27\u7528\u6765\u4f20\u8f93\u5143\u6570\u636e(meta data)\uff0c\u6570\u636e\u5e27\u7528\u6765\u4f20\u9012\u8d1f\u8f7d\uff0c\u5b58\u5728\u51e0\u79cd\u4e0d\u540c\u7684\u5e27(`HEADERS`, `DATA`, `RST_STREAM`, `SETTINGS`, `PRIORITY` \u7b49)\u3002\\n\\n\u6bcf\u4e00\u4e2a `HTTP/2` \u8bf7\u6c42\u548c\u54cd\u5e94\u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u7684\u6d41 ID (Stream ID)\uff0c\u4e00\u4e2a\u6d41\u53ef\u4ee5\u88ab\u5206\u4e3a\u591a\u4e2a\u5e27\uff0c\u5e27\u5176\u5b9e\u5c31\u662f\u4e8c\u8fdb\u5236\u6570\u636e\u3002\u4e00\u4e2a\u6d41\u5305\u542b\u591a\u4e2a\u5e27\u3002\u6bcf\u4e00\u4e2a\u5e27\u90fd\u6709\u4e00\u4e2a\u6d41 ID \u6765\u8868\u660e\u5b83\u5c5e\u4e8e\u54ea\u4e00\u4e2a\u6d41\uff0c\u6bcf\u4e00\u4e2a\u5e27\u90fd\u6709\u4e00\u4e2a\u516c\u5171\u7684\u5934\u90e8\u3002\u9664\u4e86\u552f\u4e00\u7684\u6d41ID\u4e4b\u5916\uff0c\u8fd8\u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c\u7531\u5ba2\u6237\u7aef\u53d1\u51fa\u8bf7\u6c42\u7684\u6d41\u4f7f\u7528\u5947\u6570\u4f5c\u4e3a\u6d41ID\uff0c\u7531\u670d\u52a1\u5668\u505a\u51fa\u54cd\u5e94\u7684\u6d41\u4f7f\u7528\u5076\u6570\u4f5c\u4e3a\u6d41ID\u3002\\n\\n\u9664\u4e86 `HEADERS` \u548c `DATA`\uff0c\u5176\u4ed6\u5e27\u7c7b\u578b\u4e2d\u503c\u5f97\u4e00\u63d0\u8fd8\u6709 `RST_STREAM`\uff0c\u5b83\u901a\u5e38\u7528\u6765\u7ec8\u6b62\u4e00\u4e9b\u6d41\u3002\u5ba2\u6237\u7aef\u4f1a\u53d1\u9001\u8fd9\u4e2a\u5e27\uff0c\u8ba9\u670d\u52a1\u5668\u77e5\u9053\u5b83\u4e0d\u5728\u9700\u8981\u8fd9\u4e2a\u6d41\u4e86\u3002\u5728 `HTTP/1.1` \u4e2d\u8ba9\u670d\u52a1\u5668\u7ec8\u6b62\u53d1\u9001\u54cd\u5e94\u7ed9\u5ba2\u6237\u7aef\u7684\u552f\u4e00\u65b9\u6cd5\u5c31\u662f\u5173\u95ed\u8fde\u63a5\uff0c\u4f46\u8fd9\u4f1a\u5bfc\u81f4\u65f6\u5ef6\u7684\u589e\u52a0\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u968f\u540e\u7684\u8bf7\u6c42\u5b83\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u8fde\u63a5\u3002\u4f46\u662f\u5728 `HTTP/2` \u4e2d\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u4f7f\u7528 `RST_STREAM` \u6765\u963b\u6b62\u63a5\u6536\u4e00\u4e2a\u7279\u5b9a\u7684\u6d41\u5e76\u4e14\u8fde\u63a5\u4e0d\u4f1a\u88ab\u5173\u95ed\uff0c\u5176\u4ed6\u7684\u6d41\u4ecd\u7136\u53ef\u4ee5\u88ab\u4f20\u8f93\u3002\\n\\n### 2. \u591a\u8def\u590d\u7528\\n\\n\u6b63\u5982\u6211\u6240\u8bf4\uff0c`HTTP/2` \u662f\u4e00\u4e2a\u4e8c\u8fdb\u5236\u534f\u8bae\uff0c\u4f7f\u7528\u5e27\u548c\u6d41\u53d1\u9001\u8bf7\u6c42\u548c\u54cd\u5e94\uff0c\u4e00\u65e6 `TCP` \u8fde\u63a5\u88ab\u6253\u5f00\uff0c\u6240\u6709\u7684\u6d41\u901a\u8fc7\u540c\u4e00\u4e2a\u8fde\u63a5\u5f02\u6b65\u7684\u53d1\u9001\uff0c\u4e0d\u7528\u6253\u5f00\u65b0\u7684\u8fde\u63a5\u3002\u540c\u6837\uff0c\u670d\u52a1\u5668\u4ee5\u540c\u6837\u5f02\u6b65\u7684\u65b9\u5f0f\u505a\u51fa\u54cd\u5e94\uff0c\u6bcf\u4e00\u4e2a\u54cd\u5e94\u90fd\u662f\u65e0\u5e8f\u7684\uff0c\u5ba2\u6237\u7aef\u4f7f\u7528\u8d4b\u4e88\u7684\u6d41ID\u6765\u8bc6\u522b\u6d41\u5c5e\u4e8e\u54ea\u4e00\u4e2a\u5305\u3002\u8fd9\u89e3\u51b3\u5728 `HTTP/1.x` \u4e2d\u5b58\u5728\u7684\u961f\u5934\u963b\u585e\u95ee\u9898\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5ba2\u6237\u7aef\u4e0d\u7528\u90a3\u4e9b\u82b1\u65f6\u95f4\u7684\u8bf7\u6c42\u963b\u585e\uff0c\u5176\u4ed6\u8bf7\u6c42\u4e5f\u53ef\u4ee5\u5f97\u5230\u5904\u7406\u3002\\n\\n### 3. HPACK \u5934\u90e8\u538b\u7f29\\n\\n\u5b83\u662f\u4e00\u4e2a\u5355\u72ec\u7684 RFC \u7684\u4e00\u90e8\u5206\uff0c\u4e13\u95e8\u9488\u5bf9\u4f18\u5316\u53d1\u9001\u7684\u5934\u90e8\u3002\u5b83\u7684\u5fc5\u8981\u6027\u5728\u4e8e\uff0c\u5f53\u6211\u4eec\u4e0d\u65ad\u7684\u4ece\u4e00\u4e2a\u5ba2\u6237\u7aef\u8bbf\u95ee\u670d\u52a1\u5668\u65f6\uff0c\u6211\u4eec\u6bcf\u6b21\u90fd\u9700\u8981\u53d1\u9001\u5934\u90e8\u4fe1\u606f\uff0c\u6bcf\u6761\u8bf7\u6c42\u7684\u5934\u90e8\u4fe1\u606f\u76f8\u5dee\u4e0d\u5927\uff0c\u610f\u5473\u7740\u8fd9\u4e9b\u4fe1\u606f\u662f\u5197\u4f59\u7684\uff0c\u6709\u7684\u65f6\u5019\u5982\u679c\u7531 `cookie` \u7684\u8bdd\uff0c\u4f1a\u5bfc\u81f4\u5934\u90e8\u7684\u5927\u5c0f\u589e\u5927\uff0c\u8fd9\u4f1a\u589e\u5927\u5e26\u5bbd\u7684\u4f7f\u7528\u4ee5\u53ca\u65f6\u5ef6\u7684\u589e\u52a0\u3002\u4e3a\u4e86\u514b\u670d\u8fd9\u70b9\uff0c`HTTP/2` \u5f15\u5165\u4e86\u5934\u90e8\u538b\u7f29\u3002\\n\\n<img src=\\"http://i.imgur.com/3IPWXvR.png\\" style={{ zoom: \'50%\' }} />\\n\\n\u4e0e\u8bf7\u6c42\u548c\u54cd\u5e94\u4e0d\u540c\uff0c\u5934\u6587\u4ef6\u4e0d\u662f\u4ee5 `gzip` \u6216 `compress` \u7b49\u683c\u5f0f\u538b\u7f29\u7684\uff0c\u800c\u662f\u6709\u4e00\u4e2a\u4e0d\u540c\u7684\u5934\u6587\u4ef6\u538b\u7f29\u673a\u5236\uff0c\u5373\u4f7f\u7528 `Huffman` \u7f16\u7801\u5bf9\u5b57\u9762\u503c\u8fdb\u884c\u7f16\u7801\uff0c\u5e76\u7531\u5ba2\u6237\u548c\u670d\u52a1\u5668\u7ef4\u62a4\u4e00\u4e2a\u5934\u6587\u4ef6\u8868\uff0c\u5ba2\u6237\u548c\u670d\u52a1\u5668\u5728\u968f\u540e\u7684\u8bf7\u6c42\u4e2d\u7701\u7565\u4efb\u4f55\u91cd\u590d\u7684\u5934\u6587\u4ef6\uff08\u5982\u7528\u6237\u4ee3\u7406\u7b49\uff09\uff0c\u5e76\u4f7f\u7528\u53cc\u65b9\u7ef4\u62a4\u7684\u5934\u6587\u4ef6\u8868\u6765\u5f15\u7528\u5b83\u4eec\u3002\\n\\n\u5f53\u6211\u4eec\u5728\u8c08\u8bba\u5934\u4fe1\u606f\u65f6\uff0c\u8ba9\u6211\u5728\u8fd9\u91cc\u8865\u5145\u4e00\u4e0b\uff0c\u5934\u4fe1\u606f\u4ecd\u7136\u4e0e`HTTP/1.1`\u76f8\u540c\uff0c\u53ea\u662f\u589e\u52a0\u4e86\u4e00\u4e9b\u4f2a\u5934\u4fe1\u606f\uff0c\u5982 `:method`, `:scheme`, `:host` \u548c `:path`\u3002\\n\\n### 4. \u670d\u52a1\u5668\u63a8\u9001\\n\\n\u670d\u52a1\u5668\u63a8\u9001\u662f `HTTP/2` \u7684\u53e6\u4e00\u4e2a\u5de8\u5927\u529f\u80fd\uff0c\u5373\u670d\u52a1\u5668\u5728\u77e5\u9053\u5ba2\u6237\u7aef\u5c06\u8981\u6c42\u67d0\u79cd\u8d44\u6e90\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u5c06\u5176\u63a8\u9001\u7ed9\u5ba2\u6237\u7aef\uff0c\u751a\u81f3\u65e0\u9700\u5ba2\u6237\u7aef\u8981\u6c42\u3002\u4f8b\u5982\uff0c\u5047\u8bbe\u6d4f\u89c8\u5668\u52a0\u8f7d\u4e86\u4e00\u4e2a\u7f51\u9875\uff0c\u5b83\u89e3\u6790\u6574\u4e2a\u9875\u9762\uff0c\u627e\u51fa\u9700\u8981\u4ece\u670d\u52a1\u5668\u52a0\u8f7d\u7684\u8fdc\u7a0b\u5185\u5bb9\uff0c\u7136\u540e\u5411\u670d\u52a1\u5668\u53d1\u9001\u76f8\u5e94\u7684\u8bf7\u6c42\u4ee5\u83b7\u5f97\u8fd9\u4e9b\u5185\u5bb9\u3002\\n\\n\u670d\u52a1\u5668\u63a8\u9001\u5141\u8bb8\u670d\u52a1\u5668\u901a\u8fc7\u63a8\u9001\u5b83\u77e5\u9053\u5ba2\u6237\u5c06\u9700\u8981\u7684\u6570\u636e\u6765\u51cf\u5c11\u5f80\u8fd4\u7684\u6b21\u6570\u3002\u5b83\u662f\u5982\u4f55\u505a\u5230\u7684\uff0c\u670d\u52a1\u5668\u53d1\u9001\u4e00\u4e2a\u7279\u6b8a\u7684\u5e27\uff0c\u79f0\u4e3a `PUSH_PROMISE`\uff0c\u901a\u77e5\u5ba2\u6237\u7aef\uff1a\\"\u563f\uff0c\u6211\u5373\u5c06\u628a\u8fd9\u4e2a\u8d44\u6e90\u53d1\u9001\u7ed9\u4f60\u4e86\uff01\u4e0d\u8981\u5411\u6211\u8981\u4e86\\"\u3002`PUSH_PROMISE` \u5e27\u4e0e\u5bfc\u81f4\u63a8\u9001\u53d1\u751f\u7684\u6d41\u6709\u5173\uff0c\u5b83\u5305\u542b\u6d41ID\uff0c\u5373\u670d\u52a1\u5668\u5c06\u53d1\u9001\u8981\u63a8\u9001\u7684\u8d44\u6e90\u7684\u6d41\u3002\\n\\n### 5. \u8bf7\u6c42\u4f18\u5148\u7ea7\\n\\n\u5ba2\u6237\u7aef\u53ef\u4ee5\u901a\u8fc7\u5728\u6253\u5f00\u4e00\u4e2a\u6d41\u7684 `HEADERS` \u5e27\u4e2d\u5305\u542b\u4f18\u5148\u7ea7\u4fe1\u606f\u6765\u4e3a\u4e00\u4e2a\u6d41\u5206\u914d\u4f18\u5148\u7ea7\u3002\u5728\u4efb\u4f55\u5176\u4ed6\u65f6\u95f4\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u53d1\u9001\u4e00\u4e2a `PRIORITY` \u5e27\u6765\u6539\u53d8\u6d41\u7684\u4f18\u5148\u7ea7\u3002\\n\\n\u5728\u6ca1\u6709\u4efb\u4f55\u4f18\u5148\u7ea7\u4fe1\u606f\u7684\u60c5\u51b5\u4e0b\uff0c\u670d\u52a1\u5668\u4ee5\u5f02\u6b65\u65b9\u5f0f\u5904\u7406\u8bf7\u6c42\uff0c\u5373\u6ca1\u6709\u4efb\u4f55\u987a\u5e8f\u3002\u5982\u679c\u6709\u4f18\u5148\u6743\u5206\u914d\u7ed9\u4e00\u4e2a\u6d41\uff0c\u90a3\u4e48\u57fa\u4e8e\u8fd9\u4e2a\u4f18\u5148\u6743\u4fe1\u606f\uff0c\u670d\u52a1\u5668\u51b3\u5b9a\u9700\u8981\u7ed9\u591a\u5c11\u8d44\u6e90\u6765\u5904\u7406\u54ea\u4e2a\u8bf7\u6c42\u3002\\n\\n### 6. \u5b89\u5168\\n\\n\u5bf9\u4e8eHTTP/2\u662f\u5426\u5e94\u8be5\u5f3a\u5236\u8981\u6c42\u5b89\u5168\uff08\u901a\u8fc7 `TLS`\uff09\uff0c\u8fdb\u884c\u4e86\u5e7f\u6cdb\u7684\u8ba8\u8bba\u3002\u6700\u540e\uff0c\u51b3\u5b9a\u4e0d\u628a\u5b83\u4f5c\u4e3a\u5f3a\u5236\u6027\u7684\u3002\u7136\u800c\uff0c\u5927\u591a\u6570\u4f9b\u5e94\u5546\u8868\u793a\uff0c\u53ea\u6709\u5f53 `HTTP/2` \u901a\u8fc7 `TLS` \u4f7f\u7528\u65f6\uff0c\u4ed6\u4eec\u624d\u4f1a\u652f\u6301\u5b83\u3002\u56e0\u6b64\uff0c\u867d\u7136\u5728\u89c4\u8303\u4e2d `HTTP/2` \u5e76\u4e0d\u8981\u6c42\u52a0\u5bc6\uff0c\u4f46\u5b83\u5df2\u7ecf\u6210\u4e3a\u4e00\u79cd\u9ed8\u8ba4\u7684\u5f3a\u5236\u6027\u3002\u8bf4\u5230\u8fd9\u91cc\uff0c`HTTP/2` \u5728 `TLS`\u4e0a\u5b9e\u73b0\u65f6\u786e\u5b9e\u63d0\u51fa\u4e86\u4e00\u4e9b\u8981\u6c42\uff0c\u5373\u5fc5\u987b\u4f7f\u7528 `TLS 1.2` \u7248\u672c\u6216\u66f4\u9ad8\u7684\u7248\u672c\uff0c\u5fc5\u987b\u6709\u4e00\u5b9a\u7a0b\u5ea6\u7684\u6700\u5c0f\u5bc6\u94a5\u5927\u5c0f\uff0c\u9700\u8981\u77ed\u6682\u7684\u5bc6\u94a5\u7b49\u3002"},{"id":"/2022/01/12/\u4ece\u624b\u6284\u7b14\u8bb0\u5230\u4e2a\u4eba\u535a\u5ba2","metadata":{"permalink":"/blog/2022/01/12/\u4ece\u624b\u6284\u7b14\u8bb0\u5230\u4e2a\u4eba\u535a\u5ba2","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2022-01-12-\u4ece\u624b\u6284\u7b14\u8bb0\u5230\u4e2a\u4eba\u535a\u5ba2.mdx","source":"@site/blog/2022-01-12-\u4ece\u624b\u6284\u7b14\u8bb0\u5230\u4e2a\u4eba\u535a\u5ba2.mdx","title":"\u4ece\u624b\u6284\u7b14\u8bb0\u5230\u4e2a\u4eba\u535a\u5ba2","description":"\u624b\u6284\u7b14\u8bb0","date":"2022-01-12T00:00:00.000Z","formattedDate":"2022\u5e741\u670812\u65e5","tags":[{"label":"\u968f\u7b14","permalink":"/blog/tags/\u968f\u7b14"}],"readingTime":8.51,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"authors":"xiongtao","tags":["\u968f\u7b14"]},"prevItem":{"title":"HTTP2\u4e4b\u65c5","permalink":"/blog/2022/03/11/HTTP2\u4e4b\u65c5"},"nextItem":{"title":"Canvas\u7ed8\u56fe\u6a21\u7cca","permalink":"/blog/2021/12/10/Canvas\u7ed8\u56fe\u6a21\u7cca"}},"content":"## \u624b\u6284\u7b14\u8bb0\\n\\n\u81ea\u4ece\u4e0a\u4e86\u5927\u5b66\u4e4b\u540e\uff0c\u77e5\u8bc6\u8d8a\u53d1\u8270\u6da9\u96be\u61c2\uff0c\u5f80\u5f80\u6211\u770b\u5b8c\u4e00\u904d\u4e66\u4e4b\u540e\uff0c\u90fd\u4e0d\u77e5\u9053\u81ea\u5df1\u770b\u4e86\u4ec0\u4e48\uff0c\u6240\u4ee5\u5f53\u65f6\u5c31\u89c9\u5f97\u6211\u9700\u8981\u505a\u7b14\u8bb0\uff0c\u6211\u90a3\u65f6\u4e3a\u6bcf\u95e8\u79d1\u76ee\u90fd\u51c6\u5907\u4e86\u4e00\u4e2a\u7b14\u8bb0\u672c\uff0c\u5f62\u5f0f\u611f\u5f88\u8db3\uff0c\u4e0d\u8fc7\u90a3\u65f6\u7684\u6211\u505a\u7b14\u8bb0\u7684\u65b9\u6cd5\u4e00\u822c\u5c31\u662f\u6284\u4e00\u904d PPT\u3002\u6284 PPT \u8fd9\u4e00\u884c\u4e3a\uff0c\u8bf4\u5b9e\u8bdd\uff0c\u5c41\u7528\u6ca1\u6709\uff0c\u5e76\u4e14\u5341\u5206\u7684\u8d39\u65f6\u95f4\uff0c\u4e00\u4e2a\u7ae0\u8282\u51e0\u5341\u9875 PPT\uff0c\u4e00\u95e8\u8bfe\u5c31\u662f\u51e0\u767e\u9875 PPT\uff0c\u624b\u90fd\u6284\u9ebb\u4e86\uff0c\u5f53\u65f6\u771f\u5403\u9971\u4e86\u6491\u7684\u3002\\n\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3/4f4c45d7accd1af1c1a8377676651192021-10-02-21-37-53.jpg\\"  style={{ zoom: \'50%\' }}/>\\n\\n\\n\u5f53\u65f6\u6211\u4e5f\u4e0d\u662f\u6ca1\u6709\u53cd\u7701\u8fc7\uff0c\u6284 PPT \u6709\u7528\u4e48\uff0c\u6709\u8fd9\u529f\u592b\u4e0d\u5982\u5c06 PPT \u6253\u5370\u4e0b\u6765\uff0c\u56de\u53bb\u6162\u6162\u770b\uff0c\u8ddf\u4f60\u6284\u7684\u4e5f\u5dee\u4e0d\u591a\u3002\u6240\u4ee5\u4e2d\u95f4\u4e5f\u505c\u8fc7\u4e00\u6bb5\u65f6\u95f4\uff0c\u4f46\u662f\u6ca1\u6709\u627e\u5230\u66f4\u597d\u7684\u7834\u5c40\u4e4b\u6cd5\uff0c\u7136\u540e\u53c8\u53bb\u6284 PPT \u4e86\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u7535\u5b50\u7b14\u8bb0\uff1aOneNote\\n\\n\u8fd9\u662f\u6211\u5927\u4e00\u5927\u4e8c\u7684\u4e8b\u60c5\uff0c\u56e0\u4e3a\u90a3\u4e2a\u65f6\u5019\u6211\u63a5\u89e6\u7535\u8111\u6ca1\u6709\u591a\u4e45\uff0c\u8fd8\u4e0d\u4f1a\u7528\u5b83\u6765\u8bb0\u7b14\u8bb0\uff0c\u5bf9\u7535\u8111\u7684\u7406\u89e3\u53ef\u80fd\u5c31\u662f\u4e0a\u7f51\u5de5\u5177\u3002\u540e\u6765\u4e86\u89e3\u5230\u4e86\u5f88\u591a\u7684\u7b14\u8bb0\u8f6f\u4ef6\uff0c\u6211\u5f53\u65f6\u9009\u62e9\u7528 OneNote \u6765\u8bb0\u7b14\u8bb0\uff0c\u5f53\u65f6\u89c9\u5f97\u8fd9\u8f6f\u4ef6\u592a\u725b\u903c\u4e86\uff0c\u51e0\u4e4e\u6ee1\u8db3\u4e86\u6211\u5f53\u65f6\u7684\u9700\u6c42\uff0c\u4f46\u662f\u540e\u9762\u968f\u7740\u9700\u6c42\u7684\u589e\u52a0\uff0cOneNote \u5c31\u4e0d\u591f\u770b\u4e86\uff0c\u6bd4\u5982\uff1a\\n\\n1. \u4ee3\u7801\u652f\u6301\u4e0d\u597d\uff0c\u6ca1\u6709\u9ad8\u4eae\\n2. \u6570\u5b66\u516c\u5f0f\u652f\u6301\u5f88\u5dee\\n\\n## \u521d\u8bc6\u535a\u5ba2\uff1aCSDN\u4e0e\u535a\u5ba2\u56ed\\n\\n\u540e\u6765\u63a5\u89e6\u5230\u7f16\u7a0b\uff0c\u6211\u5f00\u59cb\u5728\u7f51\u4e0a\u81ea\u5b66 Python\uff0c\u5f53\u65f6\u90a3\u4e2a\u8bb2\u5e08\u8bf4\u5e0c\u671b\u5b66\u5b8c\u4e00\u8282\u5185\u5bb9\u4e4b\u540e\u80fd\u5199\u4e00\u7bc7\u535a\u5ba2\uff0c\u603b\u7ed3\u5b66\u4e60\u5185\u5bb9\uff0c\u8fd9\u4e2a\u65f6\u5019\u6211\u5f00\u59cb\u5728 CSDN \u4e0a\u9762\u5199\u6587\u7ae0\uff0c\u8bb0\u5f55\u5b66\u4e60\u5185\u5bb9\uff0c\u56e0\u4e3a CSDN \u7684\u7f16\u8f91\u5668\u9ed8\u8ba4\u662f Markdown\uff0c\u5f53\u65f6\u662f\u6211\u7b2c\u4e00\u6b21\u77e5\u9053 Markdown \u8fd9\u4e2a\u4e1c\u897f\uff0c\u6211\u8fd8\u7279\u610f\u5b66\u4e60\u4e86 Markdown \u7684\u8bed\u6cd5\uff0c\u81ea\u4ece\u5b66\u4f1a\u4ee5\u540e\uff0c\u6211\u5c31\u4e0d\u9002\u5e94\u5bcc\u6587\u672c\u8f93\u5165\u4e86\uff0cMarkdown \u4f7f\u7528\u8d77\u6765\u592a\u8212\u670d\u4e86\u3002\u4e0b\u56fe\u4e3a CSDN \u7684 Markdown \u7f16\u8f91\u5668\\n\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/image.52nfx6irvzk0.png\\" style={{ zoom: \'50%\' }} />\\n\\n\\n\u8fd9\u662f\u6211\u7b2c\u4e00\u6b21\u5199\u535a\u5ba2\uff0c\u9646\u9646\u7eed\u7eed\u5728\u5e73\u53f0\u4e0a\u53d1\u4e86\u51e0\u7bc7\u6587\u7ae0\uff0c\u540e\u6765\u6211\u53d1\u73b0\u5199\u6587\u7ae0\u6bd4\u8bb0\u7b14\u8bb0\u6709\u6548\u591a\u4e86\uff0c\u5f53\u65f6\u6211\u6709\u4e00\u95e8\u300a\u6570\u5b57\u4fe1\u53f7\u5904\u7406\u300b\u7684\u8bfe\u7a0b\uff0c\u8fd9\u95e8\u8bfe\u6211\u6ca1\u6709\u91c7\u7528\u8bb0\u7b14\u8bb0\u7684\u5f62\u5f0f\uff0c\u800c\u662f\u5199\u535a\u5ba2\uff0c\u5c06\u6211\u7684\u7406\u89e3\u5f62\u6210\u6587\u7ae0\u5199\u4e0b\u6765\uff0c\u5199\u4e86 **20** \u7bc7\uff0c\u8fd9\u4e9b\u6587\u7ae0\u662f\u6211\u5728\u8be5\u5e73\u53f0\u4e0a\u9605\u8bfb\u91cf\u4ee5\u53ca\u70b9\u8d5e\u6570\u6700\u591a\u7684\\n\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/image.rfiezobwtuo.png\\" style={{ zoom: \'50%\' }} />\\n\\n\\n\u5f53\u6211\u5199\u5b8c\u8fd9\u4e9b\u6587\u7ae0\u7684\u65f6\u5019\uff0c\u771f\u7684\u5c31\u611f\u89c9\u81ea\u5df1\u5bf9\u8fd9\u95e8\u8bfe\u901a\u900f\u4e86\uff0c\u8fd9\u95e8\u8bfe\u8003\u8bd5\u7684\u65f6\u5019\uff0c\u6211\u601d\u8def\u7279\u522b\u7684\u987a\u7545\uff0c\u5f88\u5feb\u6211\u5c31\u5199\u5b8c\u4e86\uff0c\u5e76\u63d0\u524d\u4ea4\u5377\uff0c\u867d\u7136\u6ca1\u6709\u6ee1\u5206\uff0c\u4f46\u662f\u6211\u81ea\u8ba4\u4e3a\u8fd9\u95e8\u8bfe\u6211\u5b66\u7684\u975e\u5e38\u7684\u597d\uff0c\u5bf9\u8fd9\u95e8\u8bfe\u6211\u6709\u975e\u5e38\u591a\u81ea\u5df1\u4e2a\u4eba\u7684\u89c1\u89e3\u3002\u4ece\u6b64\u4ee5\u540e\u6211\u5c31\u6539\u53d8\u4e86\u5b66\u4e60\u65b9\u6cd5\uff0c\u90a3\u5c31\u662f\u5199\u535a\u5ba2\u3002\\n\\n\u800c\u5173\u4e8e\u5199\u4f5c\u7684\u5e73\u53f0\u6211\u4e5f\u662f\u8f6c\u6218\u591a\u6b21\uff0c\u6700\u5f00\u59cb\u662f CSDN\uff0c\u4f46\u662f CSDN \u4e0a\u9762\u5e7f\u544a\u5f88\u591a\uff0c\u4ee5\u53ca\u6574\u4f53\u7684\u6392\u7248\u4e0d\u597d\u770b\uff0c\u540e\u6765\u6211\u5c31\u5728\u535a\u5ba2\u56ed\u4e0a\u9762\u53d1\u6587\u7ae0\uff0c\u56e0\u4e3a\u535a\u5ba2\u56ed\u53ef\u4ee5\u81ea\u5b9a\u4e49\u6837\u5f0f\uff0c\u6240\u4ee5\u5916\u89c2\u4e0a\u53ef\u4ee5\u6bd4\u8f83\u597d\u770b\uff0c\u5bf9\u4e8e\u535a\u5ba2\u4e4b\u5916\u7684\u5176\u4ed6\u5185\u5bb9\uff0c\u6211\u901a\u8fc7\u5ba1\u67e5\u5143\u7d20\u5c06\u5176\u8bbe\u7f6e\u4e3a `display: none`\uff0c\u4e0b\u56fe\u4e3a\u6211\u7684\u535a\u5ba2\u56ed\u535a\u5ba2\\n\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3/202110022118162021-10-02-21-18-17.png\\" style={{ zoom: \'50%\' }}/>\\n\\n\\n## \u4e2a\u4eba\u535a\u5ba2\uff1aHexo\u3001Hugo\u548cdocsify\\n\\n\u63a5\u4e0b\u6765\u5c31\u5f00\u59cb\u6363\u9f13\u4e2a\u4eba\u535a\u5ba2\u4e86\u3002\u6700\u521d\u63a5\u89e6\u4e2a\u4eba\u535a\u5ba2\u662f\u901a\u8fc7[\u7a0b\u5e8f\u7f8a\u7684\u89c6\u9891](https://www.bilibili.com/video/BV1Yb411a7ty)\uff0c\u5f53\u65f6\u89c9\u5f97\u6709\u4e00\u4e2a\u4e2a\u4eba\u7684\u7f51\u7ad9\u597d\u5c4c\uff0c\u6b63\u597d\u7a0b\u5e8f\u7f8a\u51fa\u4e86\u8fd9\u4e2a\u89c6\u9891\uff0c\u7136\u540e\u6211\u5c31\u6839\u636e\u5b83\u7684\u89c6\u9891\u6298\u817e\u4e86\u4e00\u4e2a\u4e0b\u5348\uff0c\u642d\u5efa\u51fa\u6765\u4e86\u4e00\u4e2a\u57fa\u4e8e Hugo \u7f51\u7ad9\uff0c\u5f53\u65f6\u6709\u8e29\u4e00\u4e9b\u5751\uff0c\u5e76\u628a\u8e29\u7684\u4e00\u4e9b\u5751\u653e\u5728\u8be5\u89c6\u9891\u4e0b\u9762\u7684\u8bc4\u8bba\u91cc\u9762\uff0c\u73b0\u5728\u8fd8\u7ecf\u5e38\u80fd\u6536\u5230\u4e00\u4e9b\u70b9\u8d5e\u3002\\n\\n\u5728\u6b64\u57fa\u7840\u4e0a\uff0c\u6211\u5f00\u59cb\u7814\u7a76\u5176\u4ed6\u7684\u535a\u5ba2\u5e73\u53f0\uff0c\u5982 Hexo\u3002Hexo \u662f\u6211\u4e00\u76f4\u90fd\u5728\u4f7f\u7528\u7684\uff0c\u6211\u4e3b\u8981\u662f\u6298\u817e\u5404\u79cd\u4e3b\u9898\uff0c\u4e3a\u535a\u5ba2\u6dfb\u52a0\u4e0a\u5404\u79cd\u529f\u80fd\uff0c\u6211\u8fd8\u8bb0\u5f97\u6211\u7b2c\u4e00\u6b21\u6298\u817e\u4e86\u4e24\u5929\u65f6\u95f4\uff0c\u624d\u6298\u817e\u51fa\u4e00\u4e2a\u597d\u770b\u7684\u535a\u5ba2\uff0c\u5f53\u7136\u73b0\u5728\u662f\u627e\u4e0d\u5230\u4e86\uff0c\u6211\u73b0\u5728\u7684\u535a\u5ba2\u5df2\u7ecf\u6362\u4e86\u4e09\u56db\u4e2a\u4e3b\u9898\uff0c\u4e0b\u56fe\u4e3a\u6211\u76ee\u524d\u7684\u535a\u5ba2\u4e3b\u9898\\n\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/image.snx2t2mhck0.png\\" style={{ zoom: \'50%\' }} />\\n\\n\\n\u540e\u9762\u63a5\u89e6\u4e86 `docsify`\uff0c\u4e0d\u540c\u4e8e\u4e00\u822c\u535a\u5ba2\u7684\u7ec4\u7ec7\u65b9\u5f0f\uff0c\u5b83\u7684\u7ec4\u7ec7\u65b9\u5f0f\u50cf\u662f\u4e66\u7c4d\u4e00\u822c\uff0c\u6709\u5c42\u6b21\u7ed3\u6784\uff0c\u9002\u5408\u4f5c\u4e3a\u6587\u6863\u6216\u8005\u8bfb\u4e66\u7b14\u8bb0\uff0c\u4ea6\u6216\u8005\u6210\u7cfb\u7edf\u7ec4\u7ec7\u535a\u5ba2\u5185\u5bb9\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/image.488wzni45y40.png\\" style={{ zoom: \'50%\' }} />\\n\\n`docsify` \u8fd8\u6709\u4e00\u4e2a\u597d\u5904\u5c31\u662f\u4e0d\u7528\u8fdb\u884c\u7f16\u8bd1\uff0c\u53ea\u9700\u8981\u76f4\u63a5\u5199\u597d\u6587\u7ae0\uff0c\u7136\u540e\u76f4\u63a5\u53d1\u5e03\u5373\u53ef\uff0c\u7701\u53bb\u4e86\u7f16\u8bd1\u7684\u65f6\u95f4\u3002\\n\\n## \u4e2a\u4eba\u535a\u5ba2\uff1aVuePress\\n\\n\u5728\u540e\u6765\u53c2\u52a0\u963f\u91cc\u524d\u7aef\u7ec3\u4e60\u751f\u8ba1\u5212\uff0c\u5176\u4e2d\u5e03\u7f6e\u4e86\u4e00\u4e2a\u4f5c\u4e1a\uff0c\u642d\u5efa\u4e00\u4e2a VuePress \u535a\u5ba2\uff0c\u8fd9\u662f\u6211\u7b2c\u4e00\u6b21\u63a5\u89e6\u5230 VuePress\uff0c\u4f5c\u4e1a\u7684\u8981\u6c42\u6ca1\u6709\u5f88\u9ad8\uff0c\u53ea\u8981\u642d\u5efa\u51fa\u4e00\u4e2a\u7f51\u7ad9\u5373\u53ef\uff0c\u6211\u5f53\u65f6\u5c31\u6839\u636e\u5b98\u65b9\u7684\u6587\u6863\u642d\u5efa\u51fa\u4e00\u4e2a\u535a\u5ba2\uff0c\u7136\u540e\u5c31\u6ca1\u6709\u7ee7\u7eed\u4e86\u3002\u540e\u6765\u56e0\u7f18\u5de7\u5408\uff0c\u6211\u672c\u79d1\u8001\u5e08\u5e0c\u671b\u6211\u5199\u4e00\u4e9b\u6587\u7ae0\u5206\u4eab\u7ed9\u5b66\u5f1f\u5b66\u59b9\uff0c\u56e0\u4e3a\u6211\u60f3\u8bd5\u4e00\u4e0b VuePress\uff0c\u6240\u4ee5\u6211\u5c31\u642d\u5efa\u4e86\u4e00\u4e2a VuePress \u535a\u5ba2\uff0c\u6211\u7684\u535a\u5ba2\u5185\u5bb9\u5982\u4e0b\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/image.6hf89j9dlfo0.png\\" style={{ zoom: \'50%\' }} />\\n\\nVuePress \u7ec4\u7ec7\u6587\u7ae0\u7684\u65b9\u5f0f\u540c docsify \u6709\u4e9b\u7c7b\u4f3c\uff0c\u4e0d\u8fc7\u66f4\u52a0\u7684\u7075\u6d3b\uff0c\u5e76\u4e14\u53ef\u4ee5\u81ea\u5b9a\u4e49 Vue \u7ec4\u4ef6\uff0c\u8fd9\u4e2a\u5438\u5f15\u529b\u5bf9\u6211\u6765\u8bf4\u592a\u5927\u4e86\uff0c\u8fd9\u610f\u5473\u7740\u6211\u53ef\u4ee5\u4f7f\u7528 Vue \u751f\u6001\u7684\u4e1c\u897f\uff0c\u5b9a\u4e49\u529f\u80fd\u5f3a\u5927\u7684\u7ec4\u4ef6\u3002\\n\\n\u4e0d\u8fc7 VuePress \u5bf9\u4e8e\u73b0\u5728\u7684\u6211\u6765\u8bf4\u6709\u4e00\u4e2a\u81f4\u547d\u7684\u7f3a\u70b9\uff0c\u90a3\u5c31\u662f\u7f16\u8bd1\u65f6\u95f4\u592a\u6162\uff0c\u5f80\u5f80\u9700\u8981\u56db\u4e94\u5206\u949f\uff0c\u4e0d\u8fc7\u6240\u5e78\uff0c\u6211\u4e86\u89e3\u5230 Github Actions \u63d0\u4f9b\u81ea\u52a8\u90e8\u7f72\u7684\u529f\u80fd\uff0c\u5728\u4e86\u89e3\u76f8\u5173\u914d\u7f6e\u4e4b\u540e\uff0c\u4e5f\u53ef\u4ee5\u50cf docsify \u4e00\u6837\u76f4\u63a5\u63d0\u4ea4\u6587\u6863\u5373\u53ef\uff0cGithub \u4f1a\u6839\u636e\u811a\u672c\u81ea\u52a8\u7f16\u8bd1\u548c\u90e8\u7f72\u3002\\n\\n\u4e0d\u8fc7\u542c\u8bf4\u5c24\u5927\u5df2\u7ecf\u63a8\u51fa\u4e86 VitePress\uff0c\u542c\u5230 Vite \u90a3\u5c31\u662f\u5feb\u7684\u4ee3\u540d\u8bcd\uff0c\u6240\u4ee5\u63a5\u4e0b\u6765\u6709\u53ef\u80fd\u4f1a\u6298\u817e\u4e00\u4e0b VitePress\uff0c\u4e0d\u8fc7\u76ee\u524d\u8fd8\u6ca1\u6709\u8fc1\u79fb\u8fc7\u53bb\u7684\u6253\u7b97\uff0c\u56e0\u4e3a\u6bd5\u7adf VuePress \u7684\u751f\u6001\u5728\u8fd9\u91cc\uff0cVitePress \u751f\u6001\u8fd8\u6ca1\u8d77\u6765\u3002\\n\\n## \u4e91\u7b14\u8bb0\uff1aNotion\\n\\n\u9664\u4e86\u5199\u535a\u5ba2\uff0c\u8fd8\u6709\u8bb0\u7b14\u8bb0\u7684\u5e73\u53f0\uff0c\u6211\u73b0\u5728\u7528\u7684\u662f Notion\uff0c\u652f\u6301 Markdown\uff0c\u8fd8\u62e5\u6709\u6570\u636e\u5e93\u7b49\u529f\u80fd\uff0c\u63d0\u4f9b API \u63a5\u53e3\uff0c\u6559\u80b2\u90ae\u7bb1\u53ef\u4eab Pro Plan\uff0c\u4e91\u7b14\u8bb0\uff0c\u6211\u89c9\u5f97\u662f\u4e00\u4e2a\u975e\u5e38\u597d\u7684\u5e73\u53f0\uff0c\u4e0d\u8fc7\u6211\u5bf9\u4e8e Notion \u7684\u53d1\u6398\u5ea6\u8fd8\u4e0d\u591f\uff0c\u5f53\u505a\u4e00\u822c\u7684\u7b14\u8bb0\u8f6f\u4ef6\u7edd\u5bf9\u662f\u591f\u4e86\u7684\uff0c\u4e0b\u56fe\u4e3a\u6211\u7684 Notion \u7b14\u8bb0\u622a\u56fe\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3/202110022120402021-10-02-21-20-41.png\\" style={{ zoom: \'50%\' }}/>"},{"id":"/2021/12/10/Canvas\u7ed8\u56fe\u6a21\u7cca","metadata":{"permalink":"/blog/2021/12/10/Canvas\u7ed8\u56fe\u6a21\u7cca","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2021-12-10-Canvas\u7ed8\u56fe\u6a21\u7cca.mdx","source":"@site/blog/2021-12-10-Canvas\u7ed8\u56fe\u6a21\u7cca.mdx","title":"Canvas\u7ed8\u56fe\u6a21\u7cca","description":"\u5728\u9ad8\u5206\u8fa8\u7387\u5c4f\u5e55 (dpr > 1) \u4e0a\u8fdb\u884c\u7ed8\u56fe\u65f6\uff0c\u4f1a\u53d1\u73b0\u7ed8\u5236\u7684\u56fe\u50cf\u6bd4\u8f83\u6a21\u7cca\uff0c\u8fd9\u662f\u56e0\u4e3a Canvas \u753b\u5e03\u7684\u5355\u4f4d\u4e0d\u662f\u4e00\u4e2a CSS \u50cf\u7d20\u5927\u5c0f\uff0c\u800c\u662f\u4e00\u4e2a\u7269\u7406\u50cf\u7d20\u5927\u5c0f\u3002\u800c CSS \u50cf\u7d20\u5927\u5c0f\u4e0e\u7269\u7406\u50cf\u7d20\u5927\u5c0f\u76f8\u5dee dpr \u500d\u3002\u5f53\u6211\u4eec\u8bbe\u7f6e Canvas \u5927\u5c0f\u4e0e CSS \u5927\u5c0f\u76f8\u540c\u65f6\uff0c\u7531\u4e8e CSS \u5927\u5c0f\u662f Canvas \u5927\u5c0f\u7684 dpr \u500d\uff0c\u6240\u4ee5\u4f1a\u53d1\u751f\u62c9\u4f38\uff0c\u5bfc\u81f4\u56fe\u50cf\u6a21\u7cca","date":"2021-12-10T00:00:00.000Z","formattedDate":"2021\u5e7412\u670810\u65e5","tags":[{"label":"Canvas","permalink":"/blog/tags/canvas"},{"label":"\u9ad8\u5206\u5c4f","permalink":"/blog/tags/\u9ad8\u5206\u5c4f"}],"readingTime":2.55,"hasTruncateMarker":false,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"authors":"xiongtao","tags":["Canvas","\u9ad8\u5206\u5c4f"]},"prevItem":{"title":"\u4ece\u624b\u6284\u7b14\u8bb0\u5230\u4e2a\u4eba\u535a\u5ba2","permalink":"/blog/2022/01/12/\u4ece\u624b\u6284\u7b14\u8bb0\u5230\u4e2a\u4eba\u535a\u5ba2"},"nextItem":{"title":"\u6211\u662f\u5982\u4f55\u6210\u4e3a\u4e00\u540d\u7a0b\u5e8f\u5458\u7684","permalink":"/blog/2021/11/25/\u6211\u662f\u5982\u4f55\u6210\u4e3a\u4e00\u540d\u7a0b\u5e8f\u5458\u7684"}},"content":"\u5728\u9ad8\u5206\u8fa8\u7387\u5c4f\u5e55 `(dpr > 1)` \u4e0a\u8fdb\u884c\u7ed8\u56fe\u65f6\uff0c\u4f1a\u53d1\u73b0\u7ed8\u5236\u7684\u56fe\u50cf\u6bd4\u8f83\u6a21\u7cca\uff0c\u8fd9\u662f\u56e0\u4e3a Canvas \u753b\u5e03\u7684\u5355\u4f4d\u4e0d\u662f\u4e00\u4e2a CSS \u50cf\u7d20\u5927\u5c0f\uff0c\u800c\u662f\u4e00\u4e2a\u7269\u7406\u50cf\u7d20\u5927\u5c0f\u3002\u800c CSS \u50cf\u7d20\u5927\u5c0f\u4e0e\u7269\u7406\u50cf\u7d20\u5927\u5c0f\u76f8\u5dee `dpr` \u500d\u3002\u5f53\u6211\u4eec\u8bbe\u7f6e Canvas \u5927\u5c0f\u4e0e CSS \u5927\u5c0f\u76f8\u540c\u65f6\uff0c\u7531\u4e8e CSS \u5927\u5c0f\u662f Canvas \u5927\u5c0f\u7684 `dpr` \u500d\uff0c\u6240\u4ee5\u4f1a\u53d1\u751f\u62c9\u4f38\uff0c\u5bfc\u81f4\u56fe\u50cf\u6a21\u7cca\\n\\n```html\\n<style>\\n  #canvas {\\n    width: 100px;\\n    height: 100px;\\n  }\\n</style>\\n<canvas id=\\"canvas\\" width=\\"100\\" height=\\"100\\"></canvas>\\n```\\n\\n\u5982\u4e0a\u9762\u7684\u4ee3\u7801\uff0c\u867d\u7136\u6570\u503c\u4e0a\u753b\u5e03\u5927\u5c0f\u548c\u5176 CSS \u5927\u5c0f\u90fd\u662f `100`\uff0c\u4f46\u5b9e\u9645\u4e0a\u5b83\u4eec\u76f8\u5dee `dpr` \u500d\uff0c\u56e0\u6b64\u753b\u5e03\u4f1a\u88ab\u62c9\u4f38\u653e\u5927\uff0c\u56e0\u6b64\u4f1a\u5bfc\u81f4\u6a21\u7cca\u3002\\n\\n\u65e2\u7136\u77e5\u9053\u4e86\u539f\u56e0\uff0c\u90a3\u6211\u4eec\u53ea\u8981\u8bbe\u7f6e\u753b\u5e03\u5927\u5c0f\u4e3a CSS \u5927\u5c0f\u7684 `dpr` \u500d\uff0c\u8fd9\u6837\u753b\u5e03\u5c31\u4e0d\u4f1a\u88ab\u62c9\u4f38\u4e86\u3002\u800c\u4e3a\u4e86\u4f7f\u5f97\u5728\u753b\u5e03\u4e2d\u4f7f\u7528\u7684\u5355\u4f4d\u662f CSS \u50cf\u7d20\uff0c\u6211\u4eec\u53ef\u4ee5\u8bbe\u7f6e `ctx.scale(dpr)` \uff0c\u8fd9\u6837\u6211\u4eec\u4f7f\u7528\u7684\u5355\u4f4d\u5c31\u76f8\u5f53\u4e8e CSS \u50cf\u7d20\\n\\n```js\\nctx.scale(dpr);\\n// \u8fd9\u6837\u7ed8\u5236\u7684\u77e9\u5f62\u5c31\u662f (100px, 100px) \u7684\u4e86\\nctx.fillRect(0, 0, 100, 100);\\n```\\n\\n\u770b\u4e2a\u4f8b\u5b50\u8fdb\u884c\u5bf9\u6bd4\uff1a\\n\\n```html\\n<!DOCTYPE html>\\n<html lang=\\"en\\">\\n  <head>\\n    <meta charset=\\"UTF-8\\" />\\n    <meta http-equiv=\\"X-UA-Compatible\\" content=\\"IE=edge\\" />\\n    <meta name=\\"viewport\\" content=\\"width=device-width, initial-scale=1.0\\" />\\n    <title>Document</title>\\n    <style>\\n      #canvas,\\n      #canvas2 {\\n        width: 300px;\\n        height: 300px;\\n      }\\n    </style>\\n  </head>\\n  <body>\\n    <canvas id=\\"canvas\\"></canvas>\\n    <canvas id=\\"canvas2\\"></canvas>\\n\\n    <script>\\n      const canvas = document.getElementById(\\"canvas\\");\\n      const { width: w, height: h } = window.getComputedStyle(canvas);\\n      canvas.width = parseInt(w);\\n      canvas.height = parseInt(h);\\n\\n      const ctx = canvas.getContext(\\"2d\\");\\n      ctx.fillStyle = \\"#e77c8e\\";\\n      ctx.fillRect(100, 100, 100, 100);\\n\\n      const canvas2 = document.getElementById(\\"canvas2\\");\\n      const { width: w2, height: h2 } = window.getComputedStyle(canvas2);\\n      canvas2.width = parseInt(w2) * window.devicePixelRatio;\\n      canvas2.height = parseInt(h2) * window.devicePixelRatio;\\n\\n      const ctx2 = canvas2.getContext(\\"2d\\");\\n      ctx2.scale(window.devicePixelRatio, window.devicePixelRatio);\\n      ctx2.fillStyle = \\"#e77c8e\\";\\n      ctx2.fillRect(100, 100, 100, 100);\\n    <\/script>\\n  </body>\\n</html>\\n```\\n\\n\u6709\u4e24\u4e2a `Canvas` \u753b\u5e03\uff0c\u5b83\u7684\u5927\u5c0f\u90fd\u662f $300\\\\text{px}\\\\times300\\\\text{px}$\uff0c\u753b\u5e03\u7684\u5927\u5c0f\u7b2c\u4e00\u4e2a\u8bbe\u7f6e\u7684\u6570\u503c\u4e0e CSS \u5927\u5c0f\u4e00\u6837\uff0c\u7b2c\u4e8c\u4e2a\u8bbe\u7f6e\u4e3a `dpr` \u500d\uff0c\u5e76\u4e14\u7b2c\u4e8c\u4e2a\u753b\u5e03\u8bbe\u7f6e\u4e86 `ctx.scale(dpr)` \uff0c\u770b\u4e00\u4e0b\u6548\u679c\\n\\n<iframe  width=\\"100%\\" height=\\"330\\"  src=\\"https://lastknightcoder.github.io/canvas-demos/75.html\\"></iframe>\\n\\n\u7b2c\u4e8c\u4e2a\u77e9\u5f62\u660e\u663e\u6bd4\u7b2c\u4e00\u4e2a\u6e05\u6670\u8bb8\u591a\u3002\\n\\n:::note\\n\u4f7f\u7528\u8fd9\u79cd\u65b9\u6cd5\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6b64\u65f6\u753b\u5e03\u7684\u5927\u5c0f\u88ab\u8bbe\u7f6e\u4e3a\u4e86 $300 \\\\times \\\\text{dpr}$\uff0c\u4f46\u662f\u6211\u4eec\u8981\u5c06\u5176\u770b\u4f5c\u662f `300px` \u7684\u5927\u5c0f\u3002\\n:::"},{"id":"/2021/11/25/\u6211\u662f\u5982\u4f55\u6210\u4e3a\u4e00\u540d\u7a0b\u5e8f\u5458\u7684","metadata":{"permalink":"/blog/2021/11/25/\u6211\u662f\u5982\u4f55\u6210\u4e3a\u4e00\u540d\u7a0b\u5e8f\u5458\u7684","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2021-11-25-\u6211\u662f\u5982\u4f55\u6210\u4e3a\u4e00\u540d\u7a0b\u5e8f\u5458\u7684.mdx","source":"@site/blog/2021-11-25-\u6211\u662f\u5982\u4f55\u6210\u4e3a\u4e00\u540d\u7a0b\u5e8f\u5458\u7684.mdx","title":"\u6211\u662f\u5982\u4f55\u6210\u4e3a\u4e00\u540d\u7a0b\u5e8f\u5458\u7684","description":"\u968f\u8fd9\u6211\u5728\u5b66\u6821\u5c31\u4e1a\u7f51\u63d0\u4ea4\u7b7e\u7ea6\u4fe1\u606f\uff0c\u4e5f\u5c31\u610f\u5473\u7740\u6211\u7684\u79cb\u62db\u57fa\u672c\u7ed3\u675f\u4e86","date":"2021-11-25T00:00:00.000Z","formattedDate":"2021\u5e7411\u670825\u65e5","tags":[{"label":"\u968f\u7b14","permalink":"/blog/tags/\u968f\u7b14"},{"label":"\u7a0b\u5e8f\u4eba\u751f","permalink":"/blog/tags/\u7a0b\u5e8f\u4eba\u751f"}],"readingTime":25.355,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"authors":"xiongtao","tags":["\u968f\u7b14","\u7a0b\u5e8f\u4eba\u751f"]},"prevItem":{"title":"Canvas\u7ed8\u56fe\u6a21\u7cca","permalink":"/blog/2021/12/10/Canvas\u7ed8\u56fe\u6a21\u7cca"},"nextItem":{"title":"\u4f7f\u7528Notion\u4f5c\u4e3a\u89c6\u9891\u6258\u7ba1","permalink":"/blog/2021/11/22/\u4f7f\u7528Notion\u4f5c\u4e3a\u89c6\u9891\u6258\u7ba1"}},"content":"\u968f\u8fd9\u6211\u5728\u5b66\u6821\u5c31\u4e1a\u7f51\u63d0\u4ea4\u7b7e\u7ea6\u4fe1\u606f\uff0c\u4e5f\u5c31\u610f\u5473\u7740\u6211\u7684\u79cb\u62db\u57fa\u672c\u7ed3\u675f\u4e86\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/8ce6acb4a78a7dbab2223c0c2f20429.1e5xzy6y4hgg.png\\" style={{ zoom: \'50%\'}} />\\n\\n\u6211\u4e5f\u6b63\u597d\u634b\u634b\u6211\u662f\u5982\u4f55\u6210\u4e3a\u4e00\u540d\u7a0b\u5e8f\u5458\u7684\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u7fc1\u607a\u7537\u795e\uff1a\u62ef\u6551\u4e86\u6211\u7684 C \u8bed\u8a00\\n\\n\u5728\u4e0a\u5927\u5b66\u4e4b\u524d\uff0c\u4ece\u6765\u6ca1\u5199\u8fc7\u7a0b\u5e8f\uff0c\u751a\u81f3\u8fde\u7f16\u7a0b\u8fd9\u4ef6\u4e8b\u60c5\u662f\u4ec0\u4e48\u90fd\u4e0d\u77e5\u9053\uff0c\u53ea\u4f1a\u7528\u7535\u8111\u770b\u5c0f\u8bf4\u548c\u6253\u6e38\u620f(\u800c\u4e14\u53ea\u4f1a4399)\uff0c\u5bf9\u8ba1\u7b97\u673a\u8f6f\u786c\u4ef6\u77e5\u8bc6\u4e00\u65e0\u6240\u77e5\uff0c\u8ba1\u7b97\u673a\u80fd\u5e72\u4ec0\u4e48\u6211\u4e0d\u77e5\u9053\uff0c\u53ef\u80fd\u552f\u4e00\u7684\u61a7\u61ac\u5c31\u662f\u6210\u4e3a\u4e00\u540d\u9ed1\u5ba2\uff0c\u5728\u7f51\u7edc\u4e0a\u53f1\u54a4\u98ce\u4e91\u3002\\n\\n\u6211\u672c\u79d1\u4e13\u4e1a\u662f\u901a\u4fe1\u5de5\u7a0b\uff0c\u6309\u9053\u7406\u548c\u8ba1\u7b97\u673a\u6ca1\u6709\u4ec0\u4e48\u5173\u7cfb\uff0c\u4f46\u662f\u8fd8\u662f\u4f1a\u6709\u4e00\u4e9b\u5173\u4e8e\u7f16\u7a0b\u7684\u8bfe\u3002\u6211\u5927\u4e00\u6709\u4e00\u95e8\u300aC\u8bed\u8a00\u7a0b\u5e8f\u8bbe\u8ba1\u300b\u7684\u8bfe\uff0c\u5b83\u662f\u6211\u7684\u7f16\u7a0b\u542f\u8499\uff0c\u901a\u8fc7\u5b83\u6211\u7b2c\u4e00\u6b21\u77e5\u9053\u7f16\u7a0b\u8fd9\u4e2a\u4e1c\u897f\uff0c\u4e5f\u662f\u5b83\u8ba9\u6211\u6709\u4e86\u7b2c\u4e00\u6b21\u5bf9\u7740\u4ee3\u7801\u6293\u8033\u6320\u816e\uff0c\u5bf9\u7740\u7535\u8111\u51e0\u4e2a\u5c0f\u65f6\uff0c\u4f46\u662f\u6123\u662f\u627e\u4e0d\u51fa bug  \u5728\u54ea\u91cc\uff0c\u5fc3\u6001\u7206\u70b8\u7684\u611f\u53d7\u3002\\n\\n\u4f46\u662f\u6211\u8fd8\u662f\u575a\u6301\u4e86\u4e0b\u6765\uff0c\u4e00\u4e2a\u4e3b\u8981\u539f\u56e0\u5c31\u662f\u4e2d\u56fd MOOC \u8fd9\u4e2a\u5e73\u53f0\uff0c\u56e0\u4e3a\u9ad8\u6570\u8bfe\u9700\u8981\u5728\u4e0a\u9762\u5b8c\u6210\u6d4b\u9a8c\uff0c\u6211\u624d\u4e86\u89e3\u7684\u8fd9\u4e2a\u5e73\u53f0\uff0c\u540e\u6765\u53d1\u73b0\u4e0a\u9762\u6709\u975e\u5e38\u591a\u7684\u8bfe\uff0c\u4e5f\u6709\u5f88\u591a\u5b66\u6821\u5728\u4e0a\u9762\u5f00\u8bfe\uff0c\u4ece\u6b64\u6253\u5f00\u4e86\u6211\u7684\u65b0\u4e16\u754c\uff0c\u6211\u5927\u5b66\u7684**\u4e3b\u8981\u8bfe\u7a0b**\u90fd\u662f\u5728 MOOC \u4e0a\u5b66\u4e60\u7684\u3002\\n\\n\u56e0\u4e3a\u6211\u7684 C \u8bed\u8a00\u8001\u5e08\u8bb2\u8bfe\u6c34\u5e73\u5b9e\u5728\u5dee\u70b9\u610f\u601d\uff0c\u5f88\u96be\u542c\u61c2\u5728\u8bb2\u4ec0\u4e48\uff0c\u8981\u77e5\u9053\u6211\u5927\u4e00\u90a3\u4f1a\u513f\u53ef\u662f\u4e0a\u8bfe\u6700\u8ba4\u771f\u7684\u65f6\u5019\uff0c\u4f46\u662f\u5373\u4f7f\u8fd9\u6837\u8fd8\u662f\u542c\u4e0d\u61c2\u3002\u4e8e\u662f\u6211\u5c31\u53bb\u6155\u8bfe\u4e0a\u627e\u8bfe\u7a0b\u770b\uff0c\u4e07\u5e78\u6211\u627e\u5230\u4e86\u6d59\u6c5f\u5927\u5b66**\u7fc1\u607a**\u8001\u5e08\u7684\u8bfe\u7a0b\uff0c\u6211\u4ece\u6765\u6ca1\u6709\u89c1\u8fc7\u4e00\u4e2a\u8001\u5e08\u5c45\u7136\u80fd\u628a C \u8bed\u8a00\u8bb2\u7684\u8fd9\u4e48\u597d(\u8fd9\u53e5\u8bdd\u653e\u5230\u73b0\u5728\u4e5f\u662f\u6210\u7acb\u7684)\uff0c\u5982\u679c\u6ca1\u6709**\u7fc1\u607a**\u8001\u5e08\uff0c\u5f88\u6709\u53ef\u80fd\u6211\u65e9\u5c31\u5931\u53bb\u4e86\u7f16\u7a0b\u7684\u5174\u8da3\uff0c\u8001\u5e08\u4ece\u5bb9\u4e0d\u8feb\u7684\u8bb2\u8bfe\u8282\u594f\uff0c\u6e29\u67d4\u8212\u9002\u7684\u55d3\u97f3\u8ba9\u6211\u6c89\u8ff7\u5176\u4e2d\uff0c\u5f53\u65f6\u6211\u8ddf\u7740\u4ed6\u7684\u89c6\u9891\u505a\u4e86\u4e24\u4e2a\u7b14\u8bb0\u672c\u7684\u7b14\u8bb0\u3002\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/image-20211118105139540.6ota22bad2k0.png\\" style={{ zoom: \'50%\'}} />\\n\\n\u7fc1\u607a\u8001\u5e08\u6709\u4e00\u53e5\u5f88\u7ecf\u5178\u7684\u8bdd\u5e7f\u4e3a\u6d41\u4f20\uff1a\\n\\n> \u8ba1\u7b97\u673a\u7684\u6240\u6709\u4e1c\u897f\u90fd\u662f\u4eba\u505a\u51fa\u6765\u7684\uff0c\u522b\u4eba\u80fd\u60f3\u7684\u51fa\u6765\u7684\uff0c\u6211\u4e5f\u4e00\u5b9a\u80fd\u60f3\u7684\u51fa\u6765\uff0c**\u5728\u8ba1\u7b97\u673a\u91cc\u5934\u6ca1\u6709\u4efb\u4f55\u9ed1\u9b54\u6cd5**\uff0c\u6240\u6709\u7684\u4e1c\u897f\u53ea\u4e0d\u8fc7\u662f\u6211\u73b0\u5728\u4e0d\u77e5\u9053\u800c\u5df2\uff0c\u603b\u6709\u4e00\u5929\u6211\u4f1a\u628a\u6240\u6709\u7ec6\u8282\uff0c\u6240\u6709\u5185\u90e8\u7684\u4e1c\u897f\u5168\u90fd\u641e\u660e\u767d\u7684\u3002\\n\\n**\u8ba1\u7b97\u673a\u91cc\u9762\u6ca1\u6709\u9ed1\u9b54\u6cd5**\u8fd9\u53e5\u8bdd\u4e0d\u77e5\u9053\u6fc0\u52b1\u4e86\u591a\u5c11\u4eba\uff0c\u5f53\u7136\u4e5f\u5305\u62ec\u4e86\u6211\u3002\\n\\n\u867d\u7136\u6709\u7fc1\u607a\u8001\u5e08\u7684\u5e2e\u52a9\uff0c\u4f46\u662f\u56e0\u4e3a\u5b66\u4e60\u6548\u7387\u3001\u5b66\u4e60\u4e60\u60ef\u4ee5\u53ca\u7b2c\u4e00\u6b21\u63a5\u89e6\u7f16\u7a0b\u7684\u7f18\u6545\uff0c\u6211\u7684 C \u8bed\u8a00\u8003\u8bd5\u6ca1\u6709\u8fbe\u5230\u81ea\u5df1\u7684\u9884\u671f(\u6211\u8bb0\u5f97\u597d\u50cf\u662f 82 \u5206)\uff0c\u6211\u4f9d\u7a00\u8bb0\u5f97\u5176\u4e2d\u6709\u4e00\u9053\u9898\u662f\u624b\u5199\u5192\u6ce1\u6392\u5e8f\uff0c\u73b0\u5728\u770b\u6765\u8fd9\u4e48\u7b80\u5355\u7684\u9898\u76ee\uff0c\u4f46\u662f\u6211\u5374\u5199\u4e0d\u51fa\u6765\u3002\\n\\n\u867d\u7136 C \u8bed\u8a00\u5b66\u7684\u4e0d\u548b\u5730\uff0c\u4f46\u662f\u8fd8\u662f\u6fc0\u53d1\u4e86\u6211\u5bf9\u7f16\u7a0b\u7684\u5174\u8da3\u3002\u540e\u6765\u6211\u5728\u4e0a\u7f51\u51b2\u6d6a\u7684\u65f6\u5019\uff0c\u770b\u5230\u4e86 C++\u8fd9\u4e2a\u4e1c\u897f\uff0c\u5b83\u7684\u82f1\u6587\u540d\u53eb C plus plus\uff0c\u770b\u5230 **plus** \u89c9\u5f97\u5b83\u662f C \u8bed\u8a00\u7684\u589e\u5f3a\u7248\uff0c\u4e00\u5b9a\u975e\u5e38\u7684\u5389\u5bb3\uff0c\u6211\u8981\u5b66\u5b83\u3002\u56e0\u4e3a\u6211\u7684\u8bfe\u7a0b\u91cc\u6ca1\u6709\u5b83\uff0c\u6240\u4ee5\u6211\u90fd\u662f\u5e73\u65f6\u4e1a\u4f59\u5b66\u4e60\u7684\uff0c\u56e0\u4e3a\u90a3\u65f6\u6211\u521a\u4e0a\u5927\u5b66\uff0c\u4e0d\u77e5\u9053\u53bb\u54ea\u91cc\u5bfb\u627e\u8d44\u6e90\uff0c\u6155\u8bfe\u4e0a\u9762\u90a3\u65f6\u8fd8\u6ca1\u6709 C++ \u7684\u8bfe\u7a0b\uff0c\u6240\u4ee5\u6211\u662f\u53bb\u56fe\u4e66\u9986\u501f\u7684\u4e00\u672c\u4e66\u8fdb\u884c\u5b66\u4e60\u7684\uff0c\u597d\u50cf\u53eb **\u300aC++\u7a0b\u5e8f\u8bbe\u8ba1\u300b**\uff0c\u4e00\u672c\u9ed1\u76ae\u4e66\u3002\\n\\n\u5bf9\u4e8e\u6bcf\u4e00\u7ae0\u6211\u90fd\u4f1a\u8bb0\u7b14\u8bb0\uff0c\u56e0\u4e3a\u4ee3\u7801\u8fd9\u4e2a\u4e1c\u897f\u624b\u5199\u592a\u9ebb\u70e6\u4e86\uff0c\u6211\u5728\u4ee3\u7801\u7f16\u8f91\u5668\u91cc\u9762\u5199\u4e86\u4e00\u904d\uff0c\u518d\u6284\u4e00\u904d\u6d6a\u8d39\u65f6\u95f4\uff0c\u6240\u4ee5\u6211\u5f00\u59cb\u5c1d\u8bd5\u7535\u5b50\u7b14\u8bb0\uff0c\u6211\u5f53\u65f6\u8fd8\u662f\u7528 **Word** \u8bb0\u7684\u7b14\u8bb0\uff0c\u4e0d\u8fc7\u73b0\u5728\u6211\u5df2\u7ecf\u627e\u4e0d\u5230\u4e86\uff0c\u82b1\u4e86\u4e00\u4e2a\u591a\u5b66\u671f\u8bb0\u4e8660\u591a\u7bc7\u7b14\u8bb0\uff0c\u73b0\u5728\u56de\u5934\u770b\uff0c\u5f88\u591a\u5173\u4e8e C++ \u7684\u4e1c\u897f\u90fd\u5fd8\u7684\u5dee\u4e0d\u591a\u4e86\uff0c\u6700\u5927\u7684\u6536\u83b7\u53ef\u80fd\u65f6\u5b66\u5230\u4e86\u9762\u5411\u5bf9\u8c61\u76f8\u5173\u7684\u4e1c\u897f\uff0c\u4e3a\u6211\u540e\u9762\u5b66\u4e60\u5176\u4ed6\u9762\u5411\u5bf9\u8c61\u7684\u8bed\u8a00(Java\u3001JavaScript\u3001Python\u7b49)\u6253\u4e0b\u4e86\u57fa\u7840\u3002\\n\\n## \u5d07\u65b0\u5b66\u5802\uff1aAndroid \u5f00\u53d1\\n\\n\u5927\u4e00\u4e0b\u5b66\u671f\uff0c\u5b66\u9662\u60f3\u5f00\u529e\u4e00\u4e2a\u5d07\u65b0\u5b66\u5802\uff0c\u7136\u540e\u5927\u5bb6\u90fd\u53ef\u4ee5\u62a5\u540d\uff0c\u505a\u4e00\u4e2a\u4e1c\u897f\u51fa\u6765\uff0c\u7ecf\u8fc7\u7b54\u8fa9\u51b3\u5b9a\u662f\u5426\u80fd\u591f\u8fdb\u5165\u5b66\u5802\u3002\u5f53\u65f6\u8001\u738b\u548c\u8d3e\u68a6\u671d\u5c0f\u4e24\u53e3\u5b50\u627e\u5230\u6211\uff0c\u5e0c\u671b\u6211\u548c\u4ed6\u4eec\u4e00\u8d77\u505a\u4e00\u4e2a Android \u5e94\u7528\uff0c\u867d\u7136\u4e0d\u77e5\u9053\u4ed6\u4eec\u770b\u4e0a\u6211\u54ea\u4e00\u70b9\uff0c\u4e0d\u8fc7\u6211\u540c\u610f\u4e86\uff0c\u56e0\u4e3a\u6211\u4e5f\u60f3\u8fdb\u5165\u5d07\u65b0\u5b66\u5802\uff0c\u4e5f\u5c31\u662f\u4ece\u90a3\u65f6\u8d77\uff0c\u6211\u63a5\u89e6\u4e86 Java\u3002\\n\\n\u56e0\u4e3a\u6211\u4eec\u60f3\u505a\u4e00\u4e2a Android \u5e94\u7528\uff0c\u4e0a\u7f51\u641c\u4e86\u4e00\u4e0b\u54ea\u672c\u4e66\u597d\u5165\u95e8\uff0c\u5927\u5bb6\u90fd\u63a8\u8350 **\u300a\u7b2c\u4e00\u884c\u4ee3\u7801\u300b**\uff0c\u6240\u4ee5\u6211\u5c31\u53bb\u56fe\u4e66\u9986\u501f\u4e86\u8fd9\u672c\u4e66\uff0c\u5bf9\u7740\u4e66\u5b66\u4e60 Android \u5f00\u53d1\u77e5\u8bc6\u3002\u6211\u4eec\u6240\u6709\u7684\u4e1a\u4f59\u65f6\u95f4\u90fd\u82b1\u5728\u4e0a\u9762\u4e86\uff0c\u4ed6\u4eec\u5b66\u4e60 Java\uff0c\u800c\u6211\u8ddf\u7740\u4e66\u5b66\u4e60 Android\u3002\u56e0\u4e3a\u8fd9\u672c\u4e66\u662f\u8bb2 Android \u5f00\u53d1\u7684\uff0c\u6ca1\u6709\u4ecb\u7ecd Java \u7684\u90e8\u5206\uff0c\u6211\u5f53\u65f6\u53ea\u6709 C++ \u7684\u4e00\u70b9\u77e5\u8bc6\uff0c\u9760\u7740\u8fd9\u70b9\u529f\u529b\u52c9\u5f3a\u80fd\u770b\u61c2\uff0c\u4f46\u662f\u6574\u4e2a\u8fc7\u7a0b\u5f88\u96be\u53d7\u3002\\n\\n\u6574\u4e2a\u8fc7\u7a0b\u6574\u4f53\u4e0a\u6211\u662f\u611f\u89c9\u6bd4\u8f83\u96be\u53d7\u7684\uff0c\u5305\u62ec\\n\\n- \u6ca1\u6709\u8fdb\u5ea6\u7ba1\u7406\u3001\u6ca1\u6709\u76ee\u6807\\n- \u5b66\u4e60 Android \u96be\u53d7\uff0c\u6ca1\u6709 Java \u57fa\u7840\\n- \u4ed6\u4eec\u4fe9\u6bcf\u5929\u4f60\u4fac\u6211\u4fac\uff0c\u6211\u5374\u8981\u5929\u5929\u5403\u72d7\u7cae\\n- \u6ca1\u6709\u4e1a\u4f59\u65f6\u95f4\uff0c\u96be\u4ee5\u7167\u987e\u5230\u5176\u4ed6\u8bfe\u7a0b\\n\\n\u56e0\u4e3a\u6211\u6240\u6709\u7684\u4e1a\u4f59\u65f6\u95f4\u90fd\u82b1\u5728\u4e0a\u9762\uff0c\u5e76\u4e14\u6574\u4e2a\u8fc7\u7a0b\u6211\u89c9\u5f97\u6bd4\u8f83\u96be\u53d7\uff0c\u6211\u5c31\u6709 quit \u7684\u5ff5\u5934\u3002\u56e0\u4e3a\u5f00\u53d1\u5b89\u5353\u5e94\u7528\u9700\u8981\u5b89\u88c5 **Android Studio**\uff0c\u56e0\u4e3a\u6211\u7684\u7535\u8111\u7684\u539f\u56e0\u6216\u8005\u5176\u4ed6\uff0c\u600e\u4e48\u90fd\u5b89\u88c5\u4e0d\u4e0a\uff0c\u6211\u5c31\u5411\u4ed6\u4eec\u63d0\u51fa\u4e86 quit \u7684\u60f3\u6cd5\uff0c\u6b63\u5f0f\u8131\u79bb\u8fd9\u4e2a\u7ec4\u7ec7\u3002\\n\\n> \u4ed6\u4eec\u6700\u540e\u6210\u529f\u7684\u52a0\u5165\u4e86\u5b66\u5802:clap:\uff0c\u6709\u65f6\u5019\u6211\u4e5f\u5728\u60f3\u5982\u679c\u6211\u5f53\u65f6\u6ca1\u6709\u9000\u51fa\u662f\u4e0d\u662f\u4e5f\u80fd\u8fdb\u5165\u5b66\u5802\uff0c\u7136\u540e\u73b0\u5728\u66f4\u52a0\u7684\u725b\u903c\u3002\u90a3\u6211\u6709\u6ca1\u6709\u540e\u6094\uff0c\u5f53\u65f6\u80af\u5b9a\u662f**\u6709\u4e00\u70b9\u7684**\uff0c\u4e0d\u8fc7\u4e5f\u53ea\u662f\u4e00\u70b9\u70b9\uff0c\u5bf9\u6211\u90a3\u65f6\u7684\u5b66\u4e60\u548c\u751f\u6d3b\u51e0\u4e4e\u6ca1\u6709\u4ea7\u751f\u4efb\u4f55\u7684\u5f71\u54cd\u3002\\n\\n\u4ece\u8fd9\u4e2a\u9879\u76ee\u4e2d\u6211\u6709\u6536\u83b7\u4ec0\u4e48\u5462? \u5bf9\u4e8e Android \u7684\u77e5\u8bc6\u6211\u73b0\u5728\u662f\u5fd8\u7684\u4e00\u5e72\u4e8c\u51c0\uff0c\u5f53\u65f6\u505a\u4e86\u4e00\u4e2a\u7b14\u8bb0\u672c\u7684\u7b14\u8bb0(\u5176\u5b9e\u5c31\u662f\u6284\u4e66)\uff0c\u4f46\u662f\u4ece\u6765\u6ca1\u6709\u6253\u5f00\u8fc7\uff0c\u5728\u5bb6\u91cc\u5403\u7070\u5462\u3002\u771f\u6b63\u5b66\u5230\u7684\u53ef\u80fd\u662f\u6559\u8bad\uff0c\u4e00\u4e2a\u56e2\u961f\u662f\u9700\u8981\u4e00\u4e2a\u7075\u9b42\u4eba\u7269\u7684\uff0c\u4eba\u5458\u8c03\u5ea6\uff0c\u8fdb\u5ea6\u7ba1\u7406\u7b49\u7b49\uff0c\u5426\u5219 1 + 1 < 2 \u662f\u5fc5\u7136\u4f1a\u53d1\u751f\u7684\u3002\\n\\n\u53e6\u4e00\u4e2a\u5c0f\u5c0f\u6536\u83b7\u53ef\u80fd\u5c31\u662f\u4e00\u672c\u4e66\u5427\uff0c\u5f53\u65f6\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u7acb\u9879\u7684\u56e2\u961f\u90fd\u4f1a\u6709 1000 \u5143\u7684\u8d44\u91d1\uff0c\u6211\u5f53\u65f6\u7533\u8bf7\u4e70\u4e86\u4e00\u672c\u4e66 **\u300aJava \u7f16\u7a0b\u601d\u60f3\u300b**\uff0c\u73b0\u5728\u8fd8\u5728\u6211\u8fd9\u91cc\uff0c\u4e0d\u8fc7\u8fd9\u672c\u6211\u6253\u5f00\u7684\u6b21\u6570\u4e0d\u8d85\u8fc7\u4e09\u6b21\uff0c\u6bcf\u6b21\u90fd\u662f\u4ece\u7b2c\u4e00\u7ae0\u91cd\u65b0\u5f00\u59cb\u770b\uff0c\u73b0\u5728\u90fd\u6ca1\u770b\u5b8c\u7b2c\u4e00\u7ae0:joy:\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/image-20211118131734456.5suwbm5r7kk.png\\" style={{ zoom: \'50%\'}} />\\n\\n## \u76f8\u4f34\u6700\u4e45\u7684\u8bed\u8a00\uff1aJava\\n\\n\u867d\u7136\u6211 quit \u4e86\u5d07\u65b0\u5b66\u5802\u7684\u9879\u76ee\uff0c\u4f46\u662f\u6211\u5374\u5f00\u59cb\u5bf9 Java \u611f\u5174\u8da3\uff0c\u4e0d\u80fd\u8bf4\u611f\u5174\u8da3\uff0c\u53ea\u662f\u8bf4\u4e00\u65f6\u4e4b\u95f4\u4e0d\u77e5\u9053\u5e72\u4ec0\u4e48\uff0c\u6240\u4ee5\u5c31\u9009\u62e9\u53bb\u5b66\u4e60 Java\uff0canyway\uff0c\u6211\u4ece\u90a3\u65f6\u5f00\u59cb\u5b66\u4e60 Java \u4e86\u3002\u6211\u5f53\u65f6\u7684\u5b66\u4e60\u65b9\u6cd5\u8fd8\u662f\u53bb\u501f\u4e66\u770b\uff0c\u5f53\u65f6\u501f\u7684\u662f **\u300a\u75af\u72c2Java\u8bb2\u4e49\u300b**\uff0c\u633a\u539a\u7684\u4e00\u672c\u4e66\uff0c\u6211\u82b1\u4e86\u5c0f\u534a\u4e2a\u5b66\u671f\u548c\u4e00\u4e2a\u6691\u5047\u7684\u65f6\u95f4\u628a\u5b83\u770b\u5b8c\u4e86\uff0c\u7136\u540e\u8bb0\u4e86\u4e09\u672c\u7b14\u8bb0(\u8fd8\u662f\u6284\u4e66)\uff0c\u6709\u4e00\u70b9\u4f3c\u61c2\u975e\u61c2\u7684\u611f\u89c9\uff0c\u8fdc\u8fdc\u8c08\u4e0d\u4e0a\u7075\u6d3b\u5e94\u7528\u3002\\n\\n\u6765\u5230\u4e86\u5927\u4e8c\u5b66\u671f\uff0c\u6211\u8fce\u6765\u4e86\u7535\u5b50\u7cfb\u7684\u4e00\u7cfb\u5217\u4e13\u4e1a\u8bfe\u7a0b\uff0c**\u300a\u6a21\u62df\u7535\u5b50\u7ebf\u8def\u300b**\uff0c\u300a\u6570\u5b57\u7535\u5b50\u7ebf\u8def\u300b\uff0c**\u300a\u9ad8\u9891\u7535\u5b50\u7ebf\u8def\u300b**\uff0c\u300a\u4fe1\u53f7\u4e0e\u7cfb\u7edf\u300b\uff0c **\u300a\u5fae\u673a\u539f\u7406\u300b** \u7b49\uff0c\u5176\u4e2d\u4e0a\u9762\u91cd\u70b9\u6807\u6ce8\u7684\u6211\u79f0\u4e3a\u5929\u4e66\u8bfe\u7a0b\uff0c\u5b9e\u5728\u662f\u592a\u96be\u641e\u61c2\u4e86\uff0c\u56e0\u4e3a\u7531\u4e8e\u4e13\u4e1a\u8bfe\u7a0b\u9700\u8981\u82b1\u8d39\u5927\u91cf\u7684\u65f6\u95f4\uff0c\u4ee5\u53ca\u8bfe\u7a0b\u4e5f\u6ca1\u6709\u7f16\u7a0b\u7684\u9700\u6c42\uff0c\u6240\u4ee5\u5bf9\u4e8e\u7f16\u7a0b\u7684\u5b66\u4e60\u6211\u5c31\u5c31\u6b64\u6309\u4e0b\u4e86\uff0c\u5f53\u65f6\u7684\u6211\u8fd8\u662f\u89c9\u5f97\u6211\u8981\u53bb\u4ece\u4e8b\u901a\u4fe1\u76f8\u5173\u7684\u5de5\u4f5c\u7684\uff0c\u6240\u4ee5\u628a\u4e13\u4e1a\u77e5\u8bc6\u5b66\u53f7\u624d\u662f\u91cd\u8981\u7684\u3002\\n\\n\u65f6\u95f4\u6765\u5230\u5927\u4e09\u7684\u4e0a\u4e2a\u5b66\u671f\uff0c\u5f00\u59cb\u6709\u4e00\u4e9b\u9009\u4fee\u8bfe\u4e86\uff0c\u5176\u4e2d\u5c31\u6709\u4e00\u95e8 **Java \u7a0b\u5e8f\u8bbe\u8ba1**\u7684\u9009\u4fee\u8bfe\uff0c\u56e0\u4e3aJava\u6211\u6709\u57fa\u7840\uff0c\u5728\u52a0\u4e0a\u5f00\u8fd9\u95e8\u8bfe\u7684**\u738b\u9e4f\u4f1f\u8001\u5e08**\u4e5f\u6bd4\u8f83\u6709\u8da3(\u4e4b\u524d\u7684\u5fae\u673a\u539f\u7406\u4e5f\u662f\u4ed6\u4e0a\u7684\uff0c\u7f16\u5199\u6c47\u7f16\u7a0b\u5e8f\uff0c\u8bb0\u5fc6\u6df1\u523b\u7684\u8bfe)\uff0c\u6211\u81ea\u7136\u800c\u7136\u9009\u4e86\u8fd9\u95e8\u8bfe\u3002\u56e0\u4e3a\u6211\u5bf9Java\u662f\u6709\u57fa\u7840\uff0c\u6240\u4ee5\u8001\u5e08\u4e0a\u8bfe\u8bb2\u7684\u4e1c\u897f\u6211\u5927\u90e8\u5206\u90fd\u80fd\u542c\u61c2\uff0c\u6240\u4ee5\u4f1a\u505a\u5230\u7b2c\u4e00\u6392\u79ef\u6781\u7684\u548c\u8001\u5e08\u8fdb\u884c\u4e92\u52a8\u3002\\n\\n\u4e3a\u4e86\u8ba9\u8001\u5e08\u52a0\u6df1\u6211\u7684\u5370\u8c61\uff0c\u6211\u5f97\u5c06\u81ea\u5df1\u8425\u9020\u7684\u50cf\u4e2a\u9ad8\u624b\uff0c\u4f46\u662f\u6211\u5f53\u65f6\u53ea\u662f\u4e09\u811a\u732b\u529f\u592b\uff0c\u5f88\u5bb9\u6613\u9732\u9985\uff0c\u4e8e\u662f\u6211\u5728\u7ebf\u4e0b\u5f00\u59cb\u8865\u4e60\u6211\u7684 Java \u77e5\u8bc6\uff0c\u5f53\u65f6\u662f\u5728\u95f2\u9c7c\u4e0a\u82b1\u4e86\u51e0\u5757\u94b1\u4e70\u4e86\u4e00\u4e2a Java \u57f9\u8bad\u673a\u6784\u7684\u8bfe\u7a0b\uff0c\u8ddf\u7740\u89c6\u9891\u4e00\u6b65\u6b65\u8fdb\u884c\u5b66\u4e60\u3002\u5728\u5b66\u4e60\u7684\u8fc7\u7a0b\u4e2d\uff0c\u53d1\u73b0\u8bb2\u5e08\u7528\u4e86\u4e00\u4e2a\u7b14\u8bb0\u8f6f\u4ef6\uff0c\u5f53\u65f6\u89c9\u5f97\u4ee3\u7801\u5728\u5176\u4e2d\u663e\u793a\u975e\u5e38\u7684\u6f02\u4eae\uff0c\u540e\u6765\u4e86\u89e3\u5230\u8fd9\u662f **Markdown** \u7b14\u8bb0\uff0c\u7528\u7684\u8f6f\u4ef6\u53eb **Typora**\uff0c\u4e8e\u662f\u6211\u4e5f\u5f00\u59cb\u5c1d\u8bd5\u4f7f\u7528 Markdown \u8bb0\u7b14\u8bb0\uff0c\u56e0\u4e3a\u5b83\u4e5f\u652f\u6301\u6570\u5b66\u516c\u5f0f\uff0c\u6211\u5176\u4ed6\u4e13\u4e1a\u8bfe\u7a0b\u7684\u7b14\u8bb0\u4e5f\u5f00\u59cb\u4f7f\u7528\u5b83\uff0c\u7279\u522b\u662f\u300a\u6570\u5b57\u4fe1\u53f7\u5904\u7406\u300b\uff0c\u6211\u7528\u5b83\u5199\u4e86 20 \u591a\u7bc7\u6587\u7ae0\u3002\\n\\n> \u6211\u73b0\u5728\u6b63\u662f\u4f7f\u7528 Typora \u6765\u5199\u7684\u8fd9\u7bc7\u6587\u7ae0:grin:\u3002\\n\\n\u56e0\u4e3a\u6211\u5b66\u4f1a\u4e86 Markdown \u7684\u8bed\u6cd5\uff0c\u5b83\u6bd4\u4f7f\u7528 Word \u8bb0\u7b14\u8bb0\u6f02\u4eae\u4ee5\u53ca\u65b9\u4fbf\u592a\u591a\u4e86\uff0c\u6240\u4ee5\u5728\u8fd9\u95e8\u8bfe\u8bfe\u7a0b\u62a5\u544a\u4e2d\uff0c\u5f53\u522b\u7684\u540c\u5b66\u63d0\u4ea4 Word \u7248\u672c\u7684\u62a5\u544a\u65f6\uff0c\u6211\u5374\u521b\u65b0\u7684\u4f7f\u7528\u4e86 Markdown \u6765\u5199\u6211\u7684\u8bfe\u7a0b\u62a5\u544a\uff0c\u5e76\u5c06\u5176\u63d0\u4ea4\uff0c**\u6b63\u662f\u8fd9\u6837\u8ba9\u8001\u5e08\u6ce8\u610f\u5230\u4e86\u6211**\u3002\\n\\n## \u8001\u5e08\u7684\u8054\u7cfb\uff1a\u5b66\u4e60\u524d\u7aef\\n\\n\u65f6\u95f4\u6765\u5230\u5927\u4e09\u7684\u5bd2\u5047\uff0c\u6211\u7a81\u7136\u5728 QQ \u4e0a\u6536\u5230\u4e00\u4f4d\u540c\u5b66\u7684\u6d88\u606f\uff0c\u8bf4\u738b\u9e4f\u4f1f\u8001\u5e08\u627e\u6211\u6709\u4e8b\uff0c\u7ed9\u4e86\u6211\u4ed6\u7684\u7535\u8bdd\u53f7\u7801\uff0c**\u8ba9\u6211\u8054\u7cfb\u4ed6**\uff0c\u6211\u6000\u7740\u5fd0\u5fd1\u7684\u5fc3\u60c5\u62e8\u6253\u4e86\u7535\u8bdd\uff0c\u4e00\u756a\u5bd2\u6684\u4e4b\u540e\uff0c\u6211\u4e86\u89e3\u5230\u539f\u6765\u662f\u6211\u7684\u5b9e\u9a8c\u62a5\u544a\u7684\u7f18\u6545\uff0c\u56e0\u4e3a\u6211\u662f Markdown \u5199\u7684\u62a5\u544a\uff0c\u5728\u8ba1\u7b97\u673a\u754c\u662f\u6bd4\u8f83\u5e38\u89c1\u7684\u683c\u5f0f\uff0c\u4f46\u662f\u5728\u6211\u4eec\u7535\u5b50\u7cfb\u4f7f\u7528\u7684\u4eba\u5f88\u5c11\uff0c\u6240\u4ee5\u8001\u5e08\u53ef\u80fd\u611f\u89c9\u5230\u4e86\u6211\u5bf9\u8ba1\u7b97\u673a\u7684\u5174\u8da3\uff0c\u6240\u4ee5\u7279\u610f\u8054\u7cfb\u6211\uff0c\u6307\u5bfc\u6211\u4ee5\u540e\u7684\u5b66\u4e60\u65b9\u5411\uff0c\u5e0c\u671b\u4ee5\u540e\u80fd\u4e00\u8d77\u5408\u4f5c\u5f00\u53d1\u4e00\u4e9b\u9879\u76ee\uff0c\u56e0\u4e3a\u8001\u5e08\u5bf9\u524d\u7aef\u770b\u597d\u4ee5\u53ca\u5b9e\u9a8c\u5ba4\u53ef\u80fd\u6bd4\u8f83\u7f3a\u5c11\u524d\u7aef\u5f00\u53d1\uff0c\u6240\u4ee5\u63a8\u8350\u6211\u5b66\u4e60\u524d\u7aef(\u5f53\u65f6\u6211\u8fd8\u662f\u60f3\u641e\u540e\u7aef\u7684\uff0c\u6bd5\u7adf\u6211\u5728 Java \u4e0a\u82b1\u4e86\u90a3\u4e48\u591a\u7684\u65f6\u95f4\uff0c\u4e5f\u6bd4\u8f83\u719f)\u3002\\n\\n\u6b64\u65f6\u7684\u6211\u5bf9\u4e8e\u524d\u7aef\u771f\u5b8c\u5168\u7684\u5c0f\u767d\uff0c\u5f53\u65f6\u6211\u8fde **HTML\u3001CSS\u3001JavaScript** \u90fd\u6ca1\u6709\u542c\u8bf4\u8fc7\u3002\u4f46\u662f\u6211\u8fd8\u662f\u63a5\u53d7\u4e86\u6311\u6218\uff0c\u4ece\u96f6\u5f00\u59cb\u5b66\u4e60\uff0c\u56e0\u4e3a\u6211\u5b66\u4e60 Java \u662f\u8ddf\u4e00\u4e2a\u57f9\u8bad\u673a\u6784(\u6211\u660e\u8bf4\u4e86\uff0c\u662f\u9ed1\u9a6c\u7a0b\u5e8f\u5458)\u7684\u89c6\u9891\u5b66\u7684\uff0c\u6240\u4ee5\u6211\u7ee7\u7eed\u9009\u62e9\u8be5\u673a\u6784\u7684\u524d\u7aef\u89c6\u9891\u8fdb\u884c\u5b66\u4e60\u3002\\n\\n\u7ecf\u8fc7\u6211\u5728\u5bd2\u5047\u591c\u4ee5\u7ee7\u65e5\u7684\u5b66\u4e60\uff0c\u7ec8\u4e8e\u628a **HTML**\u3001**CSS** \u548c **JavaScript** \u5b66\u5b8c\u4e86\uff0c\u5f53\u7136\u53ea\u662f\u8fc7\u4e86\u4e00\u904d\uff0c\u5199\u4e86\u4e00\u4e9b\u5c0f demo\uff0c\u8fd8\u4e0d\u662f\u7279\u522b\u7684\u719f\u7ec3\u3002\u7136\u540e\u5f00\u5b66\u53bb\u627e\u8001\u5e08\uff0c\u8ddf\u8001\u5e08\u8bf4\u5b66\u4e60\u8fdb\u5ea6\uff0c\u7136\u540e\u8001\u5e08\u8ba9\u6211\u53bb\u5b66\u4e60 **React**\uff0c\u7ed9\u6211\u8bb2\u73b0\u5728\u7684\u524d\u7aef\u662f\u57fa\u4e8e\u7ec4\u4ef6\u7684\u5f00\u53d1\uff0c\u5df4\u62c9\u5df4\u62c9\uff0c\u6211\u5f53\u65f6\u771f\u7684\u662f\u95ee\u53f7\u8138\uff0c\u4f46\u6211\u5f53\u65f6\u8fd8\u662f\u8868\u793a OK\uff0c\u6211\u56de\u53bb\u5c31\u5b66\u3002\\n\\n\u56e0\u4e3a\u6211\u7684\u627e\u7684\u57f9\u8bad\u89c6\u9891\u662f\u6bd4\u8f83\u65e9\u7684\uff0c\u6ca1\u6709 React \u76f8\u5173\u7684\u5185\u5bb9\uff0c\u4e8e\u662f\u6211\u53c8\u5f00\u59cb\u53bb\u56fe\u4e66\u9986\u501f\u4e66\u4ee5\u53ca\u5bfb\u627e\u65b0\u7684\u89c6\u9891\u8fdb\u884c\u5b66\u4e60\uff0c\u5b66\u4e60\u65b0\u4e1c\u897f\u771f\u7684\u597d\u96be\uff0c\u6211\u73b0\u5728\u5750\u5728\u8fd9\u91cc\u7801\u5b57\uff0c\u56de\u60f3\u8fc7\u53bb\u81ea\u5df1\u5728\u56fe\u4e66\u9986\u52aa\u529b\u7684\u5543\u4e66\uff0c\u5bf9\u7740\u89c6\u9891\u6572\u4ee3\u7801\uff0c\u90fd\u611f\u89c9\u90a3\u662f\u4e00\u6bb5\u8270\u96be\u7684\u5c81\u6708\u3002\\n\\n\u7531\u4e8e\u5927\u4e09\u5b66\u4e1a\u7684\u538b\u529b\u8fd8\u662f\u6bd4\u8f83\u91cd\u7684\uff0c\u4e13\u4e1a\u8bfe\u90fd\u6bd4\u8f83\u91cd\u8981\u800c\u4e14\u96be\uff0c\u5e76\u4e14\u7279\u522b\u662f\u5b66\u6821\u6709\u9009\u4fee\u8bfe\u5b66\u5206\u7684\u8981\u6c42\uff0c\u4e3a\u4e86\u5927\u56db\u4e13\u5fc3\u51c6\u5907\u8003\u7814\u4e0d\u4e0a\u8bfe\uff0c\u4e00\u822c\u4f1a\u5728\u8fd9\u4e2a\u5b66\u671f\u5c06\u6240\u6709\u7684\u9009\u4fee\u8bfe\u9009\u5b8c\u3002\u56e0\u4e3a\u4e0d\u786e\u5b9a\u81ea\u5df1\u4ee5\u540e\u4f1a\u4ece\u4e8b\u4ec0\u4e48\u5de5\u4f5c\uff0c\u4ee5\u53ca\u771f\u7684\u611f\u89c9\u81ea\u5df1\u4ec0\u4e48\u90fd\u4e0d\u4f1a\uff0c\u4e5f\u627e\u4e0d\u5230\u597d\u7684\u5de5\u4f5c\uff0c\u6240\u4ee5\u51c6\u5907\u8003\u7814\uff0c\u52a0\u4e0a\u5b66\u4e60 React \u65f6\u53d7\u5230\u7684\u632b\u6298\uff0c\u5b66\u4e60\u524d\u7aef\u7684\u8fd9\u4ef6\u4e8b\u60c5\u5c31\u88ab\u6401\u7f6e\u4e86\u3002\\n\\n## \u79cb\u62db\uff1a\u770b\u770b\u81ea\u5df1\u4ec0\u4e48\u6c34\u5e73\\n\\n\u65f6\u95f4\u6765\u5230\u5927\u56db\u7684\u4e0a\u5b66\u671f\uff0c\u6211\u5df2\u7ecf\u51c6\u5907\u8003\u7814\u4e09\u56db\u4e2a\u6708\u4e86\uff0c\u8fd9\u4e2a\u65f6\u5019\u4e5f\u6709\u4e00\u4e9b\u516c\u53f8\u9646\u9646\u7eed\u7eed\u5f00\u5c55\u79cb\u62db\u4e86\uff0c\u867d\u7136\u6211\u4e0d\u51c6\u5907\u53bb\u5de5\u4f5c\uff0c\u4f46\u662f\u6211\u8fd8\u662f\u60f3\u770b\u770b\u6211\u7684\u6c34\u5e73\u662f\u5426\u80fd\u627e\u5230\u4e00\u4e2a\u5de5\u4f5c\uff0c\u6240\u4ee5\u6211\u4e5f\u6253\u5370\u4e86\u51e0\u4efd\u7b80\u5386\uff0c\u51c6\u5907\u9762\u51e0\u5bb6\u516c\u53f8\u3002\u6211\u603b\u5171\u5c31\u9762\u4e86\u4e24\u5bb6\u516c\u53f8\uff0c\u9762\u7684\u90fd\u662f **Java \u5f00\u53d1\u5de5\u7a0b\u5e08**\uff0c\u867d\u7136\u5f88\u591a\u7684\u65f6\u95f4\u5b66\u524d\u7aef\u53bb\u4e86\uff0c\u6211\u7684 Java \u6c34\u5e73\u4e5f\u6ca1\u6709\u7cbe\u8fdb\uff0c\u4f46\u662f\u4e5f\u6bd4\u6211\u5f53\u65f6\u7684\u524d\u7aef\u6c34\u5e73\u5f3a\uff0c\u6240\u4ee5\u6211\u6295\u7684\u662f Java \u5f00\u53d1\u3002\\n\\n\u7b2c\u4e00\u6b21\u9762\u8bd5\u7684\u516c\u53f8\u662f\u4e2d\u5174\uff0c\u5728\u9762\u8bd5\u4e4b\u524d\u6709\u4e00\u4e2a\u5ba3\u8bb2\u4f1a\uff0c\u5728\u5ba3\u8bb2\u4f1a\u4e0a\u6211\u7279\u610f\u95ee\u4e86\u95ee\u9898\u9762\u8bd5\u770b\u7684\u662f\u4ec0\u4e48\u80fd\u529b\uff0c\u4ed6\u4eec\u8bf4\u662f\u57fa\u7840\uff0c\u5b8c\u4e86\u5ba3\u8bb2\u5b8c\u4e4b\u540e\u6211\u53c8\u7279\u610f\u6253\u542c\u4e86\u4e00\u4e0b\uff0c\u4ed6\u4eec\u8868\u793a\u53ea\u8003\u5bdf\u57fa\u7840\uff0c\u6240\u4ee5\u6211\u653e\u5fc3\u7684\u6295\u9012\u4e86\u7b80\u5386\uff0c\u56e0\u4e3a\u6211\u89c9\u5f97\u6211 Java \u7684\u57fa\u7840\u8fd8\u7b97 OK\u3002\u4f46\u662f\u6ca1\u60f3\u5230\u4eba\u5bb6\u7684\u57fa\u7840\u548c\u54b1\u60f3\u7684\u4e0d\u4e00\u6837\uff0c\u6211\u60f3\u7684 Java \u57fa\u7840\u8bed\u6cd5\uff0c\u4eba\u5bb6\u95ee\u7684 **TCP \u4e09\u6b21\u63e1\u624b**\uff0c\u4f7f\u7528\u8fc7\u4ec0\u4e48\u6846\u67b6\uff0c\u4f1a\u4e0d\u4f1a **Spring** \u554a\uff0c\u6211\u652f\u652f\u543e\u543e\u56de\u7b54\u4e86\u534a\u5929\uff0c\u56de\u7b54\u5f88\u5dee\u52b2\uff0c\u9762\u8bd5\u5f53\u7136\u6ca1\u6709\u901a\u8fc7\u3002\\n\\n\u7b2c\u4e8c\u6b21\u9762\u8bd5\u7684\u662f\u6d6a\u6f6e\uff0c\u4ed6\u4eec\u662f\u7fa4\u9762\uff0c\u4e03\u516b\u4eba\u4e00\u8d77\u8fdb\u53bb\uff0c\u4f9d\u6b21\u5750\u597d\uff0c\u7136\u540e\u4ecb\u7ecd\u81ea\u5df1\u3002\u5f53\u65f6\u5c31\u4e24\u4e2a\u672c\u79d1\u751f\uff0c\u4e00\u4e2a\u662f\u6211\uff0c\u53e6\u4e00\u4e2a\u662f\u8ba1\u9662\u7684\uff0c\u5176\u4ed6\u7684\u90fd\u662f\u7814\u7a76\u751f\u3002\u4ecb\u7ecd\u5b8c\u4e4b\u540e\uff0c\u4f9d\u6b21\u95ee\u95ee\u9898\uff0c\u5f53\u65f6\u95ee\u4e86\u6211\u4f1a\u4e0d\u4f1a\u6846\u67b6\uff0c\u6211\u8bf4\u4e0d\u4f1a\uff0c\u6211\u5f53\u65f6\u8fde\u6846\u67b6\u662f\u4ec0\u4e48\u90fd\u4e0d\u77e5\u9053\uff0c\u662f\u4e00\u4e2a\u8f6f\u4ef6\u5417? \u7136\u540e\u5c31\u95ee\u4e86\u6211\u4e00\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u95ee\u9898\uff0c\u7136\u540e\u5c31\u7ed3\u675f\u4e86\uff0c\u5f53\u7136\u8fd9\u6b21\u9762\u8bd5\u53c8\u5931\u8d25\u4e86\u3002\\n\\n\u8fd9\u4e24\u6b21\u9762\u8bd5\uff0c\u4e24\u4e2a\u9762\u8bd5\u5b98\u90fd\u95ee\u4e86\u6211\u4f1a\u4e0d\u4f1a\u6846\u67b6\uff0c\u6211\u5f53\u65f6\u5c31\u5341\u5206\u7684\u597d\u5947\uff0c\u6846\u67b6\u5230\u5e95\u662f\u4ec0\u4e48\uff0c\u867d\u7136\u5f53\u65f6\u6211\u8fd8\u5728\u8003\u7814\uff0c\u5f53\u6211\u8fd8\u662f\u6bcf\u5929\u62bd\u4e00\u5230\u4e24\u4e2a\u5c0f\u65f6\u5b66\u4e60 Java\uff0c\u5b66\u4e86\u4e00\u4e24\u4e2a\u6708\uff0c\u7ec8\u4e8e\u5f53\u6211\u5b66\u4e60\u5b8c **SSM** \u7684\u65f6\u5019(\u7136\u800c\u73b0\u5728\u6d41\u884c\u7684\u662f **Spring Boot**)\uff0c\u7ec8\u4e8e\u77e5\u9053\u4e86\u6846\u67b6\u662f\u4ec0\u4e48\uff0c\u7136\u540e\u5c31\u6ca1\u6709\u7ee7\u7eed\u5b66\u4e86\uff0c\u4e13\u5fc3\u7684\u51c6\u5907\u8003\u7814\u53bb\u4e86\u3002\\n\\n\u8003\u7814\u5b8c\u4e86\u4ee5\u540e\uff0c\u5728\u5b66\u6821\u5b66\u4e86\u51e0\u5929 **HTML5** \u548c **CSS3** \u7684\u4e1c\u897f\uff0c\u7136\u540e\u5c31\u6536\u62fe\u4e1c\u897f\u56de\u5bb6\u53bb\u4e86\uff0c\u53ea\u662f\u6ca1\u6709\u60f3\u5230\u7684\u662f\uff0c\u4e0b\u6b21\u56de\u6765\u7684\u65f6\u5019\u5374\u662f\u534a\u5e74\u540e\u3002\\n\\n## \u75ab\u60c5\uff1a\u590d\u8bd5\u548c\u524d\u7aef\\n\\n\u6211\u7684\u521d\u8bd5\u6210\u7ee9\u8fd8\u7b97\u7406\u60f3\uff0c\u4ee5 **385** \u5206\u7684\u6210\u7ee9\u6210\u529f\u7684\u8fdb\u5165\u4e86\u590d\u8bd5\uff0c\u6211\u80fd\u8003\u8fd9\u4e48\u9ad8\u662f\u6211\u771f\u7684\u6ca1\u6709\u60f3\u5230\u7684\uff0c\u56e0\u4e3a\u6211\u90a3\u5e74\u7684\u6570\u5b66\u771f\u7684\u7279\u522b\u96be\uff0c\u6211\u597d\u50cf\u53ea\u8003\u4e86 106 \u5206\uff0c\u4f46\u662f\u6ca1\u6709\u60f3\u5230\u6211\u7684\u82f1\u8bed\u548c\u653f\u6cbb\u8fd9\u4e48\u7ed9\u529b\uff0c\u5c06\u6211\u7684\u603b\u5206\u62c9\u4e86\u4e0a\u6765\u3002\u867d\u7136\u8fdb\u5165\u4e86\u590d\u8bd5\uff0c\u4f46\u662f\u6ca1\u6709\u60f3\u5230\u590d\u8bd5\u7adf\u662f\u5730\u72f1\u96be\u5ea6\uff0c60 \u8fdb 10\uff0c\u6211\u7684\u521d\u8bd5\u5206\u6570\u521a\u597d\u662f\u5728\u7b2c 10 \u540d\u3002\u56e0\u4e3a\u75ab\u60c5\u7684\u5173\u7cfb\uff0c\u590d\u8bd5\u7684\u65f6\u95f4\u8fdf\u8fdf\u6ca1\u6709\u786e\u5b9a\uff0c\u6211\u5728\u5bb6\u4e5f\u65e0\u6cd5\u5b89\u5fc3\u590d\u4e60\u3002\\n\\n\u5728\u51c6\u5907\u590d\u8bd5\u7684\u671f\u95f4\uff0c\u738b\u9e4f\u4f1f\u8001\u5e08\u518d\u4e00\u6b21\u7684\u8054\u7cfb\u4e86\u6211\uff0c\u5177\u4f53\u5e72\u4ec0\u4e48\u6211\u5fd8\u4e86\uff0c\u7136\u540e\u6211\u5c31\u5f00\u59cb\u5b66\u4e60 React \u76f8\u5173\u7684\u5185\u5bb9\uff0c\u5f53\u65f6\u8001\u5e08\u7ed9\u6211\u63a8\u8350\u4e86\u4e00\u4e2a\u7f51\u9875 **\u300aReact\u5c0f\u4e66\u300b**\uff0c\u5b83\u5199\u7684\u5b9e\u5728\u662f\u592a\u597d\u4e86\uff0c\u6211\u9760\u5b83\u6210\u529f\u4e86\u5165\u95e8\u4e86 React\uff0c\u5e76\u4e0e\u8001\u5e08\u914d\u5408\uff0c\u5199\u4e86\u4e00\u4e2a\u5728\u7ebf\u535a\u5ba2\u7f51\u7ad9\uff0c\u5f53\u65f6\u4e3a\u4e86\u80fd\u8ba9\u522b\u4eba\u8bbf\u95ee\uff0c\u6211\u8fd8\u7279\u5730\u4e70\u4e86\u57df\u540d\uff0c\u8fdb\u884c\u4e86\u5907\u6848\uff0c\u5f53\u7136\u8fd9\u4e2a\u7f51\u7ad9\u65e9\u5c31\u4e0b\u7ebf\u4e86\uff0c\u800c\u6211\u7684\u57df\u540d\u4e5f\u65e9\u5c31\u8fc7\u671f\u4e86\u3002\\n\\n\u590d\u8bd5\u53d1\u6325\u7684\u4e0d\u662f\u5f88\u597d\uff0c\u6ca1\u80fd\u8fdb\u5165\u524d 10\uff0c\u597d\u5728\u53ef\u4ee5\u8fdb\u884c\u6821\u5185\u8c03\u5242\uff0c\u6700\u540e\u88ab\u8c03\u5242\u5230\u4e86\u672c\u90e8\u7684\u7535\u78c1\u573a\u4e0e\u5fae\u6ce2\u4e13\u4e1a\uff0c\u6211\u771f\u7684\u975e\u5e38\u5bb3\u6015\u7535\u78c1\u573a\u4e0e\u5fae\u6ce2\uff0c\u6211\u5927\u4e8c\u6709\u4e00\u95e8 **\u300a\u7535\u78c1\u573a\u4e0e\u7535\u78c1\u6ce2\u300b** \u4e13\u4e1a\u8bfe\uff0c\u6211\u5b66\u8fd9\u95e8\u8bfe\u5934\u53d1\u90fd\u5feb\u88ab\u6211\u8585\u6ca1\u4e86\uff0c\u8fd9\u662f\u53d1\u81ea\u5185\u5fc3\u7684\u5bb3\u6015\uff0c\u6211\u5f53\u65f6\u6709\u60f3\u8fc7\u8981\u4e0d\u8981\u4e8c\u6218\uff0c\u6216\u8005\u76f4\u63a5\u627e\u5de5\u4f5c\uff0c\u4f46\u662f\u5728\u75ab\u60c5\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5de5\u4f5c\u5b9e\u5728\u4e0d\u597d\u627e\uff0c\u6211\u4e5f\u6ca1\u6709\u8fd9\u4e2a\u7cbe\u6c14\u795e\u53bb\u4e8c\u6218\u4e86\uff0c\u6240\u4ee5\u8fd8\u662f\u9009\u62e9\u6765\u8bfb\u4e66\u4e86\u3002\\n\\n## \u7814\u7a76\u751f\uff1a\u6df1\u5165\u94bb\u7814\u524d\u7aef\\n\\n\u867d\u7136\u6765\u5230\u4e86\u5fae\u6ce2\u5de5\u7a0b\u7cfb\uff0c\u4f46\u662f\u5bfc\u5e08\u7ed9\u6211\u5206\u914d\u7684\u8bfe\u9898\u4e0e\u5fae\u6ce2\u7b49\u65b9\u9762\u65e0\u5173\uff0c\u56e0\u4e3a\u672c\u79d1\u6bd5\u8bbe\u505a\u8fc7\u6df1\u5ea6\u5b66\u4e60\u65b9\u9762\u7684\u5185\u5bb9\uff0c\u6240\u4ee5\u51b3\u5b9a\u8ba9\u6211\u505a\u6df1\u5ea6\u5b66\u4e60\u65b9\u9762\u7684\u7814\u7a76\uff0c\u867d\u7136\u6df1\u5ea6\u5b66\u4e60\u6211\u4e5f\u4e0d\u662f\u5f88\u719f\uff0c\u4f46\u662f\u76f8\u6bd4\u4e8e\u5fae\u6ce2\uff0c\u7b97\u662f\u5f88\u597d\u7684\u9009\u62e9\u4e86\uff0c\u574f\u5904\u5c31\u662f\u6839\u672c\u627e\u4e0d\u5230\u4eba\u8bf7\u6559\uff0c\u6ca1\u6709\u4eba\u641e\u6df1\u5ea6\u5b66\u4e60\uff0c\u5168\u90fd\u5f97\u9760\u81ea\u5df1\u6478\u7d22\u3002\\n\\n\u6211\u4e5f\u57fa\u672c\u786e\u5b9a\u4e86\u81ea\u5df1\u7684\u9053\u8def\uff0c\u90a3\u5c31\u662f\u53bb\u4e92\u8054\u7f51\u516c\u53f8\uff0c\u56e0\u4e3a\u6211\u5728\u75ab\u60c5\u4ee5\u53ca\u6691\u5047\u671f\u95f4\u90fd\u5728\u5b66\u4e60\u524d\u7aef\uff0c\u6211\u5bf9\u8fd9\u65b9\u9762\u4e5f\u6bd4\u8f83\u611f\u5174\u8da3\uff0c\u6240\u4ee5\u57fa\u672c\u786e\u5b9a\u4e86\u6211\u662f\u60f3\u6210\u4e3a\u4e00\u540d\u524d\u7aef\u5de5\u7a0b\u5e08\u3002\u6709\u4e86\u76ee\u6807\u5c31\u597d\u529e\uff0c\u90a3\u5c31\u662f\u5929\u5929\u5b66\u5457\uff0c\u6240\u4ee5\u9664\u4e86\u7814\u4e00\u9700\u8981\u4e0a\u8bfe\u4e4b\u5916\uff0c\u4e1a\u4f59\u65f6\u95f4\u6211\u90fd\u7528\u6765\u5b66\u4e60\u524d\u7aef\u4e86\uff0c\u5728\u8fd9\u4e2a\u671f\u95f4\u770b\u4e86\u597d\u51e0\u672c\u7ecf\u5178\u4e66 **\u300aJavaScript\u9ad8\u7ea7\u7a0b\u5e8f\u8bbe\u8ba1\u300b**\u3001**\u300aJavaScript\u5fcd\u8005\u79d8\u7c4d\u300b**\u3001**\u300a\u6df1\u5165\u7406\u89e3ES6\u300b**\uff0c**\u300a\u6df1\u5165\u6d45\u51faNodeJS\u300b** \u7b49\uff0c\u5c06\u6211\u7684 JavaScript \u57fa\u7840\u6253\u9020\u7684\u65e0\u6bd4\u7684\u624e\u5b9e\uff0c\u8fd9\u4e9b\u4e66\u90fd\u770b\u8fc7\u90fd\u4e0d\u6b62\u4e00\u904d\uff0c\u6709\u7684\u4e66\u6211\u751a\u81f3\u770b\u4e86\u4e09\u56db\u904d\uff0c\u5e76\u5f00\u59cb\u7ecf\u8425\u81ea\u5df1\u7684\u535a\u5ba2\uff0c\u53d1\u8868\u4e86\u591a\u7bc7\u5b66\u4e60\u7b14\u8bb0\u4ee5\u53ca\u5b66\u4e60\u5fc3\u5f97\u3002\\n\\n\u4f46\u662f\u6b64\u65f6\u6211\u8fd8\u6ca1\u6709\u4ec0\u4e48\u9879\u76ee\u7ecf\u5386\uff0c\u5982\u679c\u60f3\u53bb\u4e92\u8054\u7f51\u5927\u5382\u7684\u8bdd\uff0c\u57fa\u672c\u662f\u9700\u8981\u9879\u76ee\u7ecf\u5386\u548c\u5b9e\u4e60\u7ecf\u5386\u7684\uff0c\u6240\u4ee5\u7814\u4e00\u4e0b\u5b66\u671f(\u54c8\u5de5\u5927\u7814\u7a76\u751f\u4e24\u5e74\u5236\uff0c2022\u5e74\u6539\u4e3a\u4e09\u5e74)\u6211\u5c31\u5f00\u59cb\u5411\u5927\u5382\u6295\u9012\u5b9e\u4e60\u7b80\u5386\uff0c\u8bf4\u5b9e\u8bdd\uff0c\u6211\u662f\u975e\u5e38\u7d27\u5f20\u7684\uff0c\u56e0\u4e3a\u6211\u4ece\u6765\u6ca1\u6709\u9762\u8fc7\u4e92\u8054\u7f51\u516c\u53f8\uff0c\u6015\u81ea\u5df1\u8fbe\u4e0d\u5230\u4ed6\u4eec\u7684\u8981\u6c42\uff0c\u5f53\u65f6\u5176\u5b9e\u5c31\u662f\u62b1\u7740\u8bd5\u4e00\u8bd5\u7684\u5fc3\u6001\uff0c\u6295\u4e86**\u963f\u91cc**\u3001**\u7f8e\u56e2**\u548c**\u5b57\u8282**\u4e09\u5bb6\u516c\u53f8\uff0c\u6ca1\u6709\u60f3\u5230\u6211\u5c45\u7136\u5168\u90e8\u90fd\u901a\u8fc7\u4e86\uff0c\u62ff\u5230\u4e86 offer\uff0c\u8fd9\u4e9b offer \u7ed9\u4e86\u6211\u5f88\u5927\u7684\u81ea\u4fe1\uff0c\u539f\u6765\u6211\u4e0d\u83dc\u3002\\n\\n\u7efc\u5408\u5b9e\u4e60\u85aa\u8d44\u4ee5\u53ca\u5b9e\u4e60\u65f6\u95f4\u8981\u6c42\uff0c\u6211\u9009\u62e9\u53bb\u4e86\u963f\u91cc\u9ad8\u5fb7\u5b9e\u4e60\uff0c\u6211\u5728\u8fd9\u91cc\u5b9e\u4e60\u4e86\u4e24\u4e2a\u591a\u6708\uff0c\u611f\u53d7\u4e86\u4e00\u4e0b\u5de5\u4f5c\u6d41\u7a0b\uff0c\u5de5\u4f5c\u6c1b\u56f4\uff0c\u6700\u540e\u4e5f\u662f\u6210\u529f\u7684\u62ff\u5230\u4e86\u8f6c\u6b63\u7684 offer\u3002\u56e0\u4e3a\u5e08\u5144\u4eec\u90fd\u975e\u5e38 nice(\u7279\u522b\u662f**\u9ad8\u5efa**\u5e08\u5144)\uff0c\u963f\u91cc\u7ed9\u51fa\u7684\u85aa\u916c\u4e5f\u8fbe\u5230\u4e86\u6211\u7684\u9884\u671f\uff0c\u6240\u4ee5\u6211\u5c31\u63a5\u53d7\u4e86 offer\uff0c\u7ed3\u675f\u4e86\u6211\u7684\u79cb\u62db\u3002\\n\\n\u7efc\u4e0a\uff0c\u4fbf\u662f\u6211\u6210\u4e3a\u4e00\u540d\u524d\u7aef\u5de5\u7a0b\u5e08\u7684\u5168\u90e8\u8fc7\u7a0b\uff0c\u6211\u7684\u6574\u4e2a\u8fc7\u7a0b\u5e76\u4e0d\u662f\u4e00\u756a\u98ce\u987a\uff0c\u5176\u4e2d\u7684\u82e6\u4e0e\u751c\u4e5f\u53ea\u6709\u6211\u4e00\u4eba\u6e05\u695a\uff0c\u5728\u6211\u521a\u8fdb\u5165\u5927\u5b66\u6821\u95e8\u65f6\u6211\u4e5f\u4ece\u6765\u6ca1\u6709\u60f3\u5230\u6211\u4f1a\u6210\u4e3a\u4e00\u540d\u7a0b\u5e8f\u5458\uff0c\u6240\u4ee5\u672a\u6765\u4f1a\u600e\u4e48\u6837\u8c01\u8bf4\u7684\u5b9a\u5462? \u4f60\u53ea\u9700\u8981\u786e\u5b9a\u4e00\u4e2a\u76ee\u6807\uff0c\u7136\u540e\u4e3a\u4e4b\u52aa\u529b\u594b\u6597\u4fbf\u662f\uff0c\u81f3\u4e8e\u662f\u4ec0\u4e48\u6837\u7684\u7ed3\u679c\uff0c\u65f6\u95f4\u6700\u7ec8\u4f1a\u544a\u8bc9\u4f60\u7b54\u6848\u3002"},{"id":"/2021/11/22/\u4f7f\u7528Notion\u4f5c\u4e3a\u89c6\u9891\u6258\u7ba1","metadata":{"permalink":"/blog/2021/11/22/\u4f7f\u7528Notion\u4f5c\u4e3a\u89c6\u9891\u6258\u7ba1","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2021-11-22-\u4f7f\u7528Notion\u4f5c\u4e3a\u89c6\u9891\u6258\u7ba1.mdx","source":"@site/blog/2021-11-22-\u4f7f\u7528Notion\u4f5c\u4e3a\u89c6\u9891\u6258\u7ba1.mdx","title":"\u4f7f\u7528Notion\u4f5c\u4e3a\u89c6\u9891\u6258\u7ba1","description":"\u6709\u7684\u65f6\u5019\u5e0c\u671b\u5728\u535a\u5ba2\u91cc\u9762\u6dfb\u52a0\u89c6\u9891\uff0c\u535a\u5ba2\u6258\u7ba1\u5728 Github Page \u4e0a\uff0c\u4f46\u662f\u89c6\u9891\u4e00\u822c\u6bd4\u8f83\u5927\uff0c\u4e5f\u5c31\u6ca1\u6709\u529e\u6cd5\u5c06\u5176\u4e0a\u4f20\u5230 Github \u4e0a\uff0c\u4e00\u822c\u6765\u8bf4\u6211\u4eec\u53ef\u4ee5\u8bb2\u89c6\u9891\u4e0a\u4f20\u5230\u89c6\u9891\u6258\u7ba1\u5e73\u53f0\uff0c\u6bd4\u5982 bilibili \u548c Youtube\u3002","date":"2021-11-22T00:00:00.000Z","formattedDate":"2021\u5e7411\u670822\u65e5","tags":[{"label":"Notion","permalink":"/blog/tags/notion"},{"label":"\u89c6\u9891","permalink":"/blog/tags/\u89c6\u9891"}],"readingTime":9.495,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"authors":"xiongtao","tags":["Notion","\u89c6\u9891"]},"prevItem":{"title":"\u6211\u662f\u5982\u4f55\u6210\u4e3a\u4e00\u540d\u7a0b\u5e8f\u5458\u7684","permalink":"/blog/2021/11/25/\u6211\u662f\u5982\u4f55\u6210\u4e3a\u4e00\u540d\u7a0b\u5e8f\u5458\u7684"},"nextItem":{"title":"\u8fdc\u7a0b\u8bbf\u95ee jupyter","permalink":"/blog/2021/11/12/\u8fdc\u7a0b\u8bbf\u95ee jupyter"}},"content":"\u6709\u7684\u65f6\u5019\u5e0c\u671b\u5728\u535a\u5ba2\u91cc\u9762\u6dfb\u52a0\u89c6\u9891\uff0c\u535a\u5ba2\u6258\u7ba1\u5728 `Github Page` \u4e0a\uff0c\u4f46\u662f\u89c6\u9891\u4e00\u822c\u6bd4\u8f83\u5927\uff0c\u4e5f\u5c31\u6ca1\u6709\u529e\u6cd5\u5c06\u5176\u4e0a\u4f20\u5230 `Github` \u4e0a\uff0c\u4e00\u822c\u6765\u8bf4\u6211\u4eec\u53ef\u4ee5\u8bb2\u89c6\u9891\u4e0a\u4f20\u5230\u89c6\u9891\u6258\u7ba1\u5e73\u53f0\uff0c\u6bd4\u5982 `bilibili` \u548c `Youtube`\u3002\\n\\n\u5bf9\u4e8e\u56fd\u5185\u5c06\u89c6\u9891\u4e0a\u4f20\u5230 `bilibili` \u662f\u4e00\u4e2a\u6bd4\u8f83\u597d\u7684\u9009\u62e9\uff0c\u4f46\u662f\u5728\u535a\u5ba2\u4e2d\u5d4c\u5165\u7684 `bilibili` \u7684\u6e05\u6670\u5ea6\u6700\u9ad8\u53ea\u6709 `720P`\uff0c\u5982\u679c\u9700\u8981\u66f4\u9ad8\u6e05\u6670\u5ea6\u5219\u9700\u8981\u524d\u5f80 `B\u7ad9` \u89c2\u770b\uff0c\u5982\u679c\u53ef\u4ee5\u7684\u8bdd\uff0c\u6211\u5e76\u4e0d\u5e0c\u671b\u8bfb\u8005\u79bb\u5f00\u6211\u7684\u535a\u6587\u53bb\u89c2\u770b\u89c6\u9891\uff0c\u6700\u597d\u80fd\u5728\u672c\u9875\u9762\u89c2\u770b\u3002\\n\\n\u5c06\u89c6\u9891\u4e0a\u4f20\u5230 `Youtube` \u4e0a\u6ca1\u6709\u6e05\u6670\u5ea6\u7684\u9650\u5236\uff0c\u4f46\u662f\u56e0\u4e3a\u5899\u7684\u5b58\u5728\uff0c\u89c6\u9891\u5f88\u53ef\u80fd\u65e0\u6cd5\u8bbf\u95ee\u3002\\n\\n\u9664\u6b64\u4e4b\u5916\uff0c\u6709\u4e9b\u89c6\u9891\u53ef\u80fd\u65e0\u6cd5\u4e0a\u4f20\u5230\u89c6\u9891\u6258\u7ba1\u5e73\u53f0\uff0c\u4f8b\u5982\u7535\u5f71\uff0c\u7531\u4e8e\u7248\u6743\uff0c\u4e0a\u4f20\u7684\u89c6\u9891\u4e0d\u80fd\u8fc7\u5ba1\uff0c\u4e5f\u65e0\u6cd5\u63d0\u4f9b\u89c6\u9891\u6258\u7ba1\u670d\u52a1\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n\u540e\u6765\u6211\u53d1\u73b0\u53ef\u4ee5\u5c06\u89c6\u9891\u653e\u5728 `Notion`\uff0c\u5bf9\u4e8e `Pro Plan` \u53ef\u4ee5\u4e0a\u4f20\u65e0\u9650\u5bb9\u91cf\u7684\u6587\u4ef6\uff0c\u5f53\u7136\u5c31\u53ef\u4ee5\u4e0a\u4f20\u89c6\u9891\uff0c\u56e0\u4e3a\u5b83\u662f\u4e00\u4e2a\u7f51\u9875\u5e94\u7528\uff0c\u6211\u4eec\u53ef\u4ee5\u62ff\u5230\u89c6\u9891\u7684\u64ad\u653e\u5730\u5740\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u89c6\u9891\u5730\u5740\u62ff\u8fc7\u6765\u5d4c\u5165\u5230\u81ea\u5df1\u7684\u535a\u5ba2\u4e2d\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u64ad\u653e\u89c6\u9891\u4e86\uff0c\u5e76\u4e14\u4e5f\u6ca1\u6709\u6e05\u6670\u5ea6\u7684\u9650\u5236\uff0c\u552f\u4e00\u7684\u7f3a\u70b9\u53ef\u80fd\u5c31\u662f\u64ad\u653e\u901f\u5ea6\u53ef\u80fd\u4e0d\u662f\u5f88\u5feb\uff0c\u4f46\u662f\u56e0\u4e3a\u4e0a\u4f20\u5230 `Notion` \u662f\u4e0d\u7528\u5ba1\u6838\u7684\uff0c\u54b1\u4eec\u53ef\u4ee5\u5206\u4eab\u4e00\u4e9b\u7535\u5f71\u3002\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3/202110142140352021-10-14-21-40-36.png\\" style={{ zoom: \'50%\' }}/>\\n\\n\u4f46\u662f\u5f88\u5feb\u6211\u53d1\u73b0\u5929\u771f\u4e86\uff0c\u94fe\u63a5\u5f88\u5feb\u5c31\u5931\u6548\uff0cNotion \u505a\u4e86\u76f8\u5173\u5904\u7406\uff0c\u89c6\u9891\u94fe\u63a5\u662f\u6709\u65f6\u95f4\u9650\u5236\u7684\uff0c\u4f46\u662f\u540e\u9762\u6211\u60f3\u5230 `Notion` \u63d0\u4f9b\u4e86 `API` \u6765\u8bbf\u95ee\u9875\u9762\u7684\u5185\u5bb9\uff0c\u90a3\u6211\u4eec\u53ef\u4ee5\u5728\u6bcf\u6b21\u6253\u5f00\u535a\u5ba2\u7684\u65f6\u5019\u5bf9\u76f8\u5173\u9875\u9762\u8fdb\u884c\u8bbf\u95ee\uff0c\u62ff\u5230\u6700\u65b0\u7684\u94fe\u63a5\u8fdb\u884c\u64ad\u653e\u5373\u53ef\uff0c\u8bf4\u5e72\u5c31\u5e72\u3002\\n\\n\u6309\u7167 `Notion` [\u5b98\u7f51\u6307\u5357](https://developers.notion.com/docs/getting-started)\uff0c\u9996\u5148\u9700\u8981\u524d\u5f80 [https://www.notion.so/my-integrations](https://www.notion.so/my-integrations) \u521b\u5efa\u4e00\u4e2a `integrations`\uff0c\u5177\u4f53\u6309\u7167\u5b83\u7684\u6765\u64cd\u4f5c\uff0c\u6bd4\u5982\u6211\u521b\u5efa\u4e86\u4e00\u4e2a\u540d\u5b57\u4e3a `test` \u7684 `integrations`\uff0c\u521b\u5efa\u597d\u4e4b\u540e\u4f1a\u7ed9\u4f60\u4e00\u4e2a\u5b57\u7b26\u4e32\u5bc6\u94a5\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u5bc6\u94a5\u6765\u8bbf\u95ee\u76f8\u5173\u9875\u9762\u3002\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3/202110142148482021-10-14-21-48-49.png\\" style={{ zoom: \'50%\' }}/>\\n\\n\\n\u6211\u4eec\u5c06\u9700\u8981\u88ab\u8bbf\u95ee\u7684\u9875\u9762 `share` \u5230\u8be5 `integrations` \u4e2d\uff0c\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3/202110150133482021-10-15-01-33-48.png\\" style={{ zoom: \'50%\' }}/>\\n\\n\\n\u7136\u540e\u5c31\u53ef\u4ee5\u4f7f\u7528 `Notion` \u63d0\u4f9b `JS` \u63a5\u53e3\u6765\u8bbf\u95ee\u76f8\u5173\u9875\u9762\uff0c\u9996\u5148\u65b0\u5efa\u4e00\u4e2a `npm` \u9879\u76ee\uff0c\u5e76\u4e0b\u8f7d\u4f9d\u8d56\\n\\n```bash\\nnpm install @notionhq/client\\n```\\n\\n\u7136\u540e\u901a\u8fc7\u4e0b\u9762\u7684\u4ee3\u7801\u8bbf\u95ee\u9875\u9762\u5185\u5bb9\\n\\n```js\\nconst { Client } = require(\\"@notionhq/client\\");\\nconst notion = new Client({\\n  auth: \\"integrations\u5bc6\u94a5\\",\\n});\\n\\n(async () => {\\n  const res = await notion.blocks.children.list({\\n    block_id: \\"\u5757ID\\",\\n  });\\n  const { results } = res;\\n  console.log(results);\\n})();\\n```\\n\\n\u5728\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 `notion.blocks.children.list` \u6765\u83b7\u5f97\u6307\u5b9a\u5757 ID \u5305\u542b\u7684\u6240\u6709\u5185\u5bb9\uff0c**\u6ce8\u610f\u5230\u9875\u9762\u4e5f\u662f\u4e00\u4e2a\u5757**\uff0c\u800c\u9875\u9762\u7684\u5757 ID \u53ef\u4ee5\u901a\u8fc7\u7f51\u9875\u5730\u5740\u62ff\u5230\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3/202110142158162021-10-14-21-58-17.png\\" style={{ zoom: \'50%\' }}/>\\n\\n\\n\u4e0a\u8ff0\u4ee3\u7801\u7684\u8fd0\u884c\u7ed3\u679c\u4e3a\\n\\n```json\\n[\\n  {\\n    object: \'block\',\\n    id: \'3b628e1d-84da-4c6c-900d-b6e4a285xxxx\',\\n    created_time: \'2021-02-19T07:18:00.000Z\',\\n    last_edited_time: \'2021-02-22T07:24:00.000Z\',\\n    has_children: false,\\n    archived: false,\\n    type: \'video\',\\n    video: { caption: [Array], type: \'file\', file: [Object] }\\n  },\\n  {\\n    object: \'block\',\\n    id: \'5adccff1-b93f-4d1e-a079-0d20d1a5xxxx\',\\n    created_time: \'2021-09-28T00:09:00.000Z\',\\n    last_edited_time: \'2021-09-28T00:09:00.000Z\',\\n    has_children: false,\\n    archived: false,\\n    type: \'paragraph\',\\n    paragraph: { text: [] }\\n  }\\n]\\n```\\n\\n\u8fd4\u56de\u7ed3\u679c\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u5305\u542b\u4e24\u4e2a\u5143\u7d20\uff0c\u90fd\u662f\u5bf9\u8c61\uff0c\u7b2c\u4e00\u4e2a\u5143\u7d20\u4e2d\u7684 `type` \u5c5e\u6027\u4e3a `video`\uff0c\u5c31\u662f\u6211\u4eec\u60f3\u8981\u7684\u7ed3\u679c\uff0c\u6ce8\u610f\u5230\u8fd9\u4e2a\u5bf9\u8c61\u6709\u4e00\u4e2a `id` \u5c5e\u6027\uff0c\u8fd9\u662f\u8fd9\u4e2a\u89c6\u9891\u5757\u7684 `blcok_id`\u3002\u62ff\u5230\u89c6\u9891\u7684\u5757 ID \u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 `notion.blocks.retrieve` \u62ff\u5230\u6307\u5b9a\u5757\u7684\u5185\u5bb9\\n\\n```js\\nconst { Client } = require(\\"@notionhq/client\\");\\nconst notion = new Client({\\n  auth: \\"integrations\u5bc6\u94a5\\",\\n});\\n\\n(async () => {\\n  const res = await notion.blocks.retrieve({\\n    block_id: \\"3b628e1d-84da-4c6c-900d-b6e4a285xxxx\\",\\n  });\\n  console.log(res);\\n})();\\n```\\n\\n\u6253\u5370\u7ed3\u679c\u4e3a\\n\\n```json\\n{\\n  object: \'block\',\\n  id: \'3b628e1d-84da-4c6c-900d-b6e4a285xxxx\',\\n  created_time: \'2021-02-19T07:18:00.000Z\',\\n  last_edited_time: \'2021-02-22T07:24:00.000Z\',\\n  has_children: false,\\n  archived: false,\\n  type: \'video\',\\n  video: {\\n    caption: [ [Object] ],\\n    type: \'file\',\\n    file: {\\n      url: \'https://s3.us-west-2.amazonaws.com/secure.notion-static.com/6f8c2891-109a-4b5f-8700-1f0214784b36/-.mp4?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAT73L2G45O3KS52Y5%2F20211014%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20211014T140553Z&X-Amz-Expires=3600&X-Amz-Signature=c42b604dacab8e48efc58b6ba48ca6b83141dbea49467b2529a73e833ca2caa8&X-Amz-SignedHeaders=host\',\\n      expiry_time: \'2021-10-14T15:05:53.554Z\'\\n    }\\n  }\\n}\\n```\\n\\n`video` \u5c5e\u6027\u4e2d\u7684 `file` \u5c5e\u6027\u7ed9\u51fa\u4e86\u89c6\u9891\u7684\u5730\u5740\u4ee5\u53ca\u5931\u6548\u65f6\u95f4\uff0c\u867d\u7136\u6709\u5931\u6548\u65f6\u95f4\uff0c\u4f46\u662f\u6211\u4eec\u6bcf\u6b21\u90fd\u53ef\u4ee5\u901a\u8fc7 `API` \u62ff\u5230\u65b0\u7684\u89c6\u9891\u64ad\u653e\u5730\u5740\uff0c\u89c6\u9891\u5c31\u4f1a\u6c38\u4e45\u6709\u6548\uff0c\u6211\u4eec\u53ef\u4ee5\u62bd\u79bb\u51fa\u4e00\u4e2a `Vue` \u7ec4\u4ef6\uff0c\u8be5 `Vue` \u7ec4\u4ef6\u63a5\u6536\u4e00\u4e2a\u89c6\u9891\u7684\u5757 ID\\n\\n```html vue\\n<template>\\n  <div>\\n    <video ref=\\"video\\"></video>\\n  </div>\\n</template>\\n\\n<script>\\n  import { Client } from \\"@notionhq/client\\";\\n  const notion = new Client({\\n    auth: \\"integrations\u5bc6\u94a5\\",\\n  });\\n\\n  export default {\\n    name: \\"NotionVideo\\",\\n    props: [\\"block_id\\"],\\n    mounted() {\\n      const video = this.$refs.video;\\n      (async () => {\\n        const res = await notion.blocks.retrieve({\\n          block_id: this.block_id,\\n        });\\n        video.src = res.video.file.url;\\n      })();\\n    },\\n  };\\n<\/script>\\n\\n<style scoped>\\n  video {\\n    max-width: 100%;\\n    object-fit: contain;\\n    border-radius: 5px;\\n  }\\n</style>\\n```\\n\\n\u7136\u540e\u5982\u4e0b\u4f7f\u7528\\n\\n```html vue\\n<NotionVideo block_id=\\"3b628e1d-84da-4c6c-900d-b6e4a285xxxx\\" />\\n```\\n\\n\u4f46\u662f\u4e07\u4e07\u6ca1\u6709\u60f3\u5230\uff0c\u4e0d\u80fd\u8de8\u57df\uff01\uff01\uff01\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3/202110142229092021-10-14-22-29-09.png\\" style={{ zoom: \'50%\' }}/>\\n\\n\\n\u4e3a\u4e86\u89e3\u51b3\u8de8\u57df\u7684\u95ee\u9898\uff0c\u6211\u4eec\u5fc5\u987b\u4f7f\u7528\u4e00\u4e2a\u670d\u52a1\u5668\u4e2d\u8f6c\u8bf7\u6c42\uff0c\u5e76\u5728\u8be5\u670d\u52a1\u5668\u4e2d\u5904\u7406\u8de8\u57df\u95ee\u9898\uff0c\u4f46\u662f\u6211\u6ca1\u6709\u670d\u52a1\u5668\uff0c\u8fd9\u5c31\u610f\u5473\u7740\u6211\u9700\u8981\u79df\u4e00\u4e2a\u670d\u52a1\u5668\uff0c\u4f46\u662f\u54b1\u6ca1\u94b1\u554a\uff0c\u6b64\u65f6\u6211\u7684\u8111\u6d77\u91cc\u60f3\u8d77\u53ef\u4e0d\u53ef\u4ee5\u4f7f\u7528\u6211\u7684\u7535\u8111\u4f5c\u4e3a\u670d\u52a1\u5668\u5462\uff0c\u4f46\u662f\u6211\u7684\u7535\u8111\u56e0\u4e3a\u5230\u5904\u79fb\u52a8\uff0c\u5b83\u7684 `IP` \u662f\u4e0d\u65ad\u53d8\u5316\u7684\uff0c\u65e0\u6cd5\u63d0\u4f9b\u7a33\u5b9a\u7684\u670d\u52a1\uff0c\u603b\u4e0d\u53ef\u80fd\u6bcf\u6b21\u53d8 `IP` \u6211\u90fd\u8981\u91cd\u65b0\u6539\u4e00\u4e0b\u8bf7\u6c42\u5730\u5740\u5e76\u90e8\u7f72\u4e00\u6b21\u9879\u76ee\u5427\u3002\\n\\n\u7136\u540e\u6211\u60f3\u5230\u4e86\u5185\u7f51\u7a7f\u900f\uff0c\u4e4b\u524d\u7528\u8fc7\u5185\u7f51\u7a7f\u900f\u63d0\u4f9b\u7f51\u9875\u670d\u52a1\uff0c\u7136\u540e\u6211\u53d1\u73b0\u514d\u8d39\u7684\u5185\u7f51\u7a7f\u900f\u5b9e\u5728\u662f\u592a\u5dee\u52b2\u4e86\uff0c\u800c\u4e14\u6709\u7684\u5e73\u53f0\u8981\u5b9e\u540d\u8ba4\u8bc1\uff0c\u6211\u8fd9\u4e5f\u4e0d\u6562\u5c06\u81ea\u5df1\u7684\u4fe1\u606f\u66b4\u9732\uff0c\u6211\u5bf9\u4ed6\u4eec\u662f\u4e0d\u4fe1\u4efb\u7684\uff0c\u90a3\u4e48\u4f3c\u4e4e\u9677\u5165\u4e86\u6b7b\u80e1\u540c\u3002\\n\\n\u4f46\u662f\u5929\u65e0\u7edd\u4eba\u4e4b\u8def\uff0c\u6211\u60f3\u5230\u4e86 `Serverless` \u670d\u52a1\uff0c\u5f88\u591a\u4f01\u4e1a\u63d0\u4f9b\u514d\u8d39\u7684\u51fd\u6570\u8c03\u7528\uff0c\u6bcf\u6708\u524d\u4e00\u767e\u4e07\u6b21\u8c03\u7528\u514d\u8d39\uff0c\u8fd9\u7b80\u76f4\u5c31\u662f\u514d\u8d39\uff0c\u56e0\u4e3a\u6211\u6839\u672c\u5c31\u4e0d\u53ef\u80fd\u8c03\u7528\u4e00\u767e\u4e07\u6b21\u3002\u63d0\u4f9b\u8fd9\u6837\u4ea7\u54c1\u7684\u4f01\u4e1a\u5f88\u591a\uff0c\u6211\u6700\u7ec8\u9009\u62e9\u4e86\u817e\u8baf\u4e91\u63d0\u4f9b\u7684 `Serverless` \u670d\u52a1\uff0c\u56e0\u4e3a\u817e\u8baf\u6253\u7684\u5e7f\u544a\u591a\uff0c\u4e4b\u524d\u6298\u817e\u8fc7\u4f46\u662f\u6ca1\u6709\u6210\u529f\uff0c\u8fd9\u6b21\u7ee7\u7eed\u6298\u817e\u3002\u7ecf\u8fc7\u6298\u817e\uff0c\u53d1\u73b0\u6700\u7b80\u5355\u7684\u4f7f\u7528\u8fc7\u7a0b\u5982\u4e0b\uff0c\u9996\u5148\u5728\u672c\u5730\u7f16\u5199\u4ee3\u7801\uff0c\u7136\u540e\u5c06\u4ee3\u7801\u6253\u5305\u6210 `zip` \u4e0a\u4f20\u5373\u53ef\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\uff1a\\n\\n- \u5165\u53e3\u6587\u4ef6\u4e3a `app.js`\\n- \u76d1\u542c\u7684\u7aef\u53e3\u53f7\u5fc5\u987b\u4e3a `9000`\\n- \u6240\u9700\u8981\u7684\u4f9d\u8d56\uff0c\u5373 `node_modules` \u6587\u4ef6\u5939\u9700\u8981\u4e00\u8d77\u6253\u5305\\n\\n\u4ee3\u7801\u5982\u4e0b\u6240\u793a\\n\\n```js\\nconst Koa = require(\\"koa\\");\\nconst app = new Koa();\\n\\nconst { Client } = require(\\"@notionhq/client\\");\\nconst notion = new Client({\\n  auth: \\"integrations\u5bc6\u94a5\\",\\n});\\n\\n// \u8de8\u57df\u5904\u7406\\napp.use(async (ctx, next) => {\\n  ctx.set(\\"Access-Control-Allow-Origin\\", \\"*\\");\\n  ctx.set(\\n    \\"Access-Control-Allow-Headers\\",\\n    \\"Content-Type, Content-Length, Authorization, Accept, X-Requested-With , yourHeaderFeild\\"\\n  );\\n  ctx.set(\\"Access-Control-Allow-Methods\\", \\"PUT, POST, GET, DELETE, OPTIONS\\");\\n  if (ctx.method == \\"OPTIONS\\") {\\n    ctx.body = 200;\\n  } else {\\n    await next();\\n  }\\n});\\n\\napp.use(async (ctx, next) => {\\n  const query = ctx.query;\\n  const { block_id } = query;\\n  if (!block_id) {\\n    ctx.body = {};\\n    await next();\\n  }\\n  const res = await notion.blocks.retrieve({\\n    block_id,\\n  });\\n  ctx.body = {\\n    url: res.video.file.url,\\n  };\\n});\\n\\n// Web \u7c7b\u578b\u4e91\u51fd\u6570\uff0c\u53ea\u80fd\u76d1\u542c 9000 \u7aef\u53e3\\napp.listen(9000, () => {\\n  console.log(`Server start on http://localhost:9000`);\\n});\\n```\\n\\n\u6ce8\u610f\u5230\u5728\u4ee3\u7801\u4e2d\u505a\u4e86\u8de8\u57df\u5904\u7406\uff0c\u6240\u4ee5\u5c31\u4e0d\u5b58\u5728\u8de8\u57df\u7684\u95ee\u9898\u3002\u7136\u540e\u6211\u4eec\u70b9\u51fb\u90e8\u7f72\uff0c\u63a5\u7740\u4f1a\u7ed9\u51fa\u4e00\u4e2a\u8bbf\u95ee\u5730\u5740\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u901a\u8fc7\u8bbf\u95ee\u5730\u5740\u6765\u8bf7\u6c42\u670d\u52a1\u3002\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3/202110150116212021-10-15-01-16-22.png\\" style={{ zoom: \'50%\' }}/>\\n\\n\u4e0b\u9762\u6211\u4eec\u5c31\u9700\u8981\u66f4\u6539 `NotionVideo.vue` \u6587\u4ef6\uff0c\u4f7f\u7528 `fetch` \u65b9\u6cd5\u8bbf\u95ee\u817e\u8baf\u4e91\u7ed9\u51fa\u7684\u8bbf\u95ee\u8def\u5f84\\n\\n```html vue\\n<template>\\n  <div>\\n    <video ref=\\"video\\" controls></video>\\n  </div>\\n</template>\\n\\n<script>\\n  export default {\\n    name: \\"NotionVideo\\",\\n    props: [\\"block_id\\"],\\n    mounted() {\\n      const video = this.$refs.video;\\n      fetch(`\u817e\u8baf\u4e91\u8bbf\u95ee\u8def\u5f84/?block_id=${this.block_id}`)\\n        .then((res) => res.json())\\n        .then((data) => {\\n          const { url } = data;\\n          if (!url) {\\n            return;\\n          }\\n          video.src = url;\\n        })\\n        .catch((e) => {\\n          console.log(\\"\u89c6\u9891\u52a0\u8f7d\u5931\u8d25\\");\\n        });\\n    },\\n  };\\n<\/script>\\n\\n<style scoped>\\n  video {\\n    max-width: 100%;\\n    object-fit: contain;\\n    border-radius: 5px;\\n  }\\n</style>\\n```\\n\\n\u4e0b\u9762\u6211\u4eec\u4fbf\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\u8bbf\u95ee\u89c6\u9891\\n\\n```html vue\\n<NotionVideo block_id=\\"3b628e1d-84da-4c6c-900d-b6e4a285xxxx\\" />\\n```"},{"id":"/2021/11/12/\u8fdc\u7a0b\u8bbf\u95ee jupyter","metadata":{"permalink":"/blog/2021/11/12/\u8fdc\u7a0b\u8bbf\u95ee jupyter","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2021-11-12-\u8fdc\u7a0b\u8bbf\u95ee jupyter.mdx","source":"@site/blog/2021-11-12-\u8fdc\u7a0b\u8bbf\u95ee jupyter.mdx","title":"\u8fdc\u7a0b\u8bbf\u95ee jupyter","description":"\u6700\u8fd1\u53c8\u5f00\u59cb\u6298\u817e\u4e86 jupyter \u4e86\uff0c\u56e0\u4e3a\u5b9e\u9a8c\u5ba4\u7684\u7f51\u7edc\u73af\u5883\u592a\u5dee\uff0c\u6bcf\u6b21\u6211\u4f7f\u7528 conda \u5f00\u542f\u4e00\u4e2a\u65b0\u7684\u73af\u5883\uff0c\u7136\u540e\u4e0b\u8f7d\u4e00\u4e9b\u65b0\u7684\u5305\u65f6\u4f1a\u975e\u5e38\u7684\u6162\uff0c\u6162\u6211\u8fd8\u80fd\u5fcd\uff0c\u95ee\u9898\u662f\u7ecf\u5e38\u4e0b\u8f7d\u5931\u8d25\uff0c\u6d6a\u8d39\u6211\u7684\u65f6\u95f4\ud83d\ude2d\uff0c\u63a5\u7740\u6211\u60f3\u5230\u6211\u6709\u4e00\u53f0\u817e\u8baf\u4e91\u7684\u670d\u52a1\u5668\uff0c\u6211\u5c31\u60f3\u5728\u670d\u52a1\u5668\u4e0a\u4e0b\u8f7d jupyter\uff0c\u7136\u540e\u8fdc\u7a0b\u8bbf\u95ee\u3002","date":"2021-11-12T00:00:00.000Z","formattedDate":"2021\u5e7411\u670812\u65e5","tags":[{"label":"Linux","permalink":"/blog/tags/linux"},{"label":"jupyter","permalink":"/blog/tags/jupyter"}],"readingTime":4.075,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"tags":["Linux","jupyter"],"authors":"xiongtao"},"prevItem":{"title":"\u4f7f\u7528Notion\u4f5c\u4e3a\u89c6\u9891\u6258\u7ba1","permalink":"/blog/2021/11/22/\u4f7f\u7528Notion\u4f5c\u4e3a\u89c6\u9891\u6258\u7ba1"},"nextItem":{"title":"\u6e10\u53d8\u8272\u7684\u5999\u7528","permalink":"/blog/gradient-background-tricks"}},"content":"\u6700\u8fd1\u53c8\u5f00\u59cb\u6298\u817e\u4e86 `jupyter` \u4e86\uff0c\u56e0\u4e3a\u5b9e\u9a8c\u5ba4\u7684\u7f51\u7edc\u73af\u5883\u592a\u5dee\uff0c\u6bcf\u6b21\u6211\u4f7f\u7528 `conda` \u5f00\u542f\u4e00\u4e2a\u65b0\u7684\u73af\u5883\uff0c\u7136\u540e\u4e0b\u8f7d\u4e00\u4e9b\u65b0\u7684\u5305\u65f6\u4f1a\u975e\u5e38\u7684\u6162\uff0c\u6162\u6211\u8fd8\u80fd\u5fcd\uff0c\u95ee\u9898\u662f\u7ecf\u5e38\u4e0b\u8f7d\u5931\u8d25\uff0c\u6d6a\u8d39\u6211\u7684\u65f6\u95f4\ud83d\ude2d\uff0c\u63a5\u7740\u6211\u60f3\u5230\u6211\u6709\u4e00\u53f0\u817e\u8baf\u4e91\u7684\u670d\u52a1\u5668\uff0c\u6211\u5c31\u60f3\u5728\u670d\u52a1\u5668\u4e0a\u4e0b\u8f7d `jupyter`\uff0c\u7136\u540e\u8fdc\u7a0b\u8bbf\u95ee\u3002\\n\\n## \u4e0b\u8f7d Miniconda\\n\\n\u9996\u5148\u9700\u8981\u4e0b\u8f7d `Miniconda`\uff0c\u6211\u6ca1\u6709\u4e0b\u8f7d `Anaconda`\uff0c\u56e0\u4e3a\u6211\u4e0d\u9700\u8981\u90a3\u4e48\u591a\u7684\u5305\uff0c\u6309\u9700\u4e0b\u8f7d\u5373\u53ef\\n\\n```bash\\nwget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh\\n```\\n\\n:::tip tip\\n\\n\u5982\u679c\u6ca1\u6709 `wget` \u547d\u4ee4\uff0c\u53ef\u4ee5\u901a\u8fc7 `yum -y install wget` \u8fdb\u884c\u4e0b\u8f7d\u3002\\n\\n:::\\n\\n\u8fd9\u91cc\u4e0b\u8f7d\u4e86\u4e00\u4e2a `shell` \u811a\u672c\uff0c\u8fd0\u884c\u8be5\u811a\u672c\u5373\u53ef\u81ea\u52a8\u5b8c\u6210 `Miniconda` \u7684\u4e0b\u8f7d\\n\\n```bash\\nchmod +x Miniconda3-latest-Linux-x86_64.sh # \u6dfb\u52a0\u53ef\u6267\u884c\u6743\u9650\\n./Miniconda3-latest-Linux-x86_64.sh        # \u6267\u884c\u811a\u672c\\n```\\n\\n\u5728\u4e0b\u8f7d\u7684\u671f\u95f4\u4f1a\u95ee\u4e00\u4e9b\u95ee\u9898\uff0c\u56de\u7b54 `yes` \u5373\u53ef\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n\u5b89\u88c5\u5b8c\u6bd5\u4e4b\u540e\uff0c**\u91cd\u65b0**\u8fdb\u5165\u547d\u4ee4\u884c\uff0c\u8f93\u5165\\n\\n```bash\\nconda -V\\n```\\n\\n\u5982\u679c\u6b63\u786e\u8f93\u51fa\u4e86\u7248\u672c\u53f7\u5c31\u8bf4\u660e\u4e0b\u8f7d\u6210\u529f\u4e86\u3002\\n\\n## \u4e0b\u8f7d jupyter\\n\\n\u4e0b\u9762\u6211\u4eec\u65b0\u5efa\u4e00\u4e2a\u73af\u5883\uff0c\u73af\u5883\u540d\u5c31\u53eb\u505a `jupyter` \u597d\u4e86\\n\\n```bash\\nconda create -n jupyter\\n```\\n\\n\u7136\u540e\u6fc0\u6d3b\u73af\u5883\\n\\n```bash\\nconda activate jupyter\\n```\\n\\n\u63a5\u7740\u4e0b\u8f7d `jupyter`\\n\\n```bash\\nconda install jupyter\\n```\\n\\n## \u914d\u7f6e\u5bc6\u7801\\n\\n\u6211\u4eec\u8981\u8fdc\u7a0b\u8bbf\u95ee `jupyter`\uff0c\u5c31\u9700\u8981\u914d\u7f6e\u5bc6\u7801\u6765\u8fdb\u884c\u767b\u5f55\uff0c\u5728\u547d\u4ee4\u884c\u8f93\u5165 `ipython` (\u4e0b\u8f7d `jupyter` \u7684\u65f6\u5019\u5c31\u5df2\u7ecf\u4e0b\u8f7d\u597d\u4e86 `ipython`) \u4fbf\u53ef\u4ee5\u8fdb\u5165\u4e00\u4e2a `python` \u4ea4\u4e92\u5f0f `shell`\\n\\n```bash\\nipython\\n```\\n\\n\u4f9d\u6b21\u8f93\u5165\u4e0b\u9762\u7684\u547d\u4ee4\\n\\n```python\\nfrom notebook.auth import passwd\\npasswd()\\n```\\n\\n\u63a5\u7740\u4fbf\u4f1a\u63d0\u793a\u4f60\u8f93\u5165\u5bc6\u7801\uff0c\u8f93\u5165\u5bc6\u7801\u540e\u4f1a\u7ed9\u4f60\u4e00\u4e2a\u5bc6\u6587\u5b57\u7b26\u4e32\uff0c\u5982\\n\\n```python\\n\'sha1:43b95b731276:5d330ee6f6054613b3ab4cc59c5048ff7c70f549\'\\n```\\n\\n\u8fd9\u4e2a\u5bc6\u6587\u5b57\u7b26\u4e32\u5728 `jupyter` \u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u4f1a\u7528\u5230\uff0c\u5148\u4fdd\u5b58/\u590d\u5236\u4e0b\u6765\u3002\\n\\n##  jupyter \u914d\u7f6e\u6587\u4ef6\\n\\n\u63a5\u7740\u6211\u4eec\u4fbf\u8981\u914d\u7f6e `jupyter` \u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u5728\u547d\u4ee4\u884c\u8fd0\u884c\\n\\n```bash\\njupyter notebook --generate-config\\n```\\n\\n\u4f1a\u751f\u6210 `~/.jupyter/jupyter_notebook_config.py` \u8fd9\u4e2a\u6587\u4ef6\uff0c\u6211\u4eec\u6253\u5f00\u7f16\u8f91\\n\\n```bash\\nvi ~/.jupyter/jupyter_notebook_config.py\\n```\\n\\n\u5728\u5176\u4e2d\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e\\n\\n```python\\nc.NotebookApp.ip=\'*\' #\u8bbe\u7f6e\u8fdc\u7a0b\u8bbf\u95ee jupyter \u7684ip\uff0c*\u8868\u793a\u6240\u6709 ip \u90fd\u53ef\u4ee5\u8bbf\u95ee\\nc.NotebookApp.allow_remote_access = True # \u5141\u8bb8\u8fdc\u7a0b\u8bbf\u95ee\\nc.NotebookApp.password = \'sha1:5df252f58b7f:bf65d53125bb36c085162b3780377f66d73972d1\' #\u586b\u5199\u521a\u521a\u751f\u6210\u7684\u5bc6\u6587  \\nc.NotebookApp.open_browser = False # \u7981\u6b62notebook\u542f\u52a8\u65f6\u81ea\u52a8\u6253\u5f00\u6d4f\u89c8\u5668(\u5728 linux \u670d\u52a1\u5668\u4e00\u822c\u90fd\u662f ssh \u547d\u4ee4\u884c\u8bbf\u95ee\uff0c\u6ca1\u6709\u56fe\u5f62\u754c\u9762\u7684\u3002\u6240\u4ee5\uff0c\u542f\u52a8\u4e5f\u6ca1\u5565\u7528)  \\nc.NotebookApp.port =8888 #\u6307\u5b9a\u8bbf\u95ee\u7684\u7aef\u53e3\uff0c\u9ed8\u8ba4\u662f8888\\n```\\n\\n## \u542f\u52a8 jupyter\\n\\n\u4e0b\u9762\u6211\u4eec\u5c31\u53ef\u4ee5\u5728\u547d\u4ee4\u884c\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\u542f\u52a8 `jupyter`\\n\\n```bash\\njupyter notebook --allow-root\\n```\\n\\n\u8fd9\u4e2a\u547d\u4ee4\u542f\u52a8\u540e\u4f1a\u5728\u524d\u53f0\u8fd0\u884c\uff0c\u5982\u679c\u6211\u4eec\u5e0c\u671b `jupyter` \u5728\u540e\u53f0\u8fd0\u884c\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd0\u884c\u4e0b\u9762\u7684\u547d\u4ee4\\n\\n```bash\\nnohup jupyter notebook --allow-root > jupyter.log 2>&1 &\\n```\\n\\n\u56e0\u4e3a\u6211\u4eec\u4fbf\u53ef\u4ee5\u5728\u672c\u673a\u901a\u8fc7\u670d\u52a1\u5668\u7684\u516c\u7f51 `ip:8888` \u7684\u65b9\u5f0f\u6765\u8bbf\u95ee\u8be5 `jupyter notebook`\u3002\\n\\n:::tip tip\\nPS\uff1a\u5982\u679c\u4f60\u60f3\u5728\u670d\u52a1\u5668\u505c\u6b62  `juputer`\uff0c\u9996\u5148\u8fd0\u884c\\n\\n```bash\\nps\\n```\\n\\n \u8be5\u547d\u4ee4\u53ef\u4ee5\u663e\u793a\u6b63\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b\uff0c\u6211\u4eec\u627e\u5230 `jupyter` \u8fdb\u7a0b\u7684 `pid`\uff0c\u7136\u540e\u901a\u8fc7\\n\\n```bash\\nkill -9 pid\\n```\\n\\n\u6765\u6740\u6b7b `jupyter` \u670d\u52a1\uff0c\u5373\u53ef\u505c\u6b62 `jupyter`\u3002\\n:::\\n\\n## \u53c2\u8003\u94fe\u63a5\\n\\n- [linux \u4e2d\u5b89\u88c5miniconda](https://www.jianshu.com/p/47ed480daccc)\\n- [Linux\u4e0a\u914d\u7f6eJupyter Notebook\u8fdc\u7a0b\u8bbf\u95ee](https://fuhailin.github.io/remote-jupyter-notebook/)\\n- [\u4e91\u670d\u52a1\u5668\u4e2d\u8ba9jupyter\u540e\u53f0\u8fd0\u884c\u7684\u65b9\u6cd5(\u4e09)](https://blog.csdn.net/weixin_42561002/article/details/85382922)"},{"id":"gradient-background-tricks","metadata":{"permalink":"/blog/gradient-background-tricks","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2021-08-15-\u6e10\u53d8\u8272\u7684\u5999\u7528.mdx","source":"@site/blog/2021-08-15-\u6e10\u53d8\u8272\u7684\u5999\u7528.mdx","title":"\u6e10\u53d8\u8272\u7684\u5999\u7528","description":"\u5728 CSS \u4e2d\u6e10\u53d8\u8272\u4f5c\u4e3a\u80cc\u666f\u53ef\u4ee5\u5236\u4f5c\u51fa\u975e\u5e38\u7eda\u4e3d\uff0c\u8ff7\u4eba\u7684\u6548\u679c\uff0c\u5f80\u5f80\u6211\u4eec\u5c06\u7126\u70b9\u805a\u96c6\u5728\u6e10\u53d8\u4e0a\u9762\uff0c\u800c\u5ffd\u7565\u4e86\u5b83\u4f5c\u4e3a\u80cc\u666f\u56fe\u7247\u7684\u4f5c\u7528\uff0c\u5728\u8fd9\u91cc\u6211\u5c06\u4ecb\u7ecd\u4e24\u4e2a\u6e10\u53d8\u8272\u4f5c\u4e3a\u80cc\u666f\u8272\u4ee5\u53ca\u80cc\u666f\u56fe\u7247\u7684\u5999\u7528\uff0c\u53ef\u4ee5\u5b9e\u73b0\u4e00\u4e9b\u96be\u4ee5\u5b9e\u73b0\u7684\u6548\u679c\u3002","date":"2021-08-15T00:00:00.000Z","formattedDate":"2021\u5e748\u670815\u65e5","tags":[{"label":"CSS","permalink":"/blog/tags/css"},{"label":"\u6e10\u53d8\u8272","permalink":"/blog/tags/\u6e10\u53d8\u8272"},{"label":"\u4f7f\u7528\u6280\u5de7","permalink":"/blog/tags/\u4f7f\u7528\u6280\u5de7"}],"readingTime":7.355,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"slug":"gradient-background-tricks","tags":["CSS","\u6e10\u53d8\u8272","\u4f7f\u7528\u6280\u5de7"],"authors":"xiongtao"},"prevItem":{"title":"\u8fdc\u7a0b\u8bbf\u95ee jupyter","permalink":"/blog/2021/11/12/\u8fdc\u7a0b\u8bbf\u95ee jupyter"},"nextItem":{"title":"\u67ef\u91cc\u5316","permalink":"/blog/\u67ef\u91cc\u5316"}},"content":"\u5728 CSS \u4e2d\u6e10\u53d8\u8272\u4f5c\u4e3a\u80cc\u666f\u53ef\u4ee5\u5236\u4f5c\u51fa\u975e\u5e38\u7eda\u4e3d\uff0c\u8ff7\u4eba\u7684\u6548\u679c\uff0c\u5f80\u5f80\u6211\u4eec\u5c06\u7126\u70b9\u805a\u96c6\u5728\u6e10\u53d8\u4e0a\u9762\uff0c\u800c\u5ffd\u7565\u4e86\u5b83\u4f5c\u4e3a\u80cc\u666f\u56fe\u7247\u7684\u4f5c\u7528\uff0c\u5728\u8fd9\u91cc\u6211\u5c06\u4ecb\u7ecd\u4e24\u4e2a\u6e10\u53d8\u8272\u4f5c\u4e3a\u80cc\u666f\u8272\u4ee5\u53ca\u80cc\u666f\u56fe\u7247\u7684\u5999\u7528\uff0c\u53ef\u4ee5\u5b9e\u73b0\u4e00\u4e9b\u96be\u4ee5\u5b9e\u73b0\u7684\u6548\u679c\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u900f\u660e\u80cc\u666f\u8499\u5c42\\n\\n\u6211\u5728\u4e00\u4e2a\u5b9e\u9645\u7684\u5e94\u7528\u5f00\u53d1\u4e2d\uff0cUI \u7ed9\u7684\u80cc\u666f\u56fe\u662f\u4e00\u5f20\u56fe\u7247\u52a0\u4e0a\u4e00\u4e2a\u900f\u660e\u989c\u8272\u7684\u8499\u5c42\u80cc\u666f\u5408\u6210\u800c\u5f97\u7684\u3002\u5f53\u65f6 UI \u53ea\u7ed9\u4e86\u6ca1\u6709\u6dfb\u52a0\u8499\u5c42\u7684\u56fe\u7247\uff0c\u5e76\u544a\u8bc9\u6211\u5b9e\u9645\u7684\u56fe\u7247\u662f\u5982\u4e0a\u505a\u51fa\u6765\u7684\u3002\u6211\u5f53\u65f6\u8868\u793a OK\uff0c\u89c9\u5f97\u81ea\u5df1\u53ef\u4ee5\u641e\u51fa\u6765\u3002\\n\\n<div style={{display: \'grid\', gridTemplateColumns: \'1fr 1fr\', gap: \'10px\'}}>\\n  <img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/bg.2d47rqpdwx3w.png\\" />\\n  <img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/mengceng.3s6mxwl8z820.png\\" /> \\n</div>\\n\\n### \u80cc\u666f\u8272\uff1f\\n\\n\u7b2c\u4e00\u6b21\u5c1d\u8bd5\uff0c\u4f7f\u7528\u4e00\u4e2a\u900f\u660e\u7684\u80cc\u666f\u8272\\n\\n```scss\\nbackground: url(\'./bg.png\') rgba(237, 240, 242, 0.8);\\n```\\n\\n\u5f88\u663e\u7136\u662f\u6ca1\u7528\u7684\uff0c\u56e0\u4e3a\u80cc\u666f\u8272\u662f\u4e00\u76f4\u5728\u80cc\u666f\u56fe\u7247\u4e0b\u9762\u7684\u3002\u4f46\u662f\u6211\u77e5\u9053\u901a\u8fc7 `background` \u662f\u53ef\u4ee5\u8bbe\u7f6e\u591a\u5c42\u80cc\u666f\\n\\n```scss\\nbackground: url(\'./1.png\'), url(\'./2.png\');\\n```\\n\\n\u4e0a\u9762\u6211\u4eec\u8bbe\u7f6e\u4e86\u4e24\u4e2a\u80cc\u666f\uff0c\u5176\u4e2d `1.png` \u5728 `2.png` \u7684\u4e0a\u9762\u3002\u6240\u4ee5\u6211\u5c06\u80cc\u666f\u8272\u8bbe\u7f6e\u5728\u53e6\u4e00\u5c42\u80cc\u666f\u4e0a\u53ef\u4e0d\u53ef\u4ee5\u5462\\n\\n```scss\\nbackground: rgba(237, 240, 242, 0.8), url(\'bg.png\');\\n```\\n\\n\u4f46\u662f\u53d1\u73b0\u4e0d\u4ec5\u6ca1\u6709\u8499\u5c42\u6548\u679c\uff0c\u800c\u4e14\u8fde\u80cc\u666f\u56fe\u7247\u90fd\u6d88\u5931\u4e86\uff0c\u540e\u6765\u6211\u67e5\u89c4\u8303\u624d\u77e5\u9053\uff0c\u5bf9\u4e8e\u80cc\u666f\u8272\u53ea\u80fd\u8bbe\u7f6e\u4e00\u6b21\uff0c\u5e76\u4e14\u53ea\u80fd\u8bbe\u7f6e\u5728\u6700\u540e\u4e00\u5c42\u80cc\u666f\u4e2d\uff0c\u6240\u4ee5\u8fd9\u4e2a\u65b9\u6cd5\u5931\u8d25\u3002\\n\\n### \u591a\u5c42 DOM\\n\\n\u7b2c\u4e8c\u4e2a\u65b9\u6cd5\uff0c\u4f7f\u7528\u591a\u5c42 DOM \u7ed3\u6784\uff0c\u4f7f\u5f97\u5b83\u4eec\u5728\u4e0d\u540c\u7684\u5c42\uff0c\u80cc\u666f\u56fe\u7247\u5728\u5e95\u90e8\uff0c\u63a5\u7740\u662f\u900f\u660e\u80cc\u666f\u8272\uff0c\u63a5\u7740\u662f\u5185\u5bb9\\n\\n```html\\n<div class=\\"bg\\">\\n  <div class=\\"color\\">\\n    <div class=\\"content\\">...</div>\\n  <div>\\n</div>\\n```\\n\\n```css\\n.bg {\\n  background: url(\'bg.png\') no-repeat center / contain;\\n}\\n.color {\\n  background: rgba(237, 240, 242, 0.8);\\n}\\n```\\n\\n\u53ef\u4ee5\u5b9e\u73b0\u6548\u679c\uff0c\u4f46\u662f\u591a\u4e86\u51e0\u5c42\u65e0\u610f\u4e49\u7684 `div` \u5143\u7d20\u3002\\n\\n### \u6e10\u53d8\u8272\\n\\n\u6709\u6ca1\u6709\u66f4\u52a0\u7b80\u5355\u7684\u65b9\u6cd5\uff0c\u540e\u9762\u6211\u5728\u673a\u7f18\u5de7\u5408\u4e0b\u53d1\u73b0\u4e86\uff0c\u6e10\u53d8\u8272\u5728\u80cc\u666f\u91cc\u9762\u662f\u5145\u5f53\u80cc\u666f\u56fe\u7247\u6765\u7528\u7684\\n\\n```css\\nbackground-image: linear-gardient(...);\\n```\\n\\n\u65e2\u7136\u80cc\u666f\u8272\u53ea\u80fd\u51fa\u73b0\u5728\u6700\u540e\u4e00\u5c42\uff0c\u4f46\u662f\u6e10\u53d8\u8272\u662f\u80cc\u666f\u56fe\u7247\uff0c\u5b83\u53ef\u4ee5\u51fa\u73b0\u5728\u5176\u5b83\u80cc\u666f\u56fe\u7247\u7684\u4e0a\u9762\uff0c\u53ea\u8981\u5c06\u6e10\u53d8\u8272\u7684\u4e24\u4e2a\u989c\u8272\u8bbe\u7f6e\u4e3a\u4e00\u6837\uff0c\u5c31\u662f\u4e00\u4e2a\u989c\u8272\u4e86\\n\\n```css\\nbackground: \\n  linear-gradient(rgba(237, 240, 242, 0.8), rgba(237, 240, 242, 0.8)),\\n  url(\'./bg,png\') no-repeat center / contain;\\n```\\n\\n**\u5f53\u7136\u6700\u7b80\u5355\u7684\u529e\u6cd5\u5c31\u662f\u8ba9 UI \u53d1\u4e00\u5f20\u5408\u6210\u540e\u7684\u56fe\u7247\u8fc7\u6765 ... ...**\\n\\n## \u80cc\u666f\u8272\u5757\\n\\n\u5728\u4e00\u4e2a\u9879\u76ee\u4e2d\uff0c\u8981\u5b9e\u73b0\u5982\u4e0b\u6548\u679c\\n\\n<img src=\\"https://cdn.staticaly.com/gh/LastKnightCoder/image-for-2022@master/4.54ry6ajplf00.png\\" />\\n\\n\u5728\u7279\u5b9a\u7684\u6587\u5b57\u4e0b\u9762\u6709\u4e00\u6761\u7ebf\uff0c\u7ebf\u662f\u5e26\u5706\u89d2\u7684\u5e76\u4e14\u5728\u5b57\u7684\u4e0b\u9762\uff0c\u8fd9\u4e2a\u5982\u4f55\u5b9e\u73b0\uff1f\\n\\n\u7b2c\u4e00\u79cd\u65b9\u6848\uff0c\u80cc\u666f\u56fe\u7247\uff0c\u5c06\u4e0b\u9762\u7684\u7ebf\u5207\u51fa\u6765\uff0c\u7136\u540e\u4f5c\u4e3a\u80cc\u666f\u653e\u5728\u5b57\u7684\u4e0b\u9762\uff0c\u4f46\u662f\u5982\u679c\u5b57\u6570\u4e00\u65e6\u53d1\u751f\u6539\u53d8\uff0c\u4f60\u5c31\u5f97\u91cd\u65b0\u5207\u56fe\uff0c\u8fd9\u4e2a\u65b9\u6848\u662f\u4e0d\u5f97\u5df2\u800c\u4e3a\u4e4b\u3002\\n\\n\u7b2c\u4e8c\u79cd\u65b9\u6848\u4f7f\u7528\u5b9a\u4f4d\uff0c\u8003\u8651\u4f7f\u7528\u4f2a\u5143\u7d20\u6765\u753b\u8fd9\u6761\u7ebf\uff0c\u7136\u540e\u5b9a\u4f4d\u5728\u4e0b\u65b9\\n\\n```html\\n<em>\u5730\u4e0a\u971c</em>\\n```\\n\\n```scss\\nem {\\n  position: relative;\\n  &::after {\\n    position: absolute;\\n    left: 0;\\n    bottom: 0;\\n    display: block;\\n    content: \'\';\\n    width: 100%;\\n    height: 10px;\\n    background: #45b787;\\n    border-radius: 5px;\\n  }\\n}\\n```\\n\\n\u4f46\u662f\u53d1\u73b0\u4e0b\u9762\u8fd9\u6761\u7ebf\u4f1a**\u538b\u4f4f\u6587\u5b57**\uff0c\u5e76\u4e14\u5bf9\u4e8e**\u6362\u884c\u7684\u6587\u5b57**\u65e0\u6548\u3002\\n\\n<img src=\\"https://cdn.staticaly.com/gh/LastKnightCoder/image-for-2022@master/1.4v599rukurs0.png\\" />\\n\\n\u7ebf\u4f1a\u538b\u4f4f\u6587\u5b57\uff0c\u56e0\u4e3a\u5b50\u5143\u7d20\u662f\u4e00\u5b9a\u5728\u7236\u5143\u7d20\u7684\u4e0a\u5c42\uff0c\u6240\u4ee5\u6211\u4eec\u6539\u53d8\u4e00\u4e0b\u6587\u6863\u7ed3\u6784\uff0c\u4f7f\u5f97\u6587\u5b57\u548c\u5e95\u90e8\u7684\u7ebf\u662f\u5144\u5f1f\u5173\u7cfb\uff0c\u901a\u8fc7\u6539\u53d8\u5b83\u4eec\u7684 `z-index` \u4f7f\u5f97\u7ebf\u5728\u6587\u5b57\u7684\u4e0b\u65b9\\n\\n```html\\n<em>\\n  <span class=\\"words\\">\u5730\u4e0a\u971c</span>\\n  <span class=\\"line\\"></span>\\n</em>\\n```\\n\\n```scss\\nem {\\n  position: relative;\\n    .words {\\n      position: relative;\\n      z-index: 2;\\n    }\\n    .line {\\n      position: absolute;\\n      z-index: 1;\\n      left: 0;\\n      bottom: 0;\\n      display: block;\\n      content: \'\';\\n      width: 100%;\\n      height: 10px;\\n      background: #45b787;\\n      border-radius: 5px;\\n    }\\n}\\n```\\n\\n<img src=\\"https://cdn.staticaly.com/gh/LastKnightCoder/image-for-2022@master/2.ir6ms555uqo.png\\" />\\n\\n\u6b64\u79cd\u65b9\u6cd5\u89e3\u51b3\u4e86\u7ebf\u4f1a\u538b\u4f4f\u6587\u5b57\u7684\u95ee\u9898\uff0c\u4f46\u662f\u5982\u679c\u6587\u5b57\u6362\u884c\u7684\u8bdd\uff0c\u8fd8\u662f\u4f1a\u4e22\u5931\u6837\u5f0f\uff0c\u6240\u4ee5\u8fd9\u4e2a\u65b9\u6848\u4e0d\u53ef\u7528\u3002\\n\\n\u4e0b\u9762\u5c31\u662f\u7ec8\u6781\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u4f7f\u7528\u6e10\u53d8\u8272\u6765\u7ed8\u5236\u56fe\u7247\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u4e0b\u9762\u7684\u7ebf\u5206\u4e3a\u4e09\u4e2a\u90e8\u5206\uff0c\u4e2d\u95f4\u7684\u4e00\u6761\u7ebf\u4ee5\u53ca\u5de6\u53f3\u4e24\u8fb9\u7684\u4e24\u4e2a\u5706\u3002\u9996\u5148 DOM \u7ed3\u6784\u5982\u4e0b\\n\\n```html\\n<em>\u5730\u4e0a\u971c</em>\\n```\\n\\n\u6211\u4eec\u4f7f\u7528\u7ebf\u6027\u6e10\u53d8\u8272\u6765\u7ed8\u5236\u8fd9\u4e2a\u7ebf\\n\\n```scss\\nem {\\n  background: \\n    linear-gradient(#45b787, #45b787) no-repeat center bottom / calc(100% - 10px) 10px;\\n}\\n```\\n\\n\u7ebf\u7684\u5bbd\u5ea6\u4e3a `calc(100% - 10px)` \uff0c\u5de6\u53f3\u5404\u7559 `5px` \u6765\u653e\u5706\u3002\u56e0\u4e3a\u662f\u80cc\u666f\uff0c\u6240\u4ee5\u4f1a\u5728\u6587\u5b57\u7684\u4e0b\u65b9\uff0c\u5e76\u4e14\u5373\u4f7f\u662f\u6362\u884c\u4e5f\u6ca1\u6709\u95ee\u9898\\n\\n<img src=\\"https://cdn.staticaly.com/gh/LastKnightCoder/image-for-2022@master/3.3glu87q32om0.png\\" />\\n\\n\u4e0b\u9762\u4f7f\u7528\u5f84\u5411\u6e10\u53d8\u6765\u7ed8\u5236\u5706\uff0c\u9996\u5148\u6765\u770b\u5f84\u5411\u6e10\u53d8\u7684\u8bed\u6cd5\\n\\n```scss\\nradial-gradient(shape size at x-position y-position, color1 stop1, color2 stop2, ...);\\n```\\n\\n`shape` \u8868\u793a\u5f84\u5411\u6e10\u53d8\u7684\u5f62\u72b6\uff0c\u5e38\u89c1\u7684\u5305\u62ec `circle\u3001ellipse` \uff1b `size` \u8868\u793a\u5f62\u72b6\u7684\u5927\u5c0f\uff0c\u5bf9\u4e8e\u5706\u6765\u8bf4\u5c31\u662f\u76f4\u5f84\uff1b`(x-position, y-position)` \u8868\u793a\u5706\u5fc3\u7684\u5750\u6807\uff1b\u540e\u9762\u7684 `(color, stop)` \u5c31\u7528\u6765\u8868\u793a\u6e10\u53d8\u8272\u4e86\u3002\u4f7f\u7528\u5f84\u5411\u6e10\u53d8\u7ed8\u5236\u5706\u53ef\u4ee5\u5957\u7528\u5982\u4e0b\u6a21\u677f\\n\\n```scss\\nradial-gradient(circle size at x-position y-position, color1 50%, transparent 50%);\\n```\\n\\n\u63a5\u4e0b\u6765\u6211\u4eec\u53ea\u9700\u8981\u8bbe\u7f6e\u5706\u7684\u5927\u5c0f\uff0c\u4ee5\u53ca\u539f\u56e0\u4f4d\u7f6e\uff0c\u586b\u5145\u989c\u8272\u5373\u53ef\uff0c\u4f8b\u5982\u5bf9\u4e8e\u76f4\u7ebf\u5de6\u8fb9\u7684\u5706\uff0c\u5b83\u7684\u5927\u5c0f\u662f `10px` \uff0c\u5706\u5fc3\u4f4d\u4e8e\u76f4\u7ebf\u5de6\u8fb9\u7684\u4e2d\u5fc3\uff0c\u4e5f\u5c31\u662f\u79bb\u5de6\u8fb9 `5px` \uff0c\u79bb\u5e95\u90e8 `5px` \uff0c\u586b\u5145\u989c\u8272\u540c\u76f4\u7ebf\u4e3a `#45b787` \uff0c\u6240\u4ee5\u5de6\u8fb9\u7684\u5706\u53ef\u4ee5\u5982\u4e0b\u7ed8\u5236\\n\\n```scss\\nradial-gradient(circle 10px at 5px calc(100% - 5px), #45b787 50%, transparent 50%);\\n```\\n\\n\u4e0a\u9762 `y-position` \u8bbe\u7f6e\u4e3a `calc(100% - 5px)` \u8868\u793a\u8ddd\u79bb\u5e95\u90e8 `5px` \u3002\u540c\u7406\u53f3\u8fb9\u5706\u7684\u7ed8\u5236\u5982\u4e0b\\n\\n```scss\\nradial-gradient(circle 10px at calc(100% - 5px) calc(100% - 5px), #45b787 50%, transparent 50%);\\n```\\n\\n\u53f3\u8fb9\u5706\u7684 `x-position` \u8bbe\u7f6e\u4e3a\u4e86 `calc(100% - 5px)` \u8868\u793a\u8ddd\u79bb\u53f3\u4fa7 `5px` \u3002\\n\\n\u7efc\u5408\u4ee5\u4e0a\uff0c\u5168\u90e8\u7684\u6837\u5f0f\u5982\u4e0b\\n\\n```scss\\nem {\\n  background: \\n    linear-gradient(#45b787, #45b787) no-repeat center bottom / calc(100% - 10px) 10px,\\n    radial-gradient(circle 10px at 5px calc(100% - 5px), #45b787 50%, transparent 50%),\\n    radial-gradient(circle 10px at calc(100% - 5px) calc(100% - 5px), #45b787 50%, transparent 50%);\\n}\\n```\\n\\n\u6548\u679c\u5982\u4e0b\uff1a\\n\\n<img src=\\"https://cdn.staticaly.com/gh/LastKnightCoder/image-for-2022@master/4.54ry6ajplf00.png\\" />"},{"id":"\u67ef\u91cc\u5316","metadata":{"permalink":"/blog/\u67ef\u91cc\u5316","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2021-06-08-\u67ef\u91cc\u5316.mdx","source":"@site/blog/2021-06-08-\u67ef\u91cc\u5316.mdx","title":"\u67ef\u91cc\u5316","description":"\u67ef\u91cc\u5316\u4ecb\u7ecd","date":"2021-06-08T00:00:00.000Z","formattedDate":"2021\u5e746\u67088\u65e5","tags":[{"label":"\u67ef\u91cc\u5316","permalink":"/blog/tags/\u67ef\u91cc\u5316"},{"label":"\u51fd\u6570\u5f0f\u7f16\u7a0b","permalink":"/blog/tags/\u51fd\u6570\u5f0f\u7f16\u7a0b"}],"readingTime":3.5,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"slug":"\u67ef\u91cc\u5316","authors":"xiongtao","date":"2021-06-08T00:00:00.000Z","tags":["\u67ef\u91cc\u5316","\u51fd\u6570\u5f0f\u7f16\u7a0b"]},"prevItem":{"title":"\u6e10\u53d8\u8272\u7684\u5999\u7528","permalink":"/blog/gradient-background-tricks"},"nextItem":{"title":"\u4f7f\u7528 Github Actions \u90e8\u7f72 VuePress \u535a\u5ba2","permalink":"/blog/2021/05/31/\u4f7f\u7528 Github Actions \u90e8\u7f72 VuePress \u535a\u5ba2"}},"content":"## \u67ef\u91cc\u5316\u4ecb\u7ecd\\n\\n\u51fd\u6570\u67ef\u91cc\u5316\u6307\u7684\u662f\u51fd\u6570\u5904\u7406\u4e00\u90e8\u5206\u7684\u53c2\u6570\uff0c\u7136\u540e\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\u6765\u5904\u7406\u5269\u4f59\u7684\u53c2\u6570\uff0c\u5982\u6bd4\u5982\u6709\u4e00\u4e2a\u52a0\u6cd5\u51fd\u6570\u5982\u4e0b\\n\\n```javascript\\nfunction add(x, y) {\\n    return x + y;\\n}\\nadd(1, 2); // 3\\n```\\n\\n\u73b0\u5728\u5982\u679c\u8fd9\u4e2a\u51fd\u6570\u88ab\u67ef\u91cc\u5316\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u5982\u4e0b\u4f7f\u7528\\n\\n```javascript\\nconst increment = add(1); // \u63a5\u6536\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\u5904\u7406\u7b2c\u4e8c\u4e2a\u53c2\u6570\\nincrement(2); // 3\\nincrement(4); // 5\\n```\\n\\n\x3c!--truncate--\x3e\\n\\n## \u67ef\u91cc\u5316\u5b9e\u73b0\\n\\n\u73b0\u5728\u600e\u4e48\u5b9e\u73b0\u8fd9\u79cd\u6548\u679c\uff0c\u5982\u679c\u53ea\u662f\u9488\u5bf9\u4e0a\u9762\u7684\u52a0\u6cd5\u51fd\u6570\uff0c\u90a3\u4e48\u53ef\u4ee5\u5982\u4e0b\u5b9e\u73b0\\n\\n```javascript\\nfunction add(x, y) {\\n    return function(y) {\\n        return x + y;\\n    }\\n}\\n```\\n\\n\u4f46\u662f\u8fd9\u79cd\u65b9\u6cd5\u660e\u663e\u53ea\u5bf9\u52a0\u6cd5\u51fd\u6570\u6709\u6548\uff0c\u6211\u4eec\u73b0\u5728\u662f\u60f3\u8bbe\u8ba1\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u63a5\u6536\u4e00\u4e2a\u51fd\u6570\u4e3a\u53c2\u6570\uff0c\u4f5c\u7528\u5c31\u662f\u628a\u8fd9\u4e2a\u51fd\u6570\u67ef\u91cc\u5316\uff0c\u5e76\u5c06\u8fd9\u4e2a\u67ef\u91cc\u5316\u7684\u51fd\u6570\u8fd4\u56de\uff0c\u6bd4\u5982\\n\\n```javascript\\ncurryAdd = curry(add); // \u63a5\u6536add\u51fd\u6570\uff0c\u5c06\u51fd\u6570add\u67ef\u91cc\u5316\\nconst increment = curryAdd(1);\\nincrement(2); // 3\\nincrement(4); // 5\\n```\\n\\n\u9996\u5148\u5b9e\u73b0\u4e00\u4e2a\u7b80\u5355\u7248\u672c\u7684\\n\\n```javascript\\nfunction curry(fn, ...args1) {\\n    return function(...args2) {\\n        fn(...args1, ...args2)\\n    }\\n}\\n```\\n\\n\u4f46\u662f\u8fd9\u4e2a\u51fd\u6570\u660e\u663e\u6709\u4e00\u4e2a\u7f3a\u9677\uff0c\u90a3\u5c31\u662f\u53ea\u80fd\u4f20\u5165\u4e24\u6b21\u53c2\u6570\uff0c\u600e\u4e48\u89e3\u51b3\uff0c\u80af\u5b9a\u4f7f\u7528\u9012\u5f52\u4e86\\n\\n```javascript\\nfunction curry(fn, ...args1) {\\n    if (fn.length == args1.length) {\\n        return fn(...args1);\\n    } else {\\n        return function(...args2) {\\n            return curry(fn, ...args1, ...args2)\\n        }\\n    }\\n}\\n```\\n\\n\u4e0a\u9762\u7684\u51fd\u6570\u9996\u5148\u5224\u65ad\u63a5\u6536\u7684\u53c2\u6570\u7684\u4e2a\u6570\u4e0e\u51fd\u6570\u8981\u6c42\u53c2\u6570\u7684\u4e2a\u6570\u662f\u5426\u76f8\u540c\uff0c\u5982\u679c\u76f8\u540c\u5219\u76f4\u63a5\u6267\u884c\u51fd\u6570\uff0c\u5426\u5219\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\u6765\u5904\u7406\u5269\u4e0b\u7684\u53c2\u6570\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5b9e\u73b0\u51fd\u6570\u7684\u67ef\u91cc\u5316\u3002\\n\\n## \u67ef\u91cc\u5316\u5e94\u7528\u4e3e\u4f8b\\n\\n\u73b0\u5728\u6765\u770b\u4e00\u4e0b\u67ef\u91cc\u8bdd\u7528\u4ec0\u4e48\u7528\u5904\uff0c\u5047\u8bbe\u6709\u4e00\u4e2a `ajax` \u8bf7\u6c42\u7684\u51fd\u6570\u5982\u4e0b\\n\\n```javascript\\nfunction ajax(type, url, data) {\\n    let xhr = new XMLHttpRequest();\\n    xhr.onReadystateChange = function() {\\n        // ...\\n    }\\n    xhr.open(type, url);\\n    xhr.send(data);\\n}\\n```\\n\\n\u73b0\u5728\u6211\u4eec\u5c06\u8fd9\u4e2a\u51fd\u6570\u67ef\u91cc\u5316\\n\\n```javascript\\nlet curriedAjax = curry(ajax);\\nlet post = curriedAjax(\'post\');\\n```\\n\\n\u6211\u4eec\u5411 `curriedAjax` \u4f20\u5165\u4e00\u4e2a\u53c2\u6570 `post`\uff0c\u5f97\u5230\u4e00\u4e2a\u51fd\u6570\uff0c\u8fd9\u4e2a\u51fd\u6570\u7684\u4f5c\u7528\u662f\u7528\u6765\u53d1 `post` \u8bf7\u6c42\u7684\uff0c\u6211\u4eec\u6bcf\u6b21\u53d1 `post` \u8bf7\u6c42\u65f6\uff0c\u53ea\u9700\u8981\u4f7f\u7528 `post` \u65b9\u6cd5\u5373\u53ef\uff0c\u8fd9\u6837\u51fd\u6570\u7684\u590d\u7528\u6027\u6709\u4e86\u6781\u5927\u7684\u589e\u5f3a\uff0c\u6211\u4eec\u53ef\u4ee5\u7ee7\u7eed\u4f20\u5165\u53c2\u6570\\n\\n```javascript\\nlet postGoogle = post(\'https://www.google.com\');\\n```\\n\\n\u6211\u4eec\u53c8\u5f97\u5230\u4e86\u4e00\u4e2a\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u7684\u4f5c\u7528\u662f\u5411 `https://www.google.com` \u53d1\u9001 `post` \u8bf7\u6c42\uff0c\u51fd\u6570\u7684\u590d\u7528\u6027\u53c8\u8fdb\u4e00\u6b65\u7684\u63d0\u5347\u3002\\n\\n```info\\n\u4f7f\u7528\u8fc7 jQuery \u7684\u90fd\u77e5\u9053\uff0c\u53ef\u4ee5\u4f7f\u7528 `$.ajax()` \u8fd9\u6837\u7684\u901a\u7528\u65b9\u6cd5\uff0c\u4f46\u662f\u4e5f\u6709 `$.get()` \u548c `$.post()` \u8fd9\u6837\u7684\u8bed\u6cd5\u7cd6\uff0c\u4f46\u662f `jQuery` \u5e95\u90e8\u662f\u4e0d\u662f\u8fd9\u6837\u5b9e\u73b0\u7684\u5c31\u4e0d\u5f97\u800c\u77e5\u4e86\u3002\\n```\\n\\n## \u53c2\u8003\u94fe\u63a5\\n\\n- [\u5927\u4f6c\uff0cJavaScript \u67ef\u91cc\u5316\uff0c\u4e86\u89e3\u4e00\u4e0b](https://juejin.im/post/5af13664f265da0ba266efcf)\\n- [JavaScript\u4e13\u9898\u4e4b\u51fd\u6570\u67ef\u91cc\u5316](https://github.com/mqyqingfeng/Blog/issues/42)"},{"id":"/2021/05/31/\u4f7f\u7528 Github Actions \u90e8\u7f72 VuePress \u535a\u5ba2","metadata":{"permalink":"/blog/2021/05/31/\u4f7f\u7528 Github Actions \u90e8\u7f72 VuePress \u535a\u5ba2","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2021-05-31-\u4f7f\u7528 Github Actions \u90e8\u7f72 VuePress \u535a\u5ba2.mdx","source":"@site/blog/2021-05-31-\u4f7f\u7528 Github Actions \u90e8\u7f72 VuePress \u535a\u5ba2.mdx","title":"\u4f7f\u7528 Github Actions \u90e8\u7f72 VuePress \u535a\u5ba2","description":"\u968f\u7740\u6211 VuePress \u535a\u5ba2\u4e2d\u7684\u4e1c\u897f\u8d8a\u6765\u8d8a\u591a\uff0c\u6bcf\u6b21\u6211\u6253\u5305\u597d\u9879\u76ee\u7136\u540e\u4e0a\u4f20\u5230 Github \u4e0a\u9700\u8981\u597d\u4e00\u4f1a\u513f\u65f6\u95f4\uff0c\u4e4b\u524d\u5728\u4e00\u4e9b\u6587\u7ae0\u4e2d\u77e5\u9053 Github Actions \u53ef\u4ee5\u5e2e\u6211\u81ea\u52a8\u90e8\u7f72\u9879\u76ee\uff0c\u6b63\u597d\u4eca\u5929\u5c1d\u8bd5\u5c1d\u8bd5\u3002","date":"2021-05-31T00:00:00.000Z","formattedDate":"2021\u5e745\u670831\u65e5","tags":[{"label":"Github Actions","permalink":"/blog/tags/github-actions"},{"label":"VuePress","permalink":"/blog/tags/vue-press"}],"readingTime":5.07,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"authors":"xiongtao","tags":["Github Actions","VuePress"],"date":"2021-05-31T00:00:00.000Z"},"prevItem":{"title":"\u67ef\u91cc\u5316","permalink":"/blog/\u67ef\u91cc\u5316"},"nextItem":{"title":"\u63a7\u5236\u5bf9\u8c61\u7684\u8bbf\u95ee","permalink":"/blog/\u63a7\u5236\u5bf9\u8c61\u7684\u8bbf\u95ee"}},"content":"\u968f\u7740\u6211 `VuePress` \u535a\u5ba2\u4e2d\u7684\u4e1c\u897f\u8d8a\u6765\u8d8a\u591a\uff0c\u6bcf\u6b21\u6211\u6253\u5305\u597d\u9879\u76ee\u7136\u540e\u4e0a\u4f20\u5230 `Github` \u4e0a\u9700\u8981\u597d\u4e00\u4f1a\u513f\u65f6\u95f4\uff0c\u4e4b\u524d\u5728\u4e00\u4e9b\u6587\u7ae0\u4e2d\u77e5\u9053 `Github Actions` \u53ef\u4ee5\u5e2e\u6211\u81ea\u52a8\u90e8\u7f72\u9879\u76ee\uff0c\u6b63\u597d\u4eca\u5929\u5c1d\u8bd5\u5c1d\u8bd5\u3002\\n\\n\u5728\u4f7f\u7528 `Github Actions` \u4ee5\u524d\uff0c\u90e8\u7f72\u8fc7\u7a0b\u662f\u8fd9\u6837\u7684\uff1a\\n\\n- \u5199\u6587\u7ae0\\n- \u751f\u6210\u9759\u6001\u6587\u4ef6\\n- \u5c06\u9759\u6001\u6587\u4ef6\u90e8\u7f72\u5230 `Github Page` \u4e0a\\n\\n \u4f7f\u7528\u4e86 `Github Actions` \u540e\uff0c\u8fc7\u7a0b\u53d8\u4e3a\u4e86\uff1a\\n\\n- \u5199\u6587\u7ae0\\n- \u63d0\u4ea4\u6587\u7ae0\u5230 `Github` \u4e0a\\n\\n\x3c!--truncate--\x3e\\n\\n## \u914d\u7f6e\u6587\u4ef6\\n\\n\u63a5\u7740\u6211\u4eec\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528\u8fd9\u4e00\u5229\u5668\u3002\u9996\u5148\u4f60\u9700\u8981\u5728\u4f60\u7684\u9879\u76ee\u4e0b\u65b0\u5efa `.github/workflows/` \u6587\u4ef6\u5939\uff0c\u63a5\u7740\u5728 `workflows` \u6587\u4ef6\u5939\u4e0b\u65b0\u589e `xxx.yml` \u6587\u4ef6\uff0c\u8fd9\u4e2a\u6587\u4ef6\u540d\u968f\u610f\uff0c\u4f46\u662f\u5fc5\u987b\u662f `YAML` \u6587\u4ef6\uff0c\u6bd4\u5982\u6211\u65b0\u589e\u6587\u4ef6\u540d\u4e3a `deploy.yml`\uff0c\u7ed9\u51fa\u6211\u7684\u914d\u7f6e\u5185\u5bb9(\u53bb\u6389\u4e86\u4e00\u4e9b\u4e2a\u6027\u5316\u7684\u914d\u7f6e)\\n\\n```yaml\\nname: Build and Deploy\\non:\\n  push:\\n    branches:\\n      - master\\njobs:\\n  build-and-deploy:\\n    runs-on: ubuntu-latest\\n    steps:\\n      - name: Checkout \ud83d\udece\ufe0f\\n        uses: actions/checkout@v2.3.1\\n\\n      - name: Install and Build \ud83d\udd27 \\n        run: |\\n          npm install\\n          npm run build\\n\\n      - name: Deploy \ud83d\ude80\\n        uses: JamesIves/github-pages-deploy-action@4.1.3\\n        with:\\n          BRANCH: gh-pages\\n          FOLDER: docs/.vuepress/dist\\n          ACCESS_TOKEN: ${{ secrets.ACCESS_TOKEN }}\\n```\\n\\n\u5f53\u4f60\u5411 `Github` \u63d0\u4ea4\u4ee3\u7801\u65f6\uff0c\u5b83\u4f1a\u81ea\u52a8\u7684\u68c0\u6d4b `.github/workflows/` \u76ee\u5f55\uff0c\u5982\u679c\u6709\u914d\u7f6e\u7684\u8bdd\uff0c\u5c31\u4f1a\u6839\u636e\u4f60\u7684\u914d\u7f6e `workflow` \u81ea\u52a8\u90e8\u7f72\u9879\u76ee\u3002\\n\\n\u4ece\u4e0a\u9762\u7684\u914d\u7f6e\u770b\uff0c\u4e3b\u8981\u5206\u4e3a\u4e09\u4e2a\u90e8\u95e8\uff1a\\n\\n- `name`\uff1a\u8fd9\u4e2a `workflow` \u7684\u540d\u79f0\uff0c\u81ea\u5df1\u968f\u4fbf\u53d6\\n\\n- `on`\uff1a\u89e6\u53d1\u6761\u4ef6\\n\\n  ```yaml\\n  on:\\n    push:\\n      branches:\\n        - master\\n  ```\\n\\n  \u4e0a\u8ff0\u8868\u793a\u5f53\u6211\u4eec\u5411 `master` \u5206\u652f `push` \u65f6\u5c31\u4f1a\u89e6\u53d1\u8be5 `workflow`\\n\\n- `jobs`\uff1a\u89c4\u5b9a\u8981\u6267\u884c\u7684\u4efb\u52a1\uff0c\u4f8b\u5982\u4e0a\u9762\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u4efb\u52a1 `build-and-deploy`\uff0c\u6bcf\u4e2a\u4efb\u52a1\u5305\u542b\u5982\u4e0b\u914d\u7f6e\\n\\n  - `runs-on`\uff1a\u8fd0\u884c\u6240\u9700\u8981\u7684\u865a\u62df\u673a\u73af\u5883\uff0c`Github` \u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u5982\u4e0b\u73af\u5883\\n\\n    - `ubuntu-latest`\uff0c`ubuntu-18.04`\u6216`ubuntu-16.04`\\n    - `windows-latest`\uff0c`windows-2019`\u6216`windows-2016`\\n    - `macOS-latest`\u6216`macOS-10.14`\\n\\n    \u8fd9\u91cc\u6211\u4eec\u9009\u62e9\u4e86 `ubuntu-latest`\\n\\n  - `steps`\uff1a\u4efb\u52a1\u8fd0\u884c\u7684\u6b65\u9aa4\\n\\n\u63a5\u7740\u6211\u4eec\u5bf9\u6211\u4eec\u8fd0\u884c\u7684\u6b65\u9aa4\u8fdb\u884c\u8bf4\u660e\uff0c\u6211\u4eec\u7684\u6b65\u9aa4\u5305\u542b\u4e09\u6b65\uff0c\u7b2c\u4e00\u6b65\u662f\u62c9\u53d6\u4e3b\u5206\u652f\u7684\u4ee3\u7801\\n\\n```yaml\\n- name: Checkout \ud83d\udece\ufe0f\\n  uses: actions/checkout@v2.3.1\\n```\\n\\n\u7b2c\u4e8c\u6b65\uff0c\u8fd0\u884c\u4e24\u4e2a\u547d\u4ee4 `npm install` \u4e0e `npm run build`\\n\\n```yaml\\n- name: Install and Build \ud83d\udd27 \\n  run: |\\n    npm install\\n    npm run build\\n```\\n\\n\u7b2c\u4e09\u6b65\uff0c\u5c06 \u751f\u6210\u7684\u9759\u6001\u6587\u4ef6\u5939\u90e8\u7f72\u5230 `gh-pages` \u5206\u652f\u4e0a\\n\\n```yaml\\n- name: Deploy \ud83d\ude80\\n  uses: JamesIves/github-pages-deploy-action@4.1.3\\n  with:\\n    BRANCH: gh-pages\\n    FOLDER: docs/.vuepress/dist\\n    ACCESS_TOKEN: ${{ secrets.ACCESS_TOKEN }}\\n```\\n\\n## \u914d\u7f6e\u5bc6\u94a5\\n\\n\u4f7f\u7528 `Github Actions` \u662f\u9700\u8981 `ACCESS-TOKEN`\uff0c\u65e2\u7136\u90fd\u5df2\u7ecf\u4f1a\u4f7f\u7528 `Github` \u4e86\uff0c\u5c31\u80af\u5b9a\u77e5\u9053\u8fd9\u4e2a\u4e1c\u897f\u600e\u4e48\u751f\u6210\u4e86\uff0c\u5982\u679c\u4e0d\u4f1a\uff0c\u8bf7\u6c42\u53c2\u7167[\u5b98\u65b9\u6587\u6863](https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token)\u3002\\n\\n\u6211\u4eec\u9700\u8981\u5728\u4ed3\u5e93\u7684 `Setting` \u4e2d\u9009\u62e9 `Secrets`\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting2/20210531185034.png\\" alt=\\"image-20210531185033956\\"  />\\n\\n\u70b9\u51fb\u53f3\u4e0a\u65b9\u7684 `New repository secret`\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting2/20210531185129.png\\" alt=\\"image-20210531185129280\\"  />\\n\\n`Name` \u5fc5\u987b\u5199\u4e3a `ACCESS_TOKEN`\uff0c`Value` \u5c31\u662f\u4f60\u7684 `token`\uff0c\u586b\u5199\u5b8c\u6bd5\u70b9\u51fb `Add secret`\uff0c\u5982\u679c\u586b\u5199\u6ca1\u6709\u95ee\u9898\u7684\u8bdd\uff0c\u70b9\u51fb\u4e4b\u540e\u5c31\u4f1a\u63d0\u793a\u6dfb\u52a0\u6210\u529f\u3002\\n\\n\u6bcf\u6b21\u5f53\u4f60\u5c06 `Vuepress` \u9879\u76ee\u63d0\u4ea4\u5230 `Github` \u4e0a\u7684\u65f6\u5019\uff0c`Github` \u5c31\u4f1a\u81ea\u52a8\u5e2e\u4f60\u90e8\u7f72\u9879\u76ee\u3002\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting2/20210531185615.png\\" alt=\\"image-20210531185615412\\"  />\\n\\n\u5728 `Actions` \u7684\u8fd9\u4e2a\u9009\u9879\u4e2d\u53ef\u4ee5\u770b\u5230\u9879\u76ee\u7684\u90e8\u7f72\u60c5\u51b5\uff0c\u4e0a\u9762\u53ef\u4ee5\u770b\u5230\u6211\u5c1d\u8bd5\u4e86\u4e09\u6b21\uff0c\u7b2c\u4e09\u6b21\u6210\u529f\u4e86\uff0c\u524d\u4e24\u6b21\u662f\u8e29\u5751\uff0c\u4e0b\u9762\u5c31\u4ecb\u7ecd\u4e86\u6211\u8e29\u7684\u4e24\u6b21\u5751\u3002\\n\\n## \u8e29\u5751\\n\\n\u5728 `VuePress` \u5b98\u7f51\u4e0a\u9762\uff0c\u7ed9\u51fa\u7684\u6784\u5efa\u811a\u672c\u547d\u4ee4\u662f\\n\\n```bash\\nnpm run docs:build\\n```\\n\\n\u6211\u89c9\u5f97\u9ebb\u70e6\uff0c\u6539\u4e3a\u4e86 `npm run build`\uff0c\u6240\u4ee5\u7b2c\u4e00\u6b21\u8fd0\u884c\u7684\u65f6\u5019\uff0c\u5c31\u63d0\u793a\u6211\u6ca1\u6709\u8fd9\u4e2a\u811a\u672c\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting2/20210531190036.png\\" alt=\\"image-20210531190036475\\"  />\\n\\n\u6211\u6539\u8fc7\u6765\u4e86\uff0c\u6240\u4ee5\u5982\u679c\u4f60\u6784\u5efa\u7684\u811a\u672c\u547d\u4ee4\u548c\u6211\u7684\u4e0d\u4e00\u81f4\u7684\u8bdd\uff0c\u8fd8\u662f\u8981\u6539\u7684\u3002\\n\\n\u53e6\u4e00\u4e2a\u5751\uff0c\u4e0a\u9762\u914d\u7f6e\u597d\u4e86\u4ee5\u540e\uff0c\u6211\u5c06\u6211\u7684 `VuePress` \u535a\u5ba2\u63d0\u4ea4\u5230 `Github`\uff0c\u4f46\u662f\u8fd0\u884c\u4e00\u6bb5\u65f6\u95f4\u4e4b\u540e\u7206\u51fa\u4e86\u9519\u8bef\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting2/20210531190224.png\\" alt=\\"image-20210531190224283\\"  />\\n\\n\u4ece\u9519\u8bef\u7684\u7c7b\u578b\u770b\u597d\u50cf\u662f\u8d85\u5185\u5b58\u4e86\uff0c\u7136\u540e\u7ecf\u8fc7\u6211\u7684\u641c\u7d22\uff0c\u5728 `Github` \u7684\u4e00\u4e2a `issue` \u4e2d\u627e\u5230\u4e86[\u89e3\u51b3\u529e\u6cd5](https://github.com/ScaCap/action-surefire-report/issues/17#issuecomment-677015255)\uff0c\u6dfb\u52a0\u4e0b\u9762\u7684\u73af\u5883\u53d8\u91cf\\n\\n```yaml\\nenv:\\n  NODE_OPTIONS: \'--max_old_space_size=4096\'\\n```\\n\\n\u66f4\u6539\u540e\u7684\u914d\u7f6e\u6587\u4ef6\u5982\u4e0b\\n\\n```yaml {17-18}\\nname: Build and Deploy\\non:\\n  push:\\n    branches:\\n      - master\\njobs:\\n  build-and-deploy:\\n    runs-on: ubuntu-latest\\n    steps:\\n      - name: Checkout \ud83d\udece\ufe0f\\n        uses: actions/checkout@v2.3.1\\n\\n      - name: Install and Build \ud83d\udd27 \\n        run: |\\n          npm install\\n          npm run build\\n        env:\\n          NODE_OPTIONS: \'--max_old_space_size=4096\'\\n\\n      - name: Deploy \ud83d\ude80\\n        uses: JamesIves/github-pages-deploy-action@4.1.3\\n        with:\\n          BRANCH: gh-pages\\n          FOLDER: docs/.vuepress/dist\\n          ACCESS_TOKEN: ${{ secrets.ACCESS_TOKEN }}\\n```"},{"id":"\u63a7\u5236\u5bf9\u8c61\u7684\u8bbf\u95ee","metadata":{"permalink":"/blog/\u63a7\u5236\u5bf9\u8c61\u7684\u8bbf\u95ee","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2021-04-13-\u63a7\u5236\u5bf9\u8c61\u7684\u8bbf\u95ee.mdx","source":"@site/blog/2021-04-13-\u63a7\u5236\u5bf9\u8c61\u7684\u8bbf\u95ee.mdx","title":"\u63a7\u5236\u5bf9\u8c61\u7684\u8bbf\u95ee","description":"\u672c\u7bc7\u6587\u7ae0\u603b\u7ed3\u63a7\u5236\u5bf9\u8c61\u8bbf\u95ee\u7684\u76f8\u5173 API\u3002","date":"2021-05-21T00:00:00.000Z","formattedDate":"2021\u5e745\u670821\u65e5","tags":[{"label":"Object","permalink":"/blog/tags/object"},{"label":"defineProperty","permalink":"/blog/tags/define-property"},{"label":"defineProperties","permalink":"/blog/tags/define-properties"},{"label":"preventExtensions","permalink":"/blog/tags/prevent-extensions"},{"label":"seal","permalink":"/blog/tags/seal"},{"label":"freeze","permalink":"/blog/tags/freeze"},{"label":"Proxy","permalink":"/blog/tags/proxy"}],"readingTime":9.075,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"slug":"\u63a7\u5236\u5bf9\u8c61\u7684\u8bbf\u95ee","tags":["Object","defineProperty","defineProperties","preventExtensions","seal","freeze","Proxy"],"authors":"xiongtao","date":"2021-05-21T00:00:00.000Z"},"prevItem":{"title":"\u4f7f\u7528 Github Actions \u90e8\u7f72 VuePress \u535a\u5ba2","permalink":"/blog/2021/05/31/\u4f7f\u7528 Github Actions \u90e8\u7f72 VuePress \u535a\u5ba2"},"nextItem":{"title":"EventEmitter","permalink":"/blog/EventEmitter"}},"content":"\u672c\u7bc7\u6587\u7ae0\u603b\u7ed3\u63a7\u5236\u5bf9\u8c61\u8bbf\u95ee\u7684\u76f8\u5173 API\u3002\\n\\n## Object.defineProperty\\n\\n`Object.defineProperty` \u53ef\u4ee5\u5bf9\u5bf9\u8c61\u7684\u5c5e\u6027\u8fdb\u884c\u914d\u7f6e\uff0c\u5b83\u63a5\u6536\u5982\u4e0b\u53c2\u6570\uff1a\\n\\n- `obj`\uff1a\u5bf9\u8c61\\n- `prop`\uff1a\u5c5e\u6027\\n- `descriptor`\uff1a\u5c5e\u6027\u63cf\u8ff0\u7b26\\n\\n\u5176\u4e2d `descriptor` \u5305\u62ec\u5982\u4e0b\u914d\u7f6e\u9009\u9879\\n\\n- `value`\uff1a\u5c5e\u6027\u7684\u503c\\n- `writable`\uff1a\u5c5e\u6027\u662f\u5426\u53ef\u5199\uff0c\u9ed8\u8ba4\u4e3a `false`\\n- `set`\uff1a\u4e3a\u5c5e\u6027\u8bbe\u7f6e\u503c\u65f6\u4f1a\u89e6\u53d1\u6b64\u65b9\u6cd5\uff0c\u8bbe\u7f6e\u7684\u65b0\u503c\u4f1a\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165\\n- `get`\uff1a\u8bbf\u95ee\u6b64\u5c5e\u6027\u662f\u4f1a\u89e6\u53d1\u6b64\u65b9\u6cd5\\n- `configurable`\uff1a\u8be5\u5c5e\u6027\u662f\u5426\u53ef\u518d\u6b21\u8fdb\u884c\u914d\u7f6e\uff0c\u9ed8\u8ba4\u4e3a `false`\\n- `enumerable`\uff1a\u662f\u5426\u53ef\u904d\u5386\uff0c\u9ed8\u8ba4\u4e3a `false`\\n\\n\u5176\u4e2d `value` \u4e0e `writable` \u662f\u4e00\u7ec4\uff0c`set` \u548c `get` \u662f\u4e00\u7ec4\uff0c\u4e8c\u8005\u4e0d\u53ef\u540c\u65f6\u4f7f\u7528\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n### \u4f8b\u5b501\\n\\n```javascript\\nconst obj = {}\\n\\nObject.defineProperty(obj, \'name\', {\\n    value: \'Alice\',\\n    writable: false\\n})\\n\\nconsole.log(obj.name) // Alice\\n\\nobj.name = \'Bob\'      // \u4e0d\u53ef\u5199\uff0c\u66f4\u6539\u65e0\u6548\\nconsole.log(obj.name) // Alice\\n```\\n\\n\u5728\u4e0a\u9762\u6211\u4eec\u4e3a `obj` \u7684 `name` \u5c5e\u6027\u914d\u7f6e\u4e86 `value` \u5c5e\u6027\u4e3a `Alice` \u4f5c\u4e3a `obj.name` \u7684\u521d\u59cb\u503c\uff0c\u53c8\u914d\u7f6e\u4e86 `writable` \u4e3a `false`\uff0c\u8868\u660e\u8be5\u5c5e\u6027\u662f\u4e0d\u53ef\u5199\u7684\uff0c\u5bf9\u8be5\u5c5e\u6027\u8fdb\u884c\u8d4b\u503c\u65f6\u65e0\u6548\u7684\u3002\\n\\n### \u4f8b\u5b502\\n\\n```javascript\\nconst obj = {}\\n\\nlet username\\nObject.defineProperty(obj, \'name\', {\\n    set(value) {\\n        if (value === \'Alice\') {\\n            username = value\\n        }\\n    },\\n    get() {\\n        return username\\n    }\\n})\\n\\nobj.name = \'Alice\'     // \u8d4b\u503c\u6709\u6548\\nconsole.log(obj.name)  // Alice\\n\\nobj.name = \'Bob\'       // \u8d4b\u503c\u65e0\u6548 \\nconsole.log(obj.name)  // Alice\\n```\\n\\n\u4e0a\u9762\u6211\u4eec\u4e3a `obj` \u7684 `name` \u5c5e\u6027\u914d\u7f6e\u4e86 `set` \u548c `get` \u65b9\u6cd5\uff0c\u6ca1\u5f53\u6211\u4eec\u4e3a `obj.name` \u8d4b\u4e88\u65b0\u503c\u65f6\u90fd\u4f1a\u8c03\u7528 `set` \u65b9\u6cd5\uff0c\u5e76\u5c06\u65b0\u503c\u4f20\u5165\uff0c\u5728 `set` \u65b9\u6cd5\u4e2d\uff0c\u6211\u4eec\u5bf9\u65b0\u503c\u8fdb\u884c\u4e86\u5224\u65ad\uff0c\u5982\u679c\u65b0\u503c\u4e3a `Alice` \u5219\u6211\u4eec\u8d4b\u503c\u7ed9 `username`\uff1b\u6bcf\u6b21\u5f53\u6211\u4eec\u8bbf\u95ee `obj.name` \u65f6\uff0c\u5219\u4f1a\u89e6\u53d1 `get` \u65b9\u6cd5\uff0c\u5728 `get` \u65b9\u6cd5\u4e2d\u6211\u4eec\u76f4\u63a5\u8fd4\u56de\u4e86 `username` \u8fd9\u4e2a\u53d8\u91cf\u7684\u503c\uff0c\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u63a7\u5236\u5bf9\u8c61\u5c5e\u6027\u7684\u8bbf\u95ee\u64cd\u4f5c\u3002\\n\\n### \u4f8b\u5b503\\n\\n```javascript\\nconst obj = {\\n    a: 1,\\n    b: 2\\n}\\nconsole.log(Object.keys(obj)) // [ \'a\', \'b\' ]\\n\\n\\nObject.defineProperty(obj, \'a\', {\\n    enumerable: false         // \u4e0d\u53ef\u679a\u4e3e\\n})\\nconsole.log(Object.keys(obj)) // [ \'b\' ]\\n```\\n\\n\u5728\u4e0a\u9762\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a `obj` \u5bf9\u8c61\uff0c\u5176\u4e2d\u6709 `a, b` \u4e24\u4e2a\u5c5e\u6027\uff0c\u9ed8\u8ba4\u90fd\u662f\u53ef\u679a\u4e3e\u7684\u3002\u901a\u8fc7 `Object.keys` \u65b9\u6cd5\u53ef\u4ee5\u53d6\u5f97\u5bf9\u8c61\u4e2d\u6240\u4ee5\u53ef\u679a\u4e3e\u7684\u5c5e\u6027\uff0c\u8fd9\u65f6\u5b83\u4eec\u90fd\u5728\u8fd4\u56de\u7684\u6570\u7ec4\u4e2d\uff1b\u63a5\u7740\u6211\u4eec\u914d\u7f6e `a` \u4e3a\u4e0d\u53ef\u679a\u4e3e\uff0c\u6b64\u65f6\u518d\u6b21\u8c03\u7528 `Object.keys`\uff0c\u6b64\u65f6 `a` \u5c31\u4e0d\u5728\u8fd4\u56de\u7684\u6570\u7ec4\u4e2d\u4e86\u3002\\n\\n### \u4f8b\u5b504\\n\\n```javascript\\nconst obj = {\\n    a: 1,\\n    b: 2\\n}\\n\\nObject.defineProperty(obj, \'a\', {\\n    enumerable: false,\\n    configurable: false\\n})\\n\\nconsole.log(Object.keys(obj)) // [ \'b\' ]\\n\\n// TypeError: Cannot redefine property: a\\nObject.defineProperty(obj, \'a\', {\\n    enumerable: true\\n})\\n```\\n\\n\u4e0a\u9762\u6211\u4eec\u914d\u7f6e\u4e86 `a` \u4e3a\u4e0d\u53ef\u679a\u4e3e\uff0c\u5e76\u4e14\u914d\u7f6e `configurable` \u4e3a `false`\uff0c\u7136\u540e\u63a5\u7740\u6211\u4eec\u53c8\u60f3\u914d\u7f6e\u5c5e\u6027 `a` \u4e3a\u53ef\u679a\u4e3e\u7684\uff0c\u4f46\u662f\u4f1a\u62a5\u9519 `TypeError: Cannot redefine property: a`\uff0c\u8fd9\u662f\u56e0\u4e3a\u6211\u4eec\u914d\u7f6e `configurable` \u4e3a `false`\uff0c\u8868\u793a\u4e0d\u53ef\u518d\u6b21\u914d\u7f6e\uff0c\u5f53\u6211\u4eec\u518d\u6b21\u5bf9\u5c5e\u6027 `a` \u8fdb\u884c\u914d\u7f6e\u4fbf\u4f1a\u62a5\u9519\u3002\\n\\n```javascript\\nconst obj = {\\n    a: 1,\\n    b: 2\\n}\\n\\nObject.defineProperty(obj, \'a\', {\\n    enumerable: false,\\n    configurable: true        // \u53ef\u7ee7\u7eed\u914d\u7f6e\\n})\\nconsole.log(Object.keys(obj)) // [ \'b\' ]\\n\\nObject.defineProperty(obj, \'a\', {\\n    enumerable: true\\n})\\nconsole.log(Object.keys(obj)) // [ \'a\', \'b\' ]\\n```\\n\\n## Object.defineProperties\\n\\n`Object.defineProperty` \u6bcf\u6b21\u53ea\u80fd\u914d\u7f6e\u5bf9\u8c61\u7684\u4e00\u4e2a\u5c5e\u6027\uff0c\u800c `Object.defineProperties` \u53ef\u4ee5\u4e00\u6b21\u6027\u914d\u7f6e\u5bf9\u8c61\u7684\u591a\u4e2a\u5c5e\u6027\uff0c\u5b83\u7684\u8bed\u6cd5\u5982\u4e0b\uff1a\\n\\n```javascript\\nObject.defineProperties(obj, {\\n    prop1: {\\n        // \u914d\u7f6e\u9009\u9879\u540c Object.defineProperty\\n    },\\n    prop2: {\\n        // ...\\n    }\\n})\\n```\\n\\n\u89c1\u4e0b\u4f8b\uff1a\\n\\n```javascript\\nconst obj = {\\n    name: \'Alice\',\\n    age: 25\\n}\\n\\nObject.defineProperties(obj, {\\n    name: {\\n        writable: false    // \u4e0d\u80fd\u5199 name \u5c5e\u6027\\n    },\\n    age: {\\n        enumerable: false, // \u4e0d\u80fd\u904d\u5386\u5230 age \u8fd9\u4e2a\u5c5e\u6027\\n        get() {\\n            return 18      // \u522b\u95ee\uff0c\u95ee\u5c31\u662f 18\\n        }\\n    }\\n})\\n```\\n\\n## Object.preventExtensions\\n\\n`Object.preventExtions(obj)` \u53ef\u4ee5\u4f7f\u5f97\u5bf9\u8c61 `obj` \u4e0d\u53ef\u6269\u5c55\uff0c\u5373\u4e0d\u80fd\u4e3a\u5bf9\u8c61\u6dfb\u52a0\u65b0\u7684\u5c5e\u6027\\n\\n```javascript\\nconst obj = {\\n    name: \'Alice\',\\n    age: 20\\n}\\n\\nObject.preventExtensions(obj)\\n\\nobj.gender = \'female\'   // \u65e0\u6cd5\u6dfb\u52a0\u65b0\u7684\u5c5e\u6027\\nconsole.log(obj.gender) // undefined\\n```\\n\\n\u4e0a\u9762\u6211\u4eec\u5c06 `obj` \u8bbe\u7f6e\u4e3a\u4e0d\u53ef\u6269\u5c55\u540e\u8bd5\u56fe\u6dfb\u52a0\u65b0\u7684\u5c5e\u6027\uff0c\u4f46\u662f\u5e76\u6ca1\u6709\u6210\u529f\u3002\u8bbe\u7f6e\u4e3a\u4e0d\u53ef\u6269\u5c55\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u6b63\u5e38\u8bbf\u95ee\u73b0\u6709\u5bf9\u8c61\u4e0a\u7684\u5c5e\u6027\uff0c\u4ee5\u53ca\u66f4\u6539\u548c\u5220\u9664\\n\\n```javascript\\nconst obj = {\\n    name: \'Alice\',\\n    age: 20\\n}\\n\\nObject.preventExtensions(obj)\\n\\nobj.name = \'Bob\'\\nconsole.log(obj.name)  // Bob\\n\\ndelete obj.name\\nconsole.log(Object.keys(obj)) // [ \'age\' ]\\n```\\n\\n**\u5bf9\u8c61\u4e00\u65e6\u53d8\u4e3a\u4e0d\u53ef\u6269\u5c55\u540e\uff0c\u5c31\u4e00\u76f4\u662f\u4e0d\u53ef\u6269\u5c55\u7684\u3002**\u901a\u8fc7 `Object.isExtensible` \u65b9\u6cd5\u53ef\u4ee5\u5224\u65ad\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u662f\u53ef\u6269\u5c55\u7684\\n\\n```javascript\\nconst obj = {\\n    name: \'Alice\',\\n    age: 20\\n}\\n\\nconsole.log(Object.isExtensible(obj)) // true\\nObject.preventExtensions(obj)\\nconsole.log(Object.isExtensible(obj)) // false\\n```\\n\\n## Object.seal\\n\\n`seal` \u7684\u610f\u601d\u662f\u5c01\u5370\uff0c`Object.seal` \u6bd4 `Object.preventExtensiable` \u66f4\u8fd1\u4e00\u6b65\uff0c\u88ab `seal` \u4e86\u7684\u5bf9\u8c61\uff0c\u9664\u4e86\u53d8\u4e3a\u4e0d\u53ef\u6269\u5c55\uff0c\u8fd8\u4e0d\u53ef\u914d\u7f6e `configurable: false`\uff0c\u5c5e\u6027\u4e0d\u80fd\u88ab\u5220\u9664\u4e86\u4ee5\u53ca\u5c5e\u6027\u4e0d\u80fd\u88ab `Object.defineProperty` \u8fdb\u884c\u914d\u7f6e\u4e86\\n\\n```javascript\\nconst obj = {\\n    name: \'Alice\',\\n    age: 20\\n}\\n\\nObject.seal(obj)\\n\\nobj.gender = \'female\'\\nconsole.log(obj.female) // undefined, \u4e0d\u53ef\u6269\u5c55\\n\\ndelete obj.name\\nconsole.log(obj.name)   // Alice, \u4e0d\u53ef\u5220\u9664\\n```\\n\\n\u4f46\u662f\u6211\u4eec\u8fd8\u53ef\u4ee5\u5bf9\u8c61\u73b0\u6709\u7684\u5c5e\u6027\u8fdb\u884c\u66f4\u6539\u7684\\n\\n```javascript\\nconst obj = {\\n    name: \'Alice\',\\n    age: 20\\n}\\n\\nObject.seal(obj)\\n\\nobj.name = \'Bob\'\\nconsole.log(obj.name) // Bob\\n```\\n\\n\u901a\u8fc7 `Object.isSealed` \u53ef\u4ee5\u5224\u65ad\u5bf9\u8c61\u662f\u5426\u88ab `seal` \u4e86\\n\\n```javascript\\nconst obj = {}\\n\\nconsole.log(Object.isSealed(obj)) // false\\nObject.seal(obj)\\nconsole.log(Object.isSealed(obj)) // true\\n```\\n\\n## Object.freeze\\n\\n`freeze` \u662f\u51bb\u7ed3\u7684\u610f\u601d\uff0c\u5b83\u76f8\u5bf9\u4e8e `Object.seal` \u66f4\u8fdb\u4e00\u6b65\uff0c\u4e0d\u4ec5\u4e0d\u53ef\u6269\u5c55\uff0c\u4e0d\u53ef\u914d\u7f6e\uff0c\u5bf9\u8c61\u7684\u6570\u636e\u5c5e\u6027 `writable`  \u4f1a\u88ab\u8bbe\u7f6e\u4e3a  `false`\\n\\n```javascript\\nconst obj = {\\n    name: \'Alice\'\\n}\\n\\nObject.freeze(obj)\\n\\nobj.age = 18     // \u4e0d\u53ef\u6269\u5c55\uff0c\u65e0\u6548\\nobj.name = \'Bob\' // \u4e0d\u53ef\u4fee\u6539\uff0c\u65e0\u6548\\ndelete obj.name  // \u4e0d\u53ef\u914d\u7f6e\uff0c\u65e0\u6548\\n\\nconsole.log(obj) // { name: \'Alice\' }\\n```\\n\\n\u4f46\u662f\u5982\u679c\u6709\u5b9a\u4e49 `set` \u65b9\u6cd5\u7684\u8bdd\uff0c\u5bf9\u8c61\u5c5e\u6027\u8fd8\u662f\u53ef\u4ee5\u88ab\u4fee\u6539\u7684\\n\\n```javascript\\nconst obj = {\\n    name: \'Alice\'\\n}\\n\\nlet username = obj.name\\nObject.defineProperty(obj, \'name\', {\\n    set(value) {\\n        username = value\\n    },\\n    get() {\\n        return username\\n    }\\n})\\n\\nObject.freeze(obj)\\n\\nobj.name = \'Bob\'\\nconsole.log(obj.name) // Bob\\n```\\n\\n\u901a\u8fc7 `Object.isFrozen` \u65b9\u6cd5\u53ef\u4ee5\u5224\u65ad\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u88ab `freeze` \u4e86\\n\\n```javascript\\nconst obj = {}\\n\\nconsole.log(Object.isFrozen(obj)) // false\\nObject.freeze(obj)\\nconsole.log(Object.isFrozen(obj)) // true\\n```\\n\\n## Proxy\\n\\n`Proxy` \u662f `ES6` \u4e2d\u7684\u65b0\u7279\u6027\uff0c\u5b83\u53ef\u4ee5\u4e3a\u5bf9\u8c61\u505a\u4e00\u5c42\u4ee3\u7406\uff0c\u5f53\u7528\u6237\u901a\u8fc7\u4ee3\u7406\u8bbf\u95ee\u5bf9\u8c61\u65f6\uff0c\u4ee3\u7406\u53ef\u4ee5\u62e6\u622a\u4e00\u4e9b\u64cd\u4f5c\uff0c\u4f8b\u5982\u4e3a\u5c5e\u6027\u8d4b\u503c\uff0c\u8bbf\u95ee\u5c5e\u6027\u7684\u503c\uff0c\u4ece\u800c\u63a7\u5236\u5bf9\u8c61\u7684\u8bbf\u95ee\u3002`Proxy` \u53ef\u4ee5\u62e6\u622a 13 \u79cd\u64cd\u4f5c\uff0c\u8fd9\u91cc\u4e0d\u4f1a\u8be6\u7ec6\u4ecb\u7ecd\uff0c\u53ea\u4f1a\u4ecb\u7ecd `set` \u548c `get` \u62e6\u622a\u3002\\n\\n`Proxy` \u7684\u8bed\u6cd5\u5982\u4e0b\\n\\n```javascript\\nconst proxy = new Proxy(target, {\\n    // \u62e6\u622a\u7684\u65b9\u6cd5\\n})\\n```\\n\\n### \u4f8b\u5b501\\n\\n```javascript\\nconst target = {\\n    name: \'Alice\',\\n    age: 18\\n}\\n\\nlet proxy = new Proxy(target, {\\n    set(trapTarget, key, value, receiver) {\\n        // \u53ea\u80fd\u4e3a age \u5c5e\u6027\u8d4b\u503c\uff0c\u5e76\u4e14\u503c\u5fc5\u987b\u4e0d\u5927\u4e8e 18 \u624d\u80fd\u8d4b\u503c\u6210\u529f\\n        if (key === \'age\' && value <= 18) {\\n            trapTarget[key] = value\\n        }\\n    }\\n})\\n\\n// \u65e0\u6cd5\u4e3a name \u8d4b\u503c\\nproxy.name = \'Bob\'\\nconsole.log(proxy.name)  // Alice\\nconsole.log(target.name) // Alice\\n\\n// \u5927\u4e8e 18 \u8d4b\u503c\u5931\u8d25\\nproxy.age = 19\\nconsole.log(proxy.age)   // 18\\nconsole.log(target.age)  // 18\\n\\n// \u4e0d\u5927\u4e8e 18\uff0c\u8d4b\u503c\u6210\u529f\\nproxy.age = 15\\nconsole.log(proxy.age)   // 15\\nconsole.log(target.age)  // 15\\n```\\n\\n\u4e0a\u9762\u6211\u4eec\u4e3a `target` \u5bf9\u8c61\u505a\u4e86\u5c42\u4ee3\u7406\uff0c\u5f53\u6211\u4eec\u901a\u8fc7\u4ee3\u7406\u8d4b\u503c\u65f6\uff0c\u4f1a\u88ab `set` \u65b9\u6cd5\u62e6\u622a\uff0c`set` \u65b9\u6cd5\u63a5\u6536\u56db\u4e2a\u53c2\u6570\uff1a\\n\\n- `trapTarget`\uff1a\u88ab\u4ee3\u7406\u7684\u5bf9\u8c61\\n- `key`\uff1a\u88ab\u8d4b\u503c\u7684\u5c5e\u6027\\n- `value`\uff1a\u88ab\u8d4b\u7684\u503c\\n- `receiver`\uff1a\u64cd\u4f5c\u53d1\u751f\u7684\u5bf9\u8c61\uff0c\u5373\u4ee3\u7406\u5bf9\u8c61\\n\\n\u4e0a\u9762\u6211\u4eec\u53ea\u5141\u8bb8\u5bf9 `age` \u5c5e\u6027\u8d4b\u503c\uff0c\u5e76\u4e14\u8d4b\u7684\u503c\u4e0d\u80fd\u5927\u4e8e `18`\u3002\\n\\n### \u4f8b\u5b502\\n\\n```javascript\\nconst target = {\\n    name: \'Alice\',\\n    age: 20\\n}\\n\\nlet proxy = new Proxy(target, {\\n    get(trapTarget, key, receiver) {\\n        if (key === \'age\') {\\n            return 18\\n        }\\n        return trapTarget[key]\\n    }\\n})\\n\\nconsole.log(proxy.age)  // 18\\nconsole.log(target.age) // 20\\n```\\n\\n\u6211\u4eec\u5bf9 `target` \u7684 `get` \u65b9\u6cd5\u8fdb\u884c\u4e86\u4ee3\u7406\uff0c\u5f53\u6211\u4eec\u901a\u8fc7\u4ee3\u7406\u5bf9\u8c61\u8bbf\u95ee\u5c5e\u6027\u503c\u65f6\uff0c\u5982\u679c\u8bbf\u95ee\u7684\u662f `age` \u5c5e\u6027\uff0c\u5219\u8fd4\u56de `18`\uff0c\u5176\u4ed6\u5c5e\u6027\u4e0d\u505a\u5904\u7406\u76f4\u63a5\u8fd4\u56de\u539f\u503c\u3002\\n\\n:::note\\n\u5982\u679c\u76f4\u63a5\u901a\u8fc7 `target` \u8bbf\u95ee\u5c5e\u6027\u7684\u8bdd\uff0c\u64cd\u4f5c\u662f\u4e0d\u4f1a\u88ab\u62e6\u622a\u7684\uff0c\u4ee3\u7406\u6ca1\u6709\u4f5c\u7528\u3002\\n:::"},{"id":"EventEmitter","metadata":{"permalink":"/blog/EventEmitter","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2021-03-12-EventEmitter.mdx","source":"@site/blog/2021-03-12-EventEmitter.mdx","title":"EventEmitter","description":"EventEmitter \u7684\u4f7f\u7528","date":"2021-03-12T00:00:00.000Z","formattedDate":"2021\u5e743\u670812\u65e5","tags":[{"label":"Node","permalink":"/blog/tags/node"},{"label":"EventEmitter","permalink":"/blog/tags/event-emitter"}],"readingTime":19.145,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"slug":"EventEmitter","authors":"xiongtao","tags":["Node","EventEmitter"]},"prevItem":{"title":"\u63a7\u5236\u5bf9\u8c61\u7684\u8bbf\u95ee","permalink":"/blog/\u63a7\u5236\u5bf9\u8c61\u7684\u8bbf\u95ee"},"nextItem":{"title":"Stream","permalink":"/blog/2021/03/06/Stream"}},"content":"## EventEmitter \u7684\u4f7f\u7528\\n\\n`EventEmitter` \u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u4e8b\u4ef6\u8ba2\u9605\u673a\u5236\uff0c\u901a\u8fc7\u5f15\u5165 `events` \u6a21\u5757\u6765\u4f7f\u7528\u5b83\u3002\\n\\n```javascript\\nconst {EventEmitter} = require(\\"events\\");\\nconst eventEmitter = new EventEmitter();\\n\\n// \u76d1\u542c data \u4e8b\u4ef6\\neventEmitter.on(\\"data\\", () => {\\n    console.log(\\"data\\");\\n});\\n\\n// \u89e6\u53d1 data \u4e8b\u4ef6\\neventEmitter.emit(\\"data\\");\\n```\\n\\n\u4e0a\u8ff0\u4ee3\u7801\u6211\u4eec\u4f7f\u7528 `on` \u65b9\u6cd5\u6765\u4e3a\u4e8b\u4ef6\u7ed1\u5b9a\u56de\u8c03\u51fd\u6570\uff0c\u4f7f\u7528 `emit` \u65b9\u6cd5\u6765\u89e6\u53d1\u4e00\u4e2a\u4e8b\u4ef6\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n### on\u3001addListener\\n\\n\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 `on` \u548c `addListener` \u65b9\u6cd5\u6765\u4e3a\u67d0\u4e8b\u4ef6\u6dfb\u52a0\u4e00\u4e2a\u76d1\u542c\u5668\uff0c\u4e8c\u8005\u7684\u4f7f\u7528\u662f\u4e00\u6837\\n\\n```javascript\\neventEmitter.on(\\"data\\", () => {\\n    console.log(\\"data\\");\\n});\\n\\neventEmitter.addListener(\\"data\\", () => {\\n    console.log(\\"data\\");\\n});\\n```\\n\\n\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u4e8b\u4ef6\u540d\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u5bf9\u5e94\u7684\u56de\u8c03\u51fd\u6570\uff0c\u5f53 EventEmitter \u5b9e\u4f8b\u5bf9\u8c61\u8c03\u7528 `emit` \u89e6\u53d1\u76f8\u5e94\u7684\u4e8b\u4ef6\u65f6\u4fbf\u4f1a\u8c03\u7528\u8be5\u56de\u8c03\u51fd\u6570\uff0c\u5982\\n\\n```javascript\\nconst {EventEmitter} = require(\\"events\\");\\nconst eventEmitter = new EventEmitter();\\n\\neventEmitter.on(\\"data\\", () => {\\n    console.log(\\"data\\");\\n});\\n\\neventEmitter.addListener(\\"data\\", () => {\\n    console.log(\\"data\\");\\n});\\n\\neventEmitter.emit(\\"data\\");\\n```\\n\\n\u5728\u63a7\u5236\u53f0\u4f1a\u6253\u5370\u51fa\u4e24\u6b21 `data`\\n\\n```\\ndata\\ndata\\n```\\n\\n:::tip\\n\\n\u4ece\u4e0a\u9762\u7684\u4f8b\u5b50\u4e5f\u53ef\u4ee5\u770b\u51fa\uff0c\u53ef\u4ee5\u4e3a\u540c\u4e00\u4e8b\u4ef6\u7ed1\u5b9a\u591a\u4e2a\u56de\u8c03\u51fd\u6570\u3002\\n\\n:::\\n\\n#### \u6267\u884c\u987a\u5e8f\\n\\n\u5f53\u4f7f\u7528 `on` \u6216 `addListener` \u7ed1\u5b9a\u591a\u4e2a\u56de\u8c03\u51fd\u6570\u65f6\uff0c\u89e6\u53d1\u7684\u987a\u5e8f\u5c31\u662f\u6dfb\u52a0\u7684\u987a\u5e8f\uff0c\u5982\\n\\n```javascript\\nconst {EventEmitter} = require(\\"events\\");\\nconst eventEmitter = new EventEmitter();\\n\\neventEmitter.on(\\"data\\", () => {\\n    console.log(\\"data 1\\");\\n});\\n\\neventEmitter.on(\\"data\\", () => {\\n    console.log(\\"data 2\\");\\n});\\n\\neventEmitter.on(\\"data\\", () => {\\n    console.log(\\"data 3\\");\\n});\\n\\neventEmitter.emit(\\"data\\");\\n```\\n\\n\u4f1a\u5728\u63a7\u5236\u53f0\u4f9d\u6b21\u6253\u5370\u51fa\\n\\n```\\ndata 1\\ndata 2\\ndata 3\\n```\\n\\n#### \u91cd\u590d\u6dfb\u52a0\\n\\n\u5e76\u4e14\u4f7f\u7528 `on` \u65b9\u6cd5\u7ed1\u5b9a\u4e8b\u4ef6\u65f6\uff0c\u5e76\u4e0d\u4f1a\u505a\u53bb\u91cd\u68c0\u67e5\\n\\n```javascript\\nconst {EventEmitter} = require(\'events\');\\nconst eventEmitter = new EventEmitter();\\n\\nconst listener = () => {\\n    console.log(\\"lsitener\\");\\n}\\n\\neventEmitter.on(\\"data\\", listener);\\neventEmitter.on(\\"data\\", listener);\\neventEmitter.emit(\\"data\\");\\n```\\n\\n\u63a7\u5236\u53f0\u7684\u6253\u5370\u7ed3\u679c\u4e3a\\n\\n```\\nlsitener\\nlsitener\\n```\\n\\n\u4e0a\u9762\u7684\u7a0b\u5e8f\u4e3a\u4e8b\u4ef6\u7ed1\u5b9a\u4e86\u4e24\u6b21 `listener` \u8fd9\u4e2a\u51fd\u6570\uff0c\u4f46\u662f\u5185\u90e8\u5e76\u4e0d\u4f1a\u68c0\u67e5\u662f\u5426\u5df2\u7ecf\u6dfb\u52a0\u8fc7\u8fd9\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u7136\u540e\u53bb\u91cd\uff0c\u6240\u4ee5\u4e0a\u9762\u5728\u63a7\u5236\u53f0\u6253\u5370\u51fa\u4e86\u4e24\u6b21 listener\u3002\\n\\n#### \u4f20\u9012\u53c2\u6570\\n\\n\u53e6\u5916\u56de\u8c03\u51fd\u6570\u8fd8\u53ef\u4ee5\u63a5\u6536\u53c2\u6570\uff0c\u53c2\u6570\u901a\u8fc7 `emit` \u89e6\u53d1\u4e8b\u4ef6\u65f6\u4f20\u5165\uff0c\u5982\\n\\n```javascript\\nconst {EventEmitter} = require(\\"events\\");\\nconst eventEmitter = new EventEmitter();\\n\\neventEmitter.on(\\"data\\", data => {\\n    console.log(data);\\n});\\n\\n// \u4e3a\u56de\u8c03\u51fd\u6570\u4f20\u5165\u53c2\u6570 HelloWorld!\\neventEmitter.emit(\\"data\\", \\"HelloWorld!\\");\\n```\\n\\n\u4e0a\u9762\u6211\u4eec\u4f7f\u7528 `emit` \u89e6\u53d1\u4e8b\u4ef6\u65f6\uff0c\u8fd8\u4f20\u9012\u4e86\u989d\u5916\u7684\u53c2\u6570\uff0c\u8fd9\u4e2a\u53c2\u6570\u4f1a\u88ab\u4f20\u9012\u7ed9\u56de\u8c03\u51fd\u6570\u3002\\n\\n#### \u540c\u6b65\u6267\u884c\\n\\n\u53e6\u5916\u4e00\u4e2a\u6bd4\u8f83\u5173\u5fc3\u7684\u95ee\u9898\uff0c\u4e8b\u4ef6\u7684\u89e6\u53d1\u662f\u540c\u6b65\u7684\u8fd8\u662f\u5f02\u6b65\u7684\uff0c\u6211\u4eec\u505a\u4e00\u4e2a\u5b9e\u9a8c\\n\\n```javascript\\nconst {EventEmitter} = require(\\"events\\");\\nconst eventEmitter = new EventEmitter();\\n\\neventEmitter.on(\\"data\\", () => {\\n    console.log(\\"\u89e6\u53d1\u4e86 data \u4e8b\u4ef6\uff01\\");\\n});\\n\\nconsole.log(\\"start\\");\\neventEmitter.emit(\\"data\\");\\nconsole.log(\\"end\\");\\n```\\n\\n\u4e0a\u9762\u6211\u4eec\u6211\u4eec\u5728\u89e6\u53d1\u4e8b\u4ef6\u524d\u540e\u90fd\u5411\u63a7\u5236\u53f0\u6253\u5370\u4e86\u4fe1\u606f\uff0c\u5982\u679c\u89e6\u53d1\u4e8b\u4ef6\u540e\u662f\u5f02\u6b65\u6267\u884c\u7684\uff0c\u90a3\u4e48\u540e\u9762\u7684\u6253\u5370\u8bed\u53e5\u5c31\u4f1a\u5148\u6267\u884c\uff0c\u5426\u5219\u5982\u679c\u662f\u540c\u6b65\u7684\u8bdd\uff0c\u5c31\u4f1a\u5148\u6267\u884c\u4e8b\u4ef6\u7ed1\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u3002\u6267\u884c\u7ed3\u679c\u5982\u4e0b\\n\\n```javascript\\nstart\\n\u89e6\u53d1\u4e86 data \u4e8b\u4ef6\uff01\\nend\\n```\\n\\n\u53ef\u89c1\u4e8b\u4ef6\u89e6\u53d1\u662f\u540c\u6b65\u6267\u884c\u7684\u3002\\n\\n### off\u3001removeListener\\n\\n`off` \u4e0e `removeListener` \u65b9\u6cd5\u7684\u4f5c\u7528\u540c `on` \u548c `addLsitener` \u7684\u4f5c\u7528\u662f\u76f8\u53cd\u7684\uff0c\u5b83\u4eec\u7684\u4f5c\u7528\u662f\u4e3a\u67d0\u4e2a\u4e8b\u4ef6\u5220\u9664\u5bf9\u5e94\u7684\u56de\u8c03\u51fd\u6570\\n\\n```javascript\\nconst {EventEmitter} = require(\'events\');\\nconst eventEmitter = new EventEmitter();\\n\\nlet listener1 = () => {\\n    console.log(\\"listener1\\");\\n}\\nlet listener2 = () => {\\n    console.log(\\"listener2\\");\\n}\\n\\neventEmitter.on(\\"data\\", listener1);\\neventEmitter.on(\\"data\\", listener2);\\n\\n// \u7b2c\u4e00\u6b21\u89e6\u53d1\uff0c\u4e24\u4e2a\u56de\u8c03\u51fd\u6570\u5426\u4f1a\u6267\u884c\\neventEmitter.emit(\\"data\\");\\n\\neventEmitter.off(\\"data\\", listener1);\\n// \u7b2c\u4e8c\u6b21\u89e6\u53d1\uff0c\u53ea\u4f1a\u6267\u884c listener2\\neventEmitter.emit(\\"data\\");\\n```\\n\\n\u63a7\u5236\u53f0\u6253\u5370\u7ed3\u679c\u4e3a\\n\\n```js\\nlistener1\\nlistener2\\nlistener2\\n```\\n\\n\u7b2c\u4e00\u6b21\u89e6\u53d1\u4e8b\u4ef6\u65f6\uff0c\u4e24\u4e2a\u4e8b\u4ef6\u90fd\u4f1a\u89e6\u53d1\uff0c\u7136\u540e\u6211\u4eec\u4e3a\u4e8b\u4ef6\u5220\u9664\u4e86 listener1 \u8fd9\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u6240\u4ee5\u7b2c\u4e8c\u6b21\u89e6\u53d1\u65f6\uff0c\u53ea\u4f1a\u89e6\u53d1 listener2\u3002\\n\\n:::note\\n\u6ce8\u610f\uff1a\u5982\u679c\u6211\u4eec\u4f7f\u7528 `on` \u6216\u8005 `addListener` \u7ed1\u5b9a\u7684\u662f\u4e00\u4e2a\u533f\u540d\u51fd\u6570\uff0c\u90a3\u4e48\u4fbf\u65e0\u6cd5\u901a\u8fc7 `off` \u548c `removeListener` \u53bb\u89e3\u7ed1\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u56e0\u4e3a\u5b83\u4f1a\u901a\u8fc7\u6bd4\u8f83\u4e24\u4e2a\u51fd\u6570\u7684\u5f15\u7528\u662f\u5426\u76f8\u540c\u6765\u89e3\u7ed1\u51fd\u6570\u7684\u3002\\n:::\\n\\n### once\\n\\n\u4f7f\u7528 `once` \u53ef\u4ee5\u7ed1\u5b9a\u4e00\u4e2a\u53ea\u6267\u884c\u4e00\u6b21\u7684\u56de\u8c03\u51fd\u6570\uff0c\u5f53\u89e6\u53d1\u4e00\u6b21\u4e4b\u540e\uff0c\u8be5\u56de\u8c03\u51fd\u6570\u4fbf\u81ea\u52a8\u4f1a\u88ab\u89e3\u7ed1\\n\\n```javascript\\nconst {EventEmitter} = require(\\"events\\");\\nconst eventEmitter = new EventEmitter();\\n\\neventEmitter.once(\\"data\\", () => {\\n    console.log(\\"data\\");\\n});\\n\\neventEmitter.emit(\\"data\\");\\neventEmitter.emit(\\"data\\");\\n```\\n\\n\u4e0a\u8ff0\u4ee3\u7801\u6211\u4eec\u4f7f\u7528 `once` \u4e3a `data` \u4e8b\u4ef6\u7ed1\u5b9a\u4e86\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u7136\u540e\u4f7f\u7528 `emit` \u65b9\u6cd5\u89e6\u53d1\u4e86\u4e24\u6b21\uff0c\u56e0\u4e3a\u4f7f\u7528 `once` \u7ed1\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u53ea\u4f1a\u88ab\u89e6\u53d1\u4e00\u6b21\uff0c\u6240\u4ee5\u7b2c\u4e8c\u6b21\u89e6\u53d1\uff0c\u56de\u8c03\u51fd\u6570\u4e0d\u4f1a\u6267\u884c\uff0c\u6240\u4ee5\u5728\u63a7\u5236\u53f0\u53ea\u6253\u5370\u4e86\u4e00\u6b21 data\u3002\\n\\n\u53e6\u5916\u540c `on` \u7ed1\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u4e00\u6837\uff0c\u6211\u4eec\u540c\u6837\u53ef\u4ee5\u901a\u8fc7 `emit` \u65b9\u6cd5\u5411\u56de\u8c03\u51fd\u6570\u4f20\u9012\u53c2\u6570\\n\\n```javascript\\nconst {EventEmitter} = require(\\"events\\");\\nconst eventEmitter = new EventEmitter();\\n\\neventEmitter.once(\\"data\\", data => {\\n    console.log(data);\\n});\\n\\neventEmitter.emit(\\"data\\", \\"Hello\\");\\n```\\n\\n\u63a7\u5236\u53f0\u6253\u5370\u7ed3\u679c\\n\\n```javascript\\nHello\\n```\\n\\n### prependListener\u3001prependOnceListener\\n\\n\u4f7f\u7528 `on` \u6216\u8005 `addListener` \u4e3a\u4e8b\u4ef6\u7ed1\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u88ab\u6839\u636e\u6dfb\u52a0\u7684\u987a\u5e8f\u6267\u884c\uff0c\u800c\u4f7f\u7528 `prependLsitener` \u7ed1\u5b9a\u7684\u4e8b\u4ef6\u56de\u8c03\u51fd\u6570\u4f1a\u5728\u5176\u4ed6\u56de\u8c03\u51fd\u6570\u4e4b\u524d\u6267\u884c\\n\\n```javascript\\nconst {EventEmitter} = require(\'events\');\\nconst eventEmitter = new EventEmitter();\\n\\neventEmitter.on(\\"data\\", () => {\\n    console.log(\\"on\\");\\n});\\n\\neventEmitter.prependListener(\\"data\\", () => {\\n    console.log(\\"prepend\\");\\n});\\n\\neventEmitter.emit(\\"data\\");\\n```\\n\\n\u4e0a\u8ff0\u4ee3\u6253\u6211\u4eec\u5148\u7528\u63a7\u5236\u53f0\u7684\u6253\u5370\u7ed3\u679c\u4e3a\\n\\n```js\\nprepend\\non\\n```\\n\\n`prependOnceListener` \u540c `prependListener`\uff0c\u4e0d\u8fc7\u5b83\u7ed1\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u53ea\u4f1a\u88ab\u6267\u884c\u4e00\u6b21\\n\\n```javascript\\nconst {EventEmitter} = require(\'events\');\\nconst eventEmitter = new EventEmitter();\\n\\neventEmitter.on(\\"data\\", () => {\\n    console.log(\\"on\\");\\n});\\n\\neventEmitter.prependOnceListener(\\"data\\", () => {\\n    console.log(\\"prepend once\\");\\n});\\n\\neventEmitter.emit(\\"data\\");\\neventEmitter.emit(\\"data\\");\\n```\\n\\n\u4e0a\u9762\u6211\u4eec\u4f7f\u7528 `prependOnceListener` \u7ed1\u5b9a\u4e86\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u5f53\u89e6\u53d1\u4e8b\u4ef6\u65f6\uff0c\u8be5\u56de\u8c03\u51fd\u6570\u4f1a\u5728\u5176\u4ed6\u51fd\u6570\u4e4b\u524d\u6267\u884c\uff0c\u5e76\u4e14\u53ea\u4f1a\u6267\u884c\u4e00\u6b21\uff0c\u6240\u4ee5\u5f53\u7b2c\u4e8c\u6b21\u6211\u4eec\u89e6\u53d1\u51fd\u6570\u65f6\uff0c\u8be5\u56de\u8c03\u51fd\u6570\u4e0d\u4f1a\u6267\u884c\uff0c\u63a7\u5236\u53f0\u6253\u5370\u7ed3\u679c\u4e3a\\n\\n```js\\nprepend once\\non\\non\\n```\\n\\n### removeAllListeners\\n\\n`removeAllListeners([event])` \u65b9\u6cd5\u53ef\u4ee5\u5220\u9664\u4e8b\u4ef6 `event` \u7ed1\u5b9a\u7684\u6240\u6709\u56de\u8c03\u51fd\u6570\uff0c\u5982\u679c\u6ca1\u6709\u4f20\u5165 `event` \u53c2\u6570\u7684\u8bdd\uff0c\u90a3\u4e48\u8be5\u65b9\u6cd5\u5c31\u4f1a\u5220\u9664\u6240\u6709\u4e8b\u4ef6\u7ed1\u5b9a\u7684\u56de\u8c03\u51fd\u6570\\n\\n```javascript\\nconst {EventEmitter} = require(\'events\');\\nconst eventEmitter = new EventEmitter();\\n\\neventEmitter.on(\\"data\\", () => {\\n    console.log(\\"data 1\\");\\n});\\n\\neventEmitter.on(\\"data\\", () => {\\n    console.log(\\"data 2\\");\\n});\\n\\neventEmitter.emit(\\"data\\");\\neventEmitter.removeAllListeners(\\"data\\");\\neventEmitter.emit(\\"data\\");\\n```\\n\\n\u4e0a\u9762\u7a0b\u5e8f\u4e3a `data` \u4e8b\u4ef6\u7ed1\u5b9a\u4e86\u4e24\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u5e76\u4e14\u5728\u8c03\u7528 `removeAllListeners` \u65b9\u6cd5\u4e4b\u524d\u5206\u522b\u89e6\u53d1\u4e86\u4e00\u6b21 `data` \u4e8b\u4ef6\uff0c\u7b2c\u4e8c\u6b21\u89e6\u53d1 `data` \u4e8b\u4ef6\u65f6\uff0c\u4e0d\u4f1a\u6709\u4efb\u4f55\u7684\u56de\u8c03\u51fd\u6570\u88ab\u6267\u884c\uff0c`removeAllListeners` \u5220\u9664\u4e86 `data` \u4e8b\u4ef6\u7ed1\u5b9a\u7684\u6240\u6709\u56de\u8c03\u51fd\u6570\u3002\u63a7\u5236\u53f0\u7684\u6253\u5370\u7ed3\u679c\u4e3a\uff1a\\n\\n```js\\ndata 1\\ndata 2\\n```\\n\\n### eventNames \\n\\n\u901a\u8fc7 `eventNames` \u65b9\u6cd5\u6211\u4eec\u53ef\u4ee5\u77e5\u9053\u4e3a\u54ea\u4e9b\u4e8b\u4ef6\u7ed1\u5b9a\u4e86\u56de\u8c03\u51fd\u6570\uff0c\u5b83\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\\n\\n```javascript\\nconst {EventEmitter} = require(\\"events\\");\\nconst eventEmitter = new EventEmitter();\\n\\neventEmitter.on(\\"start\\", () => {\\n    console.log(\\"start\\");\\n});\\neventEmitter.on(\\"end\\", () => {\\n    console.log(\\"end\\");\\n});\\neventEmitter.on(\\"error\\", () => {\\n    console.log(\\"error\\");\\n});\\n\\nconsole.log(eventEmitter.eventNames()); // [ \'start\', \'end\', \'error\' ]\\n```\\n\\n\u5982\u679c\u6211\u4eec\u5c06\u67d0\u4e8b\u4ef6\u7684\u6240\u6709\u56de\u8c03\u51fd\u6570\u5220\u9664\u540e\uff0c\u6b64\u65f6 `eventNames` \u4fbf\u4e0d\u4f1a\u8fd4\u56de\u8be5\u4e8b\u4ef6\u4e86\\n\\n```javascript\\neventEmitter.removeAllListeners(\\"error\\");\\nconsole.log(eventEmitter.eventNames()); // [ \'start\', \'end\' ]\\n```\\n\\n### listenerCount\\n\\n`listenerCount` \u65b9\u6cd5\u53ef\u4ee5\u5f97\u5230\u67d0\u4e2a\u4e8b\u4ef6\u7ed1\u5b9a\u4e86\u591a\u5c11\u4e2a\u56de\u8c03\u51fd\u6570\\n\\n```javascript\\nconst {EventEmitter} = require(\\"events\\");\\nconst eventEmitter = new EventEmitter();\\n\\neventEmitter.on(\\"data\\", () => {\\n\\n});\\neventEmitter.on(\\"data\\", () => {\\n\\n});\\n\\nconsole.log(eventEmitter.listenerCount(\\"data\\")); // 2\\n```\\n\\n### setMaxLsiteners\u3001getMaxListeners\\n\\n`setMaxListeners` \u662f\u7528\u6765\u8bbe\u7f6e\u6700\u591a\u4e3a\u6bcf\u4e2a\u4e8b\u4ef6\u7ed1\u5b9a\u591a\u5c11\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u662f\u53ef\u4ee5\u7ed1\u5b9a\u8d85\u8fc7\u8bbe\u7f6e\u7684\u6570\u76ee\u7684\u56de\u8c03\u51fd\u6570\u7684\uff0c\u4e0d\u8fc7\u5f53\u4f60\u7ed1\u5b9a\u8d85\u8fc7\u6307\u5b9a\u6570\u76ee\u7684\u56de\u8c03\u51fd\u6570\u65f6\uff0c\u4f1a\u5728\u63a7\u5236\u53f0\u7ed9\u51fa\u4e00\u4e2a\u8b66\u544a\\n\\n```javascript\\nconst {EventEmitter} = require(\\"events\\");\\nconst eventEmitter = new EventEmitter();\\n\\n// \u8bbe\u7f6e\u53ea\u80fd\u4e3a\u6bcf\u4e2a\u56de\u8c03\u51fd\u6570\u7ed1\u5b9a 1 \u4e2a\u56de\u8c03\u51fd\u6570\\neventEmitter.setMaxListeners(1);\\n\\n// \u4e3a data \u4e8b\u4ef6\u7ed1\u5b9a\u4e86\u4e09\u4e2a\u56de\u8c03\u51fd\u6570\\neventEmitter.on(\\"data\\", () => {\\n    console.log(\\"data 1\\");\\n});\\neventEmitter.on(\\"data\\", () => {\\n    console.log(\\"data 2\\");\\n});\\neventEmitter.on(\\"data\\", () => {\\n    console.log(\\"data 3\\");\\n});\\n```\\n\\n\u8fd0\u884c\u4e0a\u8ff0\u7a0b\u5e8f\uff0c\u63a7\u5236\u53f0\u6253\u5370\u7ed3\u679c\u4e3a\\n\\n```javascript\\ndata 1\\ndata 2\\ndata 3\\n(node:36928) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 2 data listeners added to [EventEmitter]. Use emitter.setMaxListeners() to increase limit\\n```\\n\\n\u53ef\u89c1\u4e8b\u4ef6\u7ed1\u5b9a\u7684\u4e09\u4e2a\u56de\u8c03\u51fd\u6570\u90fd\u53ef\u4ee5\u88ab\u89e6\u53d1\uff0c\u5e76\u4e14\u5728\u63a7\u5236\u53f0\u6253\u5370\u51fa\u4e86\u4e00\u6761\u8b66\u544a\u4fe1\u606f\u3002\\n\\n`getMaxListeners` \u662f\u83b7\u5f97\u80fd\u4e3a\u6bcf\u4e2a\u4e8b\u4ef6\u7ed1\u5b9a\u591a\u5c11\u4e2a\u56de\u8c03\u51fd\u6570\u7684\u65b9\u6cd5\uff0c\u4f7f\u7528 `setMaxListeners` \u8bbe\u7f6e\u7684\u503c\u65f6\u591a\u5c11\uff0c\u8fd4\u56de\u7684\u503c\u5c31\u662f\u591a\u5c11\\n\\n```javascript\\nconst {EventEmitter} = require(\\"events\\");\\nconst eventEmitter = new EventEmitter();\\n\\neventEmitter.setMaxListeners(1);\\n\\nconsole.log(eventEmitter.getMaxListeners()); // 1\\n```\\n\\n\u5982\u679c\u6ca1\u6709\u4f7f\u7528 `setMaxLsiteners` \u8fdb\u884c\u8bbe\u7f6e\uff0c\u90a3\u4e48\u9ed8\u8ba4\u80fd\u591f\u4e3a\u6bcf\u4e2a\u4e8b\u4ef6\u6700\u591a\u7ed1\u5b9a `10` \u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u53ef\u4ee5\u901a\u8fc7 `EventEmitter` \u7684 `defaultMaxListeners` \u5c5e\u6027\u83b7\u5f97\u8be5\u503c\\n\\n```javascript\\nconst {EventEmitter} = require(\\"events\\");\\n\\nconsole.log(EventEmitter.defaultMaxListeners); // 10\\n```\\n\\n### listeners\u3001rawListeners\\n\\n\u5f53\u6211\u4eec\u4f7f\u7528 `once` \u7ed1\u5b9a\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u65f6\uff0c\u4e0d\u4f1a\u76f4\u63a5\u4e3a\u8be5\u4e8b\u4ef6\u7ed1\u5b9a\u8be5\u51fd\u6570\uff0c\u800c\u662f\u4f1a\u4f7f\u7528\u4e00\u4e2a\u51fd\u6570\u5305\u88c5\u8be5\u51fd\u6570\uff0c\u8fd9\u4e2a\u5305\u88c5\u51fd\u6570\u79f0\u4e3a `wrapper`\uff0c\u7136\u540e\u4e3a\u8be5\u4e8b\u4ef6\u7ed1\u5b9a `wrapper` \u51fd\u6570\uff0c\u5728 `wrapper` \u51fd\u6570\u5185\u90e8\uff0c\u8bbe\u5b9a\u4e86\u5f53\u6267\u884c\u4e00\u6b21\u4e4b\u540e\u5c06\u81ea\u5df1\u89e3\u7ed1\u7684\u903b\u8f91\u3002\\n\\n`listeners` \u8fd4\u56de\u6307\u5b9a\u4e8b\u4ef6\u7ed1\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u7ec4\u6210\u7684\u6570\u7ec4\uff0c\u800c `rawListeners` \u4e5f\u662f\u8fd4\u56de\u6307\u5b9a\u4e8b\u4ef6\u7ed1\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u7ec4\u6210\u7684\u6570\u7ec4\uff0c\u4e0e `listeners` \u4e0d\u540c\u7684\u662f\uff0c\u5bf9\u4e8e `once` \u7ed1\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u8fd4\u56de\u7684\u662f `wrapper`\uff0c\u800c\u4e0d\u662f\u539f\u751f\u7ed1\u5b9a\u7684\u51fd\u6570\u3002\\n\\n```javascript\\nconst {EventEmitter} = require(\\"events\\");\\nconst eventEmitter = new EventEmitter();\\n\\neventEmitter.once(\\"data\\", () => {\\n    console.log(\\"once\\");\\n})\\n\\nlet fns = eventEmitter.listeners(\\"data\\");\\n// once \u7ed1\u5b9a\u7684\u51fd\u6570\uff0c\u4e0d\u662f wrapper\uff0c\u5185\u90e8\u6ca1\u6709\u89e3\u7ed1\u7684\u903b\u8f91\uff0c\u6240\u4ee5\u540e\u9762\u89e6\u53d1 data \u4e8b\u4ef6\u65f6\u8fd8\u4f1a\u6267\u884c once \u7ed1\u5b9a\u7684\u51fd\u6570\\nfns[0]()\\neventEmitter.emit(\\"data\\");\\n```\\n\\n\u63a7\u5236\u53f0\u6253\u5370\u7ed3\u679c\u4e3a\\n\\n```js\\nonce\\nonce\\n```\\n\\n\u4e0b\u9762\u5c06\u4e0a\u9762\u7684 `listeners` \u66ff\u6362\u4e3a `rawListeners`\\n\\n```javascript\\nconst {EventEmitter} = require(\\"events\\");\\nconst eventEmitter = new EventEmitter();\\n\\neventEmitter.once(\\"data\\", () => {\\n    console.log(\\"once\\");\\n})\\n\\n\\nlet fns = eventEmitter.rawListeners(\\"data\\");\\n// \u56e0\u4e3a\u8fd4\u56de\u7684\u662f once \u7ed1\u5b9a\u51fd\u6570\u7684 wrapper\uff0c\u5176\u5185\u90e8\u6709\u6267\u884c\u4e00\u6b21\u540e\u89e3\u7ed1\u7684\u903b\u8f91\\n// \u6240\u4ee5\u540e\u9762\u89e6\u53d1\u4e8b\u4ef6\u65f6 once \u7ed1\u5b9a\u7684\u51fd\u6570\u4e0d\u4f1a\u518d\u6267\u884c\\nfns[0]()\\neventEmitter.emit(\\"data\\");\\n```\\n\\n\u63a7\u5236\u53f0\u7684\u6253\u5370\u7ed3\u679c\u4e3a\\n\\n```js\\nonce\\n```\\n\\n## \u5b9e\u73b0\u4e00\u4e2a EventEmitter\\n\\n\u5728\u8fd9\u4e2a\u5c0f\u8282\u5c06\u4ece\u96f6\u5b9e\u73b0\u4e00\u4e2a EventEmitter\uff0c\u6765\u52a0\u6df1\u5bf9\u8be5\u6a21\u5757\u7684\u7406\u89e3\u3002\u9996\u5148\u6211\u4eec\u9700\u8981\u51c6\u5907\u4e00\u4e2a `listeners` \u6765\u5b58\u50a8\u6240\u6709\u7ed1\u5b9a\u7684\u56de\u8c03\u51fd\u6570\uff0c\u5b83\u662f\u4e00\u4e2a `Map` \u5bf9\u8c61\uff0c\u952e\u662f\u4e8b\u4ef6\u540d\uff0c\u800c\u503c\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u6570\u7ec4\u4e2d\u4fdd\u5b58\u7684\u662f\u8be5\u4e8b\u4ef6\u7ed1\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u3002\\n\\n```javascript\\nclass EventEmitter {\\n    constructor() {\\n        this.listeners = new Map();\\n    }\\n}\\n```\\n\\n### on\u3001addListener\\n\\n\u4f7f\u7528 `on` \u7ed1\u5b9a\u56de\u8c03\u51fd\u6570\u65f6\uff0c\u6211\u4eec\u5148\u5224\u65ad `Map` \u96c6\u5408\u4e2d\u662f\u5426\u6709\u4e3a\u8be5\u4e8b\u4ef6\u7ed1\u5b9a\u56de\u8c03\u51fd\u6570\uff0c\u5982\u679c\u6709\u53d6\u51fa\u5bf9\u5e94\u6570\u7ec4\uff0c\u5e76\u6dfb\u52a0\u8be5\u56de\u8c03\u51fd\u6570\u8fdb\u6570\u7ec4\uff0c\u6ca1\u6709\u5219\u65b0\u5efa\u4e00\u4e2a\u6570\u7ec4\uff0c\u6dfb\u52a0\u8be5\u56de\u8c03\u51fd\u6570\uff0c\u5e76\u6dfb\u52a0\u8fdb `Map` \u96c6\u5408\\n\\n```javascript\\non(event, callback) {\\n    if(!this.listeners.has(event)) {\\n        this.listeners.set(event, []);\\n    }\\n    let fns = this.listeners.get(event);\\n    fns.push(callback);\\n}\\n```\\n\\n`addListener` \u7684\u529f\u80fd\u4e0e `on` \u662f\u4e00\u6837\u7684\uff0c\u6211\u4eec\u76f4\u63a5\u8c03\u7528 `on` \u65b9\u6cd5\u5373\u53ef\\n\\n```javascript\\naddListener(event, callback) {\\n    this.on(event, callback);\\n}\\n```\\n\\n### emit\\n\\n\u5f53\u6211\u4eec\u4f7f\u7528 `emit` \u89e6\u53d1\u4e8b\u4ef6\u65f6\uff0c\u6211\u4eec\u4ece `Map` \u53d6\u51fa\u5bf9\u5e94\u7684\u56de\u8c03\u51fd\u6570\u7ec4\u6210\u7684\u6570\u7ec4\uff0c\u7136\u540e\u4f9d\u6b21\u53d6\u51fa\u51fd\u6570\u6267\u884c\u3002\u53e6\u5916\u6211\u4eec\u8fd8\u53ef\u4ee5\u901a\u8fc7 `emit` \u4f20\u9012\u53c2\u6570\\n\\n```javascript\\nemit(event, ...args) {\\n    if(!this.listeners.has(event)) {\\n        return;\\n    }\\n    let fns = this.listeners.get(event);\\n    let values = [];\\n    for(let fn of fns) {\\n        values.push(fn);\\n    }\\n    for (let fn of values) {\\n        fn(...args);\\n    }\\n}\\n```\\n\\n:::tip\\n\u8fd9\u91cc\u4f60\u53ef\u80fd\u4f1a\u89c9\u5f97\u6211\u5199\u7684\u6709\u70b9\u590d\u6742\uff0c\u6240\u4ee5\u4f60\u4f1a\u89c9\u5f97\u76f4\u63a5\u8fd9\u4e48\u5199\u66f4\u597d\\n\\n```javascript\\nemit(event, ...args) {\\n    if(!this.listeners.has(event)) {\\n        return;\\n    }\\n    for (let fn of fns) {\\n        fn(...args);\\n    }\\n}\\n```\\n\\n\u4e00\u5f00\u59cb\u6211\u4e5f\u662f\u8fd9\u4e48\u5199\u7684\uff0c\u4f46\u662f\u56e0\u4e3a `once` \u7ed1\u5b9a\u7684\u51fd\u6570\u5b83\u5728\u6267\u884c\u5b8c\u6bd5\u540e\u5c06\u81ea\u5df1\u4ece\u6570\u7ec4\u4e2d\u79fb\u9664\uff0c\u5e76\u4e14\u662f\u540c\u6b65\u7684\uff0c\u6240\u4ee5\u5728\u6267\u884c\u5faa\u73af\u7684\u65f6\u5019\uff0c\u6570\u7ec4\u662f\u5728\u4e0d\u65ad\u53d8\u5316\u7684\uff0c\u4f7f\u7528\u4e0a\u8ff0\u7684\u65b9\u5f0f\u4f1a\u4f7f\u5f97\u4e00\u4e9b\u56de\u8c03\u51fd\u6570\u4f1a\u88ab\u6f0f\u6389\uff0c\u6240\u4ee5\u6211\u624d\u4f1a\u5148\u5c06\u6570\u7ec4\u4e2d\u7684\u51fd\u6570\u590d\u5236\u5230\u53e6\u4e00\u4e2a\u6570\u7ec4\uff0c\u7136\u540e\u904d\u5386\u8fd9\u4e2a\u65b0\u7684\u6570\u7ec4\uff0c\u56e0\u4e3a `once` \u7ed1\u5b9a\u7684\u51fd\u6570\u5b83\u53ea\u4f1a\u5220\u9664\u539f\u6570\u7ec4\u4e2d\u7684\u51fd\u6570\uff0c\u800c\u4e0d\u4f1a\u5220\u9664\u65b0\u7684\u8fd9\u4e2a\u6570\u7ec4\uff0c\u6240\u4ee5\u65b0\u6570\u7ec4\u7684\u957f\u5ea6\u5728\u904d\u5386\u7684\u8fc7\u7a0b\u4e0d\u4f1a\u6539\u53d8\uff0c\u4e5f\u5c31\u4e0d\u4f1a\u53d1\u751f\u6f0f\u6389\u51fd\u6570\u672a\u6267\u884c\u7684\u60c5\u51b5\u3002\\n:::\\n\\n\\n### prependListener\\n\\n\u5b9e\u73b0 `prependListener` \u7684\u903b\u8f91\u540c `on` \u4e00\u6837\uff0c\u4e0d\u8fc7\u6211\u4eec\u662f\u5f80\u6570\u7ec4\u7684\u6700\u524d\u65b9\u6dfb\u52a0\u56de\u8c03\u51fd\u6570\\n\\n```javascript\\nprependListener(event, callback) {\\n    if(!this.listeners.has(event)) {\\n        this.listeners.set(event, []);\\n    }\\n    let fns = this.listeners.get(event);\\n    fns.unshift(callback);\\n}\\n```\\n\\n### off\u3001removeListener\\n\\n\u4f7f\u7528 `off` \u65b9\u6cd5\u662f\u7528\u6765\u89e3\u7ed1\u4e8b\u4ef6\u7684\uff0c\u5728\u6570\u7ec4\u4e2d\u627e\u5230\u6307\u5b9a\u7684\u51fd\u6570\uff0c\u7136\u540e\u5220\u9664\u5373\u53ef\\n\\n```javascript\\noff(event, callback) {\\n    if(!this.listeners.has(event)) {\\n        return;\\n    }\\n    let fns = this.listeners.get(event);\\n    // \u627e\u51fa\u6570\u7ec4\u4e2d\u7684\u56de\u8c03\u51fd\u6570\uff0c\u7136\u540e\u5220\u9664\\n    for (let i = 0; i < fns.length; i++) {\\n        if(fns[i] === callback) {\\n            fns.splice(i, 1);\\n            break;\\n        }\\n    }\\n    // \u5982\u679c\u5220\u9664\u56de\u8c03\u51fd\u6570\u540e\uff0c\u6570\u7ec4\u4e3a\u7a7a\uff0c\u5219\u5220\u9664\u8be5\u4e8b\u4ef6\\n    if (fns.length === 0) {\\n        this.listeners.delete(event);\\n    }\\n}\\n```\\n\\n`removeListener` \u540c `off` \u7684\u4f5c\u7528\u4e00\u6837\uff0c\u6211\u4eec\u5728\u5185\u90e8\u76f4\u63a5\u8c03\u7528 `off` \u65b9\u6cd5\u5373\u53ef\\n\\n```javascript\\nremoveListener(event, callback) {\\n    this.off(event, callback);\\n}\\n```\\n\\n### once\u3001prependOnceListener\\n\\n\u4f7f\u7528 `once` \u7ed1\u5b9a\u4e00\u4e2a\u53ea\u6267\u884c\u4e00\u6b21\u7684\u51fd\u6570\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5c06\u7ed1\u5b9a\u7684\u56de\u8c03\u51fd\u6570\u4f7f\u7528\u4e00\u4e2a\u51fd\u6570\u5305\u88c5\u4e00\u4e0b\uff0c\u7136\u540e\u6dfb\u52a0\u8fdb\u6570\u7ec4\u4e2d\uff0c\u8fd9\u4e2a\u5305\u88c5\u51fd\u6570\u6211\u4eec\u79f0\u4e4b\u4e3a `wrapper`\u3002\u5728\u5305\u88c5\u51fd\u6570\u4e2d\uff0c\u5f53\u6267\u884c\u4e00\u904d\u540e\u4f1a\u5c06\u81ea\u5df1\u4ece\u6570\u7ec4\u4e2d\u5220\u9664\\n\\n```javascript\\nonce(event, callback) {\\n    let wrapper = (...args) => {\\n        callback(...args);\\n        this.off(event, wrapper);\\n    }\\n    if(!this.listeners.has(event)) {\\n        this.listeners.set(event, []);\\n    }\\n    let fns = this.listeners.get(event);\\n    fns.push(wrapper);\\n}\\n```\\n\\n`prependOnceListener` \u7684\u5b9e\u73b0\u540c `once`\uff0c\u53ea\u662f\u5411\u6570\u7ec4\u7684\u5f00\u5934\u63d2\u5165\u51fd\u6570\uff0c\u5c06\u4e0a\u9762\u4ee3\u7801\u4e2d\u7684 `push` \u6362\u4e3a `unshift` \u5373\u53ef\\n\\n```javascript\\nprependOnceListener(event, callback) {\\n    let wrapper = (...args) => {\\n        callback(...args);\\n        this.off(event, wrapper);\\n    }\\n    if(!this.listeners.has(event)) {\\n        this.listeners.set(event, []);\\n    }\\n    let fns = this.listeners.get(event);\\n    fns.unshift(wrapper);\\n}\\n```\\n\\n### removeAllListeners\\n\\n\u76f4\u63a5\u4ece\u5220\u9664\u5bf9\u5e94\u7684\u4e8b\u4ef6\uff0c\u5982\u679c\u6ca1\u6709\u4f20\u5165\u5177\u4f53\u4e8b\u4ef6\u7684\u8bdd\uff0c\u5219\u9700\u8981\u5220\u9664\u6240\u6709\u7684\u4e8b\u4ef6\\n\\n```javascript\\nremoveAllListeners(event) {\\n    // \u5982\u679c\u6ca1\u6709\u4f20\u5165 event\uff0c\u5219\u5220\u9664\u6240\u6709\u4e8b\u4ef6\\n    if (event === undefined) {\\n        this.listeners = new Map();\\n        return;\\n    }\\n    this.listeners.delete(event);\\n}\\n```\\n\\n### eventNames\\n\\n\u83b7\u5f97\u5df2\u7ecf\u7ed1\u5b9a\u4e86\u54ea\u4e9b\u4e8b\u4ef6\\n\\n```javascript\\neventNames() {\\n    return [...this.listeners.keys()];\\n}\\n```\\n\\n### listenerCount\\n\\n\u83b7\u5f97\u67d0\u4e8b\u4ef6\u7ed1\u5b9a\u53ef\u591a\u5c11\u4e2a\u56de\u8c03\u51fd\u6570\\n\\n```javascript\\nlistenerCount(event) {\\n    return this.listeners.get(event).length;\\n}\\n```\\n\\n:::tip\\n\\n\u4e0a\u8ff0\u7684\u5b9e\u73b0\u6709\u4e00\u4e2a bug\uff0c\u90a3\u5c31\u662f\u65e0\u6cd5\u5220\u9664\u4f7f\u7528 `once` \u7ed1\u5b9a\u7684\u51fd\u6570\uff0c\u6211\u7684\u60f3\u6cd5\u662f\u4f7f\u7528\u4e00\u4e2a `Map` \u5c06 `once` \u7ed1\u5b9a\u7684\u51fd\u6570\u540c\u5bf9\u5e94\u7684 `wrapper` \u5bf9\u5e94\uff0c\u5220\u9664\u65f6\u5373\u53ef\u6839\u636e `once` \u7684\u56de\u8c03\u51fd\u6570\u627e\u5230\u5bf9\u5e94\u7684 `wrapper` \u7136\u540e\u5220\u9664\\n\\n```javascript\\nconstructor() {\\n    this.listeners = new Map();\\n    // \u4fdd\u5b58 once \u7684\u56de\u8c03\u51fd\u6570\u4e0e\u5bf9\u5e94\u7684 wrapper \\n    this.onceToWrapper = new Map();\\n}\\n\\nonce(event, callback) {\\n    let wrapper = (...args) => {\\n        callback(...args);\\n        // \u5220\u9664\u4e4b\u524d\uff0c\u5220\u9664 callback \u548c wrapper \u7684\u5173\u7cfb\\n        this.onceToWrapper.delete(callback);\\n        this.off(event, wrapper);\\n    }\\n    if(!this.listeners.has(event)) {\\n        this.listeners.set(event, []);\\n    }\\n    let fns = this.listeners.get(event);\\n    // \u6dfb\u52a0\u4e4b\u524d\uff0c\u7ed1\u5b9a callback \u548c wrapper \u7684\u5173\u7cfb\\n    this.onceToWrapper.set(callback, wrapper);\\n    fns.push(wrapper);\\n}\\n\\nprependOnceListener(event, callback) {\\n    let wrapper = (...args) => {\\n        callback(...args);\\n        // \u540c\u4e0a\\n        this.onceToWrapper.delete(callback);\\n        this.off(event, wrapper);\\n    }\\n    if(!this.listeners.has(event)) {\\n        this.listeners.set(event, []);\\n    }\\n    let fns = this.listeners.get(event);\\n    // \u540c\u4e0a\\n    this.onceToWrapper.set(callback, wrapper);\\n    fns.unshift(wrapper);\\n}\\n\\noff(event, callback) {\\n    if(!this.listeners.has(event)) {\\n        return;\\n    }\\n    let fns = this.listeners.get(event);\\n    // \u5148\u4ece onceToWrapper \u4e2d\u67e5\u627e\u662f\u5426\u6709\u5bf9\u5e94\u7684 wrapper\uff0c\u5982\u679c\u6709\u8bf4\u660e\u662f once \u7ed1\u5b9a\u7684\\n    callback = this.onceToWrapper.get(callback) || callback;\\n    for (let i = 0; i < fns.length; i++) {\\n        if(fns[i] === callback) {\\n            fns.splice(i, 1);\\n            break;\\n        }\\n    }\\n    if (fns.length === 0) {\\n        this.listeners.delete(event);\\n    }\\n}\\n```\\n:::\\n\\n\u5168\u90e8\u4ee3\u7801\u5982\u4e0b\\n\\n```javascript\\nclass EventEmitter {\\n    constructor() {\\n        this.listeners = new Map();\\n        this.onceToWrapper = new Map();\\n    }\\n\\n    on(event, callback) {\\n        if(!this.listeners.has(event)) {\\n            this.listeners.set(event, []);\\n        }\\n        let fns = this.listeners.get(event);\\n        fns.push(callback);\\n    }\\n\\n    addListener(event, callback) {\\n        this.on(event, callback);\\n    }\\n\\n    emit(event, ...args) {\\n        if(!this.listeners.has(event)) {\\n            return;\\n        }\\n        let fns = this.listeners.get(event);\\n        let values = [];\\n        for(let fn of fns) {\\n            values.push(fn);\\n        }\\n        for (let fn of values) {\\n            fn(...args);\\n        }\\n    }\\n\\n    prependListener(event, callback) {\\n        if(!this.listeners.has(event)) {\\n            this.listeners.set(event, []);\\n        }\\n        let fns = this.listeners.get(event);\\n        fns.unshift(callback);\\n        \\n    }\\n\\n    off(event, callback) {\\n        if(!this.listeners.has(event)) {\\n            return;\\n        }\\n        let fns = this.listeners.get(event);\\n        callback = this.onceToWrapper.get(callback) || callback;\\n        for (let i = 0; i < fns.length; i++) {\\n            if(fns[i] === callback) {\\n                fns.splice(i, 1);\\n                break;\\n            }\\n        }\\n        if (fns.length === 0) {\\n            this.listeners.delete(event);\\n        }\\n    }\\n\\n    removeListener(event, callback) {\\n        this.off(event, callback);\\n    }\\n\\n    once(event, callback) {\\n        let wrapper = (...args) => {\\n            callback(...args);\\n            this.onceToWrapper.delete(callback);\\n            this.off(event, wrapper);   \\n        }\\n        if(!this.listeners.has(event)) {\\n            this.listeners.set(event, []);\\n        }\\n        let fns = this.listeners.get(event);\\n        this.onceToWrapper.set(callback, wrapper);\\n        fns.push(wrapper);\\n    }\\n\\n    prependOnceListener(event, callback) {\\n        let wrapper = (...args) => {\\n            callback(...args);\\n            this.onceToWrapper.delete(callback);\\n            this.off(event, wrapper);\\n        }\\n        if(!this.listeners.has(event)) {\\n            this.listeners.set(event, []);\\n        }\\n        let fns = this.listeners.get(event);\\n        this.onceToWrapper.set(callback, wrapper);\\n        \\n        fns.unshift(wrapper);\\n    }\\n\\n    removeAllListeners(event) {\\n        if (event === undefined) {\\n            this.listeners = new Map();\\n            return;\\n        }\\n        this.listeners.delete(event);\\n    }\\n\\n    eventNames() {\\n        return [...this.listeners.keys()];\\n    }\\n\\n    listenerCount(event) {\\n        return this.listeners.get(event).length;\\n    }\\n}\\n```\\n\\n## \u53c2\u8003\u6587\u732e\\n\\n- [How to code your own event emitter in Node.js: a step-by-step guide](https://www.freecodecamp.org/news/how-to-code-your-own-event-emitter-in-node-js-a-step-by-step-guide-e13b7e7908e1/)\\n- [Nodejs|Events](https://nodejs.org/api/events.html)"},{"id":"/2021/03/06/Stream","metadata":{"permalink":"/blog/2021/03/06/Stream","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2021-03-06-Stream.mdx","source":"@site/blog/2021-03-06-Stream.mdx","title":"Stream","description":"\u5f15\u5165 Stream","date":"2021-03-06T00:00:00.000Z","formattedDate":"2021\u5e743\u67086\u65e5","tags":[{"label":"Node","permalink":"/blog/tags/node"},{"label":"Stream","permalink":"/blog/tags/stream"}],"readingTime":20.41,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"alug":"stream","authors":"xiongtao","tags":["Node","Stream"]},"prevItem":{"title":"EventEmitter","permalink":"/blog/EventEmitter"},"nextItem":{"title":"Buffer","permalink":"/blog/Buffer"}},"content":"## \u5f15\u5165 Stream\\n\\n\u5047\u8bbe\u6211\u4eec\u6709\u8fd9\u4e48\u4e00\u4e2a\u9700\u6c42\uff0c\u6211\u4eec\u9700\u8981\u590d\u5236\u4e00\u4e2a\u6587\u4ef6\u4e2d\u7684\u5185\u5bb9\u5230\u53e6\u4e00\u4e2a\u6587\u4ef6\u4e2d\uff0c\u6211\u4eec\u4f1a\u5199\u51fa\u4ee5\u4e0b\u4ee3\u7801\\n\\n```javascript\\nconst fs = require(\'fs\');\\nconst path = require(\'path\');\\n\\nconst copy = (source, target) => {\\n    fs.readFile(path.resolve(source), (err, data) => {\\n        if(err) {\\n            throw new Error(err.toString());\\n            return;\\n        }\\n        fs.writeFile(path.resolve(target), data, (err) => {\\n            if(!err) {\\n                console.log(\\"\u590d\u5236\u6210\u529f\uff01\\");\\n            }\\n        })\\n    })\\n}\\n```\\n\\n\x3c!--truncate--\x3e\\n\\n\u4e0a\u9762\u7684\u4ee3\u7801\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u5148\u8bfb\u53d6 `source` \u6587\u4ef6\u91cc\u9762\u7684\u5185\u5bb9\uff0c\u7136\u540e\u5c06\u5185\u5bb9\u5199\u5165\u5230 `target` \u6587\u4ef6\u4e2d\u3002\u5b83\u7684\u7279\u70b9\u662f\u9700\u8981\u8bfb\u53d6\u5b8c `source` \u91cc\u9762\u7684**\u6240\u6709\u5185\u5bb9**\uff0c\u7136\u540e\u5c06\u5185\u5bb9\u5199\u5165\u5230 `target` \u4e2d\u3002\\n\\n\u8fd9\u6837\u505a\u5c31\u6709\u4e00\u4e2a\u7f3a\u70b9\uff0c\u5f53\u6211\u4eec\u8bfb\u53d6\u5927\u6587\u4ef6\u65f6\uff0c\u53ef\u80fd\u4f1a\u53d1\u751f\u5185\u5b58\u4e0d\u591f\u7528\u7684\u60c5\u51b5\uff0c\u56e0\u4e3a\u5b83\u4f1a\u5148\u5c06\u6587\u4ef6\u7684\u6240\u6709\u5185\u5bb9\u90fd\u8bfb\u53d6\u5230\u5185\u5b58\uff1b\u53e6\u5916\u8fd8\u5c31\u662f\u65f6\u95f4\uff0c\u4e00\u6b21\u6027\u8bfb\u53d6\u4e00\u4e2a\u5927\u6587\u4ef6\u5230\u5185\u5b58\uff0c\u662f\u9700\u8981\u6bd4\u8f83\u957f\u7684\u65f6\u95f4\u7684\uff0c\u7528\u6237\u53ef\u80fd\u4f1a\u6709\u5361\u987f\u7684\u611f\u89c9\u3002\\n\\n\u53e6\u4e00\u79cd\u89e3\u51b3\u529e\u6cd5\u5c31\u662f\u8fb9\u8bfb\u8fb9\u5199\uff0c\u8bfb\u53d6\u90e8\u5206\u6587\u4ef6\u5185\u5bb9\uff0c\u7136\u540e\u5c06\u5185\u5bb9\u5199\u5165\u5230\u65b0\u6587\u4ef6\u4e2d\uff0c\u8fd9\u6837\u5728\u5185\u5b58\u4e2d\u7684\u6570\u636e\u53ea\u662f\u90e8\u5206\u5185\u5bb9\uff0c\u4e0d\u4f1a\u5360\u6709\u592a\u591a\u7684\u5185\u5b58\uff0c\u7531\u4e8e\u662f\u8fb9\u8bfb\u7f16\u5199\uff0c\u7528\u6237\u53ef\u4ee5\u5f88\u5feb\u7684\u5f97\u5230\u54cd\u5e94\uff0c\u63d0\u9ad8\u7528\u6237\u4f53\u9a8c\u3002\\n\\n\u5728[\u7f51\u4e0a](https://www.cnblogs.com/vajoy/p/6349817.html)\u627e\u5230\u4e00\u5e45\u52a8\u56fe\u6765\u5f62\u8c61\u7684\u5c55\u793a\u4f7f\u7528\u6d41\u524d\u540e\u6570\u636e\u7684\u6d41\u52a8\u60c5\u51b5\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20210305123350.gif\\" />\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20210305123407.gif\\"/>\\n\\nNode.js \u7ed9\u6211\u4eec\u63d0\u4f9b Stream \u7684 API\uff0c\u5b83\u662f\u4e13\u95e8\u7528\u6765\u5904\u7406\u5927\u6587\u4ef6\u7684\u3002\u56e0\u4e3a\u6570\u636e\u662f\u4e00\u90e8\u5206\u4e00\u90e8\u5206\u7684\u5904\u7406\uff0c\u5c31\u50cf\u662f\u6c34\u6d41\u4e00\u6837\uff0c\u6240\u4ee5\u8fd9\u4e2a\u6a21\u5757\u7684\u540d\u79f0\u5c31\u79f0\u4e3a Stream\u3002\\n\\n```javascript\\nconst fs = require(\'fs\');\\n\\nfunction copy(source, target) {\\n    const rs = fs.createReadStream(source);\\n    const ws = fs.createWriteStream(target);\\n\\n    rs.on(\'data\', data => {\\n        ws.write(data);\\n    });\\n\\n    rs.on(\'end\', () => {\\n        ws.end();\\n    });\\n}\\n```\\n\\n\u4e0a\u9762\u4ee3\u7801\u7684\u7ec6\u8282\u5c06\u5728\u540e\u6587\u63ed\u6653\u3002\\n\\n## Stream \u7684\u5206\u7c7b\\n\\nStream \u53ef\u4ee5\u5206\u4e3a\u56db\u7c7b\\n\\n- Readable\uff1a\u53ef\u8bfb\u6d41\uff0c\u6570\u636e\u7684\u63d0\u4f9b\u8005\\n- Writeable\uff1a\u53ef\u5199\u6d41\uff0c\u6570\u636e\u7684\u6d88\u8d39\u8005\\n- Duplex\uff1a\u53ef\u5199\u53ef\u8bfb\u6d41(\u53cc\u5de5\u6d41)\\n- Transform\uff1a\u662f Duplex \u7684\u7279\u6b8a\u60c5\u51b5\uff0c\u8f6c\u6362\u6d41\uff0c\u5bf9\u8f93\u5165\u7684\u6570\u636e\u8fdb\u884c\u5904\u7406\uff0c\u7136\u540e\u8f93\u51fa\\n\\n\u53ef\u8bfb\u6d41\u4e0e\u53ef\u5199\u6d41\u662f\u57fa\u7840\uff0c\u5e38\u89c1\u7684\u53ef\u8bfb\u6d41\u4e0e\u53ef\u5199\u6d41\u5982\u4e0b\\n\\n| \u53ef\u8bfb\u6d41 | \u53ef\u5199\u6d41 |\\n| -- | -- |\\n| HTTP Request | HTTP Reponse |\\n| fs read streams| fs write streams |\\n| process.stdin | process.stdout |\\n| TCP sockets | TCP sockets|\\n| zlib streams | zlib streams|\\n| crypto streams | crypto streams|\\n\\nStream \u662f EventEmitter \u7684\u5b9e\u4f8b\uff0c\u6709\u81ea\u5b9a\u4e49\u7684\u4e8b\u4ef6\u3002\\n\\n### Readable Stream\\n\\n\u53ef\u8bfb\u6d41\u6709\u4e24\u4e2a\u6a21\u5f0f\uff0c\u6682\u505c\u6a21\u5f0f\u4e0e\u6d41\u52a8\u6a21\u5f0f\u3002\u5f53\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u6d41\u65f6\uff0c\u5982\u679c\u6211\u4eec\u76d1\u542c\u4e86 `readable` \u4e8b\u4ef6\uff0c\u5b83\u5c31\u4f1a\u6765\u5230\u6682\u505c\u6a21\u5f0f\uff0c\u5728\u6682\u505c\u6a21\u5f0f\u4e0b\uff0c\u5b83\u4f1a\u4e0d\u65ad\u7684\u8bfb\u53d6\u6570\u636e\u5230\u7f13\u51b2\u533a\uff0c\u5f53\u8bfb\u53d6\u5230\u7684\u6570\u636e\u8d85\u8fc7\u9884\u8bbe\u7684\u5927\u5c0f\u65f6\uff0c\u5b83\u7531\u5c5e\u6027 `highWaterMark` \u6307\u5b9a(\u9ed8\u8ba4\u4e3a 64kB)\uff0c\u4fbf\u4f1a\u89e6\u53d1 `readable` \u4e8b\u4ef6\uff0c`readable` \u4e8b\u4ef6\u7684\u89e6\u53d1\u6709\u4e24\u79cd\u60c5\u51b5\uff1a\\n\\n- \u7f13\u5b58\u533a\u4e2d\u7684\u6570\u636e\u8fbe\u5230 `highWaterMark` \u9884\u8bbe\u7684\u5927\u5c0f\\n- \u6570\u636e\u6e90\u7684\u6570\u636e\u5df2\u7ecf\u88ab\u8bfb\u53d6\u5b8c\u6bd5\\n\\n```javascript\\nconst fs = require(\'fs\');\\n\\nconst rs = fs.createReadStream(\'a.txt\', {\\n    highWaterMark: 1 // \u7f13\u5b58\u533a\u6700\u591a\u5b58\u50a8 1 \u5b57\u8282\\n});\\n\\nrs.on(\'readable\', () => {\\n    let data;\\n    while(data=rs.read()) {\\n        console.log(data.toString());\\n    }\\n})\\n```\\n\\n\u4e0a\u9762\u7684\u7a0b\u5e8f\u8bbe\u7f6e `highWaterMark` \u4e3a 1\uff0c\u5373\u6bcf\u6b21\u8bfb\u53d6\u5230\u4e00\u4e2a\u5b57\u8282\u4fbf\u4f1a\u89e6\u53d1 `readable` \u547d\u4ee4\uff0c\u6bcf\u6b21\u5f53\u89e6\u53d1 `readable` \u547d\u4ee4\u65f6\uff0c\u6211\u4eec\u8c03\u7528\u53ef\u8bfb\u6d41\u7684 `read([size])` \u65b9\u6cd5\u4ece\u7f13\u51b2\u533a\u4e2d\u8bfb\u53d6\u6570\u636e(\u8bfb\u53d6\u5230\u7684\u6570\u636e\u4e3a Buffer)\uff0c\u7136\u540e\u6253\u5370\u5230\u63a7\u5236\u53f0\u3002\\n\\n\u5f53\u6211\u4eec\u4e3a\u53ef\u8bfb\u6d41\u7ed1\u5b9a `data` \u4e8b\u4ef6\u65f6\uff0c\u53ef\u8bfb\u6d41\u4fbf\u4f1a\u5207\u6362\u5230\u6d41\u52a8\u72b6\u6001\uff0c\u5f53\u4f4d\u4e8e\u6d41\u52a8\u72b6\u6001\u65f6\uff0c\u53ef\u8bfb\u6d41\u4f1a\u81ea\u52a8\u7684\u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\u5185\u5bb9\u5230\u7f13\u51b2\u533a\uff0c\u5f53\u7f13\u51b2\u533a\u4e2d\u7684\u5185\u5bb9\u5927\u4e8e\u8bbe\u5b9a\u7684 `highWaterMark` \u7684\u5927\u5c0f\u65f6\uff0c\u4fbf\u4f1a\u89e6\u53d1 `data` \u4e8b\u4ef6\uff0c\u5c06\u7f13\u51b2\u533a\u4e2d\u7684\u6570\u636e\u4f20\u9012\u7ed9 `data` \u4e8b\u4ef6\u7ed1\u5b9a\u7684\u51fd\u6570\u3002\u4ee5\u4e0a\u8fc7\u7a0b\u4f1a\u81ea\u52a8\u4e0d\u65ad\u8fdb\u884c\u3002\u5f53\u6587\u4ef6\u4e2d\u7684\u6240\u6709\u5185\u5bb9\u90fd\u88ab\u8bfb\u53d6\u5b8c\u6210\u65f6\uff0c\u90a3\u4e48\u5c31\u4f1a\u89e6\u53d1 `end` \u4e8b\u4ef6\u3002\\n\\n```javascript\\nconst fs = require(\'fs\');\\n\\nconst rs = fs.createReadStream(\'a.txt\', {\\n    highWaterMark: 2\\n});\\n\\nrs.on(\'data\', data => {\\n    console.log(data.toString());\\n});\\n\\nrs.on(\'end\', () => {\\n    console.log(\\"\u6587\u4ef6\u8bfb\u53d6\u5b8c\u6bd5\uff01\\");\\n});\\n```\\n\\n\u6682\u505c\u6a21\u5f0f\u50cf\u662f\u624b\u52a8\u6b65\u67aa\uff0c\u800c\u6d41\u52a8\u6a21\u5f0f\u5219\u50cf\u662f\u81ea\u52a8\u6b65\u67aa\u3002\u6682\u505c\u6a21\u5f0f\u4e0e\u6d41\u52a8\u6a21\u5f0f\u4e5f\u53ef\u4ee5\u76f8\u4e92\u5207\u6362\uff0c\u901a\u8fc7 `pause()` \u53ef\u4ee5\u4ece\u6d41\u52a8\u72b6\u6001\u5207\u6362\u5230\u6682\u505c\u72b6\u6001\uff0c\u901a\u8fc7 `resume()` \u5219\u53ef\u4ee5\u4ece\u6682\u505c\u6a21\u5f0f\u5207\u6362\u5230\u6d41\u52a8\u6a21\u5f0f\u3002\\n\\n\u53ef\u8bfb\u6d41\u7684\u4e00\u4e2a\u7ecf\u5178\u5b9e\u4f8b\u5c31\u662f `http` \u4e2d\u7684\u8bf7\u6c42\u5bf9\u8c61 `req`\uff0c\u4e0b\u9762\u7684\u7a0b\u5e8f\u5c55\u793a\u4e86\u901a\u8fc7\u76d1\u542c `req` \u7684 `data` \u4e8b\u4ef6\u6765\u8bfb\u53d6 HTTP \u8bf7\u6c42\u4f53\u4e2d\u7684\u5185\u5bb9\\n\\n```javascript\\nconst http = require(\'http\');\\n\\nconst app = http.createServer();\\n\\napp.on(\'request\', (req, res) => {\\n    let datas = [];\\n    req.on(\'data\', data => {\\n        datas.push(data);\\n    });\\n\\n    req.on(\'end\', () => {\\n        req.body = Buffer.concat(datas);\\n        // \u5f53\u8bfb\u53d6\u5b8c body \u4e2d\u7684\u5185\u5bb9\u4e4b\u540e\uff0c\u5c06\u5185\u5bb9\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\\n        res.end(req.body);\\n    });\\n})\\n\\napp.listen(3000, () => {\\n    console.log(\\"\u670d\u52a1\u542f\u52a8\u5728 3000 \u7aef\u53e3... ...\\");\\n})\\n```\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20210305204222.png\\" style={{ zoom: \'50%\' }}/>\\n\\n### Writable Stream\\n\\n\u53ef\u5199\u6d41\u4e0e\u53ef\u8bfb\u6d41\u76f8\u4f3c\uff0c\u5f53\u6211\u4eec\u5411\u53ef\u5199\u6d41\u5199\u5165\u6570\u636e\u65f6(\u901a\u8fc7\u53ef\u5199\u6d41\u7684 `write()` \u65b9\u6cd5\u5199\u6570\u636e)\uff0c\u4f1a\u76f4\u63a5\u5c06\u6570\u636e\u5199\u5165\u5230\u6587\u4ef6\u4e2d\uff0c\u5982\u679c\u5199\u5165\u7684\u6570\u636e\u6bd4\u8f83\u6162\u7684\u8bdd\uff0c\u90a3\u5c31\u5c31\u4f1a\u5c06\u6570\u636e\u5199\u5165\u5230\u7f13\u51b2\u533a\uff0c\u5f53\u7f13\u51b2\u533a\u4e2d\u7684\u5185\u5bb9\u8fbe\u5230 `highWaterMark` \u8bbe\u5b9a\u7684\u5927\u5c0f\u65f6\uff0c`write` \u65b9\u6cd5\u5c31\u4f1a\u8fd4\u56de\u4e00\u4e2a `false`\uff0c\u8868\u660e\u4e0d\u80fd\u63a5\u53d7\u66f4\u591a\u7684\u6570\u636e\u4e86\u3002\\n\\n\u5f53\u7f13\u51b2\u533a\u4e2d\u7684\u6570\u636e\u5168\u90e8\u88ab\u6d88\u8d39\u5b8c\u4e86(\u5199\u5165\u4e86\u6587\u4ef6\u4e2d\u6216\u8005\u88ab\u522b\u7684\u6d41\u6d88\u8d39\u4e86)\uff0c\u90a3\u4e48\u5c31\u4f1a\u89e6\u53d1 `drain` \u4e8b\u4ef6\u3002\\n\\n```javascript\\nconst fs = require(\'fs\');\\n\\nconst ws = fs.createWriteStream(\'b.txt\', {\\n    highWaterMark: 16 * 1024\\n});\\n\\nfunction writeMillionTimes(writer, data, encoding, callback) {\\n    let i = 10000;\\n    \\n    write();\\n\\n    function write() {\\n        // \u8868\u793a\u662f\u5426\u53ef\u4ee5\u5411\u53ef\u5199\u6d41\u4e2d\u5199\u5165\u6570\u636e\\n        let ok = true;\\n        while(i-- > 0 && ok) {\\n            // \u5f53 writer.write() \u65b9\u6cd5\u8fd4\u56de  false \u8868\u793a\u4e0d\u53ef\u5199\u5165\u6570\u636e\\n            ok = writer.write(data, encoding, i === 0 ? callback : null);\\n        }\\n\\n        if(i > 0) {\\n            // \u8bf4\u660e ok \u4e3a false\uff0c\u5373\u4e0d\u80fd\u5411\u7f13\u51b2\u533a\u4e2d\u5199\u5165\u5185\u5bb9\u4e86\\n            console.log(\\"drain\\", i);\\n            // \u76d1\u542c drain \u4e8b\u4ef6\uff0c\u5f53\u961f\u5217\u6d88\u8d39\u5b8c\u6bd5\u65f6\u7ee7\u7eed\u8c03\u7528 write() \u65b9\u6cd5\u5199\u5165\\n            writer.once(\'drain\', write);\\n        }\\n    }\\n}\\n\\nwriteMillionTimes(ws, \'simple\', \'utf-8\', () => {\\n    console.log(\\"end\\");\\n})\\n```\\n\\n\u8f93\u51fa\u4e3a\\n\\n```javascript\\ndrain 7268\\ndrain 4536\\ndrain 1804\\nend\\n```\\n\\n\u8bf4\u660e\u6709\u4e09\u6b21\u7f13\u51b2\u533a\u4e2d\u7684\u5185\u5bb9\u8fbe\u5230\u4e86 16KB\uff0c\u53ef\u4ee5\u9a8c\u7b97\u4e0a\u9762\u7684\u6570\u5b57\u4e4b\u95f4\u7684\u5dee\u503c\uff0c\u5728\u4e58\u4ee5 `6`(simple \u7684\u5b57\u8282\u6570)\uff0c\u5927\u5c0f\u5927\u7ea6\u4e3a `16 * 1024` \u5de6\u53f3\uff0c\u5982\\n\\n$$\\n(7268 - 4536) * 6 = 16392 \\\\approx 16384 = 16 * 1024\\n$$\\n\\n\u6211\u4eec\u8fd8\u53ef\u4ee5\u8c03\u7528\u53ef\u5199\u6d41\u7684 `end()` \u65b9\u6cd5\uff0c\u8868\u793a\u5c06\u7f13\u5b58\u4e2d\u7684\u5185\u5bb9\u6e05\u7a7a\u5199\u5165\u6587\u4ef6\uff0c\u5e76\u5173\u95ed\u6587\u4ef6\uff0c\u6b64\u65f6\u4f1a\u89e6\u53d1 `close` \u4e8b\u4ef6\\n\\n```javascript\\nconst fs = require(\'fs\');\\n\\nconst ws = fs.createWriteStream(\'b.txt\');\\n\\nws.write(\'Hello\');\\nws.write(\'World\');\\nws.end(\'!\');\\n\\nws.on(\'close\', () => {\\n    console.log(\\"close\\"); // close\\n})\\n```\\n\\n\u5f53\u8c03\u7528 `end()` \u65b9\u6cd5\u4e4b\u540e\u5c31\u4e0d\u80fd\u8c03\u7528 `write()` \u65b9\u6cd5\u4e86\uff0c\u5426\u5219\u4f1a\u62a5\u9519\\n\\n```javascript\\nconst fs = require(\'fs\');\\n\\nconst ws = fs.createWriteStream(\'b.txt\');\\n\\nws.write(\'Hello\');\\nws.write(\'World\');\\nws.end(\'!\');\\n\\nws.write(\'write again\'); // Error [ERR_STREAM_WRITE_AFTER_END]: write after end\\n```\\n\\n\u5f53\u8c03\u7528 `end()` \u65b9\u6cd5\u4e4b\u540e\uff0c\u5e76\u4e14\u6570\u636e\u7f13\u51b2\u533a\u4e2d\u7684\u6570\u636e\u5df2\u7ecf\u5199\u5165\u4e4b\u540e\u4f1a\u89e6\u53d1\u53ef\u5199\u6d41\u7684 `finish` \u4e8b\u4ef6\\n\\n```javascript\\nconst fs = require(\'fs\');\\n\\nconst ws = fs.createWriteStream(\'b.txt\');\\n\\nws.write(\'Hello\');\\nws.write(\'World\');\\nws.end(\'!\');\\n\\nws.on(\'close\', () => {\\n    console.log(\\"close\\");\\n});\\n\\nws.on(\'finish\', () => {\\n    console.log(\\"finish\\");\\n});\\n```\\n\\n\u6253\u5370\u7ed3\u679c\u662f\\n\\n```\\nfinish\\nclose\\n```\\n\\n\u8bf4\u660e `finish` \u4e8b\u4ef6\u4f1a\u5728 `close` \u4e8b\u4ef6\u4e4b\u524d\u88ab\u89e6\u53d1\u3002\\n\\n\u53ef\u5199\u6d41\u7684\u7ecf\u5178\u4f8b\u5b50\u5c31\u662f `http` \u6a21\u5757\u7684\u54cd\u5e94\u5bf9\u8c61 `res`\uff0c\u4e0b\u9762\u7684\u7a0b\u5e8f\u6f14\u793a\u4e86\u5f53\u8bf7\u6c42\u5230\u6765\u65f6\uff0c\u6211\u4eec\u8bfb\u53d6\u4e00\u4e2a `html` \u9875\u9762\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\\n\\n```javascript\\nconst http = require(\'http\');\\nconst fs = require(\'fs\');\\n\\nconst app = http.createServer();\\n\\napp.on(\'request\', (req, res) => {\\n    const rs = fs.createReadStream(\'index.html\');\\n    \\n    rs.on(\'data\', data => {\\n        res.write(data);\\n    })\\n\\n    rs.on(\'end\', () => {\\n        res.end()\\n    });\\n});\\n\\napp.listen(3000, () => {\\n    console.log(\\"\u670d\u52a1\u542f\u52a8\u5728 3000 \u7aef\u53e3 ... ...\\");\\n})\\n```\\n\\n### Duplex Stream \u4e0e Transform Stream\\n\\nDuplex\uff0c\u5373\u53cc\u5de5\u7684\u610f\u601d\uff0c\u5b83\u65e2\u53ef\u4ee5\u63a5\u6536\u6570\u636e\uff0c\u4e5f\u53ef\u4ee5\u8f93\u51fa\u6570\u636e\uff0c\u5b83\u7684\u8f93\u5165\u548c\u8f93\u51fa\u4e4b\u95f4\u53ef\u4ee5\u6ca1\u6709\u4efb\u4f55\u7684\u5173\u7cfb\uff0c\u5c31\u50cf\u662f\u4e00\u4e2a\u90e8\u4ef6\u5185\u90e8\u6709\u4e24\u4e2a\u72ec\u7acb\u7684\u7cfb\u7edf\u3002Duplex \u7ee7\u627f\u4e86\u53ef\u8bfb\u6d41(Readable)\uff0c\u5e76\u4e14\u62e5\u6709\u53ef\u5199\u6d41(Writable)\u7684\u6240\u6709\u65b9\u6cd5\u3002 \\n\\nTransform Stream \u7ee7\u627f\u4e86 Duplex Stream\uff0c\u5b83\u540c\u6837\u5177\u6709\u53ef\u8bfb\u6d41\u4e0e\u53ef\u5199\u6d41\u7684\u80fd\u529b\uff0c\u5e76\u4e14\u5b83\u7684\u8f93\u51fa\u4e0e\u8f93\u5165\u4e4b\u95f4\u662f\u6709\u5173\u7cfb\u7684\uff0c\u4e2d\u95f4\u505a\u4e86\u4e00\u6b21\u8f6c\u6362\u3002\u5e38\u89c1\u7684\u8f6c\u6362\u6d41\u6709 `zlib`\uff0c`crypto`\u3002\\n\\n\u51fa\u4e8e\u6587\u7ae0\u7ed3\u6784\u7684\u8003\u8651\uff0c\u5728\u8fd9\u91cc\u4e0d\u8be6\u7ec6\u8bb2\u89e3\u8fd9\u4e24\u4e2a\u6d41\uff0c\u5728\u540e\u6587\u4e2d\u4f1a\u5b9e\u73b0\u8fd9\u4e24\u4e2a\u6d41\uff0c\u4ee5\u52a0\u6df1\u5bf9\u8fd9\u4e24\u4e2a\u6d41\u7684\u7406\u89e3\u3002\\n\\n## pipe\\n\\n\u6211\u4eec\u53ef\u4ee5\u6df7\u5408\u4f7f\u7528\u53ef\u8bfb\u6d41\u4e0e\u53ef\u5199\u6d41\u6765\u8fdb\u884c\u6587\u4ef6\u7684\u590d\u5236\\n\\n```javascript\\nconst fs = require(\'fs\');\\n\\nfunction copy(source, target) {\\n    const rs = fs.createReadStream(source);\\n    const ws = fs.createWriteStream(target);\\n\\n    rs.on(\'data\', data => {\\n        ws.write(data);\\n    });\\n\\n    rs.on(\'end\', () => {\\n        ws.end();\\n    });\\n}\\n\\ncopy(\'a.txt\', \'b.txt\');\\n```\\n\\n\u4f46\u662f\u4e0a\u9762\u7684\u5199\u6cd5\u5374\u4e0d\u88ab\u5efa\u8bae\u4f7f\u7528\uff0c\u56e0\u4e3a\u6ca1\u6709\u8003\u8651\u5230\u53ef\u8bfb\u6d41\u4e0e\u53ef\u5199\u6d41\u901f\u5ea6\u4e4b\u95f4\u7684\u5dee\u5f02\uff0c\u5982\u679c\u53ef\u8bfb\u6d41\u8f93\u51fa\u6570\u636e\u7684\u901f\u5ea6\u5927\u4e8e\u53ef\u5199\u6d41\u5199\u5165\u6570\u636e\u7684\u901f\u5ea6\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u4f1a\u6709\u6570\u636e\u4e00\u76f4\u5806\u538b\u5728\u7f13\u5b58\u533a\uff0c\u5bfc\u81f4\u5360\u7528\u8fc7\u9ad8\u7684\u5185\u5b58\uff0c\u4e13\u4e1a\u672f\u8bed\u53eb\u505a\u79ef\u538b\u3002\\n\\n\u6211\u4eec\u9700\u8981\u6539\u5584\u4e0a\u9762\u7684\u7a0b\u5e8f\uff0c\u5177\u4f53\u505a\u6cd5\u5c31\u662f\u5f53 `write()` \u65b9\u6cd5\u8fd4\u56de  `false` \u65f6\uff0c\u6211\u4eec\u5207\u6362\u53ef\u8bfb\u6d41\u7684\u6a21\u5f0f\u4e3a\u6682\u505c\u6a21\u5f0f\uff0c\u5f53\u53ef\u5199\u6d41\u89e6\u53d1\u4e86 `drain` \u4e8b\u4ef6\u65f6\uff0c\u6211\u4eec\u4fbf\u5c06\u53ef\u8bfb\u6d41\u7684\u72b6\u6001\u5207\u6362\u4e3a\u6d41\u52a8\u6a21\u5f0f\\n\\n```javascript\\nconst fs = require(\'fs\');\\n\\nfunction copy(source, target) {\\n    const rs = fs.createReadStream(source);\\n    const ws = fs.createWriteStream(target);\\n\\n    rs.on(\'data\', data => {\\n        if (!ws.write(data)) {\\n            rs.pause();\\n        }\\n    });\\n\\n    rs.on(\'end\', () => {\\n        ws.end();\\n    });\\n\\n    ws.on(\'drain\', () => {\\n        rs.resume();\\n    })\\n}\\n```\\n\\n\u90a3\u662f\u4e0d\u662f\u6bcf\u6b21\u6211\u4eec\u4f7f\u7528\u6d41\u90fd\u9700\u8981\u5199\u8fd9\u4e48\u591a\u7684\u4ee3\u7801\uff0c\u5f53\u7136\u4e0d\u662f\u3002\u5b98\u65b9\u4e3a\u53ef\u8bfb\u6d41\u63d0\u4f9b\u4e86\u4e00\u4e2a `pipe(ws)` \u65b9\u6cd5\uff0c`pipe` \u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a\u53ef\u5199\u6d41\uff0c\u5b83\u7684\u4f5c\u7528\u5c31\u662f\u5c06\u53ef\u8bfb\u6d41\u4e2d\u6570\u636e\u5199\u5165\u5230\u53ef\u5199\u6d41\u4e2d\u53bb\uff0c\u5e76\u4e14\u5b83\u5185\u90e8\u6709\u505a\u901f\u5ea6\u5dee\u5f02\u7684\u5904\u7406\u3002\u6240\u4ee5\u4e0a\u9762\u7684\u5199\u6cd5\u53ef\u4ee5\u6539\u4e3a\u4e0b\u9762\u7684\u7248\u672c\\n\\n```javascript\\nconst fs = require(\'fs\');\\n\\nfunction copy(source, target) {\\n    const rs = fs.createReadStream(source);\\n    const ws = fs.createWriteStream(target);\\n\\n    rs.pipe(ws);\\n}\\n```\\n\\n\u5f53\u6211\u4eec\u8c03\u7528 `pipe` \u65b9\u6cd5\u65f6\uff0c\u4f1a\u89e6\u53d1\u53ef\u5199\u6d41\u7684 `pipe` \u4e8b\u4ef6\u3002`pipe` \u7684\u5b9e\u73b0\u53c2\u8003\u5982\u4e0b\\n\\n```javascript\\nReadable.prototype.pipe = function(ws) {\\n    this.on(\'data\', data => {\\n        if (!ws.write(data)) {\\n            this.pause();\\n        }\\n    });\\n\\n    ws.on(\'drain\', () => {\\n        this.resume();\\n    });\\n\\n    // \u89e6\u53d1 pipe \u4e8b\u4ef6\\n    ws.emit(\'pipe\', this);\\n\\n    // \u8fd4\u56de\u53ef\u5199\u6d41\uff0c\u4ee5\u652f\u6301\u94fe\u5f0f\u8c03\u7528\\n    return ws;\\n}\\n```\\n\\n\u8fd9\u91cc\u7ed9\u51fa\u5b98\u7f51\u753b\u7684\u4e00\u4e2a\u6709\u5173 `pipe` \u7684\u6d41\u7a0b\u56fe\\n\\n```\\n                                                     +===================+\\n                         x--\x3e  Piping functions   +--\x3e   src.pipe(dest)  |\\n                         x     are set up during     |===================|\\n                         x     the .pipe method.     |  Event callbacks  |\\n  +===============+      x                           |-------------------|\\n  |   Your Data   |      x     They exist outside    | .on(\'close\', cb)  |\\n  +=======+=======+      x     the data flow, but    | .on(\'data\', cb)   |\\n          |              x     importantly attach    | .on(\'drain\', cb)  |\\n          |              x     events, and their     | .on(\'unpipe\', cb) |\\n+---------v---------+    x     respective callbacks. | .on(\'error\', cb)  |\\n|  Readable Stream  +----+                           | .on(\'finish\', cb) |\\n+-^-------^-------^-+    |                           | .on(\'end\', cb)    |\\n  ^       |       ^      |                           +-------------------+\\n  |       |       |      |\\n  |       ^       |      |\\n  ^       ^       ^      |    +-------------------+         +=================+\\n  ^       |       ^      +----\x3e  Writable Stream  +---------\x3e  .write(chunk)  |\\n  |       |       |           +-------------------+         +=======+=========+\\n  |       |       |                                                 |\\n  |       ^       |                              +------------------v---------+\\n  ^       |       +-> if (!chunk)                |    Is this chunk too big?  |\\n  ^       |       |     emit .end();             |    Is the queue busy?      |\\n  |       |       +-> else                       +-------+----------------+---+\\n  |       ^       |     emit .write();                   |                |\\n  |       ^       ^                                   +--v---+        +---v---+\\n  |       |       ^-----------------------------------<  No  |        |  Yes  |\\n  ^       |                                           +------+        +---v---+\\n  ^       |                                                               |\\n  |       ^               emit .pause();          +=================+     |\\n  |       ^---------------^-----------------------+  return false;  <-----+---+\\n  |                                               +=================+         |\\n  |                                                                           |\\n  ^            when queue is empty     +============+                         |\\n  ^------------^-----------------------<  Buffering |                         |\\n               |                       |============|                         |\\n               +> emit .drain();       |  ^Buffer^  |                         |\\n               +> emit .resume();      +------------+                         |\\n                                       |  ^Buffer^  |                         |\\n                                       +------------+   add chunk to queue    |\\n                                       |            <---^---------------------<\\n                                       +============+\\n```\\n\\n## \u5b9e\u73b0\u6d41\\n\\n\u5728\u672c\u8282\u4e2d\u6211\u4eec\u6765\u5b9e\u73b0\u5177\u4f53\u7684\u6d41\uff0c\u901a\u8fc7\u5b9e\u73b0\u6d41\u53ef\u4ee5\u8fdb\u4e00\u6b65\u52a0\u6df1\u5bf9 Stream \u5185\u90e8\u5de5\u4f5c\u7ec6\u8282\u7684\u7406\u89e3\u3002\\n\\n### \u5b9e\u73b0\u53ef\u8bfb\u6d41\\n\\n\u4e0a\u9762\u6211\u4eec\u90fd\u662f\u901a\u8fc7 `fs.createReadableStream()` \u65b9\u6cd5\u6765\u5f97\u5230\u4e00\u4e2a\u53ef\u8bfb\u6d41\u7684\uff0c\u5728\u8fd9\u91cc\u6211\u4eec\u81ea\u5df1\u5b9e\u73b0\u4e00\u4e2a\u53ef\u8bfb\u6d41\u3002\u5b9e\u73b0\u53ef\u8bfb\u6d41\u53ea\u9700\u8981\u7ee7\u627f `Readable` \u7c7b\uff0c\u7136\u540e\u5b9e\u73b0 `_read()` \u65b9\u6cd5\u5373\u53ef\\n\\n```javascript\\nconst { Readable } = require(\'stream\');\\n\\nclass IeteratorReadableStream extends Readable {\\n    constructor(iterator) {\\n        super();\\n        this.iterator = iterator;\\n    }\\n\\n    _read() {\\n        let data = this.iterator.next();\\n        // console.log(data);\\n        if(data.done) {\\n            this.push(null);\\n        } else {\\n            // \u5fc5\u987b push \u5b57\u7b26\u4e32\u6216\u8005 Buffer\\n            this.push(data.value+\'\');\\n        }\\n    }\\n}\\n\\nmodule.exports = IeteratorReadableStream;\\n```\\n\\n\u4e0a\u8ff0\u6211\u4eec\u5b9e\u73b0\u4e86\u4e00\u4e2a\u53ef\u8bfb\u6d41\uff0c\u53ef\u8bfb\u6d41\u63a5\u6536\u4e00\u4e2a\u8fed\u4ee3\u5668\u4f5c\u4e3a\u53c2\u6570\uff0c\u8fd9\u4e2a\u8fed\u4ee3\u5668\u4f5c\u4e3a\u8fd9\u4e2a\u53ef\u8bfb\u6d41\u7684\u6570\u636e\u6e90\u3002\u53ef\u8bfb\u6d41\u4f1a\u81ea\u52a8\u7684\u8c03\u7528 `_read` \u83b7\u53d6\u6570\u636e\uff0c\u5728 `_read` \u65b9\u6cd5\u4e2d\u6211\u4eec\u4ece\u8fed\u4ee3\u5668\u4e2d\u83b7\u53d6\u6570\u636e\uff0c\u5e76\u4e14\u8c03\u7528\u4e86 `push` \u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u7684\u4f5c\u7528\u5c31\u662f\u5c06\u6570\u636e\u653e\u5165\u5230\u7f13\u5b58\u533a\u4e2d\uff0c\u53ea\u80fd\u5411\u5176\u4e2d `push` \u5b57\u7b26\u4e32\u6216\u8005 Buffer\uff0c\u5f53\u6211\u4eec\u5411\u5176\u4e2d `push` null \u65f6\u5c31\u8868\u793a\u6570\u636e\u5df2\u7ecf\u88ab\u5168\u90e8\u8bfb\u53d6\u5b8c\u6bd5\u3002\\n\\n\u6240\u4ee5\u53ef\u8bfb\u6d41\u7684\u6267\u884c\u903b\u8f91\u4e3a\uff0c\u6bcf\u6b21\u8c03\u7528 `_read` \u65b9\u6cd5\u4ece\u6570\u636e\u6e90\u8bfb\u53d6\u6570\u636e\uff0c\u5e76\u5c06\u6570\u636e\u5b58\u5165\u7f13\u5b58\u533a\uff0c\u7136\u540e\u89e6\u53d1 `data` \u4e8b\u4ef6\uff0c\u5c06\u7f13\u5b58\u533a\u4e2d\u7684\u6570\u636e\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9 `data` \u4e8b\u4ef6\u7ed1\u5b9a\u7684\u56de\u8c03\u51fd\u6570\uff0c\u5faa\u73af\u4e0a\u8ff0\u8fc7\u7a0b\u76f4\u5230\u5411\u7f13\u5b58\u533a `push` null \u65f6\uff0c\u5c31\u8868\u793a\u6570\u636e\u6e90\u4e2d\u7684\u6570\u636e\u5df2\u7ecf\u88ab\u8bfb\u53d6\u5b8c\u6bd5\uff0c\u6b64\u65f6\u4f1a\u89e6\u53d1 `end` \u4e8b\u4ef6\u3002\\n\\n\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u8fed\u4ee3\u5668\u4f5c\u4e3a\u6570\u636e\u6e90\u4f20\u5165\\n\\n```javascript\\nconst IeteratorReadableStream = require(\'./IteratorReadableStream\');\\n\\nfunction *getData() {\\n    for(let i = 0; i < 5; i++) {\\n        yield i;\\n    }\\n}\\n\\nlet rs = new IeteratorReadableStream(getData());\\n\\nrs.on(\'data\', data => {\\n    console.log(data.toString());\\n});\\n\\nrs.on(\'end\', () => {\\n    console.log(\\"\u8fed\u4ee3\u7ed3\u675f\\");\\n});\\n```\\n\\n\u8f93\u51fa\u4e3a\\n\\n```javascript\\n0\\n1\\n2\\n3\\n4\\n\u8fed\u4ee3\u7ed3\u675f\\n```\\n\\n### \u5b9e\u73b0\u53ef\u5199\u6d41\\n\\n\u5b9e\u73b0\u53ef\u5199\u6d41\u7684\u8fc7\u7a0b\u540c\u5b9e\u73b0\u53ef\u8bfb\u6d41\u7684\u8fc7\u7a0b\u7c7b\u4f3c\uff0c\u9996\u5148\u9700\u8981\u7ee7\u627f `Writable` \u7c7b\uff0c\u63a5\u7740\u5b9e\u73b0 `_write` \u65b9\u6cd5\u5373\u53ef\\n\\n```javascript\\nconst fs = require(\'fs\');\\nconst { Writable } = require(\'stream\');\\n\\nclass FileWritableStream extends Writable {\\n    constructor(filepath) {\\n        super();\\n        this.filepath = filepath;\\n    }\\n\\n    _write(chunk, encoding, callback) {\\n        fs.appendFile(this.filepath, chunk, {\\n            encoding\\n        }, callback)\\n    }\\n}\\n```\\n\\n\u4e0a\u9762\u6211\u4eec\u5b9e\u73b0\u4e86\u4e00\u4e2a\u53ef\u5199\u6d41\uff0c\u8fd9\u4e2a\u53ef\u5199\u6d41\u63a5\u6536\u4e00\u4e2a\u6587\u4ef6\u8def\u5f84\u4f5c\u4e3a\u53c2\u6570\uff0c\u5b83\u7684\u4f5c\u7528\u5c31\u662f\u5411\u8fd9\u4e2a\u6587\u4ef6\u4e2d\u8ffd\u52a0\u6570\u636e\uff0c\u6bcf\u6b21\u5f53\u6211\u4eec\u8c03\u7528\u53ef\u5199\u6d41\u7684 `write()` \u65b9\u6cd5\u65f6\uff0c\u5b83\u4f1a\u5411\u7f13\u51b2\u533a\u5199\u5165\u6570\u636e\uff0c\u5f53\u8fbe\u5230\u9608\u503c\u65f6\uff0c\u4fbf\u4f1a\u8c03\u7528 `_write()` \u65b9\u6cd5\u5c06\u6570\u636e\u65b0\u589e\u5230\u6587\u4ef6\u4e2d\u3002\\n\\n```javascript\\nprocess.stdin.pipe(new FileWritableStream(\'c.txt\'));\\n```\\n\\n\u4e0a\u9762\u8fd9\u884c\u4ee3\u7801\u7684\u4f5c\u7528\u5c31\u662f\u5c06\u4ece\u6807\u51c6\u8f93\u5165\u7684\u5b57\u7b26\u8f93\u51fa\u5230 `c.txt` \u4e2d\u3002\\n\\n### \u5b9e\u73b0\u53cc\u5de5\u6d41\\n\\nDuplex Stream \u65e2\u53ef\u4ee5\u4f5c\u4e3a\u53ef\u8bfb\u6d41\uff0c\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u53ef\u5199\u6d41\uff0c\u5e76\u4e14\u5b83\u7684\u8f93\u5165\u4e0e\u8f93\u51fa\u4e4b\u95f4\u53ef\u4ee5\u6ca1\u6709\u5173\u7cfb\u3002Duplex Stream \u7ee7\u627f\u4e86 Readable\uff0c\u5e76\u4e14\u62e5\u6709 Writable \u7684\u6240\u6709\uff0c\u6211\u4eec\u53ea\u8981\u5206\u522b\u5b9e\u73b0 `_read()` \u548c `_write()` \u65b9\u6cd5\u5373\u53ef\\n\\n```javascript\\nconst { Duplex } = require(\'stream\');\\n\\nclass CustomDuplexStream extends Duplex {\\n    constructor() {\\n        super();\\n        this.currentCharCode = 65;\\n    }\\n\\n    _read() {\\n        if(this.currentCharCode <= 90) {\\n            this.push(String.fromCharCode(this.currentCharCode++))\\n        } else {\\n            this.push(null);\\n        }\\n    }\\n\\n    _write(chunk, encoding, callback) {\\n        console.log(chunk.toString());\\n        callback();\\n    }\\n}\\n```\\n\\n\u4e0a\u9762\u53cc\u5de5\u6d41\u7684\u53ef\u8bfb\u6d41\u90e8\u5206\u5c31\u662f\u5c06\u5927\u5199\u7684 26 \u4e2a\u5b57\u6bcd\u6dfb\u52a0\u8fdb\u4e86\u7f13\u5b58\u533a\uff0c\u800c\u53ef\u5199\u6d41\u90e8\u5206\u5c31\u662f\u76f4\u63a5\u5c06\u6570\u636e\u8f93\u51fa\u5230\u63a7\u5236\u53f0\u3002\u53ef\u89c1\u53cc\u5de5\u6d41\u53ef\u8bfb\u6d41\u4e0e\u53ef\u5199\u6d41\u4e4b\u95f4\u5e76\u6ca1\u6709\u4efb\u4f55\u7684\u5173\u7cfb\\n\\n```javascript\\nconst dp = new CustomDuplexStream();\\n\\ndp.write(\\"1\\");\\ndp.write(\\"2\\");\\ndp.end();\\n\\ndp.pipe(process.stdout);\\n```\\n\\n\u8f93\u51fa\u4e3a\\n\\n```javascript\\n1\\n2\\nABCDEFGHIJKLMNOPQRSTUVWXYZ\\n```\\n\\n### \u5b9e\u73b0\u8f6c\u6362\u6d41\\n\\nTranform Stream \u662f Duplex \u7684\u7279\u4f8b\uff0c\u5b83\u4e5f\u662f\u4e00\u4e2a\u53cc\u5de5\u6d41\uff0c\u4e0d\u8fc7\u5b83\u7684\u8f93\u5165\u548c\u8f93\u51fa\u4e4b\u95f4\u6709\u5173\u8054\uff0c\u5b83\u7684\u5185\u90e8\u901a\u8fc7 `_transform()` \u65b9\u6cd5\u5c06\u53ef\u5199\u6d41\u63a5\u6536\u5230\u7684\u6570\u636e\u7ecf\u8fc7\u8f6c\u6362\u540e\u4f20\u5165\u5230\u53ef\u8bfb\u6d41\u4e2d\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u5b9e\u73b0\u8f6c\u6362\u6d41\uff0c\u53ea\u9700\u8981\u5b9e\u73b0 `_transform()` \u65b9\u6cd5\u5373\u53ef\\n\\n```javascript\\nconst { Transform } = require(\'stream\');\\n\\nclass UpperTransformStream extends Transform {\\n    _transform(chunk, encoding, callback) {\\n        this.push(chunk.toString().toUpperCase());\\n        callback();\\n    }\\n}\\n```\\n\\n\u4e0a\u9762\u6211\u4eec\u5b9e\u73b0\u4e86\u4e00\u4e2a\u8f6c\u6362\u6d41\uff0c\u5b83\u53ef\u4ee5\u5c06\u8f93\u5165\u7684\u5c0f\u5199\u5b57\u7b26\u8f6c\u5316\u4e3a\u5927\u5199\u5b57\u7b26\u7136\u540e\u8f93\u51fa\\n\\n```javascript\\nconst ts = new UpperTransformStream();\\nconst rs = fs.createReadStream(\'a.txt\');\\nrs.pipe(ts).pipe(process.stdout);\\n```\\n\\n\u4e0a\u9762\u7a0b\u5e8f\u4f1a\u8bfb\u53d6 `a.txt` \u4e2d\u7684\u6240\u6709\u5b57\u7b26\uff0c\u5c06\u5b57\u7b26\u8f6c\u6362\u4e3a\u5927\u5199\u7136\u540e\u8f93\u51fa\u5728\u63a7\u5236\u53f0\u3002\\n\\n\u8f6c\u6362\u6d41\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u8fd8\u662f\u6bd4\u8f83\u591a\u7684\uff0c\u8fd9\u91cc\u4ecb\u7ecd\u4e00\u4e2a Node.js \u5185\u7f6e\u7684\u8f6c\u6362\u6d41 `zlib`\uff0c\u5b83\u7684\u4f5c\u7528\u5bf9\u6587\u4ef6\u8fdb\u884c\u89e3\u538b\u7f29\uff0c\u5c06\u6587\u4ef6\u538b\u7f29\u4e3a\u538b\u7f29\u6587\u4ef6\uff0c\u6216\u8005\u5c06\u538b\u7f29\u6587\u4ef6\u89e3\u538b\u4e3a\u6b63\u5e38\u6587\u4ef6\uff0c\u8fd9\u4e0d\u5c31\u662f\u4e00\u4e2a\u5178\u578b\u7684\u8f6c\u6362\u6d41\u561b\uff01\\n\\n```javascript\\nconst zlib = require(\'zlib\');\\nconst fs = require(\'fs\');\\n\\nconst args = process.argv.slice(2);\\n\\nconst source = fs.createReadStream(args[0]);\\nconst target = fs.createWriteStream(args[1]);\\nconst gzip = zlib.createGzip();\\n\\nsource.pipe(gzip).pipe(target);\\n```\\n\\n\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\\n\\n```bash\\nnode gzip.js Graph.md Graph.md.gz\\n```\\n\\n\u6765\u8fd0\u884c\u4e0a\u9762\u7684\u7a0b\u5e8f\uff0c\u5b83\u53ef\u4ee5\u5c06 Graph.md \u4f7f\u7528 gzip \u538b\u7f29\u4e3a Graph.md.gz\u3002\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20210306094436.png\\" style={{ zoom: \'50%\' }}/>\\n\\n\u6587\u4ef6\u5927\u5c0f\u4ece `201KB` \u538b\u7f29\u5230\u4e86 `51KB`\u3002\\n\\n\u540c\u6837\u7684\u6211\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7 `zlib.createGunzip()` \u6765\u521b\u5efa\u4e00\u4e2a\u89e3\u538b\u7f29\u7684\u8f6c\u6362\u6d41\uff0c\u5177\u4f53\u7ec6\u8282\u540c\u538b\u7f29\u6587\u4ef6\u76f8\u540c\uff0c\u4e0d\u505a\u4ecb\u7ecd\u3002\\n\\n\u672c\u7bc7\u6587\u7ae0\u5230\u6b64\u7ed3\u675f\uff0c\u60f3\u5fc5\u5230\u8fd9\u91cc\u5df2\u7ecf\u5bf9 Stream \u7684\u4f7f\u7528\u5df2\u7ecf\u6709\u6240\u4e86\u89e3\u4e86\uff0c\u4f46\u662f\u672c\u7bc7\u6587\u7ae0\u5e76\u6ca1\u6709\u5217\u4e3e\u6240\u6709\u6709\u5173 Stream \u7684 API\uff0c\u5982\u679c\u60f3\u66f4\u52a0\u8be6\u7ec6\u7684\u4e86\u89e3 Stream \u7684 API\uff0c\u90a3\u4e48\u63a5\u4e0b\u53bb\u5c31\u53ef\u4ee5\u9605\u8bfb[\u5b98\u65b9\u6587\u6863](http://nodejs.cn/api/stream.html)\u4e86\u3002\\n\\n## \u53c2\u8003\u6587\u732e\\n\\n- [Node\'s Stream](https://jscomplete.com/learn/node-beyond-basics/node-streams)\\n- [\u6570\u636e\u6d41\u4e2d\u7684\u79ef\u538b\u95ee\u9898](https://nodejs.org/zh-cn/docs/guides/backpressuring-in-streams/)\\n- [\u6df1\u5165\u7406\u89e3 Node.js Stream \u5185\u90e8\u673a\u5236](https://mp.weixin.qq.com/s/D54-txCSPjKdK-QewPG9Kw)\\n- [Node.js Stream - \u57fa\u7840\u7bc7](https://tech.meituan.com/2016/07/08/stream-basics.html)"},{"id":"Buffer","metadata":{"permalink":"/blog/Buffer","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2021-03-02-Buffer.mdx","source":"@site/blog/2021-03-02-Buffer.mdx","title":"Buffer","description":"Buffer \u662f Node.js \u7684\u5185\u7f6e\u7c7b\u578b\uff0c\u5b83\u662f\u7528\u6765\u8868\u793a\u5185\u5b58\u4e2d\u4e00\u5757\u533a\u57df\u7684\uff0c\u5b83\u4fdd\u5b58\u7684\u662f\u4e8c\u8fdb\u5236\u6570\u636e\uff0c\u53ef\u4ee5\u5c06\u5b83\u770b\u505a\u4e3a\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6570\u7ec4\u3002","date":"2021-03-02T00:00:00.000Z","formattedDate":"2021\u5e743\u67082\u65e5","tags":[{"label":"Node","permalink":"/blog/tags/node"},{"label":"Buffer","permalink":"/blog/tags/buffer"}],"readingTime":10.14,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"slug":"Buffer","authors":"xiongtao","tags":["Node","Buffer"]},"prevItem":{"title":"Stream","permalink":"/blog/2021/03/06/Stream"},"nextItem":{"title":"Node \u4e8b\u4ef6\u5faa\u73af","permalink":"/blog/node-event-loop"}},"content":"Buffer \u662f Node.js \u7684\u5185\u7f6e\u7c7b\u578b\uff0c\u5b83\u662f\u7528\u6765\u8868\u793a\u5185\u5b58\u4e2d\u4e00\u5757\u533a\u57df\u7684\uff0c\u5b83\u4fdd\u5b58\u7684\u662f\u4e8c\u8fdb\u5236\u6570\u636e\uff0c\u53ef\u4ee5\u5c06\u5b83\u770b\u505a\u4e3a\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6570\u7ec4\u3002\\n\\nBuffer \u53ef\u4ee5\u7528\u6765\u8868\u793a\u56fe\u7247\u3001\u89c6\u9891\u8fd9\u6837\u7684\u4e8c\u8fdb\u5236\u6570\u636e\uff0c\u53e6\u5916\u6211\u4eec\u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\u5230\u7684\u4e5f\u662f Buffer \u7c7b\u578b\u7684\u6570\u636e\uff0c\u4ece\u7f51\u7edc\u4e2d\u63a5\u6536\u7684\u6570\u636e\u4e5f\u662f Buffer \u7c7b\u578b\u7684\u6570\u636e\uff0c\u6240\u4ee5\u5b66\u4e60 Buffer \u8fd8\u662f\u5f88\u6709\u5fc5\u8981\u7684\u3002\\n\\nBuffer \u4f4d\u4e8e\u5168\u5c40\u4f5c\u7528\u57df\u4e2d\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u901a\u8fc7 `require(\'buffer\')` \u6765\u5f15\u5165 Buffer\u3002\\n\\n## \u521b\u5efa Buffer \u5bf9\u8c61\\n\\n### alloc\\n\\n\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 `Buffer.alloc(size, [fill], [encoding])` \u6765\u5206\u914d\u4e00\u4e2a `size` \u5b57\u8282\u5927\u5c0f\u7684\u5185\u5b58\uff0c\u8fd8\u53ef\u4ee5\u63a5\u6536\u4e24\u4e2a\u53ef\u9009\u53c2\u6570\\n\\n- fill\uff1a\u4f7f\u7528 fill \u6765\u586b\u5145 Buffer \u4e2d\u7684\u6bcf\u4e00\u4e2a\u5b57\u8282\\n- encoding\uff1a\u5982\u679c fill \u4e3a\u5b57\u7b26\u4e32\uff0c\u90a3\u4e48\u4f7f\u7528 encoding \u6765\u5bf9\u5b57\u7b26\u4e32\u8fdb\u884c\u7f16\u7801\u4e3a\u4e8c\u8fdb\u5236\\n\\n\u5f53\u4e0d\u6307\u5b9a fill \u53c2\u6570\uff0c\u9ed8\u8ba4\u4e3a\u586b\u5145 0\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n```javascript\\nconst buf1 = Buffer.alloc(5);\\nconsole.log(buf1); // <Buffer 00 00 00 00 00>\\n\\nconst buf2 = Buffer.alloc(10, 1);\\nconsole.log(buf2); // <Buffer 01 01 01 01 01 01 01 01 01 01>\\n\\nconst buf3 = Buffer.alloc(12, \\"hello world!\\", \\"utf-8\\");\\nconsole.log(buf3); // <Buffer 68 65 6c 6c 6f 20 77 6f 72 6c 64 21>\\n```\\n\\n\u6211\u4eec\u8fd8\u53ef\u4ee5\u4f7f\u7528 `allocUnsafe(size)` \u6765\u5206\u914d\u6307\u5b9a\u5927\u5c0f\u7684\u5185\u5b58\uff0c\u4e0d\u8fc7\u4e0d\u4f1a\u9ed8\u8ba4\u586b\u5145 0\uff0c\u5176\u4e2d\u7684\u5185\u5bb9\u4e0d\u786e\u5b9a\\n\\n```javascript\\nconst buf = Buffer.allocUnsafe(5);\\nconsole.log(buf); // <Buffer c0 84 7c 2a 7b>\\n```\\n\\n\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 `fill(fill, encoding)` \u65b9\u6cd5\u4e3a Buffer \u5bf9\u8c61\u586b\u5145\u6307\u5b9a\u503c\\n\\n```javascript\\nconst buf = Buffer.allocUnsafe(5);\\nbuf.fill(0);\\nconsole.log(buf); // <Buffer 00 00 00 00 00>\\n```\\n\\n### from\\n\\n\u6211\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7 `Buffer.from()` \u65b9\u6cd5\u6765\u521b\u5efa\u4e00\u4e2a Buffer \u5bf9\u8c61\uff0c`from` \u65b9\u6cd5\u53ef\u4ee5\u63a5\u6536\u7684\u53c2\u6570\u5305\u62ec\u6570\u7ec4\uff0c\u5b57\u7b26\u4e32\uff0cBuffer \u5bf9\u8c61\uff0c\u5bf9\u8c61\u7b49\u7c7b\u578b\u3002\\n\\n\u63a5\u6536\u4e00\u4e2a\u6574\u5f62\u6570\u7ec4\uff0c\u6570\u7ec4\u4e2d\u7684\u6574\u6570\u5e94\u8be5\u5728 `0~255` \u4e4b\u95f4\uff0c\u8d85\u51fa\u6b64\u8303\u56f4\u7684\u6570\u5b57\u5c06\u4f1a\u88ab\u622a\u65ad\\n\\n```javascript\\nconst buf = Buffer.from([1, 2, 3, 4, 5]);\\nconsole.log(buf); // <Buffer 01 02 03 04 05>\\n```\\n\\n\u6211\u4eec\u8fd8\u53ef\u4ee5\u50cf\u5176\u4e2d\u4f20\u5165\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5e76\u6307\u5b9a\u7f16\u7801\uff0c\u5b83\u4f1a\u4f7f\u7528\u6307\u5b9a\u7f16\u7801\u5c06\u5b57\u7b26\u4e32\u7f16\u7801\u4e3a\u4e8c\u8fdb\u5236\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\u7f16\u7801\u7684\u8bdd\uff0c\u9ed8\u8ba4\u4e3a\u7f16\u7801\u4e3a `utf-8`\\n\\n```javascript\\nconst buf = Buffer.from(\\"hello\\", \\"utf-8\\");\\nconsole.log(buf); // <Buffer 68 65 6c 6c 6f>\\n```\\n\\n`from` \u65b9\u6cd5\u8fd8\u53ef\u4ee5\u63a5\u6536\u4e00\u4e2a Buffer \u5bf9\u8c61\uff0c\u5b83\u4f1a\u62f7\u8d1d\u4f20\u5165\u7684 Buffer \u5bf9\u8c61\u4e2d\u7684\u6570\u636e\u5230\u65b0\u7684 Buffer \u5bf9\u8c61\u4e2d\\n\\n```javascript\\nconst buf1 = Buffer.from(\\"hello\\", \\"utf-8\\");\\nconst buf2 = Buffer.from(buf1);\\n\\nconsole.log(buf1 === buf2); // false\\nconsole.log(buf2.toString()); // hello\\n```\\n\\n`from` \u65b9\u6cd5\u8fd8\u53ef\u4ee5\u63a5\u6536\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5f53\u4f20\u5165\u5bf9\u8c61\uff0c\u9996\u5148\u4f1a\u5c06\u5bf9\u8c61\u8f6c\u5316\u4e3a\u539f\u59cb\u503c\uff0c\u7136\u540e\u6839\u636e\u539f\u59cb\u503c\u8f6c\u5316\u4e3a\u5bf9\u5e94\u7684\u4e8c\u8fdb\u5236\u6570\u7ec4\\n\\n```javascript\\nlet obj = {\\n  [Symbol.toPrimitive](hint) {\\n    return \\"a\\";\\n  },\\n};\\n\\nconst buf = Buffer.from(obj);\\nconsole.log(buf.toString()); // a\\n```\\n\\n## Buffer \u5bf9\u8c61\u7684\u5c5e\u6027\\n\\n### length\\n\\n\u901a\u8fc7 length \u5c5e\u6027\u53ef\u4ee5\u77e5\u9053 Buffer \u6570\u7ec4\u7684\u957f\u5ea6\\n\\n```javascript\\nconst buf = Buffer.from(\\"Hello World!\\");\\n\\nconsole.log(buf.length); // 12\\n```\\n\\n### buffer\\n\\nBuffer \u5bf9\u8c61\u5185\u90e8\u5b9e\u9645\u5b58\u50a8\u6570\u636e\u7684\u662f\u4e00\u4e2a ArrayBuffer \u7684\u5bf9\u8c61\uff0c\u901a\u8fc7 buffer \u5c5e\u6027\u53ef\u4ee5\u5f97\u5230\u8fd9\u4e2a\u5bf9\u8c61\\n\\n```javascript\\nconst buf = Buffer.alloc(5);\\n\\nconsole.log(buf.buffer); // ArrayBuffer { [Uint8Contents]: <00 00 00 00 00>, byteLength: 5 }\\n```\\n\\n## \u8bfb Buffer \u5bf9\u8c61\\n\\n\u672c\u8282\u4ecb\u7ecd\u5982\u4f55\u8bbf\u95ee Buffer \u5bf9\u8c61\u4e2d\u7684\u5185\u5bb9\u3002\\n\\n### \u4e0b\u6807\\n\\n\u5728\u6587\u7ae0\u7684\u5f00\u5934\u63d0\u8fc7\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06 Buffer \u5bf9\u8c61\u770b\u505a\u662f\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6570\u7ec4\uff0c\u65e2\u7136\u662f\u6570\u7ec4\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u901a\u8fc7\u4e0b\u6807\u7684\u5f62\u5f0f\u6765\u8bbf\u95ee\u6570\u7ec4\u4e2d\u7684\u5185\u5bb9\u3002\\n\\n```javascript\\nconst buf = Buffer.from([1, 2, 3, 4, 5]);\\nconsole.log(buf[0]); // 1\\nconsole.log(buf[5]); // undefined\\n```\\n\\n\u5b83\u4eec\u4f1a\u4ee5\u8865\u7801\u7684\u5f62\u5f0f\u89e3\u6790\u5b57\u8282\uff0c\u8fd4\u56de\u5bf9\u5e94\u7684\u6570\u5b57\u3002\\n\\n### readXxx\\n\\n\u6211\u4eec\u8fd8\u53ef\u4ee5\u901a\u8fc7 `buf.readInt8()` `buf.readInt16()` `buf.readUint8()` `buf.readUint16()` \u7b49\u65b9\u6cd5\u6765\u8bbf\u95ee Buffer \u5bf9\u8c61\u4e2d\u7684\u5185\u5bb9\u3002\\n\\n```javascript\\nconst buf = Buffer.from([1, 2, 3, 4, 5]);\\nconsole.log(buf.readInt8(2)); // 3\\n\\n// \u8bbf\u95ee\u8d85\u51fa\u8303\u56f4\u7684\u5185\u5bb9\uff0c\u4f1a\u629b\u51fa RangeError\\nconsole.log(buf.readInt8(5)); // RangeError [ERR_OUT_OF_RANGE]: The value of \\"offset\\" is out of range.\\n```\\n\\n### \u8fed\u4ee3\u5668\\n\\nBuffer \u5bf9\u8c61\u7684\u8fed\u4ee3\u5668\u540c\u6570\u7ec4\u7684\u8fed\u4ee3\u5668\u76f8\u540c\uff0c\u4e5f\u6709\u4e09\u4e2a\u8fed\u4ee3\u5668\uff0c\u5206\u522b\u662f\\n\\n- entries\\n- keys\\n- values\\n\\n\u6211\u4eec\u901a\u8fc7\u904d\u5386\u8fed\u4ee3\u5668\u6765\u8bbf\u95ee Buffer \u5bf9\u8c61\u4e2d\u7684\u5185\u5bb9\u3002\\n\\n```javascript\\nconst buf = Buffer.from([3, 4, 2]);\\n\\nfor (let entry of buf.entries()) {\\n  // \u6570\u7ec4\u7684\u4e00\u4e2a\u5143\u7d20\u4e3a\u4e0b\u6807\uff0c\u7b2c\u4e8c\u4e2a\u5143\u7d20\u4e3a\u4e0b\u6807\u5bf9\u5e94\u7684\u5143\u7d20\\n  console.log(entry); // [ 0, 3 ]\\n                      // [ 1, 4 ]\\n                      // [ 2, 2 ]\\n}\\n```\\n\\n```javascript\\nfor (let key of buf.keys()) {\\n  console.log(key); // 0\\n                    // 1\\n                    // 2\\n}\\n```\\n\\n```javascript\\nfor (let value of buf.values()) {\\n  console.log(value); // 3\\n                      // 4\\n                      // 2\\n}\\n```\\n\\n## \u5199 Buffer \u5bf9\u8c61\\n\\n\u672c\u5c0f\u8282\u8bb2\u89e3\u5982\u4f55\u5411 Buffer \u5bf9\u8c61\u4e2d\u5199\u5165\u5185\u5bb9\u3002\\n\\n### \u4e0b\u6807\\n\\n\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u4e0b\u6807\u6765\u6539\u53d8 Buffer \u5bf9\u8c61\u4e2d\u7684\u5185\u5bb9\\n\\n```javascript\\nconst buf = Buffer.from([1, 2, 3]);\\n\\n// \u901a\u8fc7\u4e0b\u6807\u8bbe\u7f6e\u503c\\nbuf[0] = 4;\\n\\nconsole.log(buf); // <Buffer 04 02 03>\\n```\\n\\n### write\\n\\n\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 `write(string, [offset], [length], [encoding])` \u65b9\u6cd5\u5411 Buffer \u4e2d\u5199\u5165\u5b57\u7b26\u4e32\uff1a\\n\\n- string\uff1a\u8868\u793a\u8981\u5199\u5165\u7684\u5b57\u7b26\u4e32\\n- offset\uff1a\u504f\u79fb\u91cf\uff0c\u5373\u8df3\u8fc7 offset \u4e2a\u5b57\u8282\u5f00\u59cb\u5199\u5165\uff0c\u9ed8\u8ba4\u4e3a 0\\n- length\uff1a\u8981\u5199\u5165\u7684\u6700\u5927\u5b57\u8282\u6570\uff0c\u4e0d\u8d85\u8fc7 `buf.length - offset`\uff0c\u9ed8\u8ba4\u503c\u4e3a `buf.length - offset`\\n- encoding\uff1a\u6307\u5b9a\u7f16\u7801\uff0c\u9ed8\u8ba4\u4e3a `utf-8`\\n\\n\u8be5\u65b9\u6cd5\u8fd4\u56de\u5df2\u5199\u5165\u7684\u5b57\u8282\u6570\u3002\\n\\n```javascript\\nconst buf = Buffer.from([1, 2, 3, 4]);\\n\\n// \u8df3\u8fc7 1 \u4e2a\u5b57\u8282\u5f00\u59cb\u5199\u5165\uff0c1hi4\\nbuf.write(\\"hi\\", 1);\\n\\nconsole.log(buf); // <Buffer 01 68 69 04>\\n```\\n\\n### writeXxx\\n\\n\u540c readXxx\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 `writeInt8()` \u65b9\u6cd5\u5411 buf \u4e2d\u5199\u5165\u6570\u636e\uff0c\u65b9\u6cd5\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff1a\\n\\n- value\uff1a\u8981\u5199\u5165\u7684\u503c\\n- offset\uff1a\u504f\u79fb\u91cf\uff0c\u9ed8\u8ba4\u4e3a 0\\n\\n```javascript\\nconst buf = Buffer.alloc(5);\\n\\nbuf.writeInt8(1, 0);\\nbuf.writeInt8(3, 1);\\n\\nconsole.log(buf); // <Buffer 01 03 00 00 00>\\n```\\n\\n:::warning\\n\u8e29\u5751\uff1a\u6ca1\u6709 `writeInt16()`\uff0c\u4e0d\u8fc7\u6709 `writeInt16BE()` \u4e0e `writeInt16LE()`\uff0c\u5206\u522b\u4ee3\u8868\u4ee5\u5927\u7aef\u5e8f\u3001\u5c0f\u7aef\u5e8f\u5199\u5165\u3002\\n:::\\n\\n## \u5176\u4ed6\u65b9\u6cd5\\n\\n### isBuffer\\n\\n\u8be5\u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a\u5bf9\u8c61\uff0c\u7528\u6765\u5224\u65ad\u8be5\u5bf9\u8c61\u662f\u4e0d\u662f\u4e00\u4e2a Buffer \u5bf9\u8c61\\n\\n```javascript\\nlet obj1 = {};\\nlet obj2 = Buffer.alloc(3);\\n\\nconsole.log(Buffer.isBuffer(obj1)); // false\\nconsole.log(Buffer.isBuffer(obj2)); // true\\n```\\n\\n### isEncoding\\n\\n\u8be5\u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a\u4ee3\u8868\u7f16\u7801\u7684\u5b57\u7b26\u4e32\uff0c\u8fd4\u56de Buffer \u662f\u5426\u652f\u6301\u8be5\u79cd\u7f16\u7801\uff0c\u5982\u679c\u652f\u6301\u5219\u8fd4\u56de true\uff0c\u5426\u5219\u8fd4\u56de false\\n\\n```javascript\\nconsole.log(Buffer.isEncoding(\\"utf-8\\")); // true\\nconsole.log(Buffer.isEncoding(\\"utf8\\"));  // true\\nconsole.log(Buffer.isEncoding(\\"hex\\"));   // true\\nconsole.log(Buffer.isEncoding(\\"latin\\")); // false\\nconsole.log(Buffer.isEncoding(\\"gbk\\"));   // false\\n```\\n\\n### slice\\n\\n`slice(start, end)` \u53ef\u4ee5\u88c1\u5207\u539f\u6709\u7684 Buffer \u5bf9\u8c61\uff0c\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 Buffer \u5bf9\u8c61\uff0c\u5176\u4e2d start \u548c end \u4ee3\u8868\u88c1\u5207\u7684\u8d77\u59cb\u4f4d\u7f6e\u548c\u7ed3\u675f\u4f4d\u7f6e\uff0c\u5de6\u95ed\u53f3\u5f00 [start, end)\uff0c\u8fd9\u4e24\u4e2a\u53c2\u6570\u662f\u53ef\u9009\u7684\uff0cstart \u9ed8\u8ba4\u4e3a 0\uff0cend \u9ed8\u8ba4\u4e3a `buf.length`\u3002\u8fd4\u56de\u7684 Buffer \u5bf9\u8c61\u4e0e\u539f\u5148\u5bf9\u8c61\u5f15\u7528\u7684\u662f\u540c\u4e00\u5757\u5185\u5b58\uff0c\u5373\u5b83\u4eec\u7684 buffer \u5c5e\u6027\u662f\u4e00\u6837\u7684\u3002\\n\\n```javascript\\nconst buffer = Buffer.from(\\"hello world!\\");\\n\\nconst newBuffer = buffer.slice(6); // \u88c1\u5207 6 \u4ee5\u540e\u7684\u5185\u5bb9\u5230\u65b0\u6570\u7ec4\\nconsole.log(newBuffer.toString()); // world!\\n\\nconsole.log(buffer.buffer === newBuffer.buffer); // true\\n```\\n\\n### subarray\\n\\n`subarray(start, end)` \u51e0\u4e4e\u53ef\u4ee5\u770b\u505a\u7b49\u540c\u4e8e `slice` \u65b9\u6cd5\u4e86\uff0c\u4e8c\u8005\u7684\u8bed\u4e49\u4e0d\u540c\uff0c\u4e0d\u8fc7\u884c\u4e3a\u786e\u5b9e\u4e00\u81f4\u7684\uff0csubarray \u7684\u8bed\u4e49\u8868\u793a\u8fd4\u56de\u539f\u6570\u7ec4\u7684\u67d0\u4e2a\u8303\u56f4\u7684\u5b50\u6570\u7ec4\uff0c\u800c slice \u7684\u8bed\u4e49\u8868\u793a\u7684\u88c1\u5207\u3002\u540c\u6837 subarray \u8fd4\u56de\u65b0\u7684 Buffer \u5bf9\u8c61\uff0c\u5e76\u4e14\u8fd4\u56de\u7684 Buffer \u5bf9\u8c61\u7684 buffer \u4e0e\u539f Buffer \u5bf9\u8c61\u7684 buffer \u5c5e\u6027\u662f\u76f8\u540c\u7684\u3002\\n\\n```javascript\\nconst buffer = Buffer.from(\\"hello world!\\");\\n\\nconst newBuffer = buffer.subarray(6);\\nconsole.log(newBuffer.toString()); // world!\\n\\nconsole.log(buffer.buffer === newBuffer.buffer); // true\\n```\\n\\n### copy\\n\\n`copy(target, [targetStart], [sourceStart], [sourceEnd])` \u65b9\u6cd5\u662f\u5c06 source \u4ece sourceStart \u5230 sourceEnd \u7684\u5185\u5bb9\u590d\u5236\u5230 target \u4ece targetStart \u7684\u4f4d\u7f6e\uff0c\u89c1\u4e0b\u52a8\u56fe\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20210302135327.gif\\" style={{ zoom: \'50%\'}}/>\\n\\n\u9664\u4e86 target \u4ee5\u5916\uff0c\u5176\u4ed6\u4e09\u4e2a\u53c2\u6570\u90fd\u662f\u53ef\u9009\u53c2\u6570\uff0ctargetStart \u4e0e sourceStart \u7684\u9ed8\u8ba4\u503c\u4e3a 0\uff0csourceEnd \u7684\u9ed8\u8ba4\u503c\u4e3a `buf.length`.\\n\\n```javascript\\nconst buf1 = Buffer.from(\\"HelloWorld\\");\\nconst buf2 = Buffer.alloc(8);\\n\\nbuf1.copy(buf2, 0, 1, 9);\\n\\nconsole.log(buf2.toString()); // elloWorl\\n```\\n\\n### includes\\n\\n`buf.includes(value, [offset], [encoding])` \u65b9\u6cd5\u7684\u4f5c\u7528\u662f\u5224\u65ad value \u662f\u5426\u5728 `buf` \u4e2d\u3002\\n\\nvalue \u53ef\u4ee5\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a Buffer \u5bf9\u8c61\uff0c\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u6574\u6570\uff1boffset \u7528\u6765\u89c4\u5b9a\u67e5\u627e\u8303\u56f4\uff0c\u8868\u793a\u4ece offset \u5904\u5f00\u59cb\u67e5\u627e\uff0c\u9ed8\u8ba4\u4e3a 0\uff1benconding \u8868\u793a\u7f16\u7801\uff0c\u9ed8\u8ba4\u4e3a `utf-8`\u3002\\n\\n```javascript\\nconst buf = Buffer.from(\\"HelloWorld\\");\\n\\n// \u9ed8\u8ba4\u4ece 0 \u5f00\u59cb\u641c\u7d22\\nconsole.log(buf.includes(\\"H\\")); // true\\n// \u4ece 1 \u5f00\u59cb\u641c\u7d22\uff0c\u540e\u9762\u4e0d\u5305\u542b H\\nconsole.log(buf.includes(\\"H\\", 1)); // false\\n\\nconsole.log(buf.includes(Buffer.from(\\"Hello\\"))); // true\\n\\n// H \u5bf9\u5e94\u7684 utf-8 \u7f16\u7801\u4e3a 72\\nconsole.log(buf.includes(72)); // true\\n```\\n\\n### indexOf\\n\\n`buf.indexOf(value, [offset], [encoding])` \u662f\u7528\u6765\u67e5\u627e value \u5728 buf \u4e2d\u7684\u4e0b\u6807\u7684\uff0c\u53c2\u6570\u7684\u542b\u4e49\u540c includes \u65b9\u6cd5\u76f8\u540c\uff0c\u5982\u679c\u5728 buf \u627e\u4e0d\u5230 value\uff0c\u90a3\u4e48\u4f1a\u8fd4\u56de `-1`\uff0c\u6240\u4ee5 `includes(value)` \u65b9\u6cd5\u5176\u5b9e\u5c31\u76f8\u5f53\u4e8e `indexOf(value) !== -1`\\n\\n```javascript\\nconst buf = Buffer.from(\\"HelloWorld\\");\\n\\nconsole.log(buf.indexOf(\\"H\\")); // 0\\nconsole.log(buf.indexOf(\\"H\\", 1)); // -1\\nconsole.log(buf.indexOf(Buffer.from(\\"World\\"))); // 5\\nconsole.log(buf.indexOf(72)); // 0\\n```\\n\\n### equals\\n\\n`buf.equals(otherBuffer)` \u662f\u6bd4\u8f83\u4e24\u4e2a Buffer \u5bf9\u8c61\u7684\u5b57\u8282\u662f\u5426\u5b8c\u5168\u76f8\u540c\uff0c\u5982\u679c\u76f8\u540c\uff0c\u5219\u8fd4\u56de `true`\uff0c\u5426\u5219\u8fd4\u56de `false`\\n\\n```javascript\\nconst buf1 = Buffer.alloc(5);\\nconst buf2 = Buffer.alloc(5);\\nconst buf3 = Buffer.allocUnsafe(5);\\n\\nconsole.log(buf1.equals(buf2)); // true\\nconsole.log(buf1.equals(buf3)); // false\\n```\\n\\n## \u53c2\u8003\u6587\u732e\\n\\n- [Buffer|Node.js \u6587\u6863](http://nodejs.cn/api/buffer.html)"},{"id":"node-event-loop","metadata":{"permalink":"/blog/node-event-loop","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2021-02-17-Node \u4e8b\u4ef6\u5faa\u73af.mdx","source":"@site/blog/2021-02-17-Node \u4e8b\u4ef6\u5faa\u73af.mdx","title":"Node \u4e8b\u4ef6\u5faa\u73af","description":"Node.js \u662f\u5355\u7ebf\u7a0b\u7684\uff0c\u4f46\u662f\u5b83\u5374\u53ef\u4ee5\u5e94\u7528\u5728\u9ad8\u5e76\u53d1\u573a\u666f\uff0c\u539f\u56e0\u5c31\u662f\u5b83\u7684\u4e8b\u4ef6\u5faa\u73af\u673a\u5236\u3002\u6240\u4ee5\u672c\u7bc7\u6587\u7ae0\u6765\u4ecb\u7ecd Node.js \u7684\u4e8b\u4ef6\u5faa\u73af\u673a\u5236\u3002","date":"2021-02-17T00:00:00.000Z","formattedDate":"2021\u5e742\u670817\u65e5","tags":[{"label":"Node","permalink":"/blog/tags/node"},{"label":"Event Loop","permalink":"/blog/tags/event-loop"}],"readingTime":13.61,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"slug":"node-event-loop","tags":["Node","Event Loop"],"authors":"xiongtao"},"prevItem":{"title":"Buffer","permalink":"/blog/Buffer"},"nextItem":{"title":"\u5b89\u5168\u7b97\u6cd5","permalink":"/blog/2020/11/05/\u5b89\u5168\u7b97\u6cd5"}},"content":"Node.js \u662f\u5355\u7ebf\u7a0b\u7684\uff0c\u4f46\u662f\u5b83\u5374\u53ef\u4ee5\u5e94\u7528\u5728\u9ad8\u5e76\u53d1\u573a\u666f\uff0c\u539f\u56e0\u5c31\u662f\u5b83\u7684\u4e8b\u4ef6\u5faa\u73af\u673a\u5236\u3002\u6240\u4ee5\u672c\u7bc7\u6587\u7ae0\u6765\u4ecb\u7ecd Node.js \u7684\u4e8b\u4ef6\u5faa\u73af\u673a\u5236\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u540c\u6b65\u4e0e\u5f02\u6b65\\n\\n\u56e0\u4e3a Node.js \u662f\u5355\u7ebf\u7a0b\u7684\uff0c\u4ee3\u7801\u7684\u6267\u884c\u4e0d\u80fd\u4f7f\u7528\u540c\u6b65\u673a\u5236\uff0c\u56e0\u4e3a\u540c\u6b65\u6267\u884c\u4f1a\u963b\u585e\u4ee3\u7801\uff0c\u5728\u5355\u7ebf\u7a0b\u4e2d\u963b\u585e\u4ee3\u7801\u610f\u5473\u7740\u6574\u4e2a\u7a0b\u5e8f\u90fd\u88ab\u963b\u585e\u5230\u4e86\uff0c\u4ece\u800c\u65e0\u6cd5\u5904\u7406\u5176\u4ed6\u4efb\u52a1\u3002\u5176\u4ed6\u540e\u7aef\u8bed\u8a00\u4f1a\u4f7f\u7528\u591a\u4e2a\u7ebf\u7a0b\u53bb\u6267\u884c\u4ee3\u7801\uff0c\u5373\u4f7f\u4e00\u4e2a\u7ebf\u7a0b\u88ab\u963b\u585e\u5230\u4e86\uff0c\u5176\u4ed6\u7684\u7ebf\u7a0b\u4e5f\u4e0d\u4f1a\u6709\u5f71\u54cd\u3002\\n\\n\u6240\u4ee5 Node.js \u4f7f\u7528\u5f02\u6b65\u7684\u65b9\u5f0f\u53bb\u6267\u884c\u4ee3\u7801\uff0c\u4e3a\u4e86\u66f4\u597d\u7684\u7406\u89e3\u5f02\u6b65\u7684\u6982\u5ff5\uff0c\u6211\u6253\u4e2a\u6bd4\u65b9\uff0c\u5047\u8bbe\u4f60\u8bf7\u6211\u505a\u4e00\u4ef6\u4e8b\u60c5\uff0c\u540c\u6b65\u7684\u65b9\u5f0f\u5c31\u662f\u4f60\u4f1a\u4e00\u76f4\u7b49\u6211\u5c06\u4e8b\u60c5\u505a\u5b8c\uff0c\u5728\u6211\u628a\u4e8b\u60c5\u505a\u5b8c\u4e4b\u524d\uff0c\u4f60\u4e0d\u80fd\u5e72\u522b\u7684\u4e8b\u60c5\uff1b\u5f02\u6b65\u7684\u65b9\u5f0f\u5c31\u662f\u4f60\u8bf7\u6211\u505a\u4e00\u4ef6\u4e8b\u60c5\uff0c\u5728\u6211\u505a\u4e8b\u60c5\u7684\u65f6\u5019\u4f60\u53ef\u4ee5\u5e72\u522b\u7684\u4e8b\uff0c\u7b49\u5230\u6211\u5c06\u4e8b\u60c5\u505a\u5b8c\u7684\u65f6\u5019\u6211\u4f1a\u53bb\u901a\u77e5\u4f60\u3002\\n\\n\u4ee5\u8bfb\u53d6\u6587\u4ef6\u4e3a\u4f8b\uff0c\u6211\u4eec\u6765\u770b\u540c\u6b65\u7684\u5199\u6cd5\\n\\n```javascript\\nconst fs = require(\\"fs\\");\\n\\n// \u7a0b\u5e8f\u4f1a\u88ab\u963b\u585e\u5728\u8fd9\u91cc\uff0c\u77e5\u9053\u6587\u4ef6\u8bfb\u53d6\u5b8c\u6bd5\\nconst data = fs.readFileSync(\\"./hello.txt\\", \\"utf-8\\");\\n\\nconsole.log(data);\\nconsole.log(\\"\u540c\u6b65\u8bfb\u53d6\\");\\n```\\n\\n\u8f93\u51fa\u7ed3\u679c\u4e3a\\n\\n```javascript\\nHello World!\\n\u540c\u6b65\u8bfb\u53d6\\n```\\n\\n\u56e0\u4e3a\u662f\u540c\u6b65\u8bfb\u53d6\u6587\u4ef6\uff0c\u6240\u4ee5\u4f1a\u7a0b\u5e8f\u4f1a\u963b\u585e\u5728\u8fd9\u91cc\uff0c\u76f4\u5230\u8bfb\u53d6\u5b8c\u6587\u4ef6\u624d\u4f1a\u7ee7\u7eed\u6267\u884c\u4ee3\u7801\uff0c\u6240\u4ee5\u5148\u8f93\u51fa\u8bfb\u53d6\u7684\u6587\u4ef6\u5185\u5bb9\uff0c\u7136\u540e\u8f93\u51fa `\u540c\u6b65\u8bfb\u53d6`\u3002\\n\\n\u63a5\u7740\u770b\u5f02\u6b65\u7684\u5199\u6cd5\\n\\n```javascript\\nconst fs = require(\\"fs\\");\\n\\n// \u7a0b\u5e8f\u4e0d\u4f1a\u88ab\u963b\u585e\u5728\u8fd9\u91cc\\nfs.readFile(\\"./hello.txt\\", \\"utf-8\\", (err, data) => {\\n  if (!err) {\\n    console.log(data);\\n  }\\n});\\n\\nconsole.log(\\"\u5f02\u6b65\u8bfb\u53d6\\");\\n```\\n\\n\u8f93\u51fa\u7ed3\u679c\u4e3a\\n\\n```javascript\\n\u5f02\u6b65\u8bfb\u53d6\\nHello World!\\n```\\n\\n\u56e0\u4e3a\u662f\u5f02\u6b65\u8bfb\u53d6\u6587\u4ef6\uff0c\u6b64\u65f6\u4e0d\u4f1a\u963b\u585e\u7a0b\u5e8f\u7684\u6267\u884c\uff0c\u4f1a\u7ee7\u7eed\u6267\u884c\u4ee3\u7801\uff0c\u6240\u4ee5\u4f1a\u5148\u6253\u5370\u51fa `\u5f02\u6b65\u8bfb\u53d6`\uff0c\u7b49\u5230\u6587\u4ef6\u8bfb\u53d6\u5b8c\u6bd5\u65f6\uff0c\u5219\u4f1a\u6267\u884c\u56de\u8c03\u51fd\u6570\uff0c\u6253\u5370\u51fa\u8bfb\u53d6\u5230\u7684\u6587\u4ef6\u5185\u5bb9\u3002\\n\\n## \u4e8b\u4ef6\u961f\u5217\\n\\n\u4e0b\u9762\u6211\u4eec\u5c31\u6765\u5256\u6790 Node.js \u5f02\u6b65\u6267\u884c\u7684\u80cc\u540e\u8fc7\u7a0b\uff0c\u6211\u4eec\u77e5\u9053 Node.js \u662f\u4e00\u95e8\u57fa\u4e8e\u4e8b\u4ef6\u9a71\u52a8\u7684\u8bed\u8a00\uff0c\u6211\u4eec\u76d1\u542c\u67d0\u7c7b\u4e8b\u4ef6\uff0c\u4f8b\u5982\u7f51\u7edc\u8bf7\u6c42\u4e8b\u4ef6\uff0c\u5e76\u4e3a\u5b83\u7ed1\u5b9a\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u5f53\u4e8b\u4ef6\u53d1\u751f\u65f6\uff0c\u5219\u4f1a\u8c03\u7528\u8fd9\u4e2a\u56de\u8c03\u51fd\u6570\u3002\\n\\n\u4e8b\u5b9e\u4e0a\u5f53\u4e8b\u4ef6\u53d1\u751f\u65f6\uff0c\u56de\u8c03\u51fd\u6570\u5e76\u4e0d\u4f1a\u7acb\u5373\u5f97\u5230\u6267\u884c\uff0c\u800c\u662f\u4f1a\u6dfb\u52a0\u5230\u4e00\u4e2a\u961f\u5217\u4e2d\uff0c\u800c\u6267\u884c\u5f15\u64ce\u5219\u4f1a\u4e0d\u65ad\u7684\u4ece\u961f\u5217\u4e2d\u53d6\u51fa\u4e8b\u4ef6\u6267\u884c\uff0c\u53d6\u51fa\u4e8b\u4ef6\u6267\u884c\u7684\u8fd9\u4e2a\u8fc7\u7a0b\u662f\u540c\u6b65\u7684\uff0c\u5c31\u662f\u8bf4\u5148\u6dfb\u52a0\u8fdb\u961f\u5217\u4e2d\u7684\u51fd\u6570\u4f1a\u88ab\u5148\u6267\u884c\uff0c\u5e76\u4e14\u5148\u6267\u884c\u5b8c\u524d\u9762\u7684\u51fd\u6570\u624d\u80fd\u6267\u884c\u540e\u9762\u7684\u51fd\u6570\u3002\\n\\n\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u4f8b\u5b50\\n\\n```javascript\\nsetTimeout(() => {\\n  // \u8be5\u56de\u8c03\u51fd\u6570\u4f1a\u82b1\u8d39 100 ms\\n  let end = Date.now();\\n\\n  while (end - start < 100) {\\n    end = Date.now();\\n  }\\n}, 5);\\n\\nsetTimeout(() => {\\n  let end = Date.now();\\n  console.log(`\u5ef6\u65f6\u4e86 ${end - start} ms \u6267\u884c`); // \u5ef6\u65f6\u4e86 100 ms \u6267\u884c\\n}, 10);\\n```\\n\\n\u4e0a\u9762\u6211\u4eec\u8bbe\u7f6e\u4e86\u4e24\u4e2a\u5b9a\u65f6\u5668\uff0c\u4e00\u4e2a\u5ef6\u65f6 `5ms` \u540e\u6267\u884c\uff0c\u4e00\u4e2a\u5ef6\u65f6 `10ms` \u540e\u6267\u884c\uff0c\u4f46\u662f\u6211\u4eec\u53d1\u73b0\u7b2c\u4e8c\u4e2a\u5b9a\u65f6\u5668\u662f\u5728\u5ef6\u65f6 `100ms` \u540e\u6267\u884c\u7684\uff0c\u5e76\u4e0d\u662f\u6211\u4eec\u9884\u671f\u7684\u90a3\u6837\u3002\\n\\n\u9996\u5148\u6211\u4eec\u9700\u8981\u660e\u786e\u4e00\u70b9\uff0c\u6211\u4eec\u8bbe\u7f6e\u7684 `5ms` \u4e0e `10ms` \u8fd9\u4e9b\u65f6\u95f4\u5e76\u4e0d\u662f\u6307\u5ef6\u65f6 `5ms` \u6216 `10ms` \u540e\u6267\u884c\u56de\u8c03\u51fd\u6570\uff0c\u800c\u662f\u6307\u5ef6\u65f6\u6307\u5b9a\u65f6\u95f4\u540e\u5c06\u8fd9\u4e9b\u56de\u8c03\u51fd\u6570\u6dfb\u52a0\u8fdb\u4e8b\u4ef6\u961f\u5217\u3002\\n\\n\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u65f6\u95f4\u7ebf\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20210222165625.gif\\" />\\n\\n1. `0ms` \u65f6\uff0c\u4e8b\u4ef6\u961f\u5217\u4e3a\u7a7a\\n2. `5ms` \u65f6\uff0c\u7b2c\u4e00\u4e2a\u5b9a\u65f6\u5668\u65f6\u95f4\u5230\u8fbe\uff0c\u5c06\u56de\u8c03\u51fd\u6570\u6dfb\u52a0\u8fdb\u4e8b\u4ef6\u961f\u5217\\n3. \u6267\u884c\u5f15\u64ce\u68c0\u67e5\u4e8b\u4ef6\u961f\u5217\uff0c\u53d1\u73b0\u961f\u5217\u4e2d\u6709\u4e8b\u4ef6\u672a\u6267\u884c\uff0c\u53d6\u51fa\u6267\u884c\\n4. `10ms` \u65f6\uff0c\u7b2c\u4e8c\u4e2a\u5b9a\u65f6\u5668\u65f6\u95f4\u5230\u8fbe\uff0c\u5c06\u56de\u8c03\u51fd\u6570\u6dfb\u52a0\u8fdb\u4e8b\u4ef6\u961f\u5217\uff0c\u4f46\u662f\u56e0\u4e3a\u524d\u9762\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u8fd8\u5728\u6267\u884c\u4e2d\uff0c\u8be5\u56de\u8c03\u51fd\u6570\u4e0d\u4f1a\u6267\u884c\\n5. `100ms` \u65f6\uff0c\u7b2c\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u6267\u884c\u5b8c\u6bd5\\n6. \u6267\u884c\u5f15\u64ce\u63a5\u7740\u68c0\u67e5\u4e8b\u4ef6\u961f\u5217\uff0c\u53d1\u73b0\u961f\u5217\u4e0d\u4e3a\u7a7a\uff0c\u53d6\u51fa\u7b2c\u4e8c\u4e2a\u56de\u8c03\u51fd\u6570\u6267\u884c\u51fd\u6570\u6267\u884c\\n\\n\u6240\u4ee5\u7ecf\u8fc7\u4e86 `100ms`\uff0c\u7b2c\u4e8c\u4e2a\u5b9a\u65f6\u5668\u7684\u56de\u8c03\u51fd\u6570\u624d\u4f1a\u88ab\u6267\u884c\u3002\\n\\n## \u4e8b\u4ef6\u5faa\u73af\\n\\n\u89e3\u51b3\u5b9e\u9645\u7684\u95ee\u9898\uff0c\u4e0a\u9762\u7684\u6a21\u578b\u60f3\u5fc5\u5df2\u7ecf\u591f\u7528\u4e86\uff0c\u4f46\u662f\u5982\u679c\u8981\u5e94\u5bf9\u9762\u8bd5\u9898\uff0c\u5374\u8fd8\u662f\u9700\u8981\u66f4\u52a0\u6df1\u5165\u7684\u4e86\u89e3\u3002\u9996\u5148\u770b\u4e00\u4e2a\u4f8b\u5b50\\n\\n```javascript\\nconsole.log(\\"start\\");\\n\\nconst start = Date.now();\\n\\nsetImmediate(() => {\\n  console.log(\\"setImmediate\\");\\n});\\n\\nsetTimeout(() => {\\n  console.log(\\"setTimeout\\");\\n}, 5);\\n\\nprocess.nextTick(() => {\\n  console.log(\\"nexTick\\");\\n});\\n\\nnew Promise((resolve) => {\\n  console.log(\\"resolve\\");\\n  resolve();\\n}).then(() => {\\n  console.log(\\"then\\");\\n});\\n\\nlet end = Date.now();\\nwhile (end - start < 5) {\\n  end = Date.now();\\n}\\n\\nconsole.log(\\"end\\");\\n```\\n\\n\u8bf7\u95ee\u4e0a\u9762\u7a0b\u5e8f\u7684\u8f93\u51fa\u7ed3\u679c\u662f\u4ec0\u4e48? \u6211\u5148\u5356\u4e2a\u5173\u5b50\uff0c\u5e0c\u671b\u4f60\u770b\u5b8c\u4e0b\u9762\u7684\u5185\u5bb9\u4e4b\u540e\u80fd\u591f\u56de\u7b54\u51fa\u6765\u3002\\n\\n\u5728\u4e0a\u9762\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u961f\u5217\u6765\u5efa\u6a21\u4e86\u7a0b\u5e8f\u7684\u6267\u884c\u8fc7\u7a0b\uff0c\u4e8b\u5b9e\u4e0a\u8fd9\u4e2a\u961f\u5217\u9700\u8981\u88ab\u62c6\u5206\u597d\u51e0\u4e2a\u961f\u5217\\n\\n```text\\n   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\\n\u250c\u2500>\u2502           timers          \u2502\\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\\n\u2502  \u2502     pending callbacks     \u2502\\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\\n\u2502  \u2502       idle, prepare       \u2502\\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u2502   incoming:   \u2502\\n\u2502  \u2502           poll            \u2502<\u2500\u2500\u2500\u2500\u2500\u2524  connections, \u2502\\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502   data, etc.  \u2502\\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\\n\u2502  \u2502           check           \u2502\\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\\n\u2514\u2500\u2500\u2524      close callbacks      \u2502\\n   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\\n```\\n\\n\u4e0a\u9762\u6211\u4eec\u5c06\u961f\u5217\u62c6\u5206\u4e3a\u4e86 6 \u4e2a\u9636\u6bb5\uff0c\u6bcf\u4e00\u4e2a\u9636\u6bb5\u90fd\u6709\u4e00\u4e2a\u961f\u5217\\n\\n- `timers`\uff1a`setTimeout` \u4ee5\u53ca `setInterval` \u4e2d\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u653e\u5165\u8fd9\u4e2a\u961f\u5217\\n- `pending callbacks`\uff1a\u7531\u4e8e\u67d0\u4e9b\u539f\u56e0\u9700\u8981\u63a8\u8fdf\u5230\u4e0b\u4e00\u8f6e\u5faa\u73af\u7684 `I/O` \u56de\u8c03\u51fd\u6570\u653e\u5728\u8fd9\u4e2a\u961f\u5217(\u76ee\u524d\u6211\u8fd8\u6ca1\u6709\u9047\u5230\u8fc7\u6b64\u7c7b\u4e8b\u4ef6)\\n- `idle, prepare`\uff1a\u8fd9\u4e2a\u961f\u5217\u662f Node.js \u5185\u90e8\u4f7f\u7528\u7684\uff0c\u6211\u4eec\u4e0d\u9700\u8981\u5173\u5fc3\\n- `poll`\uff1a`I/O` \u4e8b\u4ef6\uff0c\u7f51\u7edc\u8bf7\u6c42\u7b49\u4e8b\u4ef6\u4f1a\u653e\u5728\u8fd9\u4e2a\u961f\u5217\\n- `check`\uff1a`setImmediate` \u4e2d\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u653e\u5728\u8fd9\u4e2a\u961f\u5217\\n- `close`\uff1a\u4e0e `close` \u76f8\u5173\u65b9\u6cd5\u4f1a\u653e\u5728\u8fd9\u4e2a\u961f\u5217\uff0c\u4f8b\u5982 `socket.on(\'close\', callback)`\\n\\nNode \u4f1a\u4f9d\u6b21\u7ecf\u5386\u8fd9 6 \u4e2a\u9636\u6bb5\uff0c\u53ea\u6709\u5c06\u67d0\u4e2a\u9636\u6bb5\u4e2d\u961f\u5217\u7684\u6240\u6709\u51fd\u6570\u90fd\u6267\u884c\u5b8c\u6bd5\uff0c\u624d\u4f1a\u8fdb\u5165\u5230\u4e0b\u4e00\u4e2a\u9636\u6bb5\u3002\u4f46\u662f\u5173\u4e8e `poll` \u9636\u6bb5\u6709\u4e00\u70b9\u4e0d\u540c\u4e4b\u5904\uff0c\u5f53\u8fdb\u5165 `poll` \u9636\u6bb5\u4ee5\u540e\uff0c\u5b83\u4f1a\u8ba1\u7b97 `timers` \u5b9a\u65f6\u5668\u4e2d\u4e0b\u4e00\u4e2a\u5b9a\u65f6\u5668\u5230\u8fbe\u7684\u65f6\u95f4\uff0c\u7136\u540e\u68c0\u67e5 `poll` \u961f\u5217\u662f\u5426\u6709\u4efb\u52a1\uff0c\u5982\u679c\u6709\u5c31\u6267\u884c\uff0c\u76f4\u5230\u961f\u5217\u4e3a\u7a7a\u3002\u5f53\u961f\u5217\u4e3a\u7a7a\u65f6\\n\\n1. \u662f\u5426\u5df2\u7ecf\u5230\u8fbe\u4e86\u4e0b\u4e00\u4e2a\u5b9a\u65f6\u5668\u5230\u8fbe\u7684\u65f6\u95f4\uff0c\u5373 `timers` \u961f\u5217\u4e2d\u662f\u5426\u6709\u4efb\u52a1\uff0c\u5982\u679c\u6709\u5219\u7ee7\u7eed\u4e8b\u4ef6\u5faa\u73af\uff0c\u6765\u5230\u4e0b\u4e00\u4e2a\u9636\u6bb5\\n2. \u5982\u679c `timers` \u961f\u5217\u4e2d\u6ca1\u6709\u4efb\u52a1\uff0c\u90a3\u4e48\u68c0\u67e5 `check` \u961f\u5217\u662f\u5426\u6709\u4efb\u52a1\uff0c\u5982\u679c\u6709\u7ee7\u7eed\u8fdb\u884c\u4e8b\u4ef6\u5faa\u73af\\n3. \u5982\u679c `timers` \u961f\u5217\u548c `check` \u961f\u5217\u90fd\u6ca1\u6709\u4efb\u52a1\uff0c\u90a3\u4e48\u5c31\u4f1a\u4e00\u4e2a\u505c\u7559\u5728 `poll` \u9636\u6bb5\uff0c\u7b49\u5f85\u65b0\u7684\u4efb\u52a1\u5230\u6765\uff0c\u7136\u540e\u6267\u884c\u8be5\u4efb\u52a1\\n\\n\u6240\u4ee5\u4f1a\u6709\u5f88\u957f\u4e00\u6bb5\u65f6\u95f4\u90fd\u4f1a\u5904\u4e8e `poll` \u9636\u6bb5\u3002\\n\\n:::info\\n\\n\u6211\u4eec\u628a\u4e00\u6b21\u5faa\u73af\u79f0\u4e3a\u4e00\u4e2a `tick`\u3002\\n\\n:::\\n\\n\u4e0d\u77e5\u9053\u4f60\u6709\u6ca1\u6709\u53d1\u73b0\uff0c\u6211\u4eec\u5e76\u6ca1\u6709\u63d0\u53ca `process.nextTick` \u4e0e  `promise.then` \u4e2d\u7684\u56de\u8c03\u51fd\u6570\u653e\u5728\u54ea\u4e2a\u961f\u5217\u3002\u5176\u5b9e\u8fd8\u6709\u4e24\u4e2a\u961f\u5217\uff0c`nextTickQueue` \u548c `microTaskQueue`\uff0c`process.nextTick` \u4e2d\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u88ab\u653e\u7f6e\u5728 `nextTickQueue` \u4e2d\uff0c\u800c `promise.then` \u4e2d\u7684\u56de\u8c03\u51fd\u6570\u88ab\u88ab\u653e\u7f6e\u5728 `microTaskQueue` \u4e2d\u3002\\n\\n\u90a3\u4e48\u8fd9\u4e24\u4e2a\u961f\u5217\u5728\u56fe\u4e2d\u5904\u4e8e\u4f55\u79cd\u4f4d\u7f6e\uff0c\u5176\u5b9e\u5728\u8fdb\u5165\u6bcf\u4e2a\u9636\u6bb5\u4e4b\u524d\uff0c\u90fd\u4f1a\u68c0\u67e5\u4e00\u904d\u8fd9\u4e24\u4e2a\u961f\u5217\uff0c\u5982\u679c\u6709\u4efb\u52a1\u7684\u8bdd\u5c31\u4f1a\u6267\u884c\uff0c\u76f4\u81f3\u5c06\u961f\u5217\u4e2d\u7684\u4efb\u52a1\u6267\u884c\u5b8c\u6bd5\u3002\u5e76\u4e14 `nextTickQueue` \u961f\u5217\u4e2d\u7684\u51fd\u6570\u6bd4 `microTaskQueue` \u961f\u5217\u4e2d\u7684\u51fd\u6570\u5148\u88ab\u6267\u884c\u3002\\n\\n\u660e\u767d\u4e0a\u9762\u7684\u5185\u5bb9\u4e4b\u540e\u6211\u4eec\u6765\u770b\u90a3\u9053\u9898\u76ee\\n\\n```javascript\\nconsole.log(\\"start\\");\\n\\nconst start = Date.now();\\n\\nsetImmediate(() => {\\n  console.log(\\"setImmediate\\");\\n});\\n\\nsetTimeout(() => {\\n  console.log(\\"setTimeout\\");\\n}, 5);\\n\\nprocess.nextTick(() => {\\n  console.log(\\"nexTick\\");\\n});\\n\\nnew Promise((resolve) => {\\n  console.log(\\"resolve\\");\\n  resolve();\\n}).then(() => {\\n  console.log(\\"then\\");\\n});\\n\\nlet end = Date.now();\\nwhile (end - start < 5) {\\n  end = Date.now();\\n}\\n\\nconsole.log(\\"end\\");\\n```\\n\\n\u9996\u5148\u5f53\u6211\u4eec\u5f00\u59cb\u8fd0\u884c\u7a0b\u5e8f\u7684\u65f6\u5019\uff0c\u5e76\u4e0d\u4f1a\u7acb\u5373\u8fdb\u5165\u4e8b\u4ef6\u5faa\u73af\uff0c\u800c\u662f\u9996\u5148\u5c06\u540c\u6b65\u4ee3\u7801\u6267\u884c\u5b8c\u6bd5\uff0c\u6240\u4ee5\u9996\u5148\u4f1a\u4f9d\u6b21\u6253\u5370\u51fa\\n\\n```console\\nstart\\nresolve\\nend\\n```\\n\\n\u63a5\u7740\u5728\u8fdb\u5165\u4e8b\u4ef6\u5faa\u73af\uff0c\u56e0\u4e3a\u5728\u8fdb\u5165\u6bcf\u4e2a\u9636\u6bb5\u4e4b\u524d\u90fd\u4f1a\u5148\u68c0\u67e5 `nextTickQueue` \u548c `microTaskQueue` \u8fd9\u4e24\u4e2a\u961f\u5217\uff0c\u5e76\u4e14 `nextTickQueue` \u5728 `microTaskQueue` \u4e4b\u524d\u6267\u884c\uff0c\u6240\u4ee5\u63a5\u7740\u6253\u5370\u51fa\\n\\n```console\\nnextTick\\nthen\\n```\\n\\n\u63a5\u7740\u8fdb\u5165 `timers` \u9636\u6bb5\uff0c\u56e0\u4e3a\u6211\u4eec\u5728\u4e3b\u7a0b\u5e8f\u4e2d\u6709\u8fd9\u4e48\u4e00\u6bb5\u4ee3\u7801\\n\\n```javascript\\nlet end = Date.now();\\nwhile (end - start < 5) {\\n  end = Date.now();\\n}\\n```\\n\\n\u76ee\u7684\u5c31\u662f\u786e\u4fdd `setTimeout` \u4e2d\u7684\u56de\u8c03\u51fd\u6570\u5df2\u8fdb\u5165 `timers` \u961f\u5217\uff0c\u6240\u4ee5\u6b64\u65f6 `timers` \u961f\u5217\u662f\u6709\u51fd\u6570\u7684\uff0c\u6240\u4ee5\u6b64\u65f6\u4f1a\u6253\u5370\u51fa\\n\\n```\\nsetTimeout\\n```\\n\\n\u63a5\u7740\u8fdb\u5165` pending` \u9636\u6bb5\uff0c\u8be5\u961f\u5217\u4e2d\u6ca1\u6709\u51fd\u6570\uff1b\u8fdb\u5165` poll` \u9636\u6bb5(\u5ffd\u7565 `idle, prepare` \u9636\u6bb5)\uff0c\u4e5f\u6ca1\u6709\u51fd\u6570\uff0c\u6b64\u65f6\u56e0\u4e3a `check` \u961f\u5217\u4e2d\u6709\u51fd\u6570\uff0c\u6240\u4ee5\u4f1a\u4ece `poll` \u9636\u6bb5\u8fdb\u5165\u5230 `check` \u9636\u6bb5\uff0c\u6240\u4ee5\u63a5\u7740\u4f1a\u6253\u5370\\n\\n```\\nsetImmediate\\n```\\n\\n\u7136\u540e\u8fdb\u5165 `close` \u9636\u6bb5\uff0c\u6ca1\u6709\u51fd\u6570\uff0c\u56de\u5230 `timers` \u9636\u6bb5\uff0c\u4ee5\u6b64\u5f80\u590d\u3002\\n\\n\u6240\u4ee5\u4e0a\u9762\u7a0b\u5e8f\u6700\u7ec8\u7684\u6253\u5370\u7ed3\u679c\u4e3a\\n\\n```console\\nstart\\nresolve\\nend\\nnexTick\\nthen\\nsetTimeout\\nsetImmediate\\n```\\n\\n## setTimeout vs setImmediate\\n\\n`setTimeout` \u4f4d\u4e8e `timers` \u9636\u6bb5\uff0c\u800c `setImmediate` \u653e\u7f6e\u4e8e `check` \u9636\u6bb5\\n\\n```javascript\\nsetTimeout(() => {\\n  console.log(\\"setTimeout\\");\\n});\\n\\nsetImmediate(() => {\\n  console.log(\\"setImmediate\\");\\n});\\n```\\n\\n\u6240\u4ee5\u4e0a\u9762\u4ee3\u7801\u7684\u6267\u884c\u7ed3\u679c\u5e94\u8be5\u662f\\n\\n```console\\nsetTimeout\\nsetImmediate\\n```\\n\\n\u4f46\u662f\u6709\u65f6\u4f1a\u6253\u5370\u51fa\\n\\n```console\\nsetImmediate\\nsetTimeout\\n```\\n\\n\u8fd9\u662f\u56e0\u4e3a `setTimeout` \u4e0d\u4f20\u5165\u65f6\u95f4\u65f6\uff0c\u9ed8\u8ba4\u662f `0`\uff0c\u800c Node.js \u505a\u4e0d\u5230 `0ms` \u7684\u5b9a\u65f6\uff0c\u6700\u5c11\u4e5f\u662f `1ms`\u3002\u5982\u679c\u6267\u884c\u4e3b\u7a0b\u5e8f\u9700\u8981\u82b1\u8d39 `1ms`\uff0c\u90a3\u4e48 `timers` \u961f\u5217\u4e2d\u5c31\u4f1a\u6709\u51fd\u6570\uff0c\u5c31\u4f1a\u5148\u6253\u5370 `setTimeout`\uff0c\u5982\u679c\u6267\u884c\u4e3b\u7a0b\u5e8f\u4e0d\u9700\u8981 `1ms`\uff0c\u90a3\u4e48\u6765\u5230 `timers` \u9636\u6bb5\u65f6\uff0c\u5176\u4e2d\u8fd8\u6ca1\u6709\u51fd\u6570\uff0c\u4f46\u662f `check` \u961f\u5217\u4e2d\u5df2\u7ecf\u6709\u51fd\u6570\u4e86\uff0c\u5c31\u4f1a\u5148\u6253\u5370 `setImmediate`\u3002\\n\\n\u4f46\u662f\u5982\u679c\u5728 `I/O` \u56de\u8c03\u51fd\u6570\u4e2d\u540c\u65f6\u8c03\u7528 `setImmediate` \u548c `setTimeout`\uff0c\u90a3\u4e48\u4f1a\u5148\u6267\u884c `setImmediate`\uff0c\u56e0\u4e3a\u6267\u884c `I/O` \u56de\u8c03\u51fd\u6570\u65f6\u5df2\u7ecf\u5904\u4e8e `poll` \u9636\u6bb5\uff0c\u4e0b\u4e00\u4e2a\u9636\u6bb5\u5c31\u662f `check` \u9636\u6bb5\uff0c\u6240\u4ee5\u4f1a\u5148\u6267\u884c `setImmediate`\\n\\n```javascript\\nconst fs = require(\\"fs\\");\\n\\nfs.readFile(\\"./hello.txt\\", (err, data) => {\\n  setTimeout(() => {\\n    console.log(\\"setTimeout\\");\\n  });\\n  setImmediate(() => {\\n    console.log(\\"setImmediate\\");\\n  });\\n});\\n```\\n\\n\u8f93\u51fa\u59cb\u7ec8\u4e3a\\n\\n```console\\nsetImmediate\\nsetTimeout\\n```\\n\\n## process.nextTick\\n\\n\u8fd9\u4e2a\u51fd\u6570\u7684\u540d\u5b57\u5f88\u6709\u8bef\u5bfc\u6027\uff0c\u6211\u4eec\u77e5\u9053 `process.nextTick` \u4e2d\u7684\u51fd\u6570\u662f\u5728\u8fdb\u5165\u6bcf\u4e2a\u9636\u6bb5\u4e4b\u524d\u6267\u884c\u7684\uff0c\u6240\u4ee5\u5b83\u5e94\u8be5\u662f `currentTick` \u800c\u4e0d\u662f `nextTick`\u3002\u800c `setImmediate` \u53ea\u6709\u5728 `check` \u9636\u6bb5\u624d\u4f1a\u6267\u884c\uff0c\u5e76\u6ca1\u6709\u90a3\u4e48\u7684 Immediate\u3002\\n\\n\u6240\u4ee5\u6709\u4eba\u63d0\u8bae\u5c06\u4e8c\u8005\u7684\u540d\u79f0\u8c03\u6362\u3002\u4f46\u662f\u7531\u4e8e\u6709\u592a\u591a\u7684\u5e93\u4f9d\u8d56\u4e8e\u8fd9\u4e24\u4e2a API\uff0c\u5982\u679c\u6539\u52a8 API \u7684\u8bdd\uff0c\u4f1a\u5f15\u8d77\u5f88\u591a\u7684\u6539\u52a8\u3002\\n\\n\u53e6\u5916\u9700\u8981\u6ce8\u610f\u7684\u4e00\u70b9\u662f\uff0c\u5982\u679c\u6211\u4eec\u9012\u5f52\u8c03\u7528 `process.nextTick`\uff0c\u90a3\u4e48 `nextTickQueue` \u5c31\u6c38\u8fdc\u4e0d\u4f1a\u7a7a\uff0c\u5373\u6b64\u65f6\u5c31\u4f1a\u963b\u585e\u4e8b\u4ef6\u5faa\u73af\u7684\u8fd0\u884c\\n\\n```javascript\\nsetTimeout(() => {\\n  console.log(\\"setTimeout\\");\\n});\\n\\nconst recursive = () => {\\n  process.nextTick(recursive);\\n};\\n\\nprocess.nextTick(recursive);\\n```\\n\\n\u4e0a\u9762 `setTimeout` \u4e2d\u7684\u56de\u8c03\u51fd\u6570\u6c38\u8fdc\u90fd\u4e0d\u4f1a\u5f97\u5230\u6267\u884c\u3002\\n\\n## \u53c2\u8003\u6587\u732e\\n\\n- [The Node.js Event Loop, Timers, and process.nextTick()](https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/)\\n- [Node \u5b9a\u65f6\u5668\u8be6\u89e3](http://www.ruanyifeng.com/blog/2018/02/node-event-loop.html)"},{"id":"/2020/11/05/\u5b89\u5168\u7b97\u6cd5","metadata":{"permalink":"/blog/2020/11/05/\u5b89\u5168\u7b97\u6cd5","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2020-11-05-\u5b89\u5168\u7b97\u6cd5.mdx","source":"@site/blog/2020-11-05-\u5b89\u5168\u7b97\u6cd5.mdx","title":"\u5b89\u5168\u7b97\u6cd5","description":"\u6211\u4eec\u5728\u4f7f\u7528\u4e92\u8054\u7f51\u4ea4\u6362\u6570\u636e\u65f6\uff0c\u6570\u636e\u9700\u8981\u7ecf\u8fc7\u5404\u79cd\u5404\u6837\u7684\u7f51\u7edc\u8bbe\u5907\u624d\u80fd\u5230\u8fbe\u901a\u4fe1\u53cc\u65b9\uff0c\u5982\u679c\u6570\u636e\u5728\u4f20\u8f93\u7684\u8fc7\u7a0b\u4e2d\u7ecf\u8fc7\u67d0\u4e9b\u6076\u610f\u7528\u6237\u7684\u8bbe\u5907\uff0c\u5c31\u6709\u53ef\u80fd\u5bfc\u81f4\u4fe1\u606f\u88ab\u7a83\u53d6\u3002\u6240\u4ee5\u5982\u679c\u60f3\u5b89\u5168\u7684\u4f7f\u7528\u4e92\u8054\u7f51\uff0c\u4e86\u89e3\u5fc5\u987b\u7684\u5b89\u5168\u6280\u672f\u662f\u4e0d\u53ef\u6216\u7f3a\u7684\u3002","date":"2020-11-05T00:00:00.000Z","formattedDate":"2020\u5e7411\u67085\u65e5","tags":[{"label":"\u5b89\u5168","permalink":"/blog/tags/\u5b89\u5168"},{"label":"\u6570\u5b57\u7b7e\u540d","permalink":"/blog/tags/\u6570\u5b57\u7b7e\u540d"},{"label":"\u6570\u5b57\u8bc1\u4e66","permalink":"/blog/tags/\u6570\u5b57\u8bc1\u4e66"}],"readingTime":20.11,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"authors":"xiongtao","tags":["\u5b89\u5168","\u6570\u5b57\u7b7e\u540d","\u6570\u5b57\u8bc1\u4e66"],"date":"2020-11-05T00:00:00.000Z"},"prevItem":{"title":"Node \u4e8b\u4ef6\u5faa\u73af","permalink":"/blog/node-event-loop"},"nextItem":{"title":"\u5c0f\u7403\u4f1a\u505c\u4e0b\u6765\u5417","permalink":"/blog/2020/08/30/\u5c0f\u7403\u4f1a\u505c\u4e0b\u6765\u5417"}},"content":"\u6211\u4eec\u5728\u4f7f\u7528\u4e92\u8054\u7f51\u4ea4\u6362\u6570\u636e\u65f6\uff0c\u6570\u636e\u9700\u8981\u7ecf\u8fc7\u5404\u79cd\u5404\u6837\u7684\u7f51\u7edc\u8bbe\u5907\u624d\u80fd\u5230\u8fbe\u901a\u4fe1\u53cc\u65b9\uff0c\u5982\u679c\u6570\u636e\u5728\u4f20\u8f93\u7684\u8fc7\u7a0b\u4e2d\u7ecf\u8fc7\u67d0\u4e9b\u6076\u610f\u7528\u6237\u7684\u8bbe\u5907\uff0c\u5c31\u6709\u53ef\u80fd\u5bfc\u81f4\u4fe1\u606f\u88ab\u7a83\u53d6\u3002\u6240\u4ee5\u5982\u679c\u60f3\u5b89\u5168\u7684\u4f7f\u7528\u4e92\u8054\u7f51\uff0c\u4e86\u89e3\u5fc5\u987b\u7684\u5b89\u5168\u6280\u672f\u662f\u4e0d\u53ef\u6216\u7f3a\u7684\u3002\\n\\n## \u5b89\u5168\u95ee\u9898\\n\\n\u6211\u4eec\u9996\u5148\u4e86\u89e3\u4e00\u4e0b\u5728\u901a\u4fe1\u7684\u8fc7\u7a0b\u4e2d\u4f1a\u9047\u5230\u4ec0\u4e48\u6837\u7684\u5b89\u5168\u95ee\u9898\u3002\\n\\n### \u7a83\u542c\\n\\n<video controls src=\\"https://video-obsidian.oss-cn-beijing.aliyuncs.com/Safe01.mp4\\"></video>\\n\\nA \u5411 B \u53d1\u9001\u7684\u4fe1\u606f\u53ef\u80fd\u4f1a\u5728\u4f20\u8f93\u7684\u8fc7\u7a0b\u4e2d\u88ab X \u5077\u770b\uff0c\u8fd9\u5c31\u662f\u7a83\u542c\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n### \u5047\u5192\\n\\n<img src=\\"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/image.7fch8qj4mxc0.webp\\" />\\n\\nA \u4ee5\u4e3a\u7ed9 B \u53d1\u9001\u4e86\u6d88\u606f\uff0c\u4f46\u662f B \u6709\u53ef\u80fd\u662f X \u5192\u5145\u7684\uff1b\u540c\u6837 B \u4ee5\u4e3a\u6536\u5230\u4e86 A \u7684\u6d88\u606f\uff0c\u4f46\u662f A \u4e5f\u6709\u53ef\u80fd\u662f X \u5192\u5145\u7684\uff0c\u8fd9\u79cd\u95ee\u9898\u53eb\u505a\u5047\u5192\u3002\\n\\n### \u7be1\u6539\\n\\n<video controls src=\\"https://video-obsidian.oss-cn-beijing.aliyuncs.com/Safe02.mp4\\"></video>\\n\\nB \u786e\u5b9e\u6536\u5230\u4e86 A \u53d1\u9001\u7684\u4fe1\u606f\uff0c\u4f46\u662f\u5185\u5bb9\u5df2\u7ecf\u88ab X \u7ed9\u6539\u53d8\u4e86\uff0c\u8fd9\u79cd\u884c\u4e3a\u53eb\u505a\u7be1\u6539\u3002\\n\\n### \u4e8b\u540e\u5426\u8ba4\\n\\n<video controls src=\\"https://video-obsidian.oss-cn-beijing.aliyuncs.com/Safe03.mp4\\"></video>\\n\\nB \u4ece A \u90a3\u91cc\u6536\u5230\u4e86\u6d88\u606f\uff0c\u4f46\u662f A \u5728\u4e8b\u540e\u5ba3\u79f0\u6d88\u606f\u4e0d\u662f\u5b83\u53d1\u7684\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u4e92\u8054\u7f51\u4e0a\u7684\u5546\u4e1a\u4ea4\u6613\u6216\u5408\u540c\u65e0\u6cd5\u6210\u7acb\uff0c\u8fd9\u79cd\u884c\u4e3a\u53eb\u505a\u4e8b\u540e\u5426\u8ba4\u3002\\n\\n\u5728\u8fd9\u7bc7\u6587\u7ae0\u4e2d\u5c31\u7740\u91cd\u89e3\u51b3\u8fd9\u56db\u7c7b\u95ee\u9898\uff0c\u5bf9\u4e8e\u7a83\u542c\uff0c\u6211\u4eec\u5bf9\u6d88\u606f\u8fdb\u884c\u52a0\u5bc6\u6280\u672f\uff1b\u5bf9\u4e8e\u5047\u5192\uff0c\u6211\u4eec\u4f7f\u7528\u6d88\u606f\u8ba4\u8bc1\u7801\u6216\u6570\u5b57\u7b7e\u540d\uff1b\u5bf9\u4e8e\u7be1\u6539\uff0c\u6211\u4eec\u540c\u6837\u53ef\u4ee5\u4f7f\u7528\u6d88\u606f\u8ba4\u8bc1\u7801\u6216\u6570\u5b57\u7b7e\u540d\uff1b\u5bf9\u4e8e\u4e8b\u540e\u5426\u8ba4\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6570\u5b57\u7b7e\u540d\u3002\\n\\n| \u95ee\u9898     | \u89e3\u51b3\u529e\u6cd5             |\\n| -------- | -------------------- |\\n| \u7a83\u542c     | \u52a0\u5bc6                 |\\n| \u5047\u5192     | \u6d88\u606f\u8ba4\u8bc1\u7801\u6216\u6570\u5b57\u7b7e\u540d |\\n| \u7be1\u6539     | \u6d88\u606f\u8ba4\u8bc1\u7801\u6216\u6570\u5b57\u7b7e\u540d |\\n| \u4e8b\u540e\u5426\u8ba4 | \u6570\u5b57\u7b7e\u540d             |\\n\\n\u6570\u5b57\u7b7e\u540d\u5b58\u5728\u65e0\u6cd5\u786e\u8ba4\u516c\u5f00\u5bc6\u94a5\u5236\u4f5c\u8005\u7684\u95ee\u9898\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6570\u5b57\u8bc1\u4e66\u6765\u89e3\u51b3\uff0c\u5177\u4f53\u7684\u8fc7\u7a0b\u6211\u4eec\u5728\u540e\u9762\u5206\u6790\u3002\\n\\n## \u5bf9\u79f0\u52a0\u5bc6\\n\\n\u5982\u679c\u6211\u4eec\u5728\u4e92\u8054\u7f51\u4e0a\u76f4\u63a5\u5c06\u6d88\u606f\u53d1\u9001\u8fc7\u53bb\u7684\u8bdd\uff0c\u6709\u53ef\u80fd\u4f1a\u88ab\u7a83\u542c\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5c06\u6d88\u606f\u53d8\u4e3a\u5bc6\u6587\uff0c\u7136\u540e\u53d1\u9001\u51fa\u53bb\uff0c\u5c06\u6d88\u606f\u53d8\u4e3a\u5bc6\u6587\u7684\u8fc7\u7a0b\u53eb\u505a\u52a0\u5bc6\uff0c\u540c\u6837\u5728\u63a5\u6536\u65b9\u9700\u8981\u5c06\u5bc6\u6587\u53d8\u4e3a\u660e\u6587(\u6d88\u606f)\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u53eb\u505a\u89e3\u5bc6\u3002\\n\\n\u5728\u52a0\u5bc6\u548c\u89e3\u5bc6\u7684\u8fc7\u7a0b\u4e2d\u9700\u8981\u7528\u5230\u5bc6\u94a5\uff0c\u6240\u8c13\u7684\u5bc6\u94a5\u53ef\u4ee5\u7c7b\u6bd4\u4e8e\u94a5\u5319\uff0c\u94a5\u5319\u7684\u4f5c\u7528\u5c31\u662f\u52a0\u9501\u4e0e\u5f00\u9501\uff0c\u800c\u5bc6\u94a5\u7684\u4f5c\u7528\u662f\u52a0\u5bc6\u4e0e\u89e3\u5bc6\u3002\u6839\u636e\u52a0\u5bc6\u548c\u89e3\u5bc6\u662f\u5426\u4f7f\u7528\u7684\u662f\u76f8\u540c\u7684\u5bc6\u94a5\uff0c\u53ef\u4ee5\u5206\u4e3a\u5bf9\u79f0\u52a0\u5bc6\u4e0e\u975e\u5bf9\u79f0\u52a0\u5bc6\uff1a\\n\\n- \u5bf9\u79f0\u52a0\u5bc6\uff1a\u52a0\u5bc6\u548c\u89e3\u5bc6\u7684\u5bc6\u94a5\u662f\u540c\u4e00\u4e2a\u5bc6\u94a5\\n- \u975e\u5bf9\u79f0\u52a0\u5bc6\uff1a\u52a0\u5bc6\u548c\u89e3\u5bc6\u7684\u5bc6\u94a5\u4e0d\u76f8\u540c\\n\\n\u5728\u672c\u5c0f\u8282\u4e2d\u5c31\u4ecb\u7ecd\u5bf9\u79f0\u52a0\u5bc6\uff0c\u4ee5\u53ca\u5bf9\u79f0\u52a0\u5bc6\u5b58\u5728\u4ec0\u4e48\u95ee\u9898\u3002\\n\\n\u5bf9\u79f0\u52a0\u5bc6\u7684\u8fc7\u5982\u4e0b\uff1a\\n\\n<img src=\\"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/20201031092108.utibeyvdfgg.gif\\" />\\n\\n\\n1. A \u5c06\u5bc6\u94a5 key \u53d1\u9001\u7ed9 B\\n2. A \u4f7f\u7528\u5bc6\u94a5 key \u5bf9\u6d88\u606f aaa \u52a0\u5bc6\uff0c\u5f97\u5230\u5bc6\u6587 xyz\\n3. B \u63a5\u5230\u5bc6\u6587 xyz\uff0c\u4f7f\u7528\u5bc6\u94a5 key \u5bf9\u5bc6\u6587\u89e3\u5bc6\u5f97\u5230 aaa\\n\\n\u8fd9\u65f6\u5982\u679c\u7a83\u542c\u8005\u6765\u7a83\u542c\u7684\u8bdd\uff0c\u56e0\u4e3a\u7a83\u542c\u8005\u6ca1\u6709\u5bc6\u94a5\uff0c\u6240\u4ee5\u65e0\u6cd5\u5f97\u77e5\u660e\u6587\u662f\u4ec0\u4e48\u3002\\n\\n\u4f46\u662f\u4e0a\u8ff0\u7684\u52a0\u5bc6\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u5982\u679c\u5bc6\u94a5 key \u5728 A \u53d1\u9001\u7ed9 B \u7684\u65f6\u5019\u88ab\u7a83\u542c\u4e86\\n\\n<img src=\\"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/image.6fp3kh5cn140.webp\\" />\\n\\n\u8fd9\u65f6\u7a83\u542c\u8005\u5c31\u77e5\u9053\u5bc6\u94a5\uff0c\u4ee5\u6b64\u5c06\u5bc6\u6587\u89e3\u5bc6\uff0c\u4ece\u800c\u7a83\u542c\u6d88\u606f\u3002\\n\\n## \u975e\u5bf9\u79f0\u52a0\u5bc6\\n\\n\u975e\u5bf9\u79f0\u52a0\u5bc6\u6307\u7684\u662f\u52a0\u5bc6\u7684\u5bc6\u94a5\u548c\u89e3\u5bc6\u7684\u5bc6\u94a5\u4e0d\u662f\u540c\u4e00\u4e2a\u5bc6\u94a5\uff0c\u6211\u4eec\u628a\u52a0\u5bc6\u5bc6\u94a5\u79f0\u4e3a\u516c\u5f00\u5bc6\u94a5\uff0c\u56e0\u4e3a\u5b83\u662f\u53ef\u4ee5\u516c\u5f00\u7684\uff0c\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u8bbf\u95ee\u5230\uff0c\u6211\u4eec\u79f0\u89e3\u5bc6\u5bc6\u94a5\u4e3a\u79c1\u6709\u5bc6\u94a5\u3002\\n\\n\u5f53 A \u7ed9 B \u53d1\u9001\u6d88\u606f\u65f6\uff0c\u5728\u6b64\u4e4b\u524d\uff0cB \u4f1a\u751f\u6210\u516c\u5f00\u5bc6\u94a5\u548c\u79c1\u6709\u5bc6\u94a5\uff0c\u7136\u540e B \u5c06\u516c\u5f00\u5bc6\u94a5\u53d1\u9001\u7ed9 A\uff0c\u63a5\u7740 A \u4f7f\u7528\u8be5\u516c\u5f00\u5bc6\u94a5\u52a0\u5bc6\u6d88\u606f\uff0c\u5e76\u5c06\u6d88\u606f\u53d1\u9001\u7ed9 B\uff0c\u5f53 B \u63a5\u6536\u5230\u6d88\u606f\u4e4b\u540e\uff0c\u4f7f\u7528\u79c1\u6709\u5bc6\u94a5\u5bf9\u6d88\u606f\u89e3\u5bc6\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/20201030185737762022-10-23-19-40-08.gif\\" />\\n\\n\u5373\u4f7f\u7a83\u542c\u8005\u7a83\u542c\u5230\u4e86\u5bc6\u6587\u4ee5\u53ca\u516c\u5f00\u5bc6\u94a5\uff0c\u4f46\u662f\u5b83\u6ca1\u6709\u79c1\u6709\u5bc6\u94a5\uff0c\u6240\u4ee5\u5b83\u4e0d\u80fd\u89e3\u5bc6\u51fa\u6d88\u606f\u3002\\n\\n\u4f46\u662f\u8fd9\u79cd\u65b9\u6cd5\u5e76\u4e0d\u662f\u5b8c\u7f8e\u7684\uff0c\u5047\u8bbe\u5728 B \u5411 A \u53d1\u9001\u516c\u5f00\u5bc6\u94a5\u65f6\uff0c\u7a83\u542c\u8005\u5c06 B \u516c\u5f00\u5bc6\u94a5\u4fee\u6539\u4e3a\u4e86\u81ea\u5df1\u7684\u516c\u5f00\u5bc6\u94a5\u53d1\u9001\u7ed9 A\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/202010310922452022-10-23-19-41-36.gif\\" />\\n\\n\u56e0\u4e3a\u516c\u5f00\u5bc6\u94a5\u5e76\u4e0d\u80fd\u6307\u660e\u6765\u6e90\u662f\u8c01\uff0c\u5f53 A \u63a5\u6536\u5230\u5bc6\u94a5\u65f6\u8bef\u4ee5\u4e3a\u662f B \u7684\u516c\u5f00\u5bc6\u94a5\uff0c\u8fd9\u6837\u5f53 A \u5411 B \u53d1\u9001\u6d88\u606f\u65f6\uff0c\u5176\u5b9e\u4f7f\u7528\u7684\u662f\u7a83\u542c\u8005\u7684\u516c\u5f00\u5bc6\u94a5\u6765\u52a0\u5bc6\u6d88\u606f\uff0c\u8fd9\u65f6\u7a83\u542c\u8005\u901a\u8fc7\u79c1\u94a5\u89e3\u5bc6\uff0c\u4ece\u800c\u7a83\u542c\u5230\u6d88\u606f\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/202010310923102022-10-23-19-42-37.gif\\"/>\\n\\n\u5e76\u4e14\u518d\u6b21\u4f7f\u7528 B \u7684\u516c\u5f00\u5bc6\u94a5\u52a0\u5bc6\u6d88\u606f\uff0c\u5c06\u6d88\u606f\u53d1\u9001\u7ed9 B\uff0c\u5bf9\u4e8e A \u548c B \u6765\u8bf4\uff0c\u5b83\u4eec\u5b8c\u5168\u6ca1\u6709\u610f\u8bc6\u5230\u81ea\u5df1\u88ab\u7a83\u542c\u4e86\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/202010310923262022-10-23-19-43-38.gif\\" />\\n\\n\u8fd9\u79cd\u901a\u8fc7\u4e2d\u9014\u66ff\u6362\u516c\u5f00\u5bc6\u94a5\u6765\u7a83\u542c\u6570\u636e\u7684\u653b\u51fb\u65b9\u6cd5\u53eb\u505a**\u4e2d\u95f4\u4eba\u653b\u51fb**\u3002\\n\\n:::info info\\n\u975e\u5bf9\u79f0\u52a0\u5bc6\u53ef\u9760\u6027\u4f1a\u51fa\u73b0\u95ee\u9898\u5c31\u662f\u56e0\u4e3a A \u65e0\u6cd5\u5224\u65ad\u63a5\u6536\u5230\u7684\u5bc6\u94a5\u662f\u5426\u6765\u81ea\u4e8e B\uff0c\u60f3\u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u5c31\u8981\u7528\u5230\u540e\u9762\u8bb2\u5230\u7684\u6570\u5b57\u8bc1\u4e66\u3002\\n:::\\n\\n## \u6df7\u5408\u52a0\u5bc6\\n\\n\u4f7f\u7528\u975e\u5bf9\u79f0\u52a0\u5bc6\u867d\u7136\u6bd4\u5bf9\u79f0\u52a0\u5bc6\u5b89\u5168\uff0c\u4f46\u662f\u975e\u5bf9\u79f0\u52a0\u5bc6\u65b9\u6cd5\u52a0\u5bc6\u548c\u89e3\u5bc6\u6240\u9700\u7684\u8d44\u6e90\u4ee5\u53ca\u65f6\u95f4\u6bd4\u5bf9\u79f0\u52a0\u5bc6\u65b9\u6cd5\u6240\u9700\u7684\u8d44\u6e90\u548c\u65f6\u95f4\u4ee3\u4ef7\u9ad8\u5f88\u591a\uff0c\u90a3\u4e48\u5c31\u6709\u4eba\u63d0\u51fa\u4e00\u79cd\u52a0\u5bc6\u65b9\u5f0f\uff0c\u540c\u65f6\u4f7f\u7528\u5bf9\u79f0\u52a0\u5bc6\u548c\u975e\u5bf9\u79f0\u52a0\u5bc6\u8fd9\u79cd\u6df7\u5408\u52a0\u5bc6\u7684\u65b9\u5f0f\uff0c\u65e2\u80fd\u5f97\u5230\u975e\u5bf9\u79f0\u52a0\u5bc6\u7684\u5b89\u5168\u6027\uff0c\u53c8\u80fd\u5f97\u5230\u5bf9\u79f0\u52a0\u5bc6\u7684\u5feb\u901f\u6027\u3002\\n\\n\u9996\u5148\u6211\u4eec\u4e0a\u9762\u8c08\u5230\u5bf9\u79f0\u52a0\u5bc6\u65f6\u6709\u8bb2\u5230\u5bf9\u79f0\u52a0\u5bc6\u7684\u7f3a\u70b9\uff0c\u90a3\u5c31\u662f\u9700\u8981\u5c06\u52a0\u5bc6\u7684\u5bc6\u94a5\u5728\u4e92\u8054\u7f51\u4e0a\u4f20\u8f93\uff0c\u800c\u5bc6\u94a5\u6709\u53ef\u80fd\u4f1a\u88ab\u7a83\u542c\u8005\u7a83\u53d6\u3002\\n\\n\u5982\u679c\u6211\u4eec\u4f7f\u7528\u975e\u5bf9\u79f0\u52a0\u5bc6\u7684\u65b9\u6cd5\u6765\u52a0\u5bc6\u5bf9\u79f0\u52a0\u5bc6\u7684\u5bc6\u94a5\uff0c\u8fd9\u6837\u5bf9\u79f0\u52a0\u5bc6\u7684\u5bc6\u94a5\u5c31\u4e0d\u4f1a\u88ab\u7a83\u542c\u8005\u7a83\u53d6\uff0c\u56e0\u4e3a\u7a83\u542c\u8005\u6ca1\u6709\u79c1\u94a5\uff0c\u7136\u540e\u5728\u4e0b\u9762\u7684\u901a\u4fe1\u8fc7\u7a0b\u4e2d\u4f7f\u7528\u5bf9\u79f0\u52a0\u5bc6\u7684\u5bc6\u94a5\u52a0\u5bc6\u6d88\u606f\uff0c\u56e0\u4e3a\u6211\u4eec\u53ea\u4f7f\u7528\u4e86\u975e\u5bf9\u79f0\u52a0\u5bc6\u52a0\u5bc6\u4e86\u5bf9\u79f0\u52a0\u5bc6\u6240\u4f7f\u7528\u7684\u5bc6\u94a5\uff0c\u800c\u6d88\u606f\u7684\u52a0\u5bc6\u90fd\u662f\u901a\u8fc7\u5bf9\u79f0\u52a0\u5bc6\u7684\u5bc6\u94a5\u52a0\u5bc6\u7684\uff0c\u6240\u4ee5\u4e0d\u4f1a\u5b58\u5728\u901f\u5ea6\u6162\u7684\u95ee\u9898\uff0c\u8fd9\u6837\u65e2\u4fdd\u8bc1\u4e86\u5b89\u5168\u6027\uff0c\u53c8\u517c\u987e\u4e86\u52a0\u89e3\u5bc6\u6240\u9700\u7684\u8d44\u6e90\u548c\u65f6\u95f4\u3002\\n\\n:::info info\\n\u76ee\u524d\u5728\u7f51\u9875\u4e2d\u4f7f\u7528\u7684 HTTPS \u534f\u8bae\u4f7f\u7528\u7684\u5c31\u662f\u6df7\u5408\u52a0\u5bc6\u7684\u65b9\u5f0f\u3002\\n:::\\n\\n## \u5bc6\u94a5\u4ea4\u6362\u7b97\u6cd5\\n\\nDiffie-Hellman \u5bc6\u94a5\u4ea4\u6362\u53ef\u4ee5\u89e3\u51b3\u4f7f\u7528\u5bf9\u79f0\u52a0\u5bc6\u65b9\u6cd5\u8fdb\u884c\u901a\u4fe1\u65f6\u5bc6\u94a5\u88ab\u7a83\u542c\u7684\u95ee\u9898\u3002\u5728\u8bb2\u89e3\u8be5\u7b97\u6cd5\u7684\u6d88\u606f\u8fc7\u7a0b\u4e4b\u524d\uff0c\u6211\u4eec\u5148\u4e86\u89e3\u4e00\u4e0b\u8be5\u7b97\u6cd5\u7684\u6982\u5ff5\u3002\\n\\n\u8be5\u7b97\u6cd5\u5b83\u53ef\u4ee5\u5408\u6210\u4e24\u4e2a\u5bc6\u94a5\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/202010310946222022-10-23-19-44-37.png\\" />\\n\\n\u5e76\u4e14\u5408\u6210\u7684\u5bc6\u94a5\u6709\u4e09\u4e2a\u7279\u70b9\\n\\n1. \u5df2\u77e5\u5176\u4e2d\u4e00\u4e2a\u5bc6\u94a5\uff0c\u65e0\u6cd5\u6839\u636e\u5408\u6210\u7684\u5bc6\u94a5\u63a8\u65ad\u51fa\u53e6\u4e00\u4e2a\u5bc6\u94a5\\n\\n   <img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/202010311009162022-10-23-19-46-02.png\\" />\\n\\n2. \u5408\u6210\u7684\u5bc6\u94a5\u53ef\u4ee5\u7ee7\u7eed\u4e0e\u5176\u4ed6\u7684\u5bc6\u94a5\u8fdb\u884c\u5408\u6210\\n\\n3. \u5bc6\u94a5\u5408\u6210\u7684\u7ed3\u679c\u4e0e\u5408\u6210\u7684\u987a\u5e8f\u65e0\u5173\\n\\n   <img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/202010311017202022-10-23-19-47-41.png\\" />\\n\\n\u73b0\u5728\u6211\u4eec\u5c31\u4f7f\u7528\u8fd9\u79cd\u65b9\u6cd5\u5728 A \u548c B \u4e4b\u95f4\u4f20\u9012\u5bc6\u94a5\uff0c\u9996\u5148\u7531 A \u751f\u6210\u5bc6\u94a5 P\uff0c\u7136\u540e\u5c06\u8be5\u5bc6\u94a5\u53d1\u9001\u7ed9 B\uff0c\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u6709\u53ef\u80fd\u88ab\u7a83\u542c\u8005 X \u7a83\u53d6\u5230\u5bc6\u94a5\uff0c\u6240\u4ee5\u8fd9\u65f6\u7684\u5bc6\u94a5\u4e0d\u80fd\u88ab\u7528\u6765\u52a0\u5bc6\u6d88\u606f\\n\\n<img src=\\"https://gitee.com/lastknightcoder/blogimage/raw/master/20201031102913.gif\\" />\\n\\n\u63a5\u7740 A \u548c B \u5404\u81ea\u751f\u6210\u81ea\u5df1\u7684\u79c1\u94a5 SA \u548c SB\uff0c\u5e76\u4f7f\u7528\u4e0a\u8ff0\u7684\u5408\u6210\u65b9\u6cd5\u4e0e\u5bc6\u94a5 P \u8fdb\u884c\u5408\u6210\uff0c\u7136\u540e\u53d1\u9001\u7ed9\u5bf9\u65b9\uff0c\u53cc\u65b9\u63a5\u6536\u5230\u5bf9\u65b9\u5408\u6210\u7684\u5bc6\u94a5\u540e\uff0c\u518d\u5c06\u5bc6\u94a5\u4e0e\u81ea\u5df1\u7684\u79c1\u94a5\u5408\u6210\uff0c\u5982\u4e0b\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/202010311029132022-10-23-19-48-25.gif\\" />\\n\\n\u6700\u540e\uff0cA \u5f97\u5230\u5bc6\u94a5 `P|SB|SA`\uff0c\u800c B \u5f97\u5230\u5bc6\u94a5 `P|SA|SB`\uff0c\u6839\u636e\u7b97\u6cd5\u7279\u70b9 $3$\uff0c\u5408\u6210\u7684\u5bc6\u94a5\u4e0e\u5408\u6210\u7684\u987a\u5e8f\u65e0\u5173\uff0c\u6240\u4ee5\u4e8c\u8005\u7684\u5bc6\u94a5\u662f\u76f8\u540c\u7684\uff0c\u6240\u4ee5\u63a5\u4e0b\u6765 A \u548c B \u53ef\u4ee5\u7528\u8be5\u5bc6\u94a5\u6765\u52a0\u5bc6\u548c\u89e3\u5bc6\u6d88\u606f\u3002\\n\\n\u90a3\u7a83\u542c\u8005\u6709\u53ef\u80fd\u7a83\u542c\u8be5\u5bc6\u94a5\u5417? \u901a\u8fc7\u4e0a\u9762\u7684\u52a8\u56fe\u6211\u4eec\u77e5\u9053\u7a83\u542c\u8005\u638c\u63e1\u7684\u4fe1\u606f\u6709\u5bc6\u94a5 P\uff0c\u4ee5\u53ca\u4e24\u4e2a\u5408\u6210\u5bc6\u94a5 `P|SA` \u548c `P|SB`\uff0c\u6839\u636e\u7b97\u6cd5\u7279\u70b9 $1$\uff0c\u7a83\u542c\u8005\u662f\u65e0\u6cd5\u63a8\u65ad SA \u548c SB \u7684\uff0c\u6240\u4ee5\u7a83\u542c\u8005\u5c31\u4e0d\u80fd\u5408\u6210\u51fa\u5bc6\u94a5 `P|SA|SB`\u3002\\n\\n## \u6d88\u606f\u8ba4\u8bc1\u7801\\n\\n\u6d88\u606f\u8ba4\u8bc1\u7801\u53ef\u4ee5\u68c0\u6d4b\u7be1\u6539\uff0c\u4f8b\u5982\u4e0b\u9762\u7684\u573a\u666f\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/202011041404052022-10-23-19-49-12.gif\\" />\\n\\nA \u5411 B \u53d1\u9001\u4e00\u4e2a\u6d88\u606f\uff0c\u5728\u4e2d\u9014\u6d88\u606f\u88ab\u6076\u610f\u7528\u6237\u4fee\u6539\u4e86\uff0c\u4f46\u662f B \u5e76\u6ca1\u6709\u610f\u8bc6\u5230\u6d88\u606f\u5df2\u7ecf\u88ab\u4fee\u6539\u4e86\uff0c\u4ee5\u4e3a\u63a5\u6536\u5230\u7684\u6d88\u606f\u5c31\u662f A \u53d1\u9001\u7684\u6d88\u606f\u3002\u6d88\u606f\u8ba4\u8bc1\u7801\u53ef\u4ee5\u9884\u9632\u8fd9\u79cd\u60c5\u51b5\u53d1\u751f\u3002\\n\\n\u4e0b\u9762\u770b\u4e00\u4e0b\u4f7f\u7528\u6d88\u606f\u8ba4\u8bc1\u7801\u53d1\u6d88\u606f\u7684\u6d41\u7a0b\uff1a\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/20201104144958942022-10-23-19-49-48.gif\\" />\\n\\n1. A \u751f\u6210\u4e86\u4e00\u4e2a\u751f\u6210\u6d88\u606f\u8ba4\u8bc1\u7801\u7684\u5bc6\u94a5\uff0c\u5e76\u4ee5\u5b89\u5168\u7684\u65b9\u5f0f\u5c06\u5bc6\u94a5\u53d1\u9001\u7ed9\u4e86 B\\n2. A \u6839\u636e\u6d88\u606f\u5185\u5bb9(\u5df2\u52a0\u5bc6)\uff0c\u4f7f\u7528\u5bc6\u94a5\u751f\u6210\u4e00\u4e2a\u503c\uff0c\u8fd9\u4e2a\u751f\u6210\u7684\u503c\u5c31\u662f\u6d88\u606f\u8ba4\u8bc1\u7801\uff0c\u7b80\u79f0 MAC(Message Authentication Code)\\n3. A \u5c06\u6d88\u606f\u548c MAC \u53d1\u9001\u7ed9 B\\n4. B \u6839\u636e\u63a5\u6536\u5230\u7684\u6d88\u606f\uff0c\u4f7f\u7528 A \u4e4b\u524d\u53d1\u9001\u7684\u5bc6\u94a5\u751f\u6210\u4e00\u4e2a\u503c\uff0c\u5982\u679c\u8fd9\u4e2a\u503c\u4e0e A \u53d1\u9001\u8fc7\u6765\u7684 MAC \u76f8\u540c\uff0c\u5219\u53ef\u4ee5\u8ba4\u4e3a\u6d88\u606f\u662f\u6ca1\u6709\u88ab\u7be1\u6539\u8fc7\u7684\\n5. \u63a5\u4e0b\u6765\u53ea\u9700\u8981\u5bf9\u5bc6\u6587\u89e3\u5bc6\u5373\u53ef\\n\\n\u5982\u679c\u5728\u4e2d\u9014 X \u5bf9 A \u53d1\u9001\u7684\u6d88\u606f\u8fdb\u884c\u4e86\u7be1\u6539\uff0c\u90a3\u4e48 B \u6536\u5230\u7684\u5bc6\u6587\u548c A \u53d1\u9001\u7684\u5bc6\u6587\u4e0d\u540c\uff0c\u90a3\u4e48 B \u751f\u6210\u7684\u6d88\u606f\u8ba4\u8bc1\u7801\u548c A \u53d1\u9001\u7684\u6d88\u606f\u8ba4\u8bc1\u7801\u5c31\u4e0d\u76f8\u540c\uff0c\u8fd9\u4e2a\u65f6\u5019 B \u5c31\u77e5\u9053\u6d88\u606f\u88ab\u7be1\u6539\u8fc7\u4e86\uff0c\u8fd9\u65f6\u53ef\u4ee5\u8981\u6c42 A \u91cd\u65b0\u53d1\u9001\u6d88\u606f\u3002\\n\\n## \u6570\u5b57\u7b7e\u540d\\n\\n\u6d88\u606f\u8ba4\u8bc1\u7801\u867d\u7136\u89e3\u51b3\u4e86\u7be1\u6539\u7684\u95ee\u9898\uff0c\u4f46\u662f\u56e0\u4e3a\u4ed6\u4eec\u4f7f\u7528\u7684\u662f\u76f8\u540c\u7684\u5bc6\u94a5\u52a0\u5bc6\u548c\u89e3\u5bc6\uff0c\u6240\u4ee5 B \u4e5f\u53ef\u4ee5\u751f\u6210\u6d88\u606f\u8ba4\u8bc1\u7801\uff0c\u6240\u4ee5\u4e8b\u540e A \u53ef\u4ee5\u5426\u8ba4\u6d88\u606f\u5e76\u4e0d\u662f\u4ed6\u53d1\u7684\uff0c\u56e0\u4e3a\u4e0d\u4ec5\u4ec5\u662f\u4ed6\u53ef\u4ee5\u751f\u6210\u6d88\u606f\u8ba4\u8bc1\u7801(\u4e8b\u60c5\u53c8\u4e0d\u662f\u6211\u4e00\u4e2a\u4eba\u53ef\u4ee5\u5e72\uff0c\u4f60\u51ed\u4ec0\u4e48\u8bf4\u662f\u6211\u5e72\u7684)\u3002\\n\\n\u4f7f\u7528\u6570\u5b57\u7b7e\u540d\u4e0d\u4ec5\u53ef\u4ee5\u89e3\u51b3\u7be1\u6539\u95ee\u9898\uff0c\u8fd8\u53ef\u4ee5\u89e3\u51b3\u4e8b\u540e\u5426\u8ba4\u95ee\u9898\u3002\u5047\u8bbe A \u7ed9 B \u53d1\u9001\u6d88\u606f\uff0c\u6211\u4eec\u9996\u5148\u770b\u4e00\u4e0b\u6d41\u7a0b\uff1a\\n\\n1. A \u5728\u53d1\u9001\u524d\u7ed9\u6d88\u606f\u52a0\u4e0a\u6570\u5b57\u7b7e\u540d\uff0c\u6570\u5b57\u7b7e\u540d\u53ea\u80fd\u7531 A \u751f\u6210\\n2. B \u6536\u5230 A \u7684\u6d88\u606f\uff0c\u9a8c\u8bc1\u6570\u5b57\u7b7e\u540d\u7684\u6b63\u786e\u6027\uff0c\u4f46\u662f\u65e0\u6cd5\u751f\u6210\u6570\u5b57\u7b7e\u540d\\n\\n\u56e0\u4e3a\u6570\u5b57\u7b7e\u540d\u53ea\u80fd\u7531 A \u751f\u6210\uff0c\u6240\u4ee5 A \u65e0\u6cd5\u5728\u4e8b\u540e\u5426\u8ba4(\u8fd9\u4ef6\u4e8b\u60c5\u5c31\u4f60\u80fd\u5e72\uff0c\u4e0d\u662f\u4f60\u5e72\u7684\u662f\u8c01\u5e72\u7684)\u3002\\n\\n\u6211\u4eec\u770b\u4e00\u4e0b\u4f7f\u7528\u6570\u5b57\u7b7e\u540d\u901a\u4fe1\u7684\u8be6\u7ec6\u8fc7\u7a0b\uff1a\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/202011042043302022-10-23-19-50-39.gif\\" />\\n\\n1. A \u751f\u6210\u4e00\u5bf9\u516c\u94a5\u548c\u79c1\u94a5\uff0c\u516c\u94a5\u662f\u6bcf\u4e2a\u4eba\u90fd\u77e5\u9053\u7684\uff0c\u79c1\u94a5\u662f A \u72ec\u6709\u7684\uff0cA \u4f7f\u7528\u79c1\u94a5\u5bf9\u6d88\u606f(\u5df2\u52a0\u5bc6\u540e\u7684\u6d88\u606f)\u52a0\u5bc6\uff0c\u5f97\u5230\u6570\u5b57\u7b7e\u540d\\n2. A \u5c06\u6d88\u606f\u4ee5\u53ca\u6570\u5b57\u7b7e\u540d\u53d1\u9001\u7ed9 B\\n3. B \u4f7f\u7528 A \u7684\u516c\u94a5\u5bf9\u6d88\u606f\u89e3\u5bc6\uff0c\u5f97\u5230\u4e00\u4e2a\u6570\u5b57\u7b7e\u540d\uff0c\u9a8c\u8bc1\u8be5\u6570\u5b57\u7b7e\u540d\u4e0e A \u53d1\u9001\u6570\u5b57\u7b7e\u540d\u662f\u5426\u76f8\u540c\\n4. \u6570\u5b57\u7b7e\u540d\u786e\u8ba4\u65e0\u8bef\uff0c\u8bf4\u660e\u6d88\u606f\u6ca1\u6709\u7ecf\u8fc7\u7be1\u6539\uff0c\u5e76\u4e14\u53ef\u4ee5\u786e\u8ba4\u6d88\u606f\u662f A \u53d1\u7684\uff0c\u53ef\u4ee5\u5bf9\u6d88\u606f\u89e3\u5bc6\u5f97\u5230\u660e\u6587\\n\\n:::note note\\n\u4e0a\u8ff0\u8fc7\u7a0b\u6709\u4e24\u6b21\u52a0\u5bc6\uff0c\u7b2c\u4e00\u6b21\u52a0\u5bc6\u662f\u5bf9\u660e\u6587\u8fdb\u884c\u52a0\u5bc6\uff0c\u5f97\u5230\u5bc6\u6587\u9632\u6b62\u88ab\u7a83\u542c\uff0c\u7b2c\u4e8c\u6b21\u52a0\u5bc6\u662f\u6839\u636e\u5bc6\u6587\u751f\u6210\u6570\u5b57\u7b7e\u540d\u3002\u5bf9\u5e94\u7684\u4e5f\u8981\u8fdb\u884c\u4e24\u6b21\u89e3\u5bc6\uff0c\u7b2c\u4e00\u6b21\u89e3\u5bc6\u662f\u4e3a\u4e86\u5f97\u5230\u6570\u5b57\u7b7e\u540d\uff0c\u4ece\u800c\u9a8c\u8bc1\u6570\u5b57\u7b7e\u540d\u7684\u6b63\u786e\u6027\uff0c\u5982\u679c\u6570\u5b57\u7b7e\u540d\u786e\u8ba4\u65e0\u8bef\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u8fdb\u884c\u7b2c\u4e8c\u6b21\u89e3\u5bc6\uff0c\u5c06\u5bc6\u6587\u53d8\u6362\u4e3a\u660e\u6587\uff0c\u5f97\u5230\u771f\u6b63\u7684\u6d88\u606f\u3002\\n:::\\n\\n:::info info\\n\u4e8b\u5b9e\u4e0a\uff0c\u4f7f\u7528\u79c1\u94a5\u5bf9\u5168\u90e8\u7684\u6d88\u606f\u8fdb\u884c\u52a0\u5bc6\u6bd4\u8f83\u8017\u8d39\u65f6\u95f4\uff0c\u4e00\u822c\u662f\u6839\u636e\u6d88\u606f\u751f\u6210\u54c8\u5e0c\u503c\uff0c\u7136\u540e\u5bf9\u54c8\u5e0c\u503c\u52a0\u5bc6\u5f97\u5230\u6570\u5b57\u7b7e\u540d\u3002\\n:::\\n\\n\u56e0\u4e3a\u6570\u5b57\u7b7e\u540d\u662f\u4f7f\u7528\u79c1\u94a5\u8fdb\u884c\u52a0\u5bc6\u7684\uff0c\u53ea\u6709 A \u6709\u79c1\u94a5\uff0c\u6240\u4ee5 A \u65e0\u6cd5\u4e8b\u540e\u5426\u8ba4\u3002\\n\\n:::note note\\n\u5728\u672c\u5c0f\u8282\u6bd4\u8f83\u5f3a\u8c03\u6570\u5b57\u7b7e\u540d\u5728\u4e8b\u540e\u5426\u8ba4\u65b9\u9762\u7684\u4f5c\u7528\uff0c\u4f46\u662f\u6570\u5b57\u7b7e\u540d\u53ef\u4ee5\u7528\u6765\u68c0\u6d4b\u6d88\u606f\u662f\u5426\u88ab\u7be1\u6539\uff0c\u56e0\u4e3a\u6570\u5b57\u7b7e\u540d\u7684\u751f\u6210\u4e0e\u6d88\u606f\u7684\u5185\u5bb9\u662f\u6709\u5173\u7684\uff0c\u5982\u679c\u6d88\u606f\u88ab\u7be1\u6539\u4e86\uff0c\u90a3\u4e48\u751f\u6210\u7684\u6570\u5b57\u7b7e\u540d\u5c31\u4e0d\u5bf9\uff0c\u5c31\u53ef\u4ee5\u5f97\u77e5\u6d88\u606f\u88ab\u7be1\u6539\u4e86\u6216\u8005\u4e0d\u662f A \u53d1\u9001\u7684\u6d88\u606f\u3002\\n:::\\n\\n## \u6570\u5b57\u8bc1\u4e66\\n\\n\u56e0\u4e3a\u6570\u5b57\u7b7e\u540d\u6ca1\u6709\u89e3\u51b3\u516c\u5f00\u5bc6\u94a5\u5236\u4f5c\u8005\u7684\u95ee\u9898\uff0c\u6240\u4ee5\u5982\u679c X \u5047\u5192 A \u7ed9 B \u53d1\u9001\u6d88\u606f\uff0c\u6b64\u65f6 X \u4f1a\u751f\u6210\u4e00\u5bf9\u516c\u94a5\u548c\u79c1\u94a5\uff0c\u5e76\u4e14\u5c06\u516c\u94a5\u53d1\u9001\u7ed9 B\uff0c\u56e0\u4e3a\u516c\u94a5\u4e2d\u6ca1\u6709\u643a\u5e26\u53d1\u9001\u8005\u7684\u4fe1\u606f\uff0cB \u5c31\u4f1a\u4f7f\u7528\u8be5\u516c\u94a5\u6765\u9a8c\u8bc1\u6570\u5b57\u7b7e\u540d\uff0c\u5bf9\u4e8e B \u6765\u8bf4\u4ed6\u4ee5\u4e3a\u81ea\u5df1\u5728\u548c A \u901a\u4fe1\uff0c\u5b9e\u9645\u4e0a\u5728\u4e0e A \u901a\u4fe1\u3002\\n\\n\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u9700\u8981\u4f7f\u7528\u6570\u5b57\u8bc1\u4e66\uff0c\u5047\u8bbe A \u7ed9 B \u53d1\u9001\u6d88\u606f\uff0c\u901a\u4fe1\u8fc7\u7a0b\u5982\u4e0b\uff1a\\n\\n1. A \u5c06\u5305\u542b\u516c\u5f00\u5bc6\u94a5\u4ee5\u53ca\u81ea\u5df1\u7684\u76f8\u5173\u4fe1\u606f(\u5982\u90ae\u7bb1)\u7684\u4e2a\u4eba\u8d44\u6599\u53d1\u9001\u7ed9\u8ba4\u8bc1\u4e2d\u5fc3\\n\\n   <img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/202011042203512022-10-23-19-52-38.gif\\" />\\n\\n2. \u8ba4\u8bc1\u4e2d\u5fc3\u6839\u636e A \u7684\u8d44\u6599\u4f7f\u7528\u81ea\u5df1\u7684\u79c1\u94a5\u751f\u6210\u4e00\u4e2a\u6570\u5b57\u7b7e\u540d\uff0c\u5e76\u4e14\u5c06\u6570\u5b57\u7b7e\u540d\u4ee5\u53ca\u8d44\u6599\u653e\u8fdb\u540c\u4e00\u4e2a\u6587\u4ef6\u4e2d\\n\\n   <img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/202011042209202022-10-23-19-53-44.gif\\" />\\n\\n3. \u8ba4\u8bc1\u4e2d\u5fc3\u5c06\u8be5\u6587\u4ef6\u53d1\u9001\u7ed9 A\uff0c\u8be5\u6587\u4ef6\u5c31\u662f A \u6570\u5b57\u8bc1\u4e66\\n\\n   <img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/202011042211062022-10-23-19-54-38.gif\\" />\\n\\n4. A \u5c06\u5305\u542b\u516c\u5f00\u5bc6\u94a5\u7684\u6570\u5b57\u8bc1\u4e66\u53d1\u9001\u7ed9 B\uff0cB \u6536\u5230\u8bc1\u4e66\u540e\uff0c\u9996\u5148\u5bf9 A \u7684\u8eab\u4efd\u8fdb\u884c\u786e\u8ba4(\u5982\u90ae\u7bb1\u662f\u5426\u662f A \u7684\u90ae\u7bb1)\uff0c\u63a5\u7740\u83b7\u53d6\u8ba4\u8bc1\u4e2d\u5fc3\u7684\u516c\u5f00\u5bc6\u94a5\uff0c\u4f7f\u7528\u8ba4\u8bc1\u4e2d\u5fc3\u7684\u516c\u5f00\u5bc6\u94a5\u5bf9\u6570\u5b57\u7b7e\u540d\u8fdb\u884c\u786e\u8ba4\uff0c\u5224\u65ad\u662f\u5426\u662f\u8ba4\u8bc1\u4e2d\u5fc3\u7ed9\u51fa\u7684\u7b7e\u540d\\n\\n5. \u5982\u679c\u786e\u8ba4 A \u7684\u4fe1\u606f\u65e0\u8bef\uff0c\u4ee5\u53ca\u7b7e\u540d\u662f\u8ba4\u8bc1\u4e2d\u5fc3\u7684\u7b7e\u540d\uff0c\u90a3\u4e48\u5c31\u4ece\u8bc1\u4e66\u4e2d\u53d6\u51fa A \u7684\u516c\u5f00\u5bc6\u94a5\\n\\n\u5982\u679c\u8fd9\u65f6 X \u5047\u5192 A \u7ed9 B \u53d1\u9001\u5b83\u7684\u516c\u5f00\u5bc6\u94a5\uff0c\u8fd9\u65f6 B \u6ca1\u6709\u5fc5\u8981\u4fe1\u4efb\u4ee5\u975e\u8bc1\u4e66\u7684\u5f62\u5f0f\u53d1\u9001\u7684\u516c\u5f00\u5bc6\u94a5\uff1b\u8fd9\u65f6 X \u4e3a\u4e86\u5047\u5192 A \u5728\u8ba4\u8bc1\u4e2d\u5fc3\u767b\u8bb0\u81ea\u5df1\u7684\u516c\u5f00\u5bc6\u94a5\uff0c\u4f46\u662f X \u65e0\u6cd5\u4f7f\u7528 A \u7684\u4fe1\u606f(\u5982\u90ae\u7bb1)\uff0c\u56e0\u6b64\u65e0\u6cd5\u83b7\u5f97 A \u7684\u8bc1\u4e66\u3002\\n\\n**\u901a\u8fc7\u6570\u5b57\u8bc1\u4e66\uff0c\u6d88\u606f\u7684\u63a5\u6536\u8005\u53ef\u4ee5\u786e\u8ba4\u516c\u5f00\u5bc6\u94a5\u7684\u5236\u4f5c\u8005\u3002**\\n\\n:::info info\\n\u4f46\u662f\u76ee\u524d\u8fd8\u6709\u4e00\u4e2a\u7591\u95ee\uff0cB \u4ece\u8ba4\u8bc1\u4e2d\u5fc3\u5f97\u5230\u7684\u516c\u5f00\u5bc6\u94a5\u771f\u7684\u6765\u81ea\u4e8e\u8ba4\u8bc1\u4e2d\u5fc3\u5417? \u5982\u679c\u8ba4\u8bc1\u4e2d\u5fc3\u4e5f\u662f\u5047\u5192\u7684\u5462?\\n\\n\u5b9e\u9645\u4e0a\uff0c\u8ba4\u8bc1\u4e2d\u5fc3\u7684\u516c\u5f00\u5bc6\u94a5\u4e5f\u662f\u4ee5\u6570\u5b57\u8bc1\u4e66\u7684\u5f62\u5f0f\u4ea4\u4ed8\u7684\uff0c\u4f1a\u6709\u66f4\u9ad8\u7ea7\u522b\u7684\u8ba4\u8bc1\u4e2d\u5fc3\u5bf9\u8fd9\u4e2a\u8ba4\u8bc1\u4e2d\u5fc3\u7f72\u540d\u3002\\n\\n\u5047\u8bbe\u5b58\u5728\u4e00\u4e2a\u88ab\u793e\u4f1a\u5e7f\u6cdb\u8ba4\u53ef\u7684\u8ba4\u8bc1\u4e2d\u5fc3 A\uff0c\u6b64\u65f6\u51fa\u73b0\u4e86\u4e00\u5bb6\u65b0\u516c\u53f8 B \u60f3\u5f00\u5c55\u8ba4\u8bc1\u4e2d\u5fc3\u4e1a\u52a1\uff0c\u4f46\u662f B \u6ca1\u6709\u5f97\u5230\u793e\u4f1a\u7684\u8ba4\u53ef\uff0c\u4e8e\u662f B \u5411 A \u7533\u8bf7\u53d1\u884c\u6570\u5b57\u8bc1\u4e66\uff0cA \u4f1a\u5bf9 B \u662f\u5426\u80fd\u5f00\u5c55\u8ba4\u8bc1\u4e1a\u52a1\u8fdb\u884c\u68c0\u6d4b\uff0c\u5982\u679c\u901a\u8fc7\u4e86\u68c0\u6d4b\uff0cA \u5c31\u4f1a\u5411 B \u53d1\u884c\u8bc1\u4e66\uff0c\u516c\u53f8 B \u5c31\u53ef\u4ee5\u5411\u793e\u4f1a\u8868\u793a\u81ea\u5df1\u83b7\u5f97\u4e86\u516c\u53f8 A \u7684\u4fe1\u4efb\u3002\\n\\n\u6700\u9876\u7aef\u7684\u8ba4\u8bc1\u4e2d\u5fc3\u88ab\u79f0\u4e3a\u6839\u8ba4\u8bc1\u4e2d\u5fc3\uff0c\u5176\u81ea\u8eab\u7684\u6b63\u5f53\u6027\u7531\u81ea\u5df1\u8bc1\u660e\u3002\u5982\u679c\u6839\u8ba4\u8bc1\u4e2d\u5fc3\u4e0d\u88ab\u4fe1\u4efb\uff0c\u6574\u4e2a\u8fc7\u7a0b\u5c31\u65e0\u6cd5\u8fd0\u8f6c\uff0c\u6240\u4ee5\u6839\u8ba4\u8bc1\u4e2d\u5fc3\u4e00\u822c\u662f\u5927\u578b\u4f01\u4e1a\u6216\u8005\u4e0e\u653f\u5e9c\u6709\u5173\u8054\u4e14\u5df2\u7ecf\u83b7\u5f97\u4e86\u793e\u4f1a\u4fe1\u8d56\u7684\u7ec4\u7ec7\u3002\\n:::\\n\\n## \u53c2\u8003\u8d44\u6599\\n\\n- \u300a\u6211\u7684\u7b2c\u4e00\u672c\u7b97\u6cd5\u4e66\u300b"},{"id":"/2020/08/30/\u5c0f\u7403\u4f1a\u505c\u4e0b\u6765\u5417","metadata":{"permalink":"/blog/2020/08/30/\u5c0f\u7403\u4f1a\u505c\u4e0b\u6765\u5417","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2020-08-30-\u5c0f\u7403\u4f1a\u505c\u4e0b\u6765\u5417.mdx","source":"@site/blog/2020-08-30-\u5c0f\u7403\u4f1a\u505c\u4e0b\u6765\u5417.mdx","title":"\u5c0f\u7403\u4f1a\u505c\u4e0b\u6765\u5417","description":"\u5728\u9ad8\u4e2d\u7684\u65f6\u5019\u6211\u6709\u8fd9\u4e48\u4e00\u4e2a\u601d\u8003\uff0c\u7075\u611f\u6e90\u4e8e\u4e00\u9053\u7269\u7406\u9898\u76ee","date":"2020-08-30T00:00:00.000Z","formattedDate":"2020\u5e748\u670830\u65e5","tags":[{"label":"\u968f\u7b14","permalink":"/blog/tags/\u968f\u7b14"}],"readingTime":7.495,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"tags":["\u968f\u7b14"],"authors":"xiongtao"},"prevItem":{"title":"\u5b89\u5168\u7b97\u6cd5","permalink":"/blog/2020/11/05/\u5b89\u5168\u7b97\u6cd5"},"nextItem":{"title":"\u624b\u5199Promise","permalink":"/blog/\u624b\u5199Promise"}},"content":"\u5728\u9ad8\u4e2d\u7684\u65f6\u5019\u6211\u6709\u8fd9\u4e48\u4e00\u4e2a\u601d\u8003\uff0c\u7075\u611f\u6e90\u4e8e\u4e00\u9053\u7269\u7406\u9898\u76ee\\n\\n> \u4e00\u4e2a\u5c0f\u7403\u4ece\u9ad8\u5ea6\u4e3a $h$ \u7684\u5730\u65b9\u4e0b\u843d\uff0c\u843d\u5728\u5730\u9762\u4e0a\u63a5\u7740\u5f39\u8d77\uff0c\u4f46\u662f\u7531\u4e8e\u4e0e\u5730\u9762\u78b0\u649e\u9020\u6210\u80fd\u91cf\u635f\u5931\uff0c\u4f7f\u5f97\u6bcf\u6b21\u5f39\u8d77\u7684\u9ad8\u5ea6\u53ea\u6709\u4e4b\u524d\u9ad8\u5ea6\u7684 $1/4$\u3002\\n\\n\u8fd9\u9053\u9898\u76ee\u770b\u8d77\u6765\u662f\u6ca1\u6709\u4ec0\u4e48\u95ee\u9898\uff0c\u5f53\u65f6\u6211\u7684\u60f3\u6cd5\u662f\u6bcf\u6b21\u7403\u7684\u9ad8\u5ea6\u90fd\u4f1a\u53d8\u4e3a\u539f\u6765\u7684 $1/4$\uff0c\u6240\u4ee5\u7403\u662f\u4f1a\u4e00\u76f4\u8fd9\u6837\u5f39\u4e0b\u53bb\u7684\uff0c\u5c31\u50cf\u662f\u5e84\u5b50\u8bf4\u7684\\n\\n>\u4e00\u5c3a\u4e4b\u68f0\uff0c\u65e5\u53d6\u5176\u534a\uff0c\u4e07\u4e16\u4e0d\u7aed\u3002\\n\\n\u6240\u4ee5\u5728\u8fd9\u91cc\u6211\u5f97\u5230\u4e00\u4e2a\u7ed3\u8bba\uff0c\u5c0f\u7403\u4f1a\u4e00\u76f4\u8fd0\u52a8\u4e0b\u53bb\uff0c\u6240\u4ee5\u5c0f\u7403\u7684\u8fd0\u52a8\u65f6\u95f4\u4e3a\u65e0\u7a77\u5927\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n\u4f46\u662f\u5f53\u6211\u8ba1\u7b97\u65f6\u5374\u53d1\u73b0\u4e0d\u5bf9\u52b2\uff0c\u5047\u8bbe\u4ece\u9ad8\u5ea6\u4e3a $h$ \u964d\u843d\u6240\u9700\u7684\u65f6\u95f4\u4e3a $t_0$\uff0c\u7531\u4e8e\u4e0b\u964d\u6240\u9700\u65f6\u95f4 $t \\\\propto \\\\sqrt{h}$ \uff0c\u90a3\u4e48 $h/4$ \u4e0b\u964d\u6240\u9700\u7684\u65f6\u95f4\u4e3a $t_0/2$\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c\u6bcf\u6b21\u4e0a\u5347\u7136\u540e\u4e0b\u964d\u6240\u9700\u7684\u65f6\u95f4\u4e3a\u4e4b\u524d\u6240\u9700\u65f6\u95f4\u7684\u4e00\u534a\uff0c\u6240\u4ee5\u8017\u8d39\u7684\u65f6\u95f4\u7684\u6570\u5217\u4e3a\\n\\n$$\\nt_0, \\\\frac{t_0}{2},  \\\\frac{t_0}{2^2},  \\\\cdots,  \\\\frac{t_0}{2^n}, \\\\cdots\\n$$\\n\\n\u8fd9\u662f\u4e00\u4e2a\u7b49\u6bd4\u6570\u5217\uff0c\u516c\u6bd4\u4e3a $1/2$\uff0c\u6211\u4eec\u5bf9\u8fd9\u4e2a\u6570\u5217\u6c42\u548c\\n\\n$$\\nt_0 \\\\lim\\\\limits_{n \\\\to \\\\infty} \\\\sum_{t = 0}^{n} \\\\frac{1}{2^{i}} = 2t_0\\n$$\\n\\n\u6211\u4eec\u5f97\u5230\u8fd9\u4e48\u4e00\u4e2a\u4e8b\u5b9e\uff0c\u5c0f\u7403\u7684\u8fd0\u52a8\u65f6\u95f4\u4e0d\u4f1a\u8d85\u8fc7 $2t_0$\uff0c\u4e5f\u5c31\u662f\u8bf4\u5c0f\u7403\u4f1a\u5728 $2t_0$ \u540e\u505c\u4e0b\uff0c\u8fd9\u4e0e\u6211\u5728\u4e4b\u524d\u5f97\u5230\u7684\u7ed3\u8bba\u76f8\u53cd\uff0c\u5c0f\u7403\u5e94\u8be5\u4f1a\u4e00\u76f4\u5f39\u4e0b\u53bb\uff0c\u600e\u4e48\u4f1a\u505c\u4e0b\u6765\u5462?\\n\\n\u6240\u4ee5\u6211\u5f53\u65f6\u4e00\u76f4\u5728\u82e6\u607c\uff0c**\u5c0f\u7403\u5230\u5e95\u4f1a\u4e0d\u4f1a\u505c\u4e0b\u6765\uff1f **\\n\\n\u6211\u4e0e\u8eab\u8fb9\u7684\u540c\u5b66\u8ba8\u8bba\u8fc7\u8fd9\u4e2a\u95ee\u9898\uff0c\u4f46\u662f\u663e\u7136\u4ed6\u4eec\u4e0d\u4ec5\u6ca1\u6709\u7ed9\u6211\u6b63\u786e\u7684\u7b54\u6848\uff0c\u53cd\u800c\u6700\u540e\u4e5f\u6709\u8fd9\u4e2a\u7591\u95ee\u3002\u800c\u4e14\u8fd9\u4e2a\u95ee\u9898\u4e00\u76f4\u6ca1\u6709\u5f97\u5230\u89e3\u7b54\uff0c\u6e10\u6e10\u7684\u6211\u4e5f\u5c31\u5fd8\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u6bd5\u7adf\u8fd9\u79cd\u95ee\u9898\u4e0d\u4f1a\u518d\u8003\u5377\u4e0a\u51fa\u73b0\uff0c\u4e5f\u4e0d\u4f1a\u5f71\u54cd\u6211\u7684\u5b66\u4e60\u3002\\n\\n\u800c\u73b0\u5728\u6211\u7a81\u7136\u60f3\u8d77\u8fd9\u4e2a\u95ee\u9898\uff0c\u662f\u56e0\u4e3a\u6211\u6700\u8fd1\u5728\u770b\u4e00\u672c\u4e66 **\u300a\u4e0a\u5e1d\u63b7\u9ab0\u5b50\u5417?\uff1a\u91cf\u5b50\u7269\u7406\u53f2\u8bdd\u300b**\uff0c\u8fd9\u672c\u4e66\u662f\u8bb2\u91cf\u5b50\u529b\u5b66\u7684\u5386\u53f2\u7684\uff0c\u8fd9\u672c\u4e66\u7ed9\u4e86\u6211\u4e00\u4e2a\u542f\u53d1\u6765\u89e3\u51b3\u6211\u4e0a\u9762\u7684\u7591\u60d1\u3002\\n\\n\u60f3\u5fc5\u5728\u6211\u4eec\u5927\u90e8\u5206\u7684\u8ba4\u77e5\u4e2d\uff0c\u6211\u4eec\u4f1a\u89c9\u5f97\u8ba4\u4e3a\u65f6\u95f4\u662f\u8fde\u7eed\u7684\uff0c\u7a7a\u95f4\u662f\u8fde\u7eed\u7684\uff0c\u80fd\u91cf\u4e5f\u662f\u8fde\u7eed\u7684\u3002\u6c7d\u8f66\u901f\u5ea6\u4ece `0km/h` \u52a0\u901f\u5230 `100km/h`\uff0c\u90a3\u4e48\u901f\u5ea6\u4e00\u5b9a\u4f1a\u7ecf\u8fc7 `25km/h`\uff0c\u56e0\u4e3a\u901f\u5ea6\u5b83\u662f\u8fde\u7eed\u53d8\u5316\u7684\uff1b\u6e29\u5ea6\u4ece `0\u2103` \u4e0a\u5347\u5230 `100\u2103`\uff0c\u90a3\u4e48\u5b83\u4e00\u5b9a\u4f1a\u7ecf\u8fc7 `25\u2103`\uff0c\u56e0\u4e3a\u6e29\u5ea6\u4e5f\u662f\u8fde\u7eed\u53d8\u5316\u7684\u3002\\n\\n\u91cf\u5b50\u529b\u5b66\u7684\u521b\u59cb\u8005\u666e\u6717\u514b\u5728\u7814\u7a76\u7269\u7406\u95ee\u9898\u65f6\uff0c\u7531\u4e8e\u6570\u5b66\u5904\u7406\u7684\u9700\u8981\uff0c\u4ed6\u5047\u8bbe\u80fd\u91cf\u5b83\u4e0d\u662f\u8fde\u7eed\u7684\uff0c\u800c\u662f\u79bb\u6563\u7684\uff0c\u6709\u7740\u6700\u5c0f\u5355\u4f4d\uff0c\u800c\u80fd\u91cf\u7684\u5927\u5c0f\u53ea\u80fd\u4e3a\u8fd9\u4e9b\u6700\u5c0f\u5355\u4f4d\u7684\u6574\u6570\u500d\u3002\u666e\u6717\u514b\u5e26\u6765\u8fd9\u4e48\u4e00\u79cd\u89c2\u5ff5\uff0c\u80fd\u91cf\u662f\u79bb\u6563\u7684\uff0c\u800c\u4e0d\u662f\u8fde\u7eed\u7684\uff0c\u8fd9\u5728\u5f53\u65f6\u7b80\u76f4\u5c31\u662f\u5f02\u7c7b\u5b66\u8bf4\uff0c\u751a\u81f3\u5728\u666e\u6717\u514b\u6700\u521d\u63d0\u51fa\u8fd9\u4e48\u4e00\u4e2a\u6982\u5ff5\u65f6\uff0c\u4ed6\u81ea\u5df1\u90fd\u4e0d\u76f8\u4fe1\u3002\u4f46\u662f\u6700\u540e\u6211\u4eec\u77e5\u9053\u91cf\u5b50\u529b\u5b66\u5b83\u662f\u5bf9\u7684\uff0c\u80fd\u91cf\u5e76\u4e0d\u662f\u8fde\u7eed\u7684\uff0c\u800c\u662f\u79bb\u6563\u7684\uff0c\u53ea\u662f\u80fd\u91cf\u7684\u6700\u5c0f\u5355\u4f4d\u975e\u5e38\u5c0f\uff0c\u5bdf\u89c9\u4e0d\u51fa\u6765\u800c\u5df2\u3002\\n\\n\u6240\u4ee5\u8fd9\u7ed9\u6211\u5e26\u6765\u7684\u542f\u53d1\u5c31\u662f\uff0c\u7a7a\u95f4\u5b83\u662f\u4e0d\u662f\u4e5f\u662f\u79bb\u6563\u7684\uff0c\u5b83\u662f\u4e0d\u662f\u4e5f\u6709\u7740\u6700\u5c0f\u7684\u5355\u4f4d\uff0c\u53ea\u662f\u8fd9\u4e2a\u5355\u4f4d\u7279\u522b\u5c0f\uff0c\u6211\u4eec\u5bdf\u89c9\u4e0d\u51fa\u6765\u800c\u5df2\u3002\u5982\u679c\u7a7a\u95f4\u4e5f\u6709\u7740\u6700\u5c0f\u7684\u5355\u4f4d\uff0c\u90a3\u5f53\u6211\u4eec\u7684\u9ad8\u5ea6\u5df2\u7ecf\u662f\u6700\u5c0f\u5355\u4f4d\u65f6\uff0c\u5b83\u662f\u4e0d\u662f\u5c31\u4f1a\u505c\u4e0b\u6765\uff0c\u56e0\u4e3a\u5b83\u4e0d\u53ef\u80fd\u8fbe\u5230\u6700\u5c0f\u5355\u4f4d\u7684 $1/4$\uff0c\u56e0\u4e3a\u5df2\u7ecf\u662f\u6700\u5c0f\u4e86\uff0c\u5982\u679c\u6bd4\u6700\u5c0f\u5355\u4f4d\u8fd8\u5c0f\uff0c\u90a3\u8fd8\u80fd\u53eb\u505a\u6700\u5c0f\u5355\u4f4d\u5417\u3002\\n\\n\u6240\u4ee5\u6211\u7684\u7ed3\u8bba\u5c31\u662f\u5c0f\u7403\u4f1a\u505c\u4e0b\u6765\uff0c\u5b83\u4e0d\u4f1a\u6c38\u8fdc\u7684\u5f39\u4e0b\u53bb\uff0c\u56e0\u4e3a\u7a7a\u95f4\u6709\u6700\u5c0f\u5355\u4f4d\u3002\\n\\n\u5728\u8fd9\u91cc\u6211\u53c8\u60f3\u8d77\u4e86\u4e00\u4e2a\u6096\u8bba\uff0c\u90a3\u5c31\u662f\u829d\u6d1b\u6096\u8bba\uff1a\\n\\n> \u4e00\u4e2a\u4eba\u548c\u4e00\u53ea\u4e4c\u9f9f\u8fdb\u884c\u8d5b\u8dd1\uff0c\u4e4c\u9f9f\u7684\u901f\u5ea6\u4e3a `1m/s`\uff0c\u4eba\u7684\u901f\u5ea6\u4e3a `10m/s`\uff0c\u4e4c\u9f9f\u5728\u4eba\u524d\u65b9 `100m`\uff0c\u90a3\u4e48\u8fd9\u4e2a\u6096\u8bba\u8bf4\u7684\u662f\u4eba\u6c38\u8fdc\u8ffd\u4e0d\u4e0a\u4e4c\u9f9f\uff0c\u53ea\u80fd\u65e0\u9650\u7684\u903c\u8fd1\u4e4c\u9f9f\uff0c\u8fd9\u662f\u600e\u4e48\u56de\u4e8b\uff1f\\n\\n\u5047\u8bbe\u4e4c\u9f9f\u5728\u70b9 B\uff0c\u4eba\u5728\u70b9 A\uff0c\u4eba\u8981\u8ffd\u4e0a\u4e4c\u9f9f\u5c31\u5fc5\u987b\u8981\u7ecf\u8fc7 B \u70b9\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/\u5c0f\u7403\u4f1a\u505c\u4e0b\u6765\u5417-\u7b2c 1 \u9875.drawio2022-04-23-10-32-46.svg\\" style={{zoom: \'50%\' }}/>\\n\\n\\n\u4f46\u662f\u5f53\u4eba\u5230\u8fbe B \u70b9\u65f6\uff0c\u4e4c\u9f9f\u5df2\u7ecf\u5230\u8fbe C \u70b9\u4e86\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/\u5c0f\u7403\u4f1a\u505c\u4e0b\u6765\u5417-\u7b2c 2 \u9875.drawio2022-04-23-10-33-38.svg\\" style={{zoom: \'50%\' }}/>\\n\\n\u540c\u7406\uff0c\u4eba\u5982\u679c\u8981\u8ffd\u4e0a\u4e4c\u9f9f\u7684\u8bdd\uff0c\u5c31\u5fc5\u987b\u4f1a\u7ecf\u8fc7 C \u70b9\uff0c\u800c\u5f53\u4eba\u5230\u8fbe C \u70b9\u65f6\uff0c\u4e4c\u9f9f\u5df2\u7ecf\u53bb\u4e86 D \u70b9\u4e86\uff0c\u5982\u6b64\u5f80\u590d\uff0c\u4eba\u6c38\u8fdc\u90fd\u4e0d\u53ef\u80fd\u8ffd\u4e0a\u4e4c\u9f9f\uff0c\u53ea\u53ef\u80fd\u5728\u65e0\u9650\u7684\u903c\u8fd1\u3002\u8fd9\u4e0e\u6211\u4eec\u7684\u5b9e\u9645\u4e0d\u7b26\uff0c\u90a3\u4e48\u6211\u4eec\u600e\u4e48\u6765\u53cd\u5bf9\u8fd9\u4e48\u4e00\u4e2a\u6096\u8bba?\\n\\n\u6211\u4eec\u5047\u8bbe\u65f6\u95f4\u548c\u7a7a\u95f4\u4e0d\u662f\u8fde\u7eed\u7684\uff0c\u4e0d\u80fd\u591f\u6c38\u8fdc\u7684\u5206\u5272\u4e0b\u53bb\uff0c\u5b83\u4eec\u90fd\u6709\u7740\u6700\u5c0f\u7684\u5355\u4f4d\uff0c\u5373\u65f6\u95f4\u548c\u7a7a\u95f4\u90fd\u662f\u79bb\u6563\u7684\u3002\u5728\u8fd9\u6837\u7684\u5047\u8bbe\u4e0b\uff0c\u90a3\u4e48\u4eba\u5c31\u4e0d\u4f1a\u65e0\u9650\u7684\u903c\u8fd1\u4e4c\u9f9f\uff0c\u6240\u8c13\u7684\u65e0\u9650\u7684\u903c\u8fd1\u4e4c\u9f9f\uff0c\u6307\u7684\u5c31\u662f\u4eba\u4e0e\u4e4c\u9f9f\u4e4b\u95f4\u7684\u8ddd\u79bb\u65e0\u9650\u7684\u8d8b\u8fd1\u4e8e $0$\uff0c\u4f46\u662f\u6211\u4eec\u5047\u8bbe\u7a7a\u95f4\u5b83\u4e0d\u662f\u8fde\u7eed\u7684\uff0c\u5373\u4eba\u4e0e\u7a7a\u95f4\u4e4b\u95f4\u7684\u8ddd\u79bb\u4e0d\u4f1a\u65e0\u9650\u7684\u5c0f\uff0c\u6700\u5c0f\u4e5f\u53ea\u53ef\u80fd\u662f\u4e00\u4e2a\u7a7a\u95f4\u6700\u5c0f\u5355\u4f4d\u3002\\n\\n\u90a3\u4ec0\u4e48\u65f6\u5019\u4eba\u4f1a\u8d85\u8fc7\u4e4c\u9f9f\u5462? \u6211\u4eec\u4e0d\u59a8\u5047\u8bbe\u4eba\u5728 $1$ \u4e2a\u65f6\u95f4\u6700\u5c0f\u5355\u4f4d\u4e2d\u80fd\u591f\u79fb\u52a8 $10$ \u4e2a\u7a7a\u95f4\u6700\u5c0f\u5355\u4f4d\uff0c\u800c\u4e4c\u9f9f\u5728\u5728 $1$ \u4e2a\u65f6\u95f4\u6700\u5c0f\u5355\u4f4d\u4e2d\u80fd\u591f\u79fb\u52a8 $1$ \u4e2a\u7a7a\u95f4\u6700\u5c0f\u5355\u4f4d\uff0c\u5f53\u4eba\u4e0e\u4e4c\u9f9f\u4e4b\u95f4\u7684\u8ddd\u79bb\u5c0f\u4e8e $9$ \u4e2a\u7a7a\u95f4\u6700\u5c0f\u5355\u4f4d\u65f6\uff0c\u90a3\u4e48\u5728\u4e0b\u4e00\u4e2a\u65f6\u95f4\u6700\u5c0f\u5355\u4f4d\uff0c\u4eba\u5c31\u8d85\u8fc7\u4e86\u4e4c\u9f9f\u3002\\n\\n\u6240\u4ee5\uff0c\u6211\u8ba4\u4e3a\u8fd9\u4e2a\u4e16\u754c\u7684\u672c\u8d28\u4e0d\u662f\u8fde\u7eed\u7684\uff0c\u800c\u662f\u79bb\u6563\u7684\u3002"},{"id":"\u624b\u5199Promise","metadata":{"permalink":"/blog/\u624b\u5199Promise","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2020-06-28-\u624b\u5199Promise.mdx","source":"@site/blog/2020-06-28-\u624b\u5199Promise.mdx","title":"\u624b\u5199Promise","description":"Promise \u7684\u4f7f\u7528","date":"2020-06-28T00:00:00.000Z","formattedDate":"2020\u5e746\u670828\u65e5","tags":[{"label":"Promise","permalink":"/blog/tags/promise"},{"label":"\u624b\u5199","permalink":"/blog/tags/\u624b\u5199"}],"readingTime":24.235,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"authors":"xiongtao","slug":"\u624b\u5199Promise","tags":["Promise","\u624b\u5199"]},"prevItem":{"title":"\u5c0f\u7403\u4f1a\u505c\u4e0b\u6765\u5417","permalink":"/blog/2020/08/30/\u5c0f\u7403\u4f1a\u505c\u4e0b\u6765\u5417"},"nextItem":{"title":"TypeScript\u5165\u95e8\u6307\u5357","permalink":"/blog/2020/05/30/TypeScript\u5165\u95e8\u6307\u5357"}},"content":"## Promise \u7684\u4f7f\u7528\\n\\n### \u56de\u8c03\u5730\u72f1\\n\\n\u9996\u5148\u6211\u4eec\u4e86\u89e3\u4e00\u4e0b `Promise` \u51fa\u73b0\u7684\u80cc\u666f\uff0c\u5047\u8bbe\u6709\u4e0b\u9762\u7684\u7a0b\u5e8f\\n\\n```javascript\\nlet name = getUserNameById(id);\\nlet score = getScoreByName(name);\\nlet scholarship = getScholarshipByScore(score);\\nconsole.log(scholarship);\\n```\\n\\n\u8fd9\u4e2a\u7a0b\u5e8f\u9996\u5148\u6839\u636e `id` \u53bb\u83b7\u53d6\u540d\u5b57\uff0c\u63a5\u7740\u6839\u636e\u62ff\u5230\u7684\u540d\u5b57\u53d6\u83b7\u5f97\u5206\u6570\uff0c\u6700\u540e\u6839\u636e\u5206\u6570\u53bb\u83b7\u53d6\u5956\u5b66\u91d1\uff0c\u6700\u540e\u6253\u5370\u51fa\u5956\u5b66\u91d1\u3002\u4f46\u662f\u8fd9\u4e2a\u7a0b\u5e8f\u771f\u7684\u80fd\u8fbe\u5230\u9884\u671f\u7684\u6548\u679c\u5417? \u7b54\u6848\u662f\u4e0d\u80fd\uff0c\u56e0\u4e3a `JavaScript` \u662f\u5f02\u6b65\u7684\uff0c\u5bf9\u4e8e\u4e00\u822c\u7684\u8017\u65f6\u64cd\u4f5c\u5e76\u4e0d\u4f1a\u7acb\u5373\u6267\u884c\uff0c\u800c\u662f\u5c06\u51fd\u6570\u4fdd\u5b58\u5728\u4e00\u4e2a\u961f\u5217\u4e2d\uff0c\u76f4\u5230\u4ee3\u7801\u6267\u884c\u5b8c\u6bd5\uff0c\u624d\u4f1a\u62ff\u51fa\u961f\u5217\u4e2d\u7684\u51fd\u6570\u6267\u884c\u3002\u6240\u4ee5\u4e0a\u9762\u7684\u51fd\u6570\u90fd\u4e0d\u4f1a\u88ab\u7acb\u5373\u6267\u884c\uff0c\u6240\u4ee5\u5f53\u7136\u6ca1\u6709\u8fd4\u56de\u503c\uff0c\u6240\u4ee5\u4e0a\u9762\u7684 `name, score, scholarship` \u90fd\u662f `undefined`\u3002\\n\\n\u4e3a\u4e86\u89e3\u51b3\u8fd9\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u4e00\u822c\u4f1a\u4f7f\u7528\u56de\u8c03\u51fd\u6570\u7684\u5f62\u5f0f\uff0c\u7b49\u6211\u4eec\u6839\u636e `id` \u62ff\u5230 `name` \u4e4b\u540e\uff0c\u5c06 `name` \u4f20\u5165\u56de\u8c03\u51fd\u6570\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4fdd\u8bc1\\"\u540c\u6b65\\"\u7684\u6548\u679c\uff0c\u6240\u4ee5\u6211\u4eec\u5c06\u4e0a\u9762\u7684\u4ee3\u7801\u4fee\u6539\u5982\u4e0b\\n\\n```javascript\\ngetUserNameById(id, function (name) {\\n  getScoreByName(name, function (score) {\\n    getScholarshipByScore(score, function (scholarship) {\\n      console.log(scholarship);\\n    });\\n  });\\n});\\n```\\n\\n\x3c!--truncate--\x3e\\n\\n\u4f46\u662f\u4e0a\u9762\u7684\u7a0b\u5e8f\u770b\u8d77\u6765\u8fd8\u662f\u602a\u5413\u4eba\u7684\uff0c\u51fd\u6570\u5957\u7740\u51fd\u6570\uff0c\u50cf\u8fd9\u6837\u7684\u60c5\u51b5\u6211\u4eec\u79f0\u4e4b\u4e3a\u56de\u8c03\u5730\u72f1\u3002\u56de\u8c03\u5730\u72f1\u4e0d\u80fd\u4f7f\u7528 `try... catch` \u6355\u83b7\u5f02\u5e38\uff0c\u4e0d\u80fd\u4f7f\u7528 `return`\uff0c\u5e76\u4e14\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u5dee\uff0c\u8fd8\u5bb9\u6613\u51fa\u9519\u3002\u53ef\u80fd\u73b0\u5728\u4f60\u8fd8\u4f53\u4f1a\u4e0d\u5230\uff0c\u4e0a\u9762\u6211\u4eec\u53ea\u662f\u5d4c\u5957\u4e86\u4e09\u5c42\uff0c\u5b9e\u9645\u7684\u60c5\u51b5\u53ef\u80fd\u6709\u66f4\u591a\u7684\u5c42\uff0c\u4f7f\u5f97\u4ee3\u7801\u5f88\u96be\u9605\u8bfb\u3002\\n\\n### Promise \u7684\u7b80\u5355\u4f7f\u7528\\n\\n\u6b63\u662f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u6837\u7684\u95ee\u9898\uff0c\u5728 `ES6` \u4e2d\u63d0\u51fa\u4e86 `Promise` \u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u6765\u770b\u5982\u4f55\u4f7f\u7528 `Promise`\uff0c\u770b\u4e0b\u9762\u7684\u7a0b\u5e8f\\n\\n```javascript\\nlet p = new Promise((resolve) => {\\n  // fn1\\n  setTimeout(() => {\\n    console.log(\\"1s\\");\\n    resolve(1);\\n  }, 1000);\\n});\\n\\np.then((value) => {\\n  // fn2\\n  console.log(value);\\n});\\n```\\n\\n`Promise` \u6784\u9020\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a\u56de\u8c03\u51fd\u6570 `fn1`\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u6709\u4e00\u4e2a `then` \u65b9\u6cd5\uff0c`then` \u65b9\u6cd5\u4e5f\u63a5\u53d7\u4e00\u4e2a\u56de\u8c03\u51fd\u6570 `fn2`\uff0c\u53ea\u6709\u5f53 `fn1` \u4e2d\u63a5\u6536 `resolve` \u51fd\u6570\u6267\u884c(\u5f53 `resolve` \u6267\u884c\u4ee5\u540e\uff0c\u6211\u4eec\u5c31\u8bf4\u8be5 `Promise` \u5bf9\u8c61\u8fdb\u5165\u4e86 `fulfilled` \u72b6\u6001)\uff0c`fn2` \u624d\u4f1a\u88ab\u6267\u884c\u3002\\n\\n\u4ee5\u4e0a\u9762\u7684\u4ee3\u7801\u4e3a\u4f8b\uff0c\u9996\u5148\u6211\u4eec\u5f80 `Promise` \u4e2d\u4f20\u9012\u4e86\u4e00\u4e2a\u56de\u8c03\u51fd\u6570 `fn1`\uff0c\u8be5\u51fd\u6570\u4f1a\u7acb\u5373\u6267\u884c\\n\\n```javascript\\n// \u5411\u6784\u9020\u51fd\u6570\u4e2d\u4f20\u5165\u7684\u56de\u8c03\u51fd\u6570 fn1\\n(resolve) => {\\n  setTimeout(() => {\\n    console.log(\\"1s\\");\\n    resolve(1);\\n  }, 1000);\\n};\\n```\\n\\n\u5f53\u8be5 `fn1` \u7684 `resolve` \u51fd\u6570\u6267\u884c\u4e4b\u540e\uff0c`fn2` \u624d\u4f1a\u88ab\u6267\u884c\uff0c\u6240\u4ee5 `1s` \u4e4b\u540e `fn2` \u624d\u4f1a\u6267\u884c\\n\\n```javascript\\n// then \u63a5\u6536\u7684\u56de\u8c03\u51fd\u6570 fn2\\n(value) => {\\n  console.log(value);\\n};\\n```\\n\\n`fn2` \u63a5\u6536\u7684\u53c2\u6570 `value` \u662f\u901a\u8fc7 `resolve` \u4f20\u5165\u7684\uff0c\u5728\u4e0a\u9762\u6211\u4eec\u901a\u8fc7 `resolve(1)` \u4f20\u5165\u4e86\u53c2\u6570 `1`\uff0c\u6240\u4ee5 `fn2` \u63a5\u53d7\u5230\u7684\u53c2\u6570\u4e3a `1`\u3002\u4e0a\u9762\u6267\u884c\u7684\u7ed3\u679c\u4e3a\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/2020062714122022-04-21-20-12-28.gif\\" style={{ zoom: \'50%\'}}/>\\n\\n\u53ef\u89c1 `fn2` \u662f\u5728 `resolve` \u51fd\u6570\u4e4b\u540e\u6267\u884c\u7684\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4fdd\u8bc1\u4ee3\u7801\u6267\u884c\u7684\u987a\u5e8f\uff0c\u5e76\u4e14\u4e0d\u7528\u5199\u5d4c\u5957\u7684\u56de\u8c03\u51fd\u6570\uff0c\u800c\u662f\u4f7f\u7528 `then` \u65b9\u6cd5\u8fdb\u884c\\"\u5e73\u884c\\"\u7684\u8c03\u7528\u3002\\n\\n### \u94fe\u5f0f\u8c03\u7528\\n\\n\u6240\u8c13\u7684\u94fe\u5f0f\u8c03\u7528\u662f\u6307\u5728\u8c03\u7528 `then` \u65b9\u6cd5\u4e4b\u540e\u8fd8\u53ef\u4ee5\u7ee7\u7eed\u8c03\u7528 `then` \u65b9\u6cd5\uff0c\u5982\u4e0b\\n\\n```javascript\\nlet p = new Promise((resolve) => {\\n  // fn1\\n  resolve(1);\\n});\\n\\np.then((value) => {\\n  // fn2\\n  console.log(value);\\n  return 2;\\n}).then((value) => {\\n  // fn3\\n  console.log(value);\\n});\\n```\\n\\n\u8f93\u51fa\u5982\u4e0b\\n\\n```javascript\\n1;\\n2;\\n```\\n\\n\u5982\u4e0a\u6240\u793a\uff0c\u6211\u4eec\u8fde\u7eed\u8c03\u7528\u4e86\u4e24\u6b21 `then`\uff0c\u5728\u6267\u884c\u65f6\uff0c`fn3` \u662f\u5728 `fn2` \u4e4b\u540e\u6267\u884c\u7684\uff0c\u5e76\u4e14 `fn3` \u4e2d\u7684\u53c2\u6570 `value` \u662f `fn2` \u7684\u8fd4\u56de\u503c\u3002\u5176\u5b9e `then` \u65b9\u6cd5\u4e5f\u53ef\u4ee5\u4e0d\u4f20\u9012\u4efb\u4f55\u7684\u53c2\u6570\\n\\n```javascript\\nlet p = new Promise((resolve) => {\\n  // fn1\\n  resolve(1);\\n});\\n\\np.then((value) => {\\n  // fn2\\n  console.log(value);\\n  return 2;\\n}).then() // \u6ca1\u6709\u4f20\u9012\u4efb\u4f55\u7684\u53c2\u6570\\n  .then((value) => {\\n    // fn3\\n    console.log(value);\\n  });\\n```\\n\\n\u5728\u4e0a\u9762\u6211\u4eec\u8c03\u7528\u4e86\u6ca1\u6709\u4f20\u5165\u56de\u8c03\u51fd\u6570 `then` \u4e4b\u540e\u53c8\u7ee7\u7eed\u8c03\u7528\u4e86\u4e00\u4e2a `then`\uff0c\u6839\u636e\u6211\u4eec\u4e0a\u9762\u6240\u8bb2\u7684\uff0c`fn3` \u63a5\u53d7\u7684\u53c2\u6570 `value` \u662f\u7b2c\u4e8c\u4e2a `then` \u56de\u8c03\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u4f46\u662f\u7531\u4e8e\u7b2c\u4e8c\u4e2a `then` \u6ca1\u6709\u56de\u8c03\u51fd\u6570\uff0c\u610f\u5473\u7740\u6839\u672c\u6ca1\u6709\u8fd4\u56de\u503c\uff0c\u8fd9\u4e2a\u65f6\u5019\u4f1a\u628a\u4e0a\u4e00\u5c42\u7684\u8fd4\u56de\u503c\u5373 `fn2` \u8fd4\u56de\u503c\u4f20\u5230 `fn3`\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/202204212013242022-04-21-20-13-25.png\\" style={{ zoom: \'50%\'}}/>\\n\\n\u6240\u4ee5\u4e0a\u9762\u7684\u8f93\u51fa\u662f\\n\\n```javascript\\n1\\n2\\n```\\n\\n`then` \u4e2d\u7684\u56de\u8c03\u51fd\u6570\u9664\u4e86\u53ef\u4ee5\u8fd4\u56de\u666e\u901a\u7684\u503c\u4ee5\u5916\uff0c\u8fd8\u53ef\u4ee5\u8fd4\u56de\u4e00\u4e2a `Promise` \u5bf9\u8c61\uff0c\u5f53\u8fd4\u56de `Promise` \u5bf9\u8c61\u65f6\uff0c\u4e0b\u9762\u5982\u679c\u7ee7\u7eed\u8c03\u7528 `then`\uff0c\u90a3\u4e48 `then` \u4e2d\u7684\u56de\u8c03\u51fd\u6570\u8981\u7b49\u5230\u8fd9\u4e2a `Promise` \u5bf9\u8c61\u4e2d\u7684 `resolve` \u65b9\u6cd5\u6267\u884c\u540e\u624d\u4f1a\u88ab\u6267\u884c\uff0c\u5373\u8fdb\u5165\u4e86 `fulfilled` \u72b6\u6001 \uff0c\u5e76\u4e14\u8fd9\u4e2a `then` \u4e2d\u56de\u8c03\u51fd\u6570\u6240\u9700\u7684\u53c2\u6570\u662f\u8fd4\u56de\u7684 `Promise` \u5bf9\u8c61 `resolve` \u4f20\u5165\u7684\u503c\uff0c\u5982\u4e0b\\n\\n```javascript\\nlet p = new Promise((resolve) => {\\n  resolve(1);\\n});\\n\\np.then((value) => {\\n  // fn1\\n  console.log(value);\\n  return new Promise((resolve) => {\\n    setTimeout(() => {\\n      console.log(\\"then \u8fd4\u56de\u7684Promise\\");\\n      resolve(2);\\n    }, 1000);\\n  });\\n}).then((value) => {\\n  // fn2\\n  console.log(value);\\n});\\n```\\n\\n`fn2` \u5728 `fn1` \u8fd4\u56de\u7684 `Promise` \u8fdb\u5165\u4e86 `fulfilled` \u72b6\u6001\u4e4b\u540e\u624d\u4f1a\u88ab\u6267\u884c\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/202204212014492022-04-21-20-14-50.png\\" style={{ zoom: \'50%\'}}/>\\n\\n\u4e0a\u9762\u7684\u6267\u884c\u7ed3\u679c\u4e3a\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/2020062717352022-04-21-20-16-02.gif\\" style={{ zoom: \'50%\'}}/>\\n\\n### \u539f\u578b\u65b9\u6cd5\\n\\n\u4e0a\u9762\u6211\u4eec\u4ecb\u7ecd\u4e86 `resolve` \u548c `then` \u65b9\u6cd5\uff0c\u5f53\u6211\u4eec\u6267\u884c `resolve` \u65b9\u6cd5\u4e4b\u540e\uff0c`then` \u63a5\u6536\u7684\u56de\u8c03\u51fd\u6570\u624d\u4f1a\u6267\u884c\u3002\u5176\u5b9e\u4f20\u5165 `Promise` \u7684\u56de\u8c03\u51fd\u6570\u6709\u4e24\u4e2a\u53c2\u6570\uff0c\u4e00\u4e2a\u662f `resolve`\uff0c\u53e6\u4e00\u4e2a\u662f `reject`\uff0c\u5f53\u51fd\u6570\u4ea7\u751f\u9519\u8bef\u65f6\uff0c\u90a3\u4e48\u6211\u4eec\u4f1a\u8c03\u7528 `reject` \u65b9\u6cd5\uff0c\u8fd9\u65f6\u6211\u4eec\u8bf4 `Promise` \u5bf9\u8c61\u8fdb\u5165\u4e86 `rejetced` \u72b6\u6001\uff0c\u8fd9\u65f6\u540e\u9762\u7684 `then` \u65b9\u6cd5\u4e0d\u4f1a\u6267\u884c\uff0c\u4e0e `then` \u65b9\u6cd5\u76f8\u5bf9\u7684\u662f\u4e00\u4e2a `catch` \u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u4e5f\u662f\u63a5\u6536\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u8be5\u56de\u8c03\u51fd\u6570\u65f6\u7528\u6765\u5904\u7406\u9519\u8bef\u7684\uff0c\u5f53\u8be5 `Promise` \u5bf9\u8c61\u8fdb\u5165\u4e86 `rejected` \u72b6\u6001\uff0c`catch` \u4e2d\u7684\u56de\u8c03\u51fd\u6570\u624d\u4f1a\u88ab\u6267\u884c\uff0c\u4e0e `then` \u76f8\u4f3c\uff0c`catch` \u4e2d\u56de\u8c03\u51fd\u6570\u63a5\u6536\u7684\u53c2\u6570\u662f `reject` \u8c03\u7528\u65f6\u4f20\u5165\u7684\u53c2\u6570\uff0c\u5982\u4e0b\\n\\n```javascript\\nlet p = new Promise((resolve, reject) => {\\n  reject(\\"error\\");\\n}).then(() => {\\n    console.log(\\"then\u65b9\u6cd5\u6267\u884c\u4e86\\");\\n  })\\n  .catch((error) => {\\n    console.log(\\"catch\u65b9\u6cd5\u6267\u884c\\");\\n    console.log(\\"message: \\" + error);\\n  });\\n```\\n\\n\u7ed3\u679c\u4e3a\\n\\n```javascript\\ncatch\u65b9\u6cd5\u6267\u884c;\\nmessage: error;\\n```\\n\\n\u4e0a\u9762\u6211\u4eec\u8c03\u7528\u4e86 `reject`\uff0c\u8fd9\u65f6\u540e\u9762\u7684 `then` \u4e2d\u7684\u56de\u8c03\u51fd\u6570\u662f\u4e0d\u4f1a\u6267\u884c\u7684\uff0c\u800c\u662f\u4f1a\u6267\u884c `catch` \u4e2d\u7684\u56de\u8c03\u51fd\u6570\u3002\\n\\n:::note note\\n\\n\u5176\u5b9e `then` \u65b9\u6cd5\u53ef\u4ee5\u63a5\u53d7\u4e24\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u7b2c\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u7528\u6765\u5904\u7406 `resolve` \u4e4b\u540e\u7684\u7ed3\u679c\uff0c\u800c\u7b2c\u4e8c\u4e2a\u56de\u8c03\u51fd\u6570\u5219\u662f\u7528\u6765\u5904\u7406 `reject` \u4e4b\u540e\u7684\u7ed3\u679c\uff0c\u6bd4\u5982\u4e0a\u9762\u7684\u7a0b\u5e8f\u53ef\u4ee5\u5199\u4e3a\\n\\n```javascript\\nlet p = new Promise((resolve, reject) => {\\n  reject(\\"error\\");\\n}).then(\\n  () => {\\n    console.log(\\"then\u65b9\u6cd5\u6267\u884c\u4e86\\");\\n  },\\n  (error) => {\\n    console.log(\\"catch\u65b9\u6cd5\u6267\u884c\\");\\n    console.log(\\"message:\\" + error);\\n  }\\n);\\n```\\n:::\\n\\n\u6267\u884c\u7684\u7ed3\u679c\u4e0e\u4e0a\u9762\u7684\u76f8\u540c\uff0c**\u5176\u5b9e `catch(onError)` \u51fd\u6570\u672c\u8d28\u4e0a\u5c31\u662f `then(null, onError)`**\u3002\\n\\n\u6709\u7684\u65f6\u5019\u65e0\u8bba\u662f\u6210\u529f\u4ee5\u5426\uff0c\u6211\u4eec\u90fd\u5e0c\u671b\u6267\u884c\u4e00\u4e2a\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u7684\u4f5c\u7528\u4e00\u822c\u662f\u7528\u6765\u8d44\u6e90\u7684\u56de\u6536\uff0c\u7528\u6765\u5b8c\u6210\u8fd9\u4e2a\u529f\u80fd\u7684\u662f `finally` \u51fd\u6570\uff0c\u8be5\u51fd\u6570\u4e5f\u662f\u63a5\u6536\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u8be5\u56de\u8c03\u51fd\u6570\u65e0\u8bba\u662f\u5728 `fulfilled` \u72b6\u6001\u8fd8\u662f `rejected` \u72b6\u6001\u90fd\u662f\u4f1a\u88ab\u6267\u884c\u7684\\n\\n```javascript\\nlet p = new Promise((resolve, reject) => {\\n  // rejected\u72b6\u6001\\n  reject();\\n})\\n  .then(\\n    () => {\\n      console.log(\\"then\u65b9\u6cd5\u6267\u884c\u4e86\\");\\n    },\\n    () => {\\n      console.log(\\"catch\u65b9\u6cd5\u6267\u884c\\");\\n    }\\n  )\\n  .finally(() => {\\n    console.log(\\"finally\u6267\u884c\u4e86\\");\\n  });\\n```\\n\\n\u6700\u540e\u7684\u6267\u884c\u7ed3\u679c\u4e3a\\n\\n```javascript\\ncatch\u65b9\u6cd5\u6267\u884c;\\nfinally\u6267\u884c\u4e86;\\n```\\n\\n\u73b0\u5728\u6211\u4eec\u5c06 `reject()` \u6539\u4e3a `resolve()`\\n\\n```javascript\\nlet p = new Promise((resolve, reject) => {\\n  // fulfilled \u72b6\u6001\\n  resolve();\\n}).then(\\n    () => {\\n      console.log(\\"then\u65b9\u6cd5\u6267\u884c\u4e86\\");\\n    },\\n    () => {\\n      console.log(\\"catch\u65b9\u6cd5\u6267\u884c\\");\\n    }\\n  )\\n  .finally(() => {\\n    console.log(\\"finally\u6267\u884c\u4e86\\");\\n  });\\n```\\n\\n\u8fd9\u65f6\u6267\u884c\u7684\u7ed3\u679c\u4e3a\\n\\n```\\nthen\u65b9\u6cd5\u6267\u884c\u4e86\\nfinally\u6267\u884c\u4e86\\n```\\n\\n\u6240\u4ee5\u4e0d\u8bba\u51fa\u4e8e\u54ea\u4e2a\u72b6\u6001\uff0c`finally` \u4e2d\u7684\u56de\u8c03\u51fd\u6570\u90fd\u4f1a\u88ab\u6267\u884c\u3002\\n\\n### \u9759\u6001\u65b9\u6cd5\\n\\n\u9759\u6001\u65b9\u6cd5\u6307\u7684\u5c31\u662f\u901a\u8fc7 `Promise` \u76f4\u63a5\u8c03\u7528\u7684\u65b9\u6cd5\u3002\\n\\n#### resolve\\n\\n\u6211\u4eec\u9996\u5148\u6765\u4ecb\u7ecd `resolve` \u65b9\u6cd5\uff0c\u8be5\u51fd\u6570\u63a5\u6536\u4e00\u4e2a\u53c2\u6570\uff0c\u8fd4\u56de\u4e00\u4e2a `Promise` \u5bf9\u8c61\uff0c\u6839\u636e\u53c2\u6570\u7684\u4e0d\u540c\u60c5\u51b5\uff0c\u8fd4\u56de\u503c\u4e5f\u4e0d\u76f8\u540c\\n\\n1. \u53c2\u6570\u662f\u4e00\u4e2a `Promise` \u5bf9\u8c61\uff0c\u76f4\u63a5\u8fd4\u56de\\n\\n   ```javascript\\n   let p1 = new Promise((resolve, reject) => {\\n     resolve(123);\\n   });\\n\\n   let p2 = Promise.resolve(p1);\\n\\n   console.log(p1 === p2); // true\\n   ```\\n\\n2. \u53c2\u6570\u662f\u4e00\u4e2a\u542b\u6709 `then` \u65b9\u6cd5\u7684\u5bf9\u8c61(\u6211\u4eec\u4e5f\u79f0\u4e4b\u4e3a `thenable` \u5bf9\u8c61)\uff0c\u90a3\u4e48\u4f1a\u7acb\u5373\u6267\u884c\u8be5 `then` \u65b9\u6cd5\uff0c\u8be5 `then` \u65b9\u6cd5\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff0c\u8fd9\u4e24\u4e2a\u53c2\u6570\u5206\u522b\u4e3a\u8fd4\u56de\u7684 `Promise` \u7684 `resolve, reject` \u65b9\u6cd5\\n\\n   ```javascript\\n   let p = Promise.resolve({\\n     then(resolve, reject) {\\n       resolve(123);\\n     },\\n   });\\n\\n   p.then((value) => {\\n     console.log(value); // 123\\n   });\\n   ```\\n\\n3. \u53c2\u6570\u4e0d\u662f\u4e0a\u9762\u4e24\u79cd\u60c5\u51b5\uff0c\u90a3\u4e48\u4f1a\u8fd4\u56de\u7684\u4e00\u4e2a `fulfilled` \u72b6\u6001\u7684 `Promise`\uff0c\u8be5 `Promise` \u4f1a\u5c06\u53c2\u6570\u4f20\u7ed9\u540e\u9762\u7684 `then`\\n\\n   ```javascript\\n   let p = Promise.resolve(\\"123\\");\\n\\n   p.then((value) => {\\n     console.log(value); // 123\\n   });\\n   ```\\n\\n#### all\\n\\n\u8be5\u65b9\u6cd5\u4e5f\u4f1a\u8fd4\u56de\u4e00\u4e2a `Promise` \u5bf9\u8c61\uff0c\u5b83\u63a5\u53d7\u4e00\u4e2a\u7531 `Promise` \u5bf9\u8c61\u7ec4\u6210\u7684\u6570\u7ec4\uff0c\u53ea\u6709\u5f53\u8be5\u6570\u7ec4\u4e2d\u7684\u6240\u6709 `Promise` \u5bf9\u8c61\u90fd\u53d8\u4e3a `fulfilled` \u72b6\u6001\u4e4b\u540e\uff0c\u8fd4\u56de\u7684 `Promise` \u5bf9\u8c61\u624d\u4f1a\u53d8\u4e3a `fulfilled` \u72b6\u6001\\n\\n```javascript\\nlet p1 = new Promise((resolve) => {\\n  setTimeout(() => {\\n    console.log(\\"p1\\");\\n    resolve(1);\\n  }, 1000);\\n});\\n\\nlet p2 = new Promise((resolve) => {\\n  setTimeout(() => {\\n    console.log(\\"p2\\");\\n    resolve(2);\\n  }, 2000);\\n});\\n\\nlet p3 = new Promise((resolve) => {\\n  setTimeout(() => {\\n    console.log(\\"p3\\");\\n    resolve(3);\\n  }, 3000);\\n});\\n\\nPromise.all([p1, p2, p3]).then((results) => {\\n  console.log(results); // [ 1, 2, 3 ]\\n});\\n```\\n\\n\u5728\u4e0a\u9762\u6211\u4eec\u5b9a\u4e49\u4e09\u4e2a `Promise` \u5bf9\u8c61\uff0c\u8fd9\u4e2a\u4e09\u4e2a\u5bf9\u8c61\u5206\u522b\u5728 `1s, 2s, 3s` \u540e\u53d8\u4e3a `fulfilled`\uff0c\u6240\u4ee5\u8fd4\u56de\u7684 `Promise` \u5bf9\u8c61\u5728 `3s` \u540e\u53d8\u4e3a `fulfilled` \u72b6\u6001\uff0c\u5e76\u4e14\u4f1a\u5c06\u8fd9\u4e09\u4e2a `Promise` \u5bf9\u8c61\u5411 `resolve` \u4f20\u5165\u7684\u503c\u5f62\u6210\u6570\u7ec4\u4f20\u5165\u5230\u8fd4\u56de\u7684 `Promise` \u7684 `resolve` \u4e2d\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/202204212018472022-04-21-20-18-48.png\\" style={{ zoom: \'50%\'}}/>\\n\\n\u4e0a\u9762\u4ee3\u7801\u7684\u6267\u884c\u7ed3\u679c\u4e3a\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/202006272055gif2022-04-21-20-19-28.gif\\" style={{ zoom: \'50%\'}}/>\\n\\n#### race\\n\\n`race` \u65b9\u6cd5\u5b83\u4e5f\u4f1a\u8fd4\u56de\u4e00\u4e2a `Promise` \u5bf9\u8c61\uff0c\u540c `all` \u65b9\u6cd5\u4e00\u6837\uff0c\u5b83\u4e5f\u63a5\u53d7\u4e00\u4e2a\u7531 `Promise` \u5bf9\u8c61\u7ec4\u6210\u7684\u6570\u7ec4\uff0c\u4f46\u662f\u4e0d\u662f\u5f53\u6240\u6709\u7684 `Promise` \u5bf9\u8c61\u53d8\u4e3a `fulfilled` \u540e\uff0c\u8fd4\u56de\u7684 `Promise` \u5bf9\u8c61\u624d\u4f1a\u53d8\u4e3a `fulfilled`\uff0c\u800c\u662f\u8fd9\u4e9b `Promise` \u5bf9\u8c61\u8fdb\u884c\u7ade\u8d5b\uff0c\u5f53\u6700\u5feb\u7684\u4e00\u4e2a `Promise` \u5bf9\u8c61\u53d8\u4e3a `fulfilled` \u72b6\u6001\u65f6\uff0c\u8fd4\u56de\u7684 `Promise` \u5bf9\u8c61\u5c31\u4f1a\u53d8\u4e3a `fulfilled`\\n\\n```javascript\\nlet p1 = new Promise((resolve) => {\\n  setTimeout(() => {\\n    console.log(\\"p1\\");\\n    resolve(1);\\n  }, 1000);\\n});\\n\\nlet p2 = new Promise((resolve) => {\\n  setTimeout(() => {\\n    console.log(\\"p2\\");\\n    resolve(2);\\n  }, 2000);\\n});\\n\\nlet p3 = new Promise((resolve) => {\\n  setTimeout(() => {\\n    console.log(\\"p3\\");\\n    resolve(3);\\n  }, 3000);\\n});\\n\\nPromise.race([p1, p2, p3]).then((result) => {\\n  console.log(result);\\n});\\n```\\n\\n\u5e76\u4e14\u4f1a\u5c06\u5411\u6700\u5feb\u53d8\u4e3a `fulfilled` \u72b6\u6001\u7684 `Promise` \u5bf9\u8c61\u7684 `resolve` \u4f20\u5165\u7684\u503c\u4f20\u5165\u5230\u8fd4\u56de\u7684 `Promise` \u5bf9\u8c61\u7684 `resolve` \u65b9\u6cd5\u4e2d\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/202204212020082022-04-21-20-20-09.png\\" style={{ zoom: \'50%\'}}/>\\n\\n\u6240\u4ee5\u4e0a\u9762\u7a0b\u5e8f\u7684\u6267\u884c\u7ed3\u679c\u4e3a\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/2020062721142022-04-21-20-20-53.gif\\" style={{ zoom: \'50%\'}}/>\\n\\n\u53ef\u89c1\u5f53 `p1` \u53d8\u4e3a `fulfilled` \u4e4b\u540e\uff0c\u8fd4\u56de\u7684 `Promise` \u4e5f\u53d8\u4e3a\u4e86 `fulfilled` \u72b6\u6001\uff0c\u5e76\u4e14\u62ff\u5230\u4e86\u5411 `p1` \u7684 `resolve` \u4e2d\u4f20\u5165\u7684\u503c\u3002\\n\\n## \u5b9e\u73b0 Promise\\n\\n### \u7b80\u5355\u5b9e\u73b0\\n\\n\u4e0b\u9762\u5c31\u5c06\u7b80\u5355\u5b9e\u73b0\u4e00\u4e2a `Promise`\u3002\u9996\u5148\u6211\u4eec\u8981\u660e\u786e\uff0c`Promise` \u6709\u4e09\u4e2a\u72b6\u6001\uff0c\u5206\u522b\u4e3a `pending, fulfilled, rejected` \u4e09\u4e2a\u72b6\u6001\uff0c\u521d\u59cb\u65f6\u7684 `Promise` \u662f `pending` \u72b6\u6001\uff0c\u5f53\u8c03\u7528 `resolve` \u65b9\u6cd5\u540e\u5c31\u4f1a\u53d8\u4e3a `fulfilled` \u72b6\u6001\uff0c\u5f53\u5904\u4e8e `fulfilled` \u72b6\u6001\u65f6\uff0c`then` \u4e2d\u7684\u7b2c\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u624d\u4f1a\u88ab\u6267\u884c\uff1b\u8c03\u7528 `reject` \u65b9\u6cd5\u5c31\u4f1a\u53d8\u4e3a `rejected` \u72b6\u6001\uff0c\u5f53\u5904\u4e8e `rejected` \u72b6\u6001\u65f6\uff0c`then` \u4e2d\u7684\u7b2c\u4e8c\u4e2a\u56de\u8c03\u51fd\u6570\u624d\u4f1a\u88ab\u6267\u884c\u6216\u8005 `catch` \u4e2d\u7684\u56de\u8c03\u51fd\u6570\u624d\u4f1a\u88ab\u6267\u884c\u3002\u5e76\u4e14 `fulfilled` \u548c `rejected` \u72b6\u6001\u53ea\u80fd\u7531 `pending` \u72b6\u6001\u8f6c\u53d8\u800c\u6765\uff0c\u5e76\u4e14\u4e00\u822c\u8f6c\u53d8\u4e3a `fulfilled` \u72b6\u6001\u6216\u8005 `rejected` \u72b6\u6001\uff0c\u90a3\u4e48\u72b6\u6001\u5c31\u4e0d\u80fd\u518d\u6b21\u8fdb\u884c\u8f6c\u53d8\\n\\n```javascript\\nclass Promise {\\n  // Promise\u7684\u4e09\u4e2a\u72b6\u6001\\n  PENDING = \\"pending\\";\\n  FULFILLED = \\"fulfilled\\";\\n  REJECTED = \\"rejected\\";\\n\\n  // \u5f53\u524d\u72b6\u6001\\n  state = this.PENDING;\\n  // \u4f20\u7ed9 then \u4e2d\u56de\u8c03\u51fd\u6570\u7684\u503c\\n  value = null;\\n\\n  // \u6784\u9020\u51fd\u6570\uff0c\u63a5\u6536\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u7acb\u5373\u6267\u884c\u8be5\u51fd\u6570\u5e76\u5c06 _resolve \u548c _reject \u4f20\u5165\\n  constructor(fn) {\\n    fn(this._resolve.bind(this), this._reject.bind(this));\\n  }\\n\\n  // \u5f53\u6267\u884c\u5230 then \u65b9\u6cd5\u4f46\u8fd8\u672a\u53d8\u4e3a fulfilled \u72b6\u6001\u65f6\uff0c\u90a3\u4e48\u5c06\u5411 then \u4e2d\u4f20\u5165\u7684\u56de\u8c03\u51fd\u6570\u5148\u4fdd\u5b58\u8d77\u6765\\n  callbacks = [];\\n\\n  _resolve(value) {\\n    // \u5982\u679c\u72b6\u6001\u4e0d\u4e3a pending\uff0c\u8bf4\u660e\u72b6\u6001\u5df2\u53d1\u751f\u6539\u53d8\uff0c\u4e0d\u518d\u6267\u884c\\n    if (this.state !== this.PENDING) {\\n      return;\\n    }\\n\\n    // \u5c06\u8981\u4f20\u7ed9 then \u4e2d\u56de\u8c03\u51fd\u6570\u7684\u503c\u4fdd\u5b58\u8d77\u6765\\n    this.value = value;\\n    // \u6539\u53d8\u72b6\u6001\\n    this.state = this.FULFILLED;\\n    // \u6267\u884c\u5411 then \u4e2d\u4f20\u5165\u7684 onFulfilled \u51fd\u6570\\n    this.callbacks.forEach((callback) => callback.onFulfilled(this.value));\\n  }\\n\\n  _reject(error) {\\n    // \u8fc7\u7a0b\u540c reject\\n    if (!this.PENDING) {\\n      return;\\n    }\\n    this.value = error;\\n    this.state = this.REJECTED;\\n    this.callbacks.forEach((callback) => callback.onRejected(this.value));\\n  }\\n\\n  then(onFulfilled, onRejected) {\\n    // \u5982\u679c\u5f53\u524d\u7684\u72b6\u6001\u4e3a pending\uff0c\u90a3\u4e48\u5c06\u56de\u8c03\u51fd\u6570\u4fdd\u5b58\u5230 callbacks \u51fd\u6570\u4e2d\uff0c\u7b49\u5230\u72b6\u6001\u6539\u53d8\u65f6\u6267\u884c\\n    if (this.state === this.PENDING) {\\n      this.callbacks.push({\\n        onFulfilled,\\n        onRejected,\\n      });\\n      return;\\n    }\\n\\n    // \u5982\u679c\u72b6\u6001\u4e3a fulfilled \u72b6\u6001\uff0c\u5219\u6267\u884c onFulfilled \u65b9\u6cd5\\n    if (this.state === this.FULFILLED) {\\n      onFulfilled(this.value);\\n      return;\\n    }\\n\\n    // \u540c\u4e0a\\n    if (this.state === this.REJECTED) {\\n      onRejected(this.value);\\n      return;\\n    }\\n  }\\n}\\n```\\n\\n\u4e0a\u9762\u7684\u7a0b\u5e8f\u7684\u6ce8\u91ca\u63cf\u8ff0\u4e86\u7a0b\u5e8f\u7684\u529f\u80fd\uff0c\u76f8\u6bd4\u8fd8\u662f\u4e0d\u96be\u7406\u89e3\u7684\uff0c\u73b0\u5728\u6211\u4eec\u6765\u6d4b\u8bd5\u4e00\u4e0b\u662f\u5426\u6709\u6548\\n\\n```javascript\\nlet p = new Promise((resolve) => {\\n  setTimeout(() => {\\n    console.log(\\"1s\u540e\\");\\n    resolve(1);\\n  }, 1000);\\n});\\n\\np.then((value) => {\\n  console.log(value);\\n});\\n```\\n\\n\u7ed3\u679c\u5982\u4e0b\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/2020062721452022-04-21-20-21-44.gif\\" style={{ zoom: \'50%\'}}/>\\n\\n### \u94fe\u5f0f\u8c03\u7528\\n\\n\u73b0\u5728\u6211\u4eec\u6765\u5b9e\u73b0\u94fe\u5f0f\u8c03\u7528\uff0c\u8981\u5b9e\u73b0\u94fe\u5f0f\u8c03\u7528\u5c31\u9700\u8981\u8fd4\u56de\u4e00\u4e2a `Promise`\uff0c\u6bcf\u6b21\u8c03\u7528 `then` \u65b9\u6cd5\u6211\u4eec\u90fd\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 `Promise`\uff0c\u4fee\u6539\u5982\u4e0b\\n\\n```javascript\\n_resolve(value) {\\n  if (this.state !== this.PENDING) {\\n      return;\\n  }\\n  this.value = value;\\n  this.state = this.FULFILLED;\\n  // \u4fee\u6539\u4e86\u8fd9\u91cc\uff0c\u7531\u4e8e\u9700\u8981\u5c06 then \u4e2d\u7684\u56de\u8c03\u51fd\u6570\u7684\u8fd4\u56de\u503c\u8fd4\u56de\uff0c\u6240\u4ee5\u4e0d\u80fd\u7b80\u5355\u7684\u8c03\u7528\\n  this.callbacks.forEach(callback => this._handle(callback));\\n}\\n\\n_reject(error) {\\n  if (!this.PENDING) {\\n      return;\\n  }\\n  this.value = error;\\n  this.state = this.REJECTED;\\n  // \u540c resolve\\n  this.callbacks.forEach(callback => this._handle(callback));\\n}\\n\\nthen(onFulfilled, onRejected) {\\n  // \u8fd4\u56de\u65b0\u7684 Promise\\n  return new Promise((resolve, reject) => {\\n    this._handle({\\n      onFulfilled,\\n      onRejected,\\n      resolve,\\n      reject\\n    })\\n  })\\n}\\n\\n_handle(callback) {\\n  // \u5982\u679c\u662f pending \u72b6\u6001\uff0c\u5c06 callback \u5ef6\u8fdf\u6267\u884c\\n  if (this.state === this.PENDING) {\\n    this.callbacks.push(callback);\\n  }\\n  if (this.state === this.FULFILLED) {\\n    // \u5982\u679c then \u65b9\u6cd5\u6ca1\u6709\u4f20\u5165 onFulFilled \u56de\u8c03\u51fd\u6570\uff0c\u90a3\u4e48\u5c06\u4e0a\u4e00\u5c42\u8fd4\u56de\u7684\u503c\u4f20\u5165\\n    if (!callback.onFulfilled) {\\n      callback.resolve(this.value);\\n      return;\\n    }\\n    // \u5982\u679c\u6709 onFulFilled \u51fd\u6570\uff0c\u90a3\u4e48\u5c06 onFulFilled \u51fd\u6570\u7684\u8fd4\u56de\u503c\u4f20\u5165\u5230\u8fd4\u56de\u7684 Promise \u5bf9\u8c61\u7684 resolve \u4e2d\\n    try {\\n      // \u7528\u6237\u4f20\u5165\u7684\u56de\u8c03\u51fd\u6570\u53ef\u80fd\u4f1a\u51fa\u9519\uff0c\u6240\u4ee5\u4f7f\u7528 try...catch \u5305\u88f9\u8d77\u6765\\n      let ret = callback.onFulfilled(this.value);\\n      callback.resolve(ret);\\n    } catch (e) {\\n      // \u5f53\u4f20\u5165\u7684\u56de\u8c03\u51fd\u6570\u51fa\u9519\u65f6\uff0cPromise \u53d8\u4e3a rejected\u72b6\u6001\\n      callback.reject(e);\\n    }\\n  }\\n  if (this.state === this.REJECTED) {\\n    if (!callback.onRejected) {\\n      callback.reject(this.value);\\n      return;\\n    }\\n    let ret = callback.onRejected(this.value);\\n    callback.reject(ret);\\n  }\\n}\\n```\\n\\n\u73b0\u5728\u6211\u4eec\u6765\u6d4b\u8bd5\u4e00\u4e0b\u662f\u5426\u80fd\u591f\u8fdb\u884c\u94fe\u5f0f\u8c03\u7528\\n\\n```javascript\\nlet p = new Promise((resolve) => {\\n  setTimeout(() => {\\n    console.log(\\"1s\u540e\\");\\n    resolve(1);\\n  }, 1000);\\n});\\n\\np.then((value) => {\\n  console.log(value);\\n  return 2;\\n}).then() // \u4ec0\u4e48\u56de\u8c03\u51fd\u6570\u90fd\u6ca1\u6709\u4f20\u5165\uff0c\u4f1a\u5c06\u4e0a\u4e00\u4e2a then \u8fd4\u56de\u7684\u503c\u4f20\u5165\\n  .then((value) => {\\n    console.log(value);\\n  });\\n```\\n\\n\u4e0a\u9762\u7684\u6267\u884c\u7ed3\u679c\u4e3a\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/2020062722232022-04-21-20-22-52.gif\\" style={{ zoom: \'50%\'}}/>\\n\\n\u4e0a\u9762\u6211\u4eec\u8fd8\u8981\u6700\u540e\u4e00\u4e2a\u95ee\u9898\u6ca1\u6709\u89e3\u51b3\uff0c\u5c31\u662f\u5982\u679c `then` \u4e2d\u7684\u56de\u8c03\u51fd\u6570\u8fd4\u56de\u7684\u662f `Promise` \u5bf9\u8c61\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u8981\u5728 `_resolve` \u5bf9\u503c\u8fdb\u884c\u5224\u65ad\uff0c\u5982\u679c\u503c\u662f `Promise` \u5bf9\u8c61\uff0c\u8bb0\u4f5c `p1`\uff0c\u90a3\u4e48 `then` \u8fd4\u56de\u7684 `Promise` \u5bf9\u8c61 `p2` \u7684 `resolve` \u65b9\u6cd5\u5e94\u5f53\u5728 `p1` \u5bf9\u8c61\u7684 `resolve` \u6267\u884c\u4e4b\u540e\u6267\u884c\u3002\u4fee\u6539 `_resolve` \u5982\u4e0b\\n\\n```javascript\\n_resolve(value) {\\n  if (this.state !== this.PENDING) {\\n      return;\\n  }\\n\\n  // \u53ea\u589e\u52a0\u4e86\u4e0b\u9762\u7684\u4ee3\u7801\\n  if (value instanceof Promise) {\\n    // \u5f53\u524d resolve \u7684\u6267\u884c\u5e94\u5f53\u5728 value \u7684 resolve \u6267\u884c\u4e4b\u540e\\n    value.then(this._resolve.bind(this), this._reject.bind(this));\\n    return;\\n  }\\n\\n  this.value = value;\\n  this.state = this.FULFILLED;\\n  this.callbacks.forEach(callback => this._handle(callback));\\n}\\n```\\n\\n\u73b0\u5728\u6211\u4eec\u6765\u9a8c\u8bc1\u4e00\u756a\\n\\n```javascript\\nlet p = new Promise((resolve) => {\\n  setTimeout(() => {\\n    console.log(\\"1s\u540e\\");\\n    resolve(1);\\n  }, 1000);\\n});\\n\\np.then((value) => {\\n  console.log(value);\\n  return new Promise((resolve) => {\\n    setTimeout(() => {\\n      console.log(\\"\u53c81s\u540e\\");\\n      resolve(2);\\n    }, 1000);\\n  });\\n}).then((value) => {\\n  console.log(value);\\n});\\n```\\n\\n\u6267\u884c\u7ed3\u679c\u4e3a\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/2020062722392022-04-21-20-23-35.gif\\" style={{ zoom: \'50%\'}}/>\\n\\n### \u539f\u578b\u65b9\u6cd5\\n\\n\u63a5\u4e0b\u6765\u7ee7\u7eed\u5b9e\u73b0 `Promise` \u5bf9\u8c61\u7684\u51e0\u4e2a\u539f\u578b\u65b9\u6cd5\uff0c\u5206\u522b\u662f `catch` \u548c `finally`\u3002`catch` \u7684\u5b9e\u73b0\u5f88\u7b80\u5355\\n\\n```javascript\\ncatch(onRejected) {\\n  return this.then(null, onRejected);\\n}\\n```\\n\\n\u63a5\u4e0b\u6765\u662f\u5b9e\u73b0 `finally` \u65b9\u6cd5\uff0c\u6700\u5bb9\u6613\u60f3\u5230\u7684\u7248\u672c\u662f\\n\\n```javascript\\nfinally(onDone) {\\n  return this.then(onDone, onDone);\\n}\\n```\\n\\n\u4e0d\u7ba1\u662f\u5904\u4e8e `fulfilled` \u7684\u72b6\u6001\u8fd8\u662f `rejected` \u7684\u72b6\u6001\uff0c`onDone` \u65b9\u6cd5\u90fd\u4f1a\u5f97\u5230\u6267\u884c\uff0c\u4f46\u662f\u4f7f\u7528\u8fd9\u6837\u7684\u65b9\u5f0f\u6709\u7f3a\u70b9\\n\\n1. `onDone` \u65b9\u6cd5\u662f\u65e0\u8bba\u5931\u8d25\u8fd8\u662f\u6210\u529f\u65f6\u90fd\u4f1a\u6267\u884c\u7684\uff0c\u6240\u4ee5\u5b83\u5e94\u8be5\u6ca1\u6709\u53c2\u6570\uff0c\u4f46\u662f\u4f7f\u7528 `then(onDone, onDone)` \u7684\u65b9\u5f0f\u5c31\u4f1a\u4f20\u5165\u53c2\u6570\\n2. \u5982\u679c `onDone` \u8fd4\u56de\u4e00\u4e2a `Promise` \u5bf9\u8c61\u7684\u8bdd\uff0c\u90a3\u4e48\u4f1a\u6539\u53d8 `finally` \u8fd4\u56de\u7684 `Promise` \u7684\u72b6\u6001\\n\\n\u5904\u4e8e\u4e0a\u8ff0\u8003\u8651\uff0c\u6211\u4eec\u4f7f\u7528\u4e0b\u9762\u7684\u5b9e\u73b0\u65b9\u5f0f\\n\\n```javascript\\nfinally(onDone) {\\n  if (typeof onDone !== \'function\') {\\n    return this.then();\\n  }\\n  // \u65e0\u8bba\u6210\u529f\u4e0e\u5426\uff0conDone() \u90fd\u4f1a\u6267\u884c\uff0c\u4e14\u4e0d\u9700\u8981\u53c2\u6570\\n  // \u53e6\u5916\u6267\u884c finally \u4e0d\u4f1a\u5f71\u54cd\u4e4b\u524d\u7684 Promise \u72b6\u6001\\n  return this.then(\\n    value => Promise.resolve(onDone()).then(() => value),\\n    error => Promise.resolve(onDone()).then(() => {throw error})\\n  );\\n}\\n```\\n\\n### \u9759\u6001\u65b9\u6cd5\\n\\n\u6700\u540e\u6765\u5b9e\u73b0 `Promise` \u7684\u9759\u6001\u65b9\u6cd5\uff0c\u9996\u5148\u5b9e\u73b0 `resolve` \u65b9\u6cd5\uff0c\u5bf9\u4e8e\u8be5\u65b9\u6cd5\u7684\u4f7f\u7528\u6211\u4eec\u5728\u7528\u6cd5\u90a3\u91cc\u5df2\u7ecf\u4ecb\u7ecd\u8fc7\u4e86\uff0c\u6240\u4ee5\u8fd9\u91cc\u76f4\u63a5\u8d34\u51fa\u5b9e\u73b0\u7684\u4ee3\u7801\\n\\n```javascript\\nstatic resolve(value) {\\n  // \u5982\u679c\u4f20\u5165\u7684\u662f Promise \u5bf9\u8c61\uff0c\u76f4\u63a5\u8fd4\u56de\\n  if (value instanceof Promise) {\\n    return value;\\n  }\\n\\n  // \u5982\u679c\u4f20\u5165\u7684\u662f thenable \u5bf9\u8c61\uff0c\u5219\u7acb\u5373\u6267\u884c\u5bf9\u8c61\u7684 then\uff0c\u5e76\u5c06 resolve \u548c reject \u4f20\u5165\\n  if (value && typeof value === \'object\' && typeof value.then === \'function\') {\\n    return new Promise((resolve, reject) => value.then(resolve, reject));\\n  }\\n\\n  if (value) {\\n    // \u5982\u679c\u4e0d\u662f\u4e0a\u9762\u4e24\u79cd\u60c5\u51b5\uff0c\u5e76\u4e14 value \u5b58\u5728\uff0c\u90a3\u4e48\u76f4\u63a5\u5c06 value \u4f20\u5165 resolve\\n    return new Promise(resolve => resolve(value));\\n  } else {\\n    return new Promise(resolve => resolve());\\n  }\\n}\\n```\\n\\n`all` \u65b9\u6cd5\u5728\u4e0a\u9762\u4e5f\u4ecb\u7ecd\u8fc7\u4e86\uff0c\u53ea\u6709\u5f53\u6240\u6709\u4f20\u5165\u7684 `Promise` \u5bf9\u8c61\u90fd\u53d8\u4e3a `fulfilled` \u72b6\u6001\uff0c\u8fd4\u56de\u7684 `Promise` \u5bf9\u8c61\u624d\u4f1a\u53d8\u4e3a `fulfilled` \u72b6\u6001\uff0c\u6240\u4ee5\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u53d8\u91cf\u6765\u7edf\u8ba1\u5df2\u7ecf\u53d8\u4e3a `fulfilled` \u72b6\u6001\u7684 `Promise` \u5bf9\u8c61\u7684\u4e2a\u6570\uff0c\u5f53\u6240\u6709 `Promise` \u5bf9\u8c61\u90fd\u53d8\u4e3a `fulfilled` \u72b6\u6001\u65f6\uff0c\u6267\u884c `resolve` \u65b9\u6cd5\uff0c\u5c06\u8fd4\u56de\u7684 `Promise` \u5bf9\u8c61\u53d8\u4e3a `fulfilled` \u72b6\u6001\uff0c\u5982\u4e0b\\n\\n```javascript\\nstatic all(promises) {\\n  return new Promise((resolve, reject) => {\\n    // Promise \u5bf9\u8c61\u7684\u4e2a\u6570\\n    let itemLength = promises.length;\\n    // \u7edf\u8ba1\u5df2\u53d8\u4e3a fulfilled \u72b6\u6001\u7684 Promise \u5bf9\u8c61\u4e2a\u6570\\n    let finishedPromise = 0;\\n    // \u8fd4\u56de\u7684\u6570\u7ec4\\n    let results = Array.from({length: itemLength});\\n\\n    promises.forEach(promise => {\\n      promise.then(result => {\\n        results[finishedPromise] = result;\\n        finishedPromise++;\\n        // \u5f53\u6240\u6709\u7684 Promise \u5bf9\u8c61\u53d8\u4e3a fulfilled \u65f6\uff0c\u8fd4\u56de\u7684 Promise \u5bf9\u8c61\u72b6\u6001\u53d8\u4e3a fulfilled\\n        if (finishedPromise == itemLength) {\\n          resolve(results);\\n        }\\n      }, error => {\\n        // \u53ea\u8981\u6709\u4e00\u4e2a\u53d8\u4e3a rejected\uff0c\u90a3\u4e48\u76f4\u63a5\u53d8\u4e3a rejected \u72b6\u6001\\n        reject(error);\\n      })\\n    })\\n  })\\n}\\n```\\n\\n`race` \u65b9\u6cd5\u7684\u7528\u6cd5\u4e5f\u4ecb\u7ecd\u8fc7\uff0c\u5728\u8fd9\u91cc\u6211\u4eec\u5229\u7528 `resolve` \u65b9\u6cd5\u53ea\u4f1a\u6267\u884c\u4e00\u6b21\u7684\u7279\u6027\uff0c\u6211\u4eec\u5f88\u5feb\u53ef\u4ee5\u5199\u51fa\u8fd9\u6837\u7684\u4ee3\u7801\\n\\n```javascript\\nstatic race(promises) {\\n  return new Promise((resolve, reject) => {\\n    promises.forEach(promise => {\\n      promise.then(result => {\\n        resolve(result);\\n      }, error => {\\n        reject(error);\\n      })\\n    })\\n  })\\n}\\n```\\n\\n\u7531\u4e8e `resolve` \u53ea\u4f1a\u6267\u884c\u4e00\u6b21\uff0c\u53ea\u6709\u6700\u5148\u53d8\u4e3a `fulfilled` \u72b6\u6001\u7684 `Promise` \u5bf9\u8c61\u80fd\u5c06\u5b83 `resolve` \u7684\u503c\u4f20\u5165\u3002\\n\\n### \u5b8c\u6574\u4ee3\u7801\\n\\n```javascript\\nclass Promise {\\n  PENDING = \\"pending\\";\\n  FULFILLED = \\"fulfilled\\";\\n  REJECTED = \\"rejected\\";\\n\\n  state = this.PENDING;\\n  value = null;\\n\\n  constructor(fn) {\\n    fn(this._resolve.bind(this), this._reject.bind(this));\\n  }\\n\\n  callbacks = [];\\n\\n  _resolve(value) {\\n    if (this.state !== this.PENDING) {\\n      return;\\n    }\\n\\n    if (value instanceof Promise) {\\n      value.then(this._resolve.bind(this), this._reject.bind(this));\\n      return;\\n    }\\n\\n    this.value = value;\\n    this.state = this.FULFILLED;\\n    this.callbacks.forEach((callback) => this._handle(callback));\\n  }\\n\\n  _reject(error) {\\n    if (!this.PENDING) {\\n      return;\\n    }\\n    this.value = error;\\n    this.state = this.REJECTED;\\n    this.callbacks.forEach((callback) => this._handle(callback));\\n  }\\n\\n  then(onFulfilled, onRejected) {\\n    return new Promise((resolve, reject) => {\\n      this._handle({\\n        onFulfilled,\\n        onRejected,\\n        resolve,\\n        reject,\\n      });\\n    });\\n  }\\n\\n  catch(onRejected) {\\n    return this.then(null, onRejected);\\n  }\\n\\n  finally(onDone) {\\n    if (typeof onDone !== \\"function\\") {\\n      return this.then();\\n    }\\n\\n    return this.then(\\n      (value) => Promise.resolve(onDone()).then(() => value),\\n      (error) =>\\n        Promise.resolve(onDone()).then(() => {\\n          throw error;\\n        })\\n    );\\n  }\\n\\n  _handle(callback) {\\n    if (this.state === this.PENDING) {\\n      this.callbacks.push(callback);\\n    }\\n\\n    if (this.state === this.FULFILLED) {\\n      if (!callback.onFulfilled) {\\n        callback.resolve(this.value);\\n        return;\\n      }\\n\\n      try {\\n        let ret = callback.onFulfilled(this.value);\\n        callback.resolve(ret);\\n      } catch (e) {\\n        callback.reject(e);\\n      }\\n    }\\n\\n    if (this.state === this.REJECTED) {\\n      if (!callback.onRejected) {\\n        callback.reject(this.value);\\n        return;\\n      }\\n      let ret = callback.onRejected(this.value);\\n      callback.reject(ret);\\n    }\\n  }\\n\\n  static resolve(value) {\\n    if (value instanceof Promise) {\\n      return value;\\n    }\\n\\n    if (\\n      value &&\\n      typeof value === \\"object\\" &&\\n      typeof value.then === \\"function\\"\\n    ) {\\n      return new Promise((resolve, reject) => value.then(resolve, reject));\\n    }\\n\\n    if (value) {\\n      return new Promise((resolve) => resolve(value));\\n    } else {\\n      return new Promise((resolve) => resolve());\\n    }\\n  }\\n\\n  static all(promises) {\\n    return new Promise((resolve, reject) => {\\n      let itemLength = promises.length;\\n      let finishedPromise = 0;\\n      let results = Array.from({ length: itemLength });\\n\\n      promises.forEach((promise) => {\\n        promise.then(\\n          (result) => {\\n            results[finishedPromise] = result;\\n            finishedPromise++;\\n            if (finishedPromise == itemLength) {\\n              resolve(results);\\n            }\\n          },\\n          (error) => {\\n            reject(error);\\n          }\\n        );\\n      });\\n    });\\n  }\\n\\n  static race(promises) {\\n    return new Promise((resolve, reject) => {\\n      promises.forEach((promise) => {\\n        promise.then(\\n          (result) => {\\n            resolve(result);\\n          },\\n          (error) => {\\n            reject(error);\\n          }\\n        );\\n      });\\n    });\\n  }\\n}\\n```\\n\\n## \u53c2\u8003\u6587\u7ae0\\n\\n- [\u56fe\u89e3 Promise \u5b9e\u73b0\u539f\u7406\uff08\u4e00\uff09\uff1a\u5148\u5199\u4e00\u4e2a\u57fa\u7840\u7684 Promise](https://mp.weixin.qq.com/s?__biz=MzA5NTcxOTcyMg==&mid=2247486601&idx=1&sn=54429420b0c07d518cec0f25a335c41e&chksm=90ba54cca7cddddae70a7ed7c000f0b1bc0d7c2d1c3b24f57775dc5822fc86fd9ba0c5f3ed70&scene=126&sessionid=1592905857&key=82c238abbe3b82baf9881311d259c9d04b6825a9ccae7b2a4719b98d46065f568a0db4178266ff98feff0214486915cb1af9165162e328decbc0810fb56726ef47afce6aab7d437b05ee4b92e1e2edac&ascene=1&uin=MTc3NjQ2ODM3NQ%3D%3D&devicetype=Windows+10+x64&version=6209007b&lang=zh_CN&exportkey=AXzB1RasL6jiqp0WQ45qnf4%3D&pass_ticket=x774fARNYVyp1e9yDUlfRb7wSl0izcpF0j6DFaHf0fkEHDL6jv0ElWc1SzaZ6%2B%2B1)\\n- [\u56fe\u89e3 Promise \u5b9e\u73b0\u539f\u7406\uff08\u4e8c\uff09\uff1a Promise \u94fe\u5f0f\u8c03\u7528](https://mp.weixin.qq.com/s?__biz=MzA5NTcxOTcyMg==&mid=2247486680&idx=1&sn=94ad054b685f05fbb6e37059399c9cef&chksm=90ba549da7cddd8b5c802100f0d4752587c2781797d69bf33b7f3da241b754a0c28b4250b947&scene=126&sessionid=1592905847&key=e82ba7b3cce71606954236c4df9ca857aa88e193ff96f051fc026f71c1b1ca29273ee7acb983db16e8bbaf66b5fca09e484347169ba81d069693c0bd0e0575c68bdbe3d58d3f3215e65fbb45d745e79b&ascene=1&uin=MTc3NjQ2ODM3NQ%3D%3D&devicetype=Windows+10+x64&version=6209007b&lang=zh_CN&exportkey=Af0QDGTKJ0ZZ3MXT%2BURTN9M%3D&pass_ticket=x774fARNYVyp1e9yDUlfRb7wSl0izcpF0j6DFaHf0fkEHDL6jv0ElWc1SzaZ6%2B%2B1)\\n- [\u56fe\u89e3 Promise \u5b9e\u73b0\u539f\u7406\uff08\u4e09\uff09\uff1aPromise \u539f\u578b\u65b9\u6cd5\u5b9e\u73b0](https://mp.weixin.qq.com/s?__biz=MzA5NTcxOTcyMg==&mid=2247486762&idx=1&sn=278db1c95220579a8c1a2125a65d627a&chksm=90ba556fa7cddc7902cd186b057a989d0ca1a1357ba101feb9f871985385909e104aaafd4bda&scene=126&sessionid=1592905847&key=f6dee7b9ef4ba659a75dc0797593ee3ed7a2ec7d08fcb00f6cc346c81f86fc7a61cf5067c66192cee324e7aa9577fb5657def17927abdf0ce25d2e702f369d6a2ee3a3ac2bd2e3ae501aea18372ad528&ascene=1&uin=MTc3NjQ2ODM3NQ%3D%3D&devicetype=Windows+10+x64&version=6209007b&lang=zh_CN&exportkey=AY0%2FcOOAjibVmsT%2B%2B1tYPmI%3D&pass_ticket=x774fARNYVyp1e9yDUlfRb7wSl0izcpF0j6DFaHf0fkEHDL6jv0ElWc1SzaZ6%2B%2B1)\\n- [\u56fe\u89e3 Promise \u5b9e\u73b0\u539f\u7406\uff08\u56db\uff09\uff1aPromise \u9759\u6001\u65b9\u6cd5\u5b9e\u73b0](https://mp.weixin.qq.com/s?__biz=MzA5NTcxOTcyMg==&mid=2247486839&idx=1&sn=5e9d85a70e9f85c94250a8c1c86772ca&chksm=90ba5532a7cddc24535cfc80fe892ffa34ff3a9638fbc1e9810ebab3c35784402968f9a65d44&scene=126&sessionid=1593161282&key=e82ba7b3cce71606a4cce70ca930ac7d6b61a05729ee3144ff9c5ccd0f54be407ea3ba04542163e11032e315e329bcf1536ceaf16ef408d759adda51f9d1ed57c083e30ba375fa10862d7e6705e0942d&ascene=1&uin=MTc3NjQ2ODM3NQ%3D%3D&devicetype=Windows+10+x64&version=6209007b&lang=zh_CN&exportkey=AWZmv5R1eG3cSK0W44%2F8fyM%3D&pass_ticket=uTkleeK9zg7mTbWWYlCzmyU6cReKuc7iYYllvVI7AfOrz4Zh0w9gvqjsFpKY5qNq)\\n- [Promise.all \u548c Promise.race \u6e90\u7801\u5b9e\u73b0](https://juejin.im/post/5d3f0a38f265da03bb4a81ff)"},{"id":"/2020/05/30/TypeScript\u5165\u95e8\u6307\u5357","metadata":{"permalink":"/blog/2020/05/30/TypeScript\u5165\u95e8\u6307\u5357","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2020-05-30-TypeScript\u5165\u95e8\u6307\u5357.mdx","source":"@site/blog/2020-05-30-TypeScript\u5165\u95e8\u6307\u5357.mdx","title":"TypeScript\u5165\u95e8\u6307\u5357","description":"\u4ecb\u7ecd","date":"2020-05-30T00:00:00.000Z","formattedDate":"2020\u5e745\u670830\u65e5","tags":[{"label":"TypeScript","permalink":"/blog/tags/type-script"}],"readingTime":35.105,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"authors":"xiongtao","tags":["TypeScript"],"date":"2020-05-30T00:00:00.000Z"},"prevItem":{"title":"\u624b\u5199Promise","permalink":"/blog/\u624b\u5199Promise"},"nextItem":{"title":"\u6b63\u5219\u8868\u8fbe\u5f0f","permalink":"/blog/\u6b63\u5219\u8868\u8fbe\u5f0f"}},"content":"## \u4ecb\u7ecd\\n\\n### TypeScript\u662f\u4ec0\u4e48\\n\\n`TypeScript` \u662f\u4ec0\u4e48? \u5f15\u7528\u5b98\u65b9\u7684\u5b9a\u4e49\\n\\n> TypeScript is a typed superset of JavaScript that compiles to plain JavaScript. Any browser. Any host. Any OS. Open source.\\n\\n\u7b80\u5355\u7ffb\u8bd1\u5c31\u662f\\n\\n> `TypeScript` \u662f `JavaScript` \u7684\u8d85\u96c6\uff0c\u5e76\u4e14\u53ef\u4ee5\u88ab\u7f16\u8bd1\u6210 `JavaScript`\u3002\u5b83\u53ef\u4ee5\u8fd0\u884c\u5728\u4efb\u4f55\u6d4f\u89c8\u5668\uff0c\u4efb\u4f55\u4e3b\u673a\uff0c\u4efb\u4f55\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u3002\u5e76\u4e14\u5b83\u662f\u5f00\u6e90\u7684\u3002\\n\\n\u770b\u5230\u8fd9\u91cc\u4f60\u53ef\u80fd\u5bf9 `TypeScript` \u8fd8\u662f\u6ca1\u6709\u4ec0\u4e48\u611f\u89c9\uff0c\u5176\u5b9e\u5728\u6211\u770b\u6765 `TypeScript` \u662f\u5bf9 `JavaScript` \u505a\u4e86\u5404\u79cd\u9650\u5236\uff0c\u8fd9\u91cc\u8bf4\u7684\u9650\u5236\u5e76\u4e0d\u662f\u8d2c\u4e49\u7684\u610f\u601d\uff0c\u56e0\u4e3a `JavaScript` \u5b9e\u5728\u662f\u592a\u7075\u6d3b\u4e86\uff0c\u5f88\u591a\u7684\u95ee\u9898\u53ea\u6709\u5728\u8fd0\u884c\u7684\u65f6\u5019\u624d\u4f1a\u66b4\u9732\u51fa\u6765\uff0c\u6bd4\u5982\u5bf9\u4e8e\u51fd\u6570\uff0c\u5373\u4f7f\u5b9a\u4e49\u65f6\u8981\u6c42\u4f20\u4e24\u4e2a\u53c2\u6570\uff0c\u4f46\u662f\u5728\u4f7f\u7528\u65f6\u5374\u53ef\u4ee5\u4f20\u5165\u4efb\u610f\u7684\u53c2\u6570\uff0c\u6240\u4ee5\u4f60\u65e0\u6cd5\u9650\u5236\u4f7f\u7528\u8be5\u51fd\u6570\u7684\u7528\u6237\u4f20\u5165\u6b63\u786e\u7684\u53c2\u6570\uff0c\u5982\u679c\u78b0\u5230\u4e0d\u4ed4\u7ec6\u770b `API` \u6587\u6863\u7684\u7528\u6237\uff0c\u9b3c\u77e5\u9053\u5b83\u4f7f\u7528\u7684\u65f6\u5019\u4f1a\u4f20\u5165\u4ec0\u4e48\uff0c\u51fa\u4e86\u95ee\u9898\u8bf4\u4e0d\u5b9a\u4f1a\u7529\u9505\u4f60\u517c\u5bb9\u6027\u505a\u7684\u4e0d\u597d\u3002\u800c `TypeScript` \u5219\u9650\u5236\u4e86\u8fd9\u4e00\u70b9\uff0c\u5728\u4f7f\u7528\u65f6\u4f20\u5165\u7684\u53c2\u6570\u5fc5\u987b\u4e0e\u5b9a\u4e49\u4f20\u5165\u7684\u76f8\u540c\uff0c\u5e76\u4e14\u6709\u63d0\u793a\u6bcf\u4e2a\u53c2\u6570\u7684\u4f5c\u7528\uff0c\u7528\u6237\u4f7f\u7528\u8be5\u51fd\u6570\u65f6\u5fc5\u987b\u6309\u89c4\u5b9a\u7684\u6765\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n### TypeScript\u7684\u4f18\u52bf\\n\\n\u90a3\u4e48 `TypeScript` \u53ef\u4ee5\u4e3a\u6211\u4eec\u5e26\u6765\u4ec0\u4e48\u597d\u5904\uff1a\\n\\n1. \u9519\u8bef\u5728\u7f16\u8bd1\u65f6\u5c31\u53ef\u4ee5\u66b4\u9732\u51fa\u6765\uff0c\u800c\u4e0d\u5fc5\u7b49\u5230\u8fd0\u884c\u65f6\u624d\u66b4\u9732\u51fa\u6765\\n\\n  \u5982\u4e0b `js` \u6587\u4ef6\\n\\n  <img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/202005291015132022-10-23-20-24-28.png\\" />\\n\\n  \u5982\u4e0a\uff0c\u4e00\u4e0d\u5c0f\u5fc3\u5c06\u53d8\u91cf\u540d\u5199\u9519\u4e86\uff0c\u5199\u6210\u4e86 `MyNane`\uff0c\u8fd9\u79cd\u9519\u8bef\u662f\u5f88\u6709\u53ef\u80fd\u53d1\u751f\u7684\uff0c\u4f46\u662f\u5728\u5f88\u591a\u7684\u65f6\u5019\u6211\u4eec\u81ea\u5df1\u5374\u5f88\u96be\u53d1\u73b0\uff0c\u53ea\u6709\u5f53\u6211\u4eec\u8fd0\u884c\u8be5\u7a0b\u5e8f\u62a5\u9519\u7684\u65f6\u5019\uff0c\u6211\u4eec\u624d\u6709\u53ef\u80fd\u6839\u636e\u62a5\u9519\u4fe1\u606f\uff0c\u786e\u5b9a\u62a5\u9519\u7684\u539f\u56e0\uff1b\u66f4\u7cdf\u7cd5\u7684\u662f\uff0c\u5982\u679c\u62a5\u9519\u7684\u4fe1\u606f\u4e0d\u660e\u786e\uff0c\u4f60\u51e0\u4e4e\u65e0\u6cd5\u786e\u5b9a\u662f\u54ea\u91cc\u51fa\u73b0\u95ee\u9898\uff0c\u5230\u65f6\u5019\u8981\u9760\u4e00\u53cc\u8089\u773c\u53bb\u627e\u51fa\u8fd9\u4e48\u4e00\u4e2a\u5c0f\u5c0f\u7684\u4e0d\u540c\uff0c\u66fe\u7ecf\u6211\u5c31\u6709\u56e0\u4e3a\u53d8\u91cf\u540d\u5199\u9519\u7684\u95ee\u9898\uff0c\u6211\u627e\u4e86\u534a\u4e2a\u5c0f\u65f6\u3002\u4f46\u662f\u5982\u679c\u6211\u4eec\u4f7f\u7528 `TypeScript` \u7684\u8bdd\uff0c\u8fd9\u6837\u7684\u95ee\u9898\u5728\u7f16\u8bd1\u65f6\u5c31\u4f1a\u88ab\u53d1\u73b0\uff0c\u5982\u4e0b `ts` \u6587\u4ef6\\n\\n  <img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/202005291019142022-10-23-20-25-23.png\\" />\\n\\n  \u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u5728 `MyNane` \u4e0b\u9762\u51fa\u73b0\u4e86\u7ea2\u8272\u7684\u6ce2\u6d6a\u7ebf\uff0c\u5c06\u9f20\u6807\u653e\u5728\u4e0a\u9762\uff0c\u8fd8\u4f1a\u8d34\u5fc3\u7684\u7ed9\u51fa\u63d0\u793a\u3002\\n\\n2. \u667a\u80fd\u63d0\u793a\\n\\n  \u5bf9\u4e8e\u73b0\u4ee3\u7684\u7a0b\u5e8f\u5458\u6765\u8bf4\uff0c\u4ee3\u7801\u7684\u667a\u80fd\u63d0\u793a\u90a3\u662f\u80fd\u591f\u5927\u5927\u7684\u63d0\u9ad8\u5de5\u4f5c\u6548\u7387\u7684\uff0c\u4e0d\u4ec5\u5982\u6b64\uff0c\u8fd8\u53ef\u4ee5\u51cf\u5c11\u51fa\u9519\u7684\u6982\u7387\uff0c\u5982\u679c\u4f60\u624b\u52a8\u5199\u51fa\u4e00\u4e2a\u5bf9\u8c61\u7684\u65b9\u6cd5\u540d\uff0c\u51fa\u9519\u7684\u6982\u7387\u53ef\u662f\u5f88\u9ad8\u7684\uff0c\u7279\u522b\u662f\u5bf9\u4e8e\u4e00\u4e9b\u82f1\u8bed\u4e0d\u597d\u7684\u540c\u5b66\u3002\u4f46\u662f\u95ee\u9898\u6765\u4e86\uff0c\u56e0\u4e3a `JavaScript` \u4e0d\u662f\u9759\u6001\u7c7b\u578b\uff0c\u800c\u662f\u52a8\u6001\u7c7b\u578b\uff0c\u6240\u6709\u7684\u53d8\u91cf\u90fd\u4f7f\u7528 `var, let, const` \u58f0\u660e\uff0c\u800c\u4e0d\u662f\u50cf `C` \u8bed\u8a00\u8fd9\u6837\u9759\u6001\u7c7b\u578b\u8bed\u8a00\uff0c\u4e0d\u540c\u7684\u7c7b\u578b\u4f7f\u7528\u4e0d\u540c\u7684\u5173\u952e\u5b57\uff0c\u5982 `int, char[]` \u7b49\u7b49\u3002\u6240\u4ee5\u8fd9\u5c31\u610f\u5473\u7740 `JavaScript` \u8fd9\u4e2a\u7c7b\u578b\u662f\u53ef\u53d8\u7684\uff0c\u4e00\u4f1a\u513f\u8fd9\u662f\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u4e00\u4f1a\u513f\u662f\u6570\u5b57\u7c7b\u578b\uff0c\u7f16\u8bd1\u5668\u6839\u672c\u5728\u7f16\u8bd1\u9636\u6bb5\u6839\u672c\u4e0d\u80fd\u786e\u5b9a\u4f60\u662f\u4ec0\u4e48\u7c7b\u578b\uff0c\u6240\u4ee5\u65e0\u6cd5\u7ed9\u51fa\u76f8\u5e94\u7c7b\u578b\u7684\u7279\u6709\u65b9\u6cd5\uff0c\u6bd4\u5982\u5b57\u7b26\u4e32\u7c7b\u578b\u7684 `toUpperCase()` \u65b9\u6cd5\uff0c\u5982\u4e0b `js` \u6587\u4ef6\\n\\n  <img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/2020052910402022-10-23-20-26-31.gif\\" />\\n\\n  \u5982\u4e0a\uff0c\u4e0a\u9762\u7684\u51fd\u6570\u7684\u529f\u80fd\u662f\u5c06\u4f20\u5165\u7684\u5355\u8bcd\u9996\u5b57\u6bcd\u5927\u5199\uff0c\u6211\u4eec\u53ea\u662f\u7b80\u5355\u7684\u8c03\u7528\u5b57\u7b26\u4e32\u5bf9\u8c61\u7684\u51fd\u6570 `toUpperCase()`\uff0c\u4f46\u662f\u6211\u4eec\u53d1\u73b0\u5f53\u6211\u4eec\u6253\u51fa `word.` \u65f6\u6ca1\u6709\u7ed9\u51fa\u4efb\u4f55\u7684\u63d0\u51fa\uff0c\u56e0\u4e3a `JavaScript` \u6839\u672c\u4e0d\u80fd\u786e\u5b9a\u4f60\u4f20\u5165\u7684\u662f\u4e0d\u662f\u5b57\u7b26\u4e32\uff0c\u6bd5\u7adf `JavaScript` \u662f\u5982\u6b64\u7684\u7075\u6d3b\uff0c\u4f7f\u7528\u65f6\u4f60\u53ef\u4ee5\u4f20\u5165\u4efb\u4f55\u7c7b\u578b\u7684\u53c2\u6570\u3002\u4f46\u662f\u5bf9\u4e8e `TypeScript` \u5c31\u4e0d\u4e00\u6837\u4e86\uff0c\u56e0\u4e3a\u5b83\u4f1a\u5bf9\u53c2\u6570\u7684\u7c7b\u578b\u505a\u51fa\u9650\u5236\uff0c\u5982\u4e0b\\n  \\n  <img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/2020052910462022-10-23-20-27-10.gif\\" />\\n  \\n  \u6211\u4eec\u9650\u5236\u4e86\u4f20\u5165\u7684\u53c2\u6570\u5fc5\u987b\u4e3a `string` \u7c7b\u578b\uff0c\u5728\u7f16\u8bd1\u7684\u9636\u6bb5\uff0c\u6211\u4eec\u80fd\u591f\u80af\u5b9a\u4f20\u5165\u7684\u4e00\u5b9a\u662f `string` \u7c7b\u578b\uff0c\u6240\u4ee5\u5728\u51fd\u6570\u7684\u65b9\u6cd5\u91cc\u9762\uff0c\u5f53\u6211\u4eec\u8f93\u5165 `word.` \u65f6\u4f1a\u7ed9\u51fa\u5b57\u7b26\u4e32\u5bf9\u8c61\u7684\u6240\u6709\u65b9\u6cd5\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u6211\u4eec\u8fd8\u89c4\u5b9a\u4e86\u51fd\u6570\u5fc5\u987b\u4f20\u5165\u4ec0\u4e48\u7c7b\u578b\uff0c\u8fd9\u6837\u7528\u6237\u5728\u4f7f\u7528\u65f6\u5c31\u4e0d\u80fd\u968f\u4fbf\u7684\u4f20\u5165\u53c2\u6570\uff0c\u6240\u6709\u7684\u4e00\u5207\u5fc5\u987b\u6309\u89c4\u5b9a\u7684\u6765\uff0c\u8fd9\u53c8\u65e0\u5f62\u7684\u51cf\u5c11\u4e86 `bug` \u7684\u4ea7\u751f\uff0c\u5e76\u4e14\u7528\u6237\u5728\u8c03\u7528\u8be5\u65b9\u6cd5\u65f6\uff0c\u8fd8\u4f1a\u7ed9\u51fa\u63d0\u51fa\uff0c\u9700\u8981\u4f20\u5165\u4ec0\u4e48\u53c2\u6570\u7c7b\u578b\uff0c\u5fc5\u8981\u7684\u65f6\u5019\u8fd8\u53ef\u4ee5\u7ed9\u51fa\u4f20\u5165\u53c2\u6570\u7684\u610f\u4e49\uff0c\u5982\u4e0b\\n  \\n  <img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/2020052910572022-10-23-20-27-45.gif\\" />\\n\\n`TypeScript` \u7684\u597d\u5904\u8fd8\u4e0d\u6b62\u8fd9\u4e00\u4e9b\uff0c\u4e0d\u8fc7\u5c31\u6211\u5217\u4e3e\u7684\u8fd9\u4e24\u4e2a\uff0c\u5c31\u6709\u8db3\u591f\u7684\u7406\u7531\u6765\u5b66 `TypeScript` \u4e86\uff0c`TypeScript` \u66f4\u591a\u7684\u597d\u5904\u5c31\u9700\u8981\u4f60\u5728\u4f7f\u7528\u7684\u8fc7\u7a0b\u4e2d\u6162\u6162\u7406\u4f1a\u4e86\u3002\\n\\n## \u5165\u95e8\u4f7f\u7528\\n\\n\u4e0b\u9762\u5c31\u5c06\u4ecb\u7ecd `TypeScript` \u7684\u5b89\u88c5\uff0c\u4ee5\u53ca\u5982\u4f55\u5c06 `TypeScript` \u8f6c\u5316\u4e3a `JavaScript` \u4ee3\u7801\uff0c\u6bd5\u7adf\u6d4f\u89c8\u5668\u548c `Node` \u53ea\u80fd\u8fd0\u884c `JavaScript` \u4ee3\u7801\u3002\\n\\n### \u5b89\u88c5TypeScript\\n\\n\u5728\u5b89\u88c5 `TypeScript` \u4e4b\u524d\uff0c\u786e\u4fdd\u4f60\u7684\u8ba1\u7b97\u673a\u6309\u7167\u597d\u4e86 `Node`\uff0c\u5982\u679c\u6ca1\u6709\u5b89\u88c5\uff0c\u53ef\u4ee5\u53bb\u7f51\u4e0a\u641c\u5982\u4f55\u5b89\u88c5\uff0c\u6559\u7a0b\u5f88\u591a\u3002\u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\uff0c\u4f7f\u7528 `npm` \u4e0b\u8f7d `typescript`\\n\\n```shell\\nnpm install -g typescript\\n```\\n\\n\u67e5\u770b\u7248\u672c(\u4e3b\u8981\u662f\u9a8c\u8bc1\u662f\u5426\u6210\u529f\u5b89\u88c5)\\n\\n```shell\\ntsc -V\\n\\nVersion 3.8.3\\n```\\n\\n### \u7f16\u5199TypeScript\u7a0b\u5e8f\\n\\n\u65b0\u5efa `greeter.ts`\\n\\n```ts\\nfunction greeter(person: string) {\\n    return \\"Hello \\" + person;\\n}\\n\\nlet user = \'XT\';\\nconsole.log(greeter(user));\\n```\\n\\n\u5728\u547d\u4ee4\u884c\u4e2d\u4f7f\u7528 `tsc` \u547d\u4ee4\u5c06\u5b83\u7f16\u8bd1\u4e3a `js`\\n\\n```shell\\ntsc greeter.ts\\n```\\n\\n\u8fd9\u65f6\u4f1a\u5728\u8be5\u76ee\u5f55\u4e0b\u751f\u6210 `greeter.js`\uff0c`greeter.js` \u7684\u5185\u5bb9\u4e3a\\n\\n```js\\nfunction greeter(person) {\\n    return \\"Hello \\" + person;\\n}\\nvar user = \'XT\';\\nconsole.log(greeter(user));\\n```\\n\\n\u63a5\u7740\u6211\u4eec\u4f7f\u7528 `node` \u8fd0\u884c\u8be5 `js` \u6587\u4ef6\\n\\n```shell\\nnode greeter.js\\n```\\n\\n\u8f93\u51fa\u4e3a\\n\\n```\\nHello XT\\n```\\n\\n\u6240\u4ee5\u6211\u4eec\u4e00\u822c\u7684\u6d41\u7a0b\u4e3a\uff0c\u7f16\u5199 `ts` \u6587\u4ef6\uff0c\u7136\u540e\u4f7f\u7528 `tsc` \u7f16\u8bd1\u4e3a `js` \u6587\u4ef6\uff0c\u7136\u540e\u4f7f\u7528 `node` \u8fd0\u884c `js` \u6587\u4ef6\u67e5\u770b\u7ed3\u679c\uff0c\u90a3\u6709\u6ca1\u6709\u4ec0\u4e48\u5de5\u5177\u5e2e\u6211\u4eec\u505a\u8fd9\u4ef6\u4e8b\u60c5\uff0c\u4e00\u4e2a\u547d\u4ee4\u76f4\u63a5\u5230\u4f4d\u3002\u8fd9\u91cc\u6211\u4eec\u63a8\u8350\u4f7f\u7528 `ts-node`\uff0c\u8be5\u547d\u4ee4\u53ef\u4ee5\u4e00\u6b65\u5230\u4f4d\uff0c\u5c31\u76f8\u5f53\u4e8e\u662f\u76f4\u63a5\u8fd0\u884c `ts` \u6587\u4ef6\uff0c\u9996\u5148\u4e0b\u8f7d `ts-node`\\n\\n```shell\\nnpm install -g ts-node\\n```\\n\\n\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 `ts-node greeter.ts` \u67e5\u770b\u7ed3\u679c\u3002\\n\\n## \u57fa\u672c\u7c7b\u578b\\n\\n`TypeScript` \u4e0e `JavaScript` \u6700\u5927\u7684\u4e0d\u540c\u5c31\u662f `TypeScript` \u662f\u4e00\u4e2a\u6709\u7c7b\u578b\u7684\u8bed\u8a00\uff0c\u6211\u4eec\u4e00\u822c\u4f7f\u7528\u4e0b\u9762\u7684\u65b9\u5f0f\u58f0\u660e\u53d8\u91cf\\n\\n```ts\\nlet \u53d8\u91cf\u540d: \u7c7b\u578b = \u503c;\\n```\\n\\n\u90a3\u4e48 `TypeScript` \u6709\u54ea\u4e9b\u7c7b\u578b\u5462? \u4e0b\u9762\u5c31\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0b\u3002\\n\\n### boolean\\n\\n```ts\\n// \u503c\u53ea\u80fd\u4e3atrue\u6216\u8005false\\nlet isDone: boolean = false;\\n```\\n### number\\n\\n```ts\\nlet decNumber: number = 20; // \u5341\u8fdb\u5236\\nlet hexNumber: number = 0x14; // \u5341\u516d\u8fdb\u5236 20\\nlet binNumber: number = 0b10100; // \u4e8c\u8fdb\u5236 20\\nlet octNumber: number = 0o24; //\u516b\u8fdb\u5236 20\\n```\\n\\n### string\\n\\n```ts\\nlet name: string = \\"bob\\"; // \u5355\u5f15\u53f7\uff0c\u53cc\u5f15\u53f7\u90fd\u53ef\u4ee5\\nlet greetStr: string = `Hello ${name}`; // \u652f\u6301\u6a21\u677f\u5b57\u7b26\u4e32\\n```\\n\\n### \u6570\u7ec4(Array)\\n\\n```ts\\nlet list: number[] = [1, 2, 3]; // \u6570\u5b57\u6570\u7ec4\\nlet list: Array<number> = [1, 2, 3]; // \u6570\u7ec4\u6cdb\u578b\\n```\\n\\n### \u5143\u7956(Turple)\\n\\n\u89c4\u5b9a\u4e86\u6570\u7ec4\u7684\u957f\u5ea6\uff0c\u4ee5\u53ca\u6bcf\u4e2a\u5143\u7d20\u7684\u7c7b\u578b\\n\\n```ts\\nlet x: [string, number]; // x\u6709\u4e24\u4e2a\u5143\u7d20\uff0c\u7b2c\u4e00\u4e2a\u5143\u7d20\u4e3a\u5b57\u7b26\u4e32\uff0c\u7b2c\u4e8c\u4e2a\u5143\u7d20\u4e3a\u6570\u5b57\\nx = [\\"hello\\", 1]\\n```\\n\\n### enum\\n\\n\u679a\u4e3e\u7c7b\u578b\\n\\n```ts\\nenum Color {\\n    Red,\\n    Green,\\n    Blue\\n}\\n\\nlet colorName: Color = Color.Blue;\\n```\\n\\n### any\\n\\n\u4efb\u610f\u7c7b\u578b\uff0c\u4e0e\u5199 `JavaScript` \u4e00\u6837\\n\\n```ts\\n// \u4e0d\u6e05\u695a\u662f\u4ec0\u4e48\u7c7b\u578b\uff0c\u6216\u8005\u4e0d\u5e0c\u671b\u505a\u8bed\u6cd5\u68c0\u67e5\uff0c\u5c31\u76f8\u5f53\u4e8e\u5199JavaScript\\nlet notSure: any = 4;\\nnotSure = false;\\n\\nlet list: any[] = [1, true, \\"a\\"]\\n```\\n\\n### void\\n\\n`void` \u4e00\u822c\u7528\u4e8e\u8868\u793a\u51fd\u6570\u4e0d\u8fd4\u56de\u4efb\u4f55\u503c\uff0c\u5c06\u5b83\u58f0\u660e\u4e3a\u4e00\u4e2a\u53d8\u91cf\u6ca1\u6709\u610f\u4e49\\n\\n```ts\\n// \u4e0d\u8fd4\u56de\u4efb\u4f55\u503c\\nfunction printUser(user): void {\\n    console.log(user)\\n}\\n\\n// \u58f0\u660e\u4e00\u4e2avoid\u7c7b\u578b\u53d8\u91cf\u662f\u6ca1\u6709\u610f\u4e49\u7684\\nlet x: void = null; // \u53ea\u80fd\u88ab\u8d4b\u503c\u4e3anull\u548cundefined\\n```\\n\\n### undefined, null\\n\\n```ts\\nlet u: undefined = undefined; // \u901a\u5e38\u58f0\u660e\u53d8\u91cf\u610f\u4e49\u4e0d\u5927\\nlet n: null = null;\\n```\\n\\n### never\\n\\n\u51fd\u6570\u629b\u51fa\u5f02\u5e38\u6216\u8005\u6b7b\u5faa\u73af\u662f\u53ef\u4ee5\u4f7f\u7528 `nerver` \u4f5c\u4e3a\u8fd4\u56de\u503c\\n\\n```ts\\n// \u8868\u793a\u4e0d\u5b58\u5728\u7684\u6570\u636e\u7c7b\u578b \u51fd\u6570\u629b\u51fa\u5f02\u5e38\u7684\u65f6\u5019\u5c31\u53ef\u4ee5\u7528never \\n// never\u662f\u4efb\u4f55\u7c7b\u578b\u7684\u5b50\u7c7b\u578b\uff0c\u53ef\u4ee5\u8d4b\u503c\u7ed9\u4efb\u4f55\u7684\u7c7b\u578b\\nfunction error(message: string): never {\\n    throw new Error(message)\\n}\\n\\nfunction fail() {\\n    return error(\\"something error\\");\\n}\\n\\n// \u65e0\u9650\u5faa\u73af\uff0c\u51fd\u6570\u4e0d\u80fd\u7ed3\u675f\uff0c\u4e5f\u53ef\u4ee5\u8fd4\u56denever\\nfunction inifiniteLoop(): never {\\n    while (true) {\\n\\n    }\\n}\\n```\\n\\n### object\\n\\n```ts\\n// \u8868\u793a\u975e\u539f\u59cb\u7c7b\u578b\\ndeclare function create(o: object | null): void;\\n\\ncreate({prop: 0});\\n```\\n\\n> \u6ce8\u610f\uff1a\u5f53\u6ca1\u6709\u5c06\u53d8\u91cf\u58f0\u660e\u4e3a\u67d0\u4e2a\u57fa\u672c\u7c7b\u578b\u65f6\uff0c`TypeScript` \u4f1a\u8fdb\u884c\u7c7b\u578b\u63a8\u65ad\uff0c\u5982\\n>\\n> ```typescript\\n> let str = \'hello\'; // str \u4f1a\u88ab\u63a8\u65ad\u4e3a string \u7c7b\u578b\\n> ```\\n>\\n> \u5982\u4e0a\uff0c\u53d8\u91cf `str` \u4f1a\u88ab\u63a8\u65ad\u4e3a `string` \u7c7b\u578b\uff0c\u8fd9\u65f6 `str` \u4e0d\u80fd\u88ab\u8d4b\u503c\u4e3a\u522b\u7684\u7c7b\u578b\\n> <img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/202005291314402022-10-23-20-29-18.png\\" />\\n>\\n> \u5982\u679c\u53d8\u91cf\u5728\u58f0\u660e\u65f6\u5e76\u6ca1\u6709\u88ab\u8d4b\u503c\uff0c\u90a3\u4e48\u5b83\u7684\u7c7b\u578b\u4f1a\u88ab\u63a8\u65ad\u4e3a `any`\uff0c\u8fd9\u65f6\u5b83\u53ef\u4ee5\u88ab\u8d4b\u4e88\u4efb\u4f55\u7c7b\u578b\u7684\u503c\\n>\\n> ```typescript\\n> let str; // str \u88ab\u63a8\u65ad\u4e3a any\uff0c\u53ef\u4ee5\u4e3a\u8d4b\u4e88\u4efb\u4f55\u7c7b\u578b\u7684\u503c\\n> str = \'hello\';\\n> str = 2;\\n> ```\\n>\\n> <img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/202005291319262022-10-23-20-30-04.png\\" />\\n>\\n\\n## \u9ad8\u7ea7\u7c7b\u578b\\n\\n### \u679a\u4e3e\u7c7b\u578b\\n\\n\u6211\u4eec\u4f7f\u7528 `enum` \u6765\u5b9a\u4e49\u679a\u4e3e\u7c7b\u578b\uff0c\u5982\\n\\n```typescript\\nenum Week {\\n    Mon,\\n    Tue,\\n    Wen,\\n    Thu,\\n    Fri,\\n    Sat,\\n    Sun\\n}\\n```\\n\\n\u679a\u4e3e\u7c7b\u578b\u4f1a\u88ab\u7f16\u8bd1\u4e3a\u4ece\u96f6\u9012\u589e\u7684\u6570\u5b57\\n\\n```js\\nvar Week;\\n(function (Week) {\\n    Week[Week[\\"Mon\\"] = 0] = \\"Mon\\";\\n    Week[Week[\\"Tue\\"] = 1] = \\"Tue\\";\\n    Week[Week[\\"Wen\\"] = 2] = \\"Wen\\";\\n    Week[Week[\\"Thu\\"] = 3] = \\"Thu\\";\\n    Week[Week[\\"Fri\\"] = 4] = \\"Fri\\";\\n    Week[Week[\\"Sat\\"] = 5] = \\"Sat\\";\\n    Week[Week[\\"Sun\\"] = 6] = \\"Sun\\";\\n})(Week || (Week = {}));\\n```\\n\\n\u901a\u8fc7\u7f16\u8bd1\u540e\u7684\u4ee3\u7801\u53ef\u4ee5\u770b\u51fa\uff0c\u679a\u4e3e\u540d\u548c\u679a\u4e3e\u503c\u53ef\u4ee5\u4e92\u76f8\u5f15\u7528\\n\\n```ts\\nconsole.log(Week[0] === \'Mon\'); // true\\nconsole.log(Week[1] === \'Tue\'); // true\\nconsole.log(Week[2] === \'Wen\'); // true\\nconsole.log(Week[3] === \'Thu\'); // true\\n\\nconsole.log(Week[\'Fri\'] === 4); // true\\nconsole.log(Week[\'Sat\'] === 5); // true\\nconsole.log(Week[\'Sun\'] === 6); // true\\n```\\n\\n\u6211\u4eec\u8fd8\u53ef\u4ee5\u4e3a\u679a\u4e3e\u540d\u624b\u52a8\u8d4b\u503c\uff0c\u5982\\n\\n```ts\\nenum Week {\\n    Mon = 1,\\n    Tue,\\n    Wen,\\n    Thu,\\n    Fri,\\n    Sat,\\n    Sun\\n}\\n```\\n\\n\u6211\u4eec\u4e3a `Mon` \u624b\u52a8\u8d4b\u503c\u4e3a `1`\uff0c\u672a\u624b\u52a8\u8d4b\u503c\u7684\u9879\u4f1a\u63a5\u7740\u4e0a\u4e00\u9879\u9012\u589e\uff0c\u6240\u4ee5 `Tue` \u7684\u503c\u4e3a `2`\uff0c`Wen` \u7684\u503c\u4e3a `3`\uff0c\u4ee5\u6b64\u9012\u589e\u3002\u5982\u679c\u540e\u9762\u9012\u589e\u7684\u6570\u5b57\u4e0e\u524d\u9762\u5b9a\u4e49\u6570\u5b57\u91cd\u590d\u4e86\uff0c\u8fd9\u65f6\u662f\u4e0d\u4f1a\u62a5\u9519\u7684\uff0c\u800c\u662f\u4f1a\u8986\u76d6\u4e4b\u524d\u7684\u9879\\n\\n```ts\\nenum Week {\\n    Mon = 3,\\n    Tue = 1,\\n    Wen,\\n    Thu,\\n    Fri,\\n    Sat,\\n    Sun\\n}\\n```\\n\\n\u53ef\u89c1 `Thu` \u7684\u503c\u4e5f\u662f `3`\uff0c\u8fd9\u4e2a\u65f6\u5019\u5b83\u7684\u503c\u4e0e `Mon` \u91cd\u590d\u4e86\uff0c\u4f46\u662f\u6b64\u65f6 `Week[3]` \u7684\u503c\u662f `Thu` \u800c\u4e0d\u662f `Mon`\uff0c\u56e0\u4e3a\u540e\u9762\u7684 `Thu` \u5c06\u524d\u9762\u7684 `Mon` \u8986\u76d6\u4e86\\n\\n```js\\nvar Week;\\n(function (Week) {\\n    Week[Week[\\"Mon\\"] = 3] = \\"Mon\\";\\n    Week[Week[\\"Tue\\"] = 1] = \\"Tue\\";\\n    Week[Week[\\"Wen\\"] = 2] = \\"Wen\\";\\n    Week[Week[\\"Thu\\"] = 3] = \\"Thu\\"; // Week[3] \u88ab\u91cd\u65b0\u8d4b\u503c\u4e3a\u4e86\\"Thu\\"\\n    Week[Week[\\"Fri\\"] = 4] = \\"Fri\\";\\n    Week[Week[\\"Sat\\"] = 5] = \\"Sat\\";\\n    Week[Week[\\"Sun\\"] = 6] = \\"Sun\\";\\n})(Week || (Week = {}));\\n```\\n\\n### \u51fd\u6570\u7c7b\u578b\\n\\n\u5bf9\u4e8e\u51fd\u6570\u6765\u8bf4\uff0c\u6211\u4eec\u4f7f\u7528\u51fd\u6570\u7c7b\u578b\u6765\u89c4\u8303\u5b83\uff0c\u4e00\u4e2a\u51fd\u6570\u6709\u8f93\u5165\u548c\u8f93\u51fa\uff0c\u6240\u4ee5\u6211\u4eec\u4f7f\u7528\u5982\u4e0b\u7684\u5f62\u5f0f\u6765\u8868\u793a\u51fd\u6570\u7c7b\u578b\\n\\n```ts\\n(x: number, y:number) => number\\n```\\n\\n\u4e0a\u9762\u5c31\u89c4\u8303\u8fd9\u4e2a\u51fd\u6570\u7c7b\u578b\u7684\u8f93\u5165\u4e3a\u4e24\u4e2a `number` \u7c7b\u578b\u7684\u53c2\u6570\uff0c\u8f93\u51fa\u4e3a `number` \u7c7b\u578b\u7684\u53c2\u6570\uff0c\u5982\\n\\n```ts\\nlet add:(x: number, y:number) => number = (x, y) => {\\n    return x + y;\\n}\\n```\\n\\n\u4e0a\u9762\u7684 `add` \u51fd\u6570\u662f\u4e00\u4e2a `(x: number, y:number) => number` \u7c7b\u578b\u7684\u51fd\u6570\uff0c\u5b83\u5fc5\u987b\u63a5\u53d7\u4e24\u4e2a `number` \u7c7b\u578b\u7684\u53c2\u6570\uff0c\u8fd4\u56de\u4e00\u4e2a `number` \u7c7b\u578b\u7684\u53c2\u6570\uff0c\u5982\u679c `add` \u51fd\u6570\u4e0d\u6ee1\u8db3\u6b64\u89c4\u5219\uff0c\u90a3\u4e48\u5c31\u4f1a\u62a5\u9519\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/202005291350412022-10-23-20-31-09.png\\" />\\n\\n\u5728\u4e0a\u9762 `add` \u8fd4\u56de\u7684\u662f\u4e00\u4e2a `string` \u7c7b\u578b\u7684\u503c\uff0c\u800c\u4e0d\u662f `number` \u7c7b\u578b\uff0c\u8fd9\u65f6\u7f16\u8bd1\u5668\u5c31\u4f1a\u62a5\u9519\u3002\\n\\n\u73b0\u5728\u8003\u8651\u6709\u4e00\u4e2a\u51cf\u6cd5\u51fd\u6570\uff0c\u5b83\u4e5f\u6ee1\u8db3\u4e0a\u9762\u7684\u51fd\u6570\u7c7b\u578b\uff0c\u6240\u4ee5\u5b83\u53ef\u4ee5\u88ab\u58f0\u660e\u5982\u4e0b\\n\\n```ts\\nlet substract: (x: number, y: number) => number = (x, y) {\\n    return x - y;\\n}\\n```\\n\\n\u5982\u679c\u8fd8\u6709\u5f88\u591a\u7684\u51fd\u6570\u4e5f\u6ee1\u8db3\u4e0a\u9762\u7684\u51fd\u6570\u7c7b\u578b\u7684\u8bdd\uff0c\u90a3\u662f\u4e0d\u662f\u6bcf\u6b21\u90fd\u8981\u5199\u4e00\u822c\u51fd\u6570\u7c7b\u578b\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4e0d\u53ef\u4ee5\u4e3a\u8fd9\u4e2a\u51fd\u6570\u7c7b\u578b\u8d77\u4e00\u4e2a\u522b\u540d\uff0c\u8fd9\u6837\u65b9\u4fbf\u5f15\u7528\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 `type` \u8d77\u522b\u540d\uff0c\u5982\u4e0b\\n\\n```ts\\ntype compute = (x: number, y: number) => number;\\n\\nlet substract: compute = (x, y) {\\n    return x - y;\\n}\\n\\nlet add: compute = (x, y) {\\n    return x + y;\\n}\\n```\\n\\n\u5982\u679c\u8fd8\u6709\u522b\u7684\u51fd\u6570\u65f6\u8fd9\u4e2a\u51fd\u6570\u7c7b\u578b\u7684\u8bdd\uff0c\u6211\u4eec\u4f7f\u7528\u8d77\u7684\u522b\u540d `compute` \u8fdb\u884c\u7533\u660e\u5c31\u53ef\u4ee5\u4e86\u3002\\n\\n\u5982\u679c\u6211\u4eec\u4f7f\u7528\u533f\u540d\u51fd\u6570\u7684\u5f62\u5f0f\u58f0\u660e\u4e00\u4e2a\u51fd\u6570\uff0c\u90a3\u4e48\u5b83\u4f1a\u8fdb\u884c\u7c7b\u578b\u63a8\u65ad\uff0c\u5982\\n\\n```ts\\nfunction add(x: number, y: number): number {\\n    return x + y;\\n}\\n```\\n\\n\u90a3\u4e48 `add` \u4f1a\u88ab\u81ea\u52a8\u63a8\u65ad\u4e3a `(x: number, y:number) => number`\uff0c\u5982\u679c\u53c2\u6570\u6ca1\u6709\u6ce8\u660e\u7c7b\u578b\uff0c\u90a3\u4e48\u4f1a\u88ab\u63a8\u65ad\u4e3a `any`\u3002\\n\\n### \u8054\u5408\u7c7b\u578b\\n\\n\u8054\u5408\u7c7b\u578b\u8868\u793a\u53d6\u503c\u53ef\u4ee5\u4e3a\u591a\u79cd\u7c7b\u578b\u7684\u4e00\u79cd\uff0c\u5982\u4e0b\\n\\n```ts\\nlet score: string | number; // score \u53ef\u4ee5\u4e3a\u6570\u5b57\uff0c\u4e5f\u53ef\u4ee5\u4e3a\u5b57\u7b26\u4e32\\n\\nscore = 97;\\nscore = \\"97\\"; // \u4e0d\u4f1a\u62a5\u9519\\n```\\n\\n\u5f53\u6211\u4eec\u4e3a\u8054\u5408\u7c7b\u578b\u8fdb\u884c\u8d4b\u503c\u65f6\uff0c\u4f1a\u6839\u636e\u7c7b\u578b\u63a8\u65ad\u63a8\u65ad\u51fa\u4e00\u4e2a\u7c7b\u578b\uff0c\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u5c31\u53ef\u4ee5\u8bbf\u95ee\u8be5\u7c7b\u578b\u6240\u62e5\u6709\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u5982\\n\\n```ts\\nlet score: string | number;\\nscore = \\"97\\"; // \u88ab\u63a8\u65ad\u4e3a string \u7c7b\u578b\\nscore.length; // \u53ef\u4ee5\u8bbf\u95ee string \u7c7b\u578b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\\n```\\n\\n\u5f53 `TypeScript` \u4e0d\u80fd\u786e\u5b9a\u8054\u5408\u7c7b\u578b\u7684\u5177\u4f53\u7c7b\u578b\u65f6\uff0c\u90a3\u4e48\u53ea\u80fd\u8bbf\u95ee\u8054\u5408\u7c7b\u578b\u4e2d\u8fd9\u4e9b\u7c7b\u578b\u7684\u5171\u6709\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u5982\\n\\n```ts\\nfunction getLength(something: string|number): number {\\n    return something.length;\\n}\\n```\\n\\n\u56e0\u4e3a `something` \u4e3a `string` \u6216\u8005 `number` \u7c7b\u578b\uff0c\u6240\u4ee5\u5b83\u53ea\u80fd\u8bbf\u95ee `string` \u548c `number` \u7c7b\u578b\u5171\u6709\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u4f46\u662f\u56e0\u4e3a `number` \u7c7b\u578b\u6ca1\u6709 `length` \u5c5e\u6027\uff0c\u6240\u4ee5\u4e0a\u9762\u4f1a\u62a5\u9519\uff0c\u5982\u4e0b\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/202005291437212022-10-23-20-32-16.png\\" />\\n\\n## \u63a5\u53e3\\n\\n\u63a5\u53e3\u53ef\u4ee5\u770b\u505a\u662f\u5bf9\u8c61\u7684\u7c7b\u578b\uff0c\u63a5\u53e3\u89c4\u5b9a\u4e86\u5bf9\u8c61\u7684\u7ed3\u6784\uff0c\u6211\u4eec\u4f7f\u7528 `interface` \u6765\u5b9a\u4e49\u4e00\u4e2a\u63a5\u53e3\\n\\n```ts\\ninterface Person {\\n    name: string;\\n    age: number;\\n}\\n```\\n\\n\u4e0a\u9762\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u53eb\u505a `Person` \u7684\u63a5\u53e3\uff0c\u5982\u679c\u67d0\u4e2a\u5bf9\u8c61\u65f6\u8fd9\u4e2a\u63a5\u53e3\u7c7b\u578b\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5bf9\u8c61\u5c31\u5fc5\u987b\u542b\u6709 `name` \u548c `age` \u5c5e\u6027\uff0c\u5e76\u4e14 `name` \u5c5e\u6027\u7684\u503c\u4e3a `string`\uff0c`age` \u5c5e\u6027\u7684\u503c\u4e3a `number`\uff0c\u5982\u4e0b\\n\\n```ts\\nlet person: Person = {\\n    name: \'bob\',\\n    age: 13\\n}\\n```\\n\\n\u53ef\u4ee5\u8bf4\u63a5\u53e3\u89c4\u5b9a\u4e86\u5bf9\u8c61\u7684\u7ed3\u6784\uff0c\u5b9a\u4e49\u4e86\u5bf9\u8c61\u6240\u5fc5\u987b\u62e5\u6709\u7684\u5c5e\u6027\u540d\uff0c\u4e0d\u80fd\u591a\uff0c\u4e5f\u4e0d\u80fd\u5c11\uff0c\u5426\u5219\u4f1a\u62a5\u9519\uff0c\u5982\u4e0b\\n\\n```ts\\nlet person: Person = {\\n    name: \'bob\',\\n    age: 13,\\n    gender: \'male\'\\n}\\n```\\n\\n`person` \u4e2d\u542b\u6709\u63a5\u53e3 `Person` \u4e0d\u66fe\u5b9a\u4e49\u8fc7\u7684\u5c5e\u6027 `gender`\uff0c\u8fd9\u65f6\u5c31\u4f1a\u62a5\u9519\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/202005291448132022-10-23-20-33-03.png\\" />\\n\\n### \u53ef\u9009\u5c5e\u6027\\n\\n\u6709\u65f6\u5019\u6211\u4eec\u5e76\u4e0d\u9700\u8981\u5bf9\u8c61\u5b8c\u5168\u5339\u914d\u4e00\u4e2a\u5f62\u72b6\uff0c\u8fd9\u4e2a\u65f6\u5019\u53ef\u4ee5\u5b9a\u4e49\u53ef\u9009\u5c5e\u6027\uff0c\u5b9a\u4e49\u7684\u89c4\u5219\u5982\u4e0b\\n\\n```ts\\ninterface Person {\\n    name: string;\\n    age: number;\\n    gender?: string;\\n}\\n```\\n\\n\u5728\u4e0a\u9762\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u53ef\u9009\u5c5e\u6027 `gender`\uff0c\u8fd9\u4e2a\u65f6\u5019\u7c7b\u578b\u4e3a `Person` \u7684\u5bf9\u8c61\uff0c\u53ef\u4ee5\u6709 `gender` \u5c5e\u6027\uff0c\u4e5f\u53ef\u4ee5\u6ca1\u6709\\n\\n```ts\\nlet person: Person = {\\n    name: \'bob\',\\n    age: 13,\\n    gender: \'male\'\\n}\\n```\\n\\n\u6216\u8005\\n\\n```ts\\nlet person: Person = {\\n    name: \'bob\',\\n    age: 13\\n}\\n```\\n\\n\u90fd\u662f\u53ef\u4ee5\u7684\u3002\\n\\n### \u53ea\u8bfb\u5c5e\u6027\\n\\n\u6709\u65f6\u5019\u6211\u4eec\u5e0c\u671b\u5bf9\u8c61\u7684\u67d0\u4e9b\u5c5e\u6027\u5728\u5b9a\u4e49\u65f6\u88ab\u8d4b\u503c\uff0c\u5e76\u4e14\u4ee5\u540e\u4e0d\u80fd\u88ab\u66f4\u6539\uff0c\u90a3\u4e48\u53ef\u4ee5\u5728\u8fd9\u4e2a\u5c5e\u6027\u5b9a\u4e49\u4e3a\u53ea\u8bfb\u5c5e\u6027\u3002\u6211\u4eec\u4f7f\u7528 `readonly` \u5b9a\u4e49\u67d0\u4e2a\u5c5e\u6027\u4e3a\u53ea\u8bfb\u5c5e\u6027\\n\\n```ts\\ninterface Person {\\n    readonly id: number;\\n    name: string;\\n    age: number;\\n}\\n```\\n\\n\u5f53\u5bf9\u8c61\u7684\u7c7b\u578b\u4e3a `Person` \u65f6\uff0c\u5728\u521b\u5efa\u65f6\u8981\u4e3a `id` \u8d4b\u503c(\u521d\u59cb\u5316)\uff0c\u5e76\u4e14\u8fd9\u65f6 `id` \u662f\u53ea\u8bfb\u7684\uff0c\u4e0d\u80fd\u88ab\u6539\u53d8\\n\\n```ts\\nlet tom: Person = {\\n    id: 1,\\n    name: \'Tom\',\\n    age: 3\\n}\\n\\ntom.id = 2;\\n```\\n\\n\u4e0a\u9762\u6211\u4eec\u5c1d\u8bd5\u4fee\u6539 `tom` \u5bf9\u8c61\u7684 `id`\uff0c\u4f46\u662f\u56e0\u4e3a `id` \u662f\u53ea\u8bfb\u7684\uff0c\u4e0d\u80fd\u88ab\u4fee\u6539\uff0c\u6240\u4ee5\u4e0a\u9762\u7684\u7a0b\u5e8f\u4f1a\u62a5\u9519\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/202005291539012022-10-23-20-33-59.png\\" />\\n\\n### \u4efb\u610f\u5c5e\u6027\\n\\n\u5982\u679c\u6211\u4eec\u5e0c\u671b\u67d0\u4e2a\u63a5\u53e3\u53ef\u4ee5\u6709\u4efb\u610f\u7684\u5c5e\u6027\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u65b9\u5f0f\\n\\n```ts\\ninterface Person {\\n    name: string;\\n    age?: number;\\n    [propName: string]: any;\\n}\\n```\\n\\n\u6211\u4eec\u5b9a\u4e49\u4e86 `Person` \u63a5\u53e3\u53ef\u4ee5\u6709\u4efb\u610f\u7684\u5c5e\u6027\uff0c\u8be5\u5c5e\u6027\u7684\u952e\u503c\u4e3a `string` \u7c7b\u578b\uff0c\u503c\u4e3a `any` \u7c7b\u578b\u3002\u4e00\u65e6\u5b9a\u4e49\u4e86\u4efb\u610f\u5c5e\u6027\uff0c\u90a3\u4e48\u786e\u5b9a\u5c5e\u6027\u548c\u53ef\u9009\u5c5e\u6027\u7684\u7c7b\u578b\u5fc5\u987b\u4e3a\u4efb\u610f\u5c5e\u6027\u6240\u89c4\u5b9a\u7684\u7c7b\u578b\u7684\u5b50\u96c6\u3002\u6bd4\u5982\u4fee\u6539\u4e0a\u9762\u7684\u63a5\u53e3\\n\\n```ts\\ninterface Person {\\n    name: string;\\n    age?: number;\\n    [propName: string]: string;\\n}\\n```\\n\\n\u56e0\u4e3a `age` \u7684\u503c\u7c7b\u578b\u4e3a `number`\uff0c\u800c\u4efb\u610f\u5c5e\u6027\u89c4\u5b9a\u7684\u503c\u7c7b\u578b\u4e3a `string`\uff0c\u6240\u4ee5\u4f1a\u62a5\u9519\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/202005291559452022-10-23-20-34-50.png\\" />\\n\\n## \u7c7b\\n\\n\u7c7b\u53ef\u4ee5\u770b\u505a\u662f\u521b\u5efa\u5bf9\u8c61\u7684\u6a21\u677f\uff0c\u6211\u4eec\u4f7f\u7528 `class` \u6765\u5b9a\u4e49\u4e00\u4e2a\u7c7b\uff0c\u4e00\u4e2a\u7c7b\u4e2d\u6709\u5c5e\u6027\u548c\u65b9\u6cd5\\n\\n```ts\\nclass Person {\\n    public name: string;\\n    public age: number;\\n\\n    constructor(name:string, age: number) {\\n        this.name = name;\\n        this.age = age;\\n    }\\n}\\n\\nlet tom = new Person(\\"Tom\\", 3);\\n```\\n\\n\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u7c7b\u6765\u5927\u91cf\u7684\u521b\u5efa\u5bf9\u8c61\u3002\u5728\u7c7b\u4e2d\u6709\u4e00\u4e2a\u65b9\u6cd5 `constructor()`\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u53eb\u505a\u6784\u9020\u51fd\u6570\uff0c\u5b83\u7684\u529f\u80fd\u662f\u7528\u6765\u521d\u59cb\u5316\u5c5e\u6027\u7684\u3002\\n\\n### \u7c7b\u7684\u7ee7\u627f\\n\\n\u6211\u4eec\u4f7f\u7528 `extends` \u5173\u952e\u5b57\u6765\u5b9e\u73b0\u7ee7\u627f\\n\\n```ts\\nclass Person {\\n    public name: string;\\n    public age: number;\\n\\n    constructor(name:string, age: number) {\\n        this.name = name;\\n        this.age = age;\\n    }\\n}\\n\\nclass Student extends Person {\\n    public score: number;\\n    constructor(name: string, age: number, score: number) {\\n        super(name, age);\\n        this.score = score;\\n    }\\n}\\n```\\n\\n\u901a\u8fc7\u7ee7\u627f\uff0c\u6211\u4eec\u590d\u7528\u7236\u7c7b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3002\u5728\u4e0a\u9762\u6211\u4eec\u4f7f\u7528\u4e86 `super`\uff0c\u8be5\u65b9\u6cd5\u7684\u4f5c\u7528\u662f\u8c03\u7528\u7236\u7c7b\u7684\u6784\u9020\u51fd\u6570\u521d\u59cb\u5316\u7236\u7c7b\u7684\u5c5e\u6027\u3002\\n\\n### \u8bbf\u95ee\u6743\u9650\\n\\n\u8bbf\u95ee\u6743\u9650\u6709\u4e09\u79cd\uff0c\u5206\u522b\u4e3a `public`\uff0c`private`\uff0c`protected` \u4e09\u79cd\uff0c\u5728\u4e0a\u9762\u6211\u4eec\u4f7f\u7528\u7684\u90fd\u662f `public` \u8bbf\u95ee\u6743\u9650\uff0c\u4f7f\u7528\u8be5\u6743\u9650\uff0c\u53ef\u4ee5\u5728\u4efb\u4f55\u5730\u65b9\u88ab\u8bbf\u95ee\u5230\uff0c\u4f8b\u5982\\n\\n```ts\\nclass Person {\\n    public name: string;\\n    public age: number;\\n\\n    constructor(name:string, age: number) {\\n        this.name = name;\\n        this.age = age;\\n    }\\n}\\n\\nlet tom = new Person(\\"Tom\\", 3);\\n// \u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\\nconsole.log(tom.name, tom.age); // Tom 3\\n```\\n\\n\u5982\u679c\u4f7f\u7528 `private`\uff0c\u90a3\u4e48\u8be5\u5c5e\u6027\u53ea\u80fd\u5728\u7c7b\u5185\u90e8\u624d\u80fd\u88ab\u8bbf\u95ee\uff0c\u5728\u7c7b\u7684\u5916\u90e8\u4e0d\u80fd\u88ab\u8bbf\u95ee\uff0c\u5982\\n\\n```ts\\nclass Person {\\n    private name: string;\\n    public age: number;\\n\\n    constructor(name:string, age: number) {\\n        this.name = name;\\n        this.age = age;\\n    }\\n}\\n\\nlet tom = new Person(\\"Tom\\", 3);\\n\\nconsole.log(tom.name, tom.age);\\n```\\n\\n\u6211\u4eec\u5c06 `name` \u7684\u8bbf\u95ee\u6743\u9650\u4fee\u6539\u4e3a\u4e86 `private`\uff0c\u8fd9\u4e2a\u65f6\u5019\u4e0d\u80fd\u518d\u7c7b\u5916\u88ab\u76f4\u63a5\u8bbf\u95ee\uff0c\u6240\u4ee5\u4e0a\u9762\u901a\u8fc7 `tom.name` \u8bbf\u95ee\u5c5e\u6027 `name` \u4f1a\u62a5\u9519\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/202005291710392022-10-23-20-35-40.png\\" />\\n\\n\u5982\u679c\u4f7f\u7528 `protected` \u4fee\u9970\uff0c\u90a3\u4e48\u8be5\u5c5e\u6027\u53ea\u80fd\u5728\u8be5\u7c7b\u5185\u90e8\u53ca\u5176\u5b50\u7c7b\u4e2d\u624d\u80fd\u88ab\u8bbf\u95ee\uff0c\u9664\u6b64\u4e4b\u5916\u4e0d\u80fd\u88ab\u8bbf\u95ee\uff0c\u5982\u4e0b\\n\\n```ts\\nclass Person {\\n    protected name: string;\\n    public age: number;\\n\\n    constructor(name:string, age: number) {\\n        this.name = name;\\n        this.age = age;\\n    }\\n}\\n\\nclass Student extends Person {\\n    public score: number;\\n    constructor(name: string, age: number, score: number) {\\n        super(name, age);\\n        this.score = score;\\n    }\\n\\n    // \u5728\u5b50\u7c7b\u4e2d\u53ef\u4ee5\u88ab\u8bbf\u95ee\\n    public getName(): string {\\n        return this.name;\\n    }\\n}\\n\\nlet alice = new Student(\\"Alice\\", 4, 5);\\n\\nconsole.log(alice.getName()); // Alice\\n\\n// \u4e0b\u884c\u8bed\u53e5\u4f1a\u62a5\u9519\\nconsole.log(alice.name);\\n```\\n\\n\u5982\u4e0a\u6240\u793a\uff0c\u7236\u7c7b `Person` \u7684 `name` \u5c5e\u6027\u4f7f\u7528 `protected` \u4fee\u9970\uff0c\u6240\u4ee5\u5728\u5b50\u7c7b `Student` \u4e2d\u53ef\u4ee5\u8bbf\u95ee\uff0c\u4f46\u662f\u5728\u7236\u7c7b\u548c\u5b50\u7c7b\u7684\u5916\u90e8\u4e0d\u80fd\u8bbf\u95ee\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/202005291815162022-10-23-20-36-17.png\\" />\\n\\n### \u9759\u6001\u5c5e\u6027\\n\\n\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 `static` \u5173\u952e\u58f0\u660e\u9759\u6001\u5c5e\u6027\u4ee5\u53ca\u9759\u6001\u65b9\u6cd5\uff0c\u9759\u6001\u5c5e\u6027\u548c\u65b9\u6cd5\u662f\u5c5e\u4e8e\u7c7b\u7684\uff0c\u800c\u4e0d\u662f\u5177\u4f53\u7684\u5bf9\u8c61\uff0c\u4f7f\u7528\u5c5e\u6027\u548c\u65b9\u6cd5\u8981\u4f7f\u7528\u7c7b\u540d\u8c03\u7528\uff0c\u5982\u4e0b\\n\\n```ts\\nclass Person {\\n    public static max_age:number = 100;\\n    public name:string;\\n    public age:number;\\n    constructor(name:string, age:number) {\\n        this.name = name;\\n        this.age = age;\\n    }\\n}\\n\\nlet person = new Person(\\"Tom\\", 15);\\n\\n// \u901a\u8fc7\u7c7b\u5bf9\u8c61\u8bbf\u95ee\u5b9e\u4f8b\u5c5e\u6027\\nconsole.log(person.name); // Tom\\n// \u901a\u8fc7\u7c7b\u8bbf\u95ee\u9759\u6001\u5c5e\u6027\\nconsole.log(Person.max_age); // 100\\n```\\n\\n### readonly\\n\\n\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 `readonly` \u6765\u4fee\u9970\u7c7b\u7684\u5c5e\u6027\uff0c\u6765\u8868\u793a\u8be5\u5c5e\u6027\u662f\u53ea\u8bfb\u7684\uff0c\u53ea\u6709\u5728\u6784\u9020\u51fd\u6570\u4e2d\u521d\u59cb\u5316\u8be5\u5c5e\u6027\uff0c\u5982\u4e0b\\n\\n```js\\nclass Person {\\n    public readonly name:string;\\n    public age:number;\\n    constructor(name:string, age:number) {\\n        this.name = name;\\n        this.age = age;\\n    }\\n}\\n\\nlet person = new Person(\\"Alice\\", 12);\\n\\nperson.name = \\"Bob\\";\\n```\\n\\n\u5728\u4e0a\u9762\u6211\u4eec\u58f0\u660e\u4e86 `name` \u5c5e\u6027\u4e3a `readonly`\uff0c\u8868\u660e `name` \u5c5e\u6027\u662f\u53ea\u8bfb\u7684\uff0c\u4f46\u662f\u5728\u540e\u9762\u6211\u4eec\u8bd5\u56fe\u4fee\u6539\u8be5\u5c5e\u6027\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c06\u4f1a\u62a5\u9519\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/202005292027102022-10-23-20-37-00.png\\" />\\n\\n### \u5b9e\u73b0\u63a5\u53e3\\n\\n\u63a5\u53e3\u7684\u53e6\u4e00\u4e2a\u4f5c\u7528\u5c31\u662f\u5bf9\u7c7b\u8fdb\u884c\u62bd\u8c61\uff0c\u4e00\u4e2a\u7c7b\u53ef\u4ee5\u5b9e\u73b0\u63a5\u53e3\uff0c\u5f53\u7c7b\u5b9e\u73b0\u63a5\u53e3\u65f6\uff0c\u8981\u6c42\u7c7b\u4e2d\u5fc5\u987b\u6709\u63a5\u53e3\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u5982\u4e0b\\n\\n```typescript\\ninterface IPerson {\\n    name: string;\\n    age: number;\\n    gender: string;\\n}\\n\\nclass Person implements IPerson{\\n    public name:string;\\n    public age:number;\\n    public gender: string;\\n    constructor(name:string, age:number, gender:string) {\\n        this.name = name;\\n        this.age = age;\\n        this.gender = gender;\\n    }\\n}\\n\\nlet person = new Person(\\"Alice\\", 12, \\"male\\");\\n```\\n\\n\u5176\u5b9e\u6211\u5bf9\u63a5\u53e3\u7684\u7406\u89e3\uff0c\u5176\u5b9e\u5c31\u662f\u5b9a\u4e49\u4e86\u4e00\u4e2a\u6807\u51c6\u3002\u5b9a\u4e49\u4e86\u6807\u51c6\u4e4b\u540e\uff0c\u5bf9\u4e8e\u5177\u4f53\u7684\u5b9e\u73b0\u5c31\u4e0d\u5173\u5fc3\u4e86\uff0c\u53ef\u4ee5\u548c\u5177\u4f53\u7684\u5b9e\u73b0\u89e3\u8026\u3002\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a\u64cd\u4f5c\u6570\u636e\u5e93\u7684\u5bf9\u8c61\uff0c\u4f46\u662f\u5bf9\u4e8e\u4e0d\u540c\u7684\u5382\u5bb6(\u6570\u636e\u5e93)\uff0c\u5177\u4f53\u600e\u4e48\u64cd\u4f5c\u6570\u636e\u5e93\u90fd\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u6240\u4ee5\u8fd9\u4e2a\u5bf9\u8c61\u4e0d\u80fd\u5199\u6b7b\u662f\u600e\u4e48\u7c7b\u578b\u3002\u6240\u4ee5\u6211\u4eec\u5e94\u8be5\u5b9a\u4e49\u64cd\u4f5c\u6570\u636e\u5e93\u7684\u6807\u51c6\uff0c\u6bd4\u5982\u64cd\u4f5c\u6570\u636e\u5e93\u7684\u65b9\u6cd5\u540d\uff0c\u65b9\u6cd5\u63a5\u6536\u7684\u53c2\u6570\uff0c\u800c\u5bf9\u4e8e\u5177\u4f53\u7684\u5b9e\u73b0\u5e94\u8be5\u7531\u5404\u81ea\u7684\u4ea7\u5546\u7f16\u5199\u3002\u53ea\u8981\u8fd9\u4e9b\u5382\u5546\u5b9e\u73b0\u4e86\u6211\u4eec\u7684\u6807\u51c6\uff0c\u90a3\u4e48\u5b83\u5c31\u53ef\u4ee5\u7528\uff0c\u7c7b\u6bd4\u8fc7\u6765\uff0c\u6211\u4eec\u5b9a\u4e49\u7684\u6807\u51c6\u5c31\u662f\u63a5\u53e3\uff0c\u800c\u5404\u81ea\u5382\u5546\u7684\u5b9e\u73b0\u5c31\u662f\u5b9e\u73b0\u4e86\u63a5\u53e3\u7684\u7c7b\u3002\\n\\n```typescript\\ninterface OperateDatabase {\\n    save: () => void;\\n}\\n\\nfunction saveData(obj: OperateDatabase): void {\\n    obj.save();\\n}\\n```\\n\\n\u5728\u4e0a\u9762\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u64cd\u4f5c\u6570\u636e\u5e93\u7684\u63a5\u53e3 `OperateDatabase`\uff0c\u5e76\u4e14\u5b9a\u4e49\u4e86\u4e00\u4e2a\u65b9\u6cd5 `saveData()`\uff0c\u8be5\u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a\u63a5\u53e3\uff0c\u6ce8\u610f\u8fd9\u91cc\u6211\u4eec\u6ca1\u6709\u6307\u5b9a\u662f\u67d0\u4e2a\u7279\u5b9a\u7684\u5bf9\u8c61\u7c7b\u578b\uff0c\u5426\u5219\u7684\u5c31\u4f1a\u4e0e\u8be5\u7c7b\u578b\u7ed1\u5b9a\u5728\u4e00\u8d77\u3002\u63a5\u7740\u6211\u4eec\u53ef\u4ee5\u4e24\u4e2a\u7c7b\u5b9e\u73b0\u8be5\u63a5\u53e3\\n\\n```typescript\\nclass MysqlDatabase implements OperateDatabase {\\n    save() {\\n        console.log(\\"mysql \u4fdd\u5b58\u6570\u636e\\");\\n    }\\n}\\n\\nclass RedisDatabase implements OperateDatabase {\\n    save() {\\n        console.log(\\"redis \u4fdd\u5b58\u6570\u636e\\");\\n    }\\n}\\n```\\n\\n\u8fd9\u4e24\u4e2a\u7c7b\u5c31\u76f8\u5f53\u4e8e\u662f\u8fd9\u4e2a\u6807\u51c6\u7684\u5177\u4f53\u5b9e\u73b0\u3002\u5f53\u6211\u4eec\u8c03\u7528 `saveData` \u65b9\u6cd5\u65f6\uff0c\u5c06\u5177\u4f53\u7684\u5b9e\u73b0\u7c7b\u4f20\u5165\u5373\u53ef\\n\\n```typescript\\nsaveData(new MysqlDatabase()); // mysql \u4fdd\u5b58\u6570\u636e\\nsaveData(new RedisDatabase()); // redis \u4fdd\u5b58\u6570\u636e\\n```\\n\\n## \u58f0\u660e\u5408\u5e76\\n\\n### \u51fd\u6570\u7684\u5408\u5e76\\n\\n\u73b0\u5728\u6709\u8fd9\u4e48\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\uff0c\u8fd9\u4e2a\u53c2\u6570\u53ef\u4ee5\u662f\u5b57\u7b26\u4e32\u6216\u8005\u6570\u5b57\uff0c\u5b83\u7684\u529f\u80fd\u662f\u5c06\u4f20\u5165\u7684\u6570\u5b57\u6216\u8005\u5b57\u7b26\u4e32\u53cd\u8f6c\uff0c\u6bd4\u5982\u8f93\u5165 `123`\uff0c\u5219\u8f93\u51fa `321`\uff0c\u8f93\u5165 `hello`\uff0c\u5219\u8f93\u51fa `olleh`\uff0c\u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49\u7c7b\u5982\u4e0b\\n\\n```typescript\\nfunction reverse(x: number | string): number|string{\\n    if (typeof x === \'number\') {\\n        return Number(x.toString().split(\'\').reverse().join(\'\'));\\n    } else {\\n        return x.toString().split(\'\').reverse().join(\'\');\\n    }\\n}\\n```\\n\\n\u8fd9\u4e2a\u51fd\u6570\u7684\u5b9a\u4e49\u6709\u4e00\u4e2a\u7f3a\u70b9\uff0c\u4e0d\u80fd\u7cbe\u786e\u7684\u8868\u8fbe\u8f93\u5165\u6570\u5b57\u65f6\uff0c\u8f93\u51fa\u4e5f\u662f\u6570\u5b57\uff0c\u8f93\u5165\u662f\u5b57\u7b26\u4e32\u65f6\uff0c\u8f93\u51fa\u4e5f\u662f\u5b57\u7b26\u4e32\u3002\u6211\u4eec\u53ef\u4ee5\u91cd\u8f7d `reverse` \u7684\u591a\u4e2a\u5b9a\u4e49\\n\\n```typescript\\nfunction reverse(x: number): number;\\nfunction reverse(x: string): string;\\nfunction reverse(x: number | string): number|string{\\n    if (typeof x === \'number\') {\\n        return Number(x.toString().split(\'\').reverse().join(\'\'));\\n    } else {\\n        return x.toString().split(\'\').reverse().join(\'\');\\n    }\\n}\\n```\\n\\n### \u63a5\u53e3\u7684\u5408\u5e76\\n\\n\u5f53\u6211\u4eec\u5b9a\u4e49\u4e86\u4e24\u4e2a\u76f8\u540c\u540d\u5b57\u7684\u63a5\u53e3\u65f6\uff0c\u63a5\u53e3\u4e2d\u7684\u5c5e\u6027\u4f1a\u81ea\u52a8\u8fdb\u884c\u5408\u5e76\\n\\n```typescript\\ninterface Person {\\n    name: string;\\n}\\n\\ninterface Person {\\n    age: number;\\n}\\n```\\n\\n\u76f8\u5f53\u4e8e\\n\\n```typescript\\ninterface Person {\\n    name: string;\\n    age: number;\\n}\\n```\\n\\n\u5982\u679c\u4e24\u4e2a\u63a5\u53e3\u6709\u76f8\u540c\u7684\u5c5e\u6027\uff0c\u53ea\u8981\u5b83\u4eec\u8fd4\u56de\u7684\u503c\u7684\u7c7b\u578b\u76f8\u540c\uff0c\u5c31\u4e0d\u4f1a\u6709\u95ee\u9898\uff0c\u5982\u4e0b\\n\\n```typescript\\ninterface Person {\\n    name: string;\\n    gender: string;\\n}\\n\\ninterface Person {\\n    age: number;\\n    gender:string;\\n}\\n```\\n\\n\u5728\u4e24\u4e2a\u63a5\u53e3\u4e2d\uff0c\u5b83\u4eec\u6709\u76f8\u540c\u7684\u5c5e\u6027\u540d `gender`\uff0c\u5e76\u4e14\u5b83\u4eec\u7684\u5b9a\u4e49\u65f6\u4e00\u6837\u7684\uff0c\u5b83\u4eec\u7684\u5408\u5e76\u4e5f\u6ca1\u6709\u95ee\u9898\uff0c\u76f8\u5f53\u4e8e\u5982\u4e0b\\n\\n```typescript\\ninterface Person {\\n    name: string;\\n    age: number;\\n    gender:string;\\n}\\n```\\n\\n\u4f46\u662f\u5982\u679c\u6709\u76f8\u540c\u7684\u5c5e\u6027\uff0c\u4f46\u662f\u5b9a\u4e49\u5374\u4e0d\u540c\uff0c\u5373\u503c\u7684\u7c7b\u578b\u4e0d\u540c\uff0c\u90a3\u4e48\u4f1a\u62a5\u9519\\n\\n```typescript\\ninterface Person {\\n    name: string;\\n    gender: string;\\n}\\n\\ninterface Person {\\n    age: number;\\n    gender:number;\\n}\\n```\\n\\n\u4e0a\u9762\u4e24\u4e2a\u63a5\u53e3\u7684 `gender` \u7684\u5b9a\u4e49\u4e0d\u540c\uff0c\u62a5\u9519\u5982\u4e0b\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/2020052921482022-10-23-20-37-34.png\\" />\\n\\n## \u7c7b\u578b\u65ad\u8a00\\n\\n\u6709\u65f6\u5019\u6211\u4eec\u9700\u8981\u5c06\u4e00\u4e2a\u4e0d\u786e\u5b9a\u7684\u7c7b\u578b\u65ad\u8a00\u4e3a\u5177\u4f53\u7684\u7c7b\u578b\uff0c\u6bd4\u5982\u5c06\u4e00\u4e2a\u8054\u5408\u7c7b\u578b\u65ad\u8a00\u4e3a\u5176\u4e2d\u7684\u67d0\u4e00\u4e2a\u5177\u4f53\u7684\u7c7b\u578b\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4f7f\u7528\u5b83\u7279\u6709\u7684\u65b9\u6cd5\u3002\u7c7b\u578b\u65ad\u8a00\u7684\u8bed\u6cd5\u4e3a\\n\\n```ts\\n\u503c as \u7c7b\u578b\\n```\\n\\n\u6216\u8005\\n\\n```ts\\n<\u7c7b\u578b>\u503c\\n```\\n\\n\u4e0a\u9762\u4e24\u79cd\u65b9\u6cd5\u90fd\u662f\u5c06\u503c\u65ad\u8a00\u4e3a\u67d0\u4e2a\u5177\u4f53\u7684\u7c7b\u578b\u3002\u56e0\u4e3a\u5728 `React` \u4e2d\u53ea\u652f\u6301 `as` \u8bed\u6cd5\uff0c\u6240\u4ee5\u63a8\u8350\u4f7f\u7528\u7b2c\u4e00\u79cd\u65b9\u6cd5\u3002\\n\\n### \u8054\u5408\u7c7b\u578b\u65ad\u8a00\u4e3a\u5176\u4e2d\u5177\u4f53\u7c7b\u578b\\n\\n\u5c31\u5982\u4e0a\u9762\u6240\u8bf4\uff0c\u6709\u65f6\u5019\u6211\u4eec\u5e0c\u671b\u5c06\u8054\u5408\u7c7b\u578b\u65ad\u8a00\u4e3a\u5177\u4f53\u7684\u7c7b\u578b\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528\u7c7b\u578b\u7279\u6709\u7684\u65b9\u6cd5\uff0c\u5426\u5219\u53ea\u80fd\u4f7f\u7528\u4e8c\u8005\u516c\u5171\u7684\u65b9\u6cd5\u3002\u6211\u4eec\u7b2c\u4e00\u4e2a\u5f62\u72b6\u7c7b\u578b\\n\\n```ts\\ninterface Circle {\\n    radius: number;\\n}\\n\\ninterface Square {\\n    size: number;\\n}\\n\\ninterface Rectangle {\\n    width: number;\\n    height: number;\\n}\\n\\ntype Shape = Circle | Square | Rectangle;\\n```\\n\\n\u63a5\u7740\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u63a5\u6536 `Shape` \u7c7b\u578b\u7684\u53c2\u6570\uff0c\u8fd4\u56de\u9762\u79ef\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u8fd9\u4e48\u5199\\n\\n```ts\\nfunction getArea(s: Shape): number {\\n    if (typeof s.radius === \'number\') {\\n        return 3.14159 * s.radius * s.radius;\\n    } else if (typeof s.size === \'number\') {\\n         return s.size * s.size;\\n    } else {\\n        return s.width * s.height;\\n    }\\n}\\n```\\n\\n\u4f46\u662f\u4f60\u4f1a\u53d1\u73b0\u4e00\u7247\u62a5\u7ea2\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/image-for-2022@master/202005292216112022-10-23-20-38-22.png\\" />\\n\\n\u56e0\u4e3a\u4f20\u5165\u7684\u7c7b\u578b `s` \u6839\u672c\u65e0\u6cd5\u786e\u5b9a\u662f\u4ec0\u4e48\u5177\u4f53\u7684\u7c7b\u578b\uff0c\u6211\u4eec\u53ea\u80fd\u8bbf\u95ee `Circle, Square, Rectangle` \u7684\u516c\u5171\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u6240\u4ee5\u5f53\u6211\u4eec\u8bbf\u95ee\u4ed6\u4eec\u7279\u6709\u7684\u5c5e\u6027\u65f6\u5c31\u4f1a\u62a5\u9519\uff0c\u6bd4\u5982 `s.radius`\uff0c\u6240\u4ee5\u5728\u8bbf\u95ee\u5177\u4f53\u7684\u5c5e\u6027\u8fdb\u884c\u5224\u65ad\u65f6\uff0c\u6211\u4eec\u8981\u65ad\u8a00\u4e3a\u5177\u4f53\u7684\u7c7b\u578b\uff0c\u4fee\u6539\u5982\u4e0b\\n\\n```ts\\nfunction getArea(s: Shape): number {\\n    if (typeof (s as Circle).radius === \'number\') {\\n        s = s as Circle;\\n        return 3.14159 * s.radius * s.radius;\\n    } else if (typeof (s as Square).size === \'number\') {\\n        s = s as Square;\\n         return s.size * s.size;\\n    } else {\\n        s = s as Rectangle;\\n        return s.width * s.height;\\n    }\\n}\\n```\\n\\n\u6211\u4eec\u9996\u5148\u8fdb\u884c\u65ad\u8a00\u4e3a\u5177\u4f53\u7684\u7c7b\u578b\uff0c\u7136\u540e\u8fdb\u884c\u5224\u65ad\u3002\\n\\n### \u7236\u7c7b\u6216\u63a5\u53e3\u65ad\u8a00\u4e3a\u5b50\u7c7b\u6216\u5b9e\u73b0\u7c7b\\n\\n\u6709\u65f6\u5019\u6211\u4eec\u9700\u8981\u5c06\u7236\u7c7b\u6216\u63a5\u53e3\u65ad\u8a00\u4e3a\u5177\u4f53\u7684\u5b50\u7c7b\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4f7f\u7528\u5b50\u7c7b\u7279\u6709\u7684\u5c5e\u6027\u6216\u65b9\u6cd5\u3002\u9996\u5148\u5b9a\u4e49\u4e00\u4e2a\u7236\u7c7b\u548c\u4e24\u4e2a\u5b50\u7c7b\\n\\n```ts\\nclass Person {\\n    name: string;\\n    age: number;\\n\\n    constructor(name: string, age: number) {\\n        this.name = name;\\n        this.age = age;\\n    }\\n\\n}\\n\\nclass Student extends Person{\\n    score: number;\\n    constructor(name:string, age: number, score: number) {\\n        super(name, age);\\n        this.score = score;\\n    }\\n}\\n\\nclass Teacher extends Person{\\n    level: number;\\n    constructor(name:string, age: number, level: number) {\\n        super(name, age);\\n        this.level = level;\\n    }\\n}\\n```\\n\\n\u63a5\u7740\u5b9a\u4e49\u4e00\u4e2a\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u63a5\u6536 `Person` \u7c7b\u578b\u7684\u53c2\u6570\uff0c\u6211\u4eec\u9700\u8981\u65ad\u8a00\u4e3a\u5177\u4f53\u7684\u5b50\u7c7b\u624d\u80fd\u4f7f\u7528\u5b50\u7c7b\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\\n\\n```ts\\nfunction isStudent(p: Person) {\\n    if (typeof (p as Student).score === \'number\') {\\n        return true;\\n    } else {\\n        return false;\\n    }\\n}\\n\\nconsole.log(isStudent(new Student(\'Bob\', 15, 100))); // true\\n```\\n\\n## \u6cdb\u578b\\n\\n\u5728\u5b9a\u4e49\u51fd\u6570\u3001\u7c7b\u548c\u63a5\u53e3\u65f6\uff0c\u5e76\u4e0d\u5177\u4f53\u6307\u5b9a\u5177\u4f53\u7684\u7c7b\u578b\uff0c\u800c\u662f\u4f7f\u7528\u4e00\u4e2a\u5360\u4f4d\u7b26\u8868\u793a\u7c7b\u578b\uff0c\u5177\u4f53\u7684\u7c7b\u578b\u5728\u4f7f\u7528\u7684\u65f6\u5019\u4f20\u5165\u51b3\u5b9a\u3002\\n\\n### \u51fd\u6570\u6cdb\u578b\\n\\n\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u51fd\u6570\u521b\u5efa\u4e00\u4e2a\u6570\u7ec4\uff0c\u5e76\u8bbe\u7f6e\u9ed8\u8ba4\u503c\uff0c\u6570\u7ec4\u4e2d\u5b58\u50a8\u7684\u5177\u4f53\u7c7b\u578b\u7b49\u5230\u4f7f\u7528\u65f6\u786e\u5b9a\\n\\n```ts\\nfunction createArray<T>(length: number, defaultValue: T): Array<T> {\\n    let x = new Array<T>(length);\\n    for (let i = 0; i < length; i++) {\\n        x.push(defaultValue);\\n    }\\n    return x;\\n}\\n```\\n\\n\u8be5\u51fd\u6570\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u6570\u7ec4\u7684\u957f\u5ea6\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u9ed8\u8ba4\u503c\u3002\u8be5\u6570\u7ec4\u7684\u7c7b\u578b\u6211\u4eec\u4f7f\u7528\u6cdb\u578b `T` \u4ee3\u66ff\uff0c\u5177\u4f53\u7684\u7c7b\u578b\u5728\u4f7f\u7528\u65f6\u786e\u5b9a\uff0c\u5982\u521b\u5efa\u4e00\u4e2a\u957f\u5ea6\u4e3a `5`\uff0c\u7c7b\u578b\u4e3a `number`\uff0c\u9ed8\u8ba4\u503c\u4e3a `0` \u7684\u6570\u7ec4\uff0c\u5982\u4e0b\\n\\n```ts\\nlet arr = createArray<number>(5, 0);\\nconsole.log(arr); // [ <5 empty items>, 0, 0, 0, 0, 0 ]\\n```\\n\\n\u56e0\u4e3a\u6211\u4eec\u4e0d\u77e5\u9053\u6cdb\u578b\u7684\u5177\u4f53\u7c7b\u578b\uff0c\u6240\u4ee5\u4e0d\u80fd\u968f\u610f\u64cd\u4f5c\u5b83\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\uff0c\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u53ef\u4ee5\u5bf9\u8c61\u6cdb\u578b\u505a\u51fa\u7ea6\u675f\uff0c\u4ee5\u4fbf\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u7279\u5b9a\u7684\u5c5e\u6027\u6216\u65b9\u6cd5\uff0c\u5982\u8981\u6c42\u6cdb\u578b\u5fc5\u987b\u7b26\u5408\u67d0\u4e2a\u63a5\u53e3\\n\\n```ts\\ninterface Length {\\n    length: number;\\n}\\n\\nfunction getLength<T extends Length>(t: T):number {\\n    return t.length;\\n}\\n```\\n\\n\u4e0a\u9762\u6211\u4eec\u8981\u6c42\u6cdb\u578b `T` \u7ee7\u627f\u4e86\u63a5\u53e3 `Length`\uff0c\u5373\u4f20\u5165\u7684\u5bf9\u8c61 `t` \u5fc5\u987b\u542b\u6709\u5c5e\u6027 `length`\\n\\n```ts\\nconsole.log(getLength(\\"123\\")); // 3\\n```\\n\\n### \u63a5\u53e3\u6cdb\u578b\\n\\n\u540c\u6837\u7684\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u5728\u63a5\u53e3\u4e2d\u4f7f\u7528\u6cdb\u578b\\n\\n```ts\\ninterface CreateArrayFunc<T> {\\n    (length: number, defaultValue: T): Array<T>\\n}\\n\\nlet createArray: CreateArrayFunc<number>;\\n\\ncreateArray = function<T>(length: number, defaultValue: T) {\\n    let x: T[] = [];\\n    for(let i = 0; i < length; i++) {\\n        x.push(defaultValue);\\n    }\\n    return x;\\n}\\n\\nconsole.log(createArray(5, 3)); // [ 3, 3, 3, 3, 3 ]\\n```\\n\\n### \u7c7b\u6cdb\u578b\\n\\n\u6211\u4eec\u4e5f\u53ef\u4ee5\u5728\u7c7b\u4e2d\u4f7f\u7528\u6cdb\u578b\\n\\n```ts\\nclass Stack<T> {\\n    data: T[];\\n    size: number;\\n    constructor(capacity: number) {\\n        this.data = new Array<T>(capacity);\\n        this.size = 0;\\n    }\\n\\n    push (item: T): void {\\n        this.data.push(item);\\n        this.size++;\\n    }\\n\\n    pop (): T {\\n        this.size--;\\n        return this.data.pop() as T;\\n    }\\n    \\n    printStack(): void {\\n        console.log(this.data);\\n    }\\n}\\n```\\n\\n\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a `Stack` \u6808\uff0c\u5b83\u91cc\u9762\u5b58\u50a8\u7684\u7c7b\u578b\u662f\u4e00\u4e2a\u6cdb\u578b\uff0c\u5728\u6211\u4eec\u4f7f\u7528\u7684\u65f6\u5019\u786e\u5b9a\uff0c\u5982\u4e0b\\n\\n```ts\\n// \u5b9a\u4e49\u4e86\u4e00\u4e2a\u5b58\u50a8 number \u7c7b\u578b\u6570\u636e\u7684\u6808 \u5bb9\u91cf\u4e3a10\\nlet stack = new Stack<number>(10); \\n\\nstack.push(10);\\nstack.push(5);\\n\\nstack.printStack(); // [ <10 empty items>, 10, 5 ]\\n```\\n\\n## \u53c2\u8003\u6587\u732e\\n\\n- [TypeScript\u5165\u95e8\u6559\u7a0b](https://ts.xcatliu.com/)\\n- [TypeScript\u5b89\u5229\u6307\u5357](https://juejin.im/post/5d8efeace51d45782b0c1bd6)"},{"id":"\u6b63\u5219\u8868\u8fbe\u5f0f","metadata":{"permalink":"/blog/\u6b63\u5219\u8868\u8fbe\u5f0f","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2020-05-28-\u6b63\u5219\u8868\u8fbe\u5f0f.mdx","source":"@site/blog/2020-05-28-\u6b63\u5219\u8868\u8fbe\u5f0f.mdx","title":"\u6b63\u5219\u8868\u8fbe\u5f0f","description":"\u5728\u5b57\u7b26\u4e32\u7684\u5904\u7406\u4e2d\uff0c\u6211\u4eec\u7ecf\u5e38\u8981\u8fdb\u884c\u5b57\u7b26\u4e32\u7684\u5339\u914d\uff0c\u6821\u9a8c\u7b49\u7b49\u64cd\u4f5c\u3002\u6bd4\u5982\u6821\u9a8c\u5b57\u7b26\u4e32\u7684\u683c\u5f0f\u662f\u5426\u7b26\u5408\u90ae\u7bb1\uff0c\u7535\u8bdd\u53f7\u7801\u7684\u683c\u5f0f\uff0c\u6821\u9a8c\u5bc6\u7801\u662f\u5426\u7b26\u5408\u8981\u6c42\uff0c\u5bc6\u7801\u4e2d\u662f\u5426\u5305\u542b\u6570\u5b57\u548c\u5b57\u6bcd\u7b49\u7b49\uff1b\u53c8\u6216\u8005\u5339\u914d\u5f97\u5230\u67d0\u79cd\u89c4\u5219\u7684\u5b57\u7b26\u4e32\u3002\u8fd9\u4e00\u4e9b\u64cd\u4f5c\u5982\u679c\u4f7f\u7528\u5e38\u89c4\u7684\u65b9\u6cd5\u8fdb\u884c\u5b57\u7b26\u4e32\u64cd\u4f5c\uff0c\u4f1a\u82b1\u8d39\u8f83\u5927\u7684\u4ee3\u4ef7\uff0c\u5305\u62ec\u65f6\u95f4\u548c\u7cbe\u529b\u3002","date":"2020-05-28T00:00:00.000Z","formattedDate":"2020\u5e745\u670828\u65e5","tags":[{"label":"JavaScript","permalink":"/blog/tags/java-script"},{"label":"\u6b63\u5219\u8868\u8fbe\u5f0f","permalink":"/blog/tags/\u6b63\u5219\u8868\u8fbe\u5f0f"}],"readingTime":27.775,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"slug":"\u6b63\u5219\u8868\u8fbe\u5f0f","authors":"xiongtao","tags":["JavaScript","\u6b63\u5219\u8868\u8fbe\u5f0f"]},"prevItem":{"title":"TypeScript\u5165\u95e8\u6307\u5357","permalink":"/blog/2020/05/30/TypeScript\u5165\u95e8\u6307\u5357"},"nextItem":{"title":"\u9632\u6296\u4e0e\u8282\u6d41","permalink":"/blog/\u9632\u6296\u4e0e\u8282\u6d41"}},"content":"\u5728\u5b57\u7b26\u4e32\u7684\u5904\u7406\u4e2d\uff0c\u6211\u4eec\u7ecf\u5e38\u8981\u8fdb\u884c\u5b57\u7b26\u4e32\u7684\u5339\u914d\uff0c\u6821\u9a8c\u7b49\u7b49\u64cd\u4f5c\u3002\u6bd4\u5982\u6821\u9a8c\u5b57\u7b26\u4e32\u7684\u683c\u5f0f\u662f\u5426\u7b26\u5408\u90ae\u7bb1\uff0c\u7535\u8bdd\u53f7\u7801\u7684\u683c\u5f0f\uff0c\u6821\u9a8c\u5bc6\u7801\u662f\u5426\u7b26\u5408\u8981\u6c42\uff0c\u5bc6\u7801\u4e2d\u662f\u5426\u5305\u542b\u6570\u5b57\u548c\u5b57\u6bcd\u7b49\u7b49\uff1b\u53c8\u6216\u8005\u5339\u914d\u5f97\u5230\u67d0\u79cd\u89c4\u5219\u7684\u5b57\u7b26\u4e32\u3002\u8fd9\u4e00\u4e9b\u64cd\u4f5c\u5982\u679c\u4f7f\u7528\u5e38\u89c4\u7684\u65b9\u6cd5\u8fdb\u884c\u5b57\u7b26\u4e32\u64cd\u4f5c\uff0c\u4f1a\u82b1\u8d39\u8f83\u5927\u7684\u4ee3\u4ef7\uff0c\u5305\u62ec\u65f6\u95f4\u548c\u7cbe\u529b\u3002\\n\\n\u6b63\u5219\u8868\u8fbe\u5f0f\u662f\u7528\u6765\u8868\u8fbe\u5b57\u7b26\u4e32\u7684\u89c4\u5219\uff0c\u5b83\u53ef\u4ee5\u68c0\u9a8c\u5b57\u7b26\u4e32\u662f\u5426\u7b26\u5408\u67d0\u4e2a\u7279\u5b9a\u7684\u89c4\u5219\uff0c\u6216\u8005\u5339\u914d\u5b57\u7b26\u4e32\u4e2d\u7b26\u5408\u89c4\u5219\u7684\u5b57\u7b26\uff0c\u5728\u4e00\u822c\u7684\u4f7f\u7528\u4e2d\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u4e00\u822c\u7528\u6765\u5339\u914d\u5b57\u7b26\u4e32\u4e2d\u7684\u5b57\u7b26\u6216\u8005\u5b57\u7b26\u4e32\u4e2d\u7279\u5b9a\u7684\u4f4d\u7f6e\u3002\\n\\n## \u6b63\u5219\u5bf9\u8c61\\n\\n`JavaScript` \u6b63\u5219\u5bf9\u8c61\u7684\u521b\u5efa\u6709\u4e24\u79cd\u5e38\u89c1\u7684\u65b9\u6cd5\uff0c\u4e00\u662f\u4f7f\u7528 `RegExp` \u6784\u9020\u51fd\u6570\u8fdb\u884c\u521b\u5efa\uff0c\u4e8c\u662f\u4f7f\u7528\u5b57\u9762\u91cf\u7684\u65b9\u6cd5\u8fdb\u884c\u521b\u5efa\uff0c\u5982\u4e0b\\n\\n```javascript\\nlet regex1 = new RegExp(\'hello\', \'g\');\\nlet regex2 = /hello/g;\\n```\\n\\n\u5176\u4e2d `hello` \u8868\u793a\u5b57\u7b26\u4e32\u7684\u89c4\u5219\uff0c\u7528\u6765\u5339\u914d\u5b57\u7b26\u4e32\u4e2d\u7684`\\"hello\\"`\uff0c`g` \u8868\u793a\u8fdb\u884c\u5168\u5c40\u5339\u914d(`global`)\uff0c\u50cf\u8fd9\u6837\u7684\u6807\u5fd7\u8fd8\u6709\u4e24\u4e2a\uff0c`m` \u8868\u793a\u8fdb\u884c\u591a\u884c\u5339\u914d(`multiline`)\uff0c`i` \u8868\u793a\u5ffd\u7565\u5927\u5c0f\u5199(`ignoreCase`)\uff0c\u8fd9\u4e09\u4e2a\u6807\u5fd7\u4e92\u4e0d\u51b2\u7a81\uff0c\u53ef\u4ee5\u540c\u65f6\u4f7f\u7528\uff0c\u5982\\n\\n```javascript\\nlet regex = /hello/igm;\\n```\\n\\n\x3c!--truncate--\x3e\\n\\n\u5177\u4f53\u6807\u5fd7\u7684\u4f5c\u7528\u5728\u540e\u9762\u8bb2\u89e3\u3002\u5728\u5b9e\u9645\u7684\u4f7f\u7528\u4e2d\uff0c\u6211\u4eec\u4e00\u822c\u4f1a\u4f7f\u7528\u5b57\u9762\u91cf\u7684\u5f62\u5f0f\u521b\u5efa\u6b63\u5219\u5bf9\u8c61\uff0c\u76f8\u5bf9\u4e8e\u4f7f\u7528\u6784\u9020\u51fd\u6570\uff0c\u5b57\u9762\u91cf\u7684\u521b\u5efa\u6bd4\u8f83\u7b80\u4fbf\uff0c\u4e0d\u8fc7\u5982\u679c\u9700\u8981\u52a8\u6001\u7684\u521b\u5efa\u6b63\u5219\u5bf9\u8c61\uff0c\u6216\u8005\u6839\u636e\u5b57\u7b26\u4e32\u521b\u5efa\u6b63\u5219\u5bf9\u8c61\uff0c\u90a3\u4e48\u53ef\u4ee5\u8003\u8651\u4f7f\u7528\u6784\u9020\u51fd\u6570\u7684\u65b9\u5f0f\u3002\\n\\n### \u6b63\u5219\u5bf9\u8c61\u4e2d\u7684\u5c5e\u6027\\n\\n- `global`\uff1a\u5e03\u5c14\u503c\uff0c\u662f\u5426\u8bbe\u7f6e\u4e86 `g` \u6807\u5fd7\\n- `ignoreCase`\uff1a\u5e03\u5c14\u503c\uff0c\u662f\u5426\u8bbe\u7f6e\u4e86 `i` \u6807\u5fd7\\n- `lastIndex`\uff1a\u6574\u6570\uff0c\u4ece\u5b57\u7b26\u4e32\u7684\u67d0\u4e2a\u4f4d\u7f6e\u5f00\u59cb\u5339\u914d\uff0c\u9ed8\u8ba4\u4e3a `0`\\n- `multiline`\uff1a\u5e03\u5c14\u503c\uff0c\u662f\u5426\u8bbe\u7f6e\u4e86 `m` \u6807\u5fd7\\n- `source`\uff1a\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5b57\u7b26\u4e32\u8868\u793a\\n\\n```javascript\\nlet regex = /\\\\d{3}hello$/ig;\\n\\nconsole.log(regex.global); // true\\nconsole.log(regex.ignoreCase); // true\\nconsole.log(regex.multiline); // false\\nconsole.log(regex.lastIndex); // 0\\nconsole.log(regex.source); // \\\\d{3}hello$\\n```\\n\\n### \u6b63\u5219\u5bf9\u8c61\u4e2d\u7684\u65b9\u6cd5\\n\\n#### test\\n\\n`test()`\uff0c\u8be5\u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a\u5b57\u7b26\u4e32\u53c2\u6570\uff0c\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u7528\u6765\u5224\u65ad\u8be5\u5b57\u7b26\u4e32\u662f\u5426\u7b26\u5408\u6b63\u5219\u5bf9\u8c61\u7684\u89c4\u5219\uff0c\u5982\u4e0b\\n\\n```javascript\\nlet regex = /hello/g;\\nlet string1 = \\"hello world\\";\\nlet string2 = \\"Hello World\\";\\nconsole.log(regex.test(string1)); // true\\nconsole.log(regex.test(string2)); // false\\n```\\n\\n#### exec\\n\\n`exec()` \u65b9\u6cd5\u662f\u7528\u6765\u6355\u83b7\u5339\u914d\u5230\u7684\u5b57\u7b26\uff0c\u8be5\u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u6570\u7ec4\u7684\u7b2c\u4e00\u9879\u8868\u793a\u4e0e\u6574\u4e2a\u6a21\u5f0f\u5339\u914d\u7684\u5b57\u7b26\u4e32\uff0c\u7b2c\u4e8c\u9879\u8868\u793a\u7b2c\u4e00\u4e2a\u6355\u83b7\u7ec4(\u6355\u83b7\u7ec4\u7684\u6982\u5ff5\u5982\u679c\u4e0d\u61c2\uff0c\u53ef\u4ee5\u770b\u4e86\u62ec\u53f7\u7684\u4f5c\u7528\u5728\u56de\u6765\u770b)\uff0c\u7b2c\u4e09\u9879\u8868\u793a\u7b2c\u4e8c\u4e2a\u6355\u83b7\u7ec4\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\u8fd4\u56de\u7684\u6570\u7ec4\u4e0e\u666e\u901a\u6570\u7ec4\u4e0d\u540c\u7684\u662f\uff0c\u8be5\u6570\u7ec4\u8fd8\u6709\u4e09\u4e2a\u5c5e\u6027\uff0c`index` \u3001 `input` \u548c `groups`\uff0c`index` \u8868\u793a\u5339\u914d\u5230\u7684\u5b57\u7b26\u5728\u539f\u59cb\u5b57\u7b26\u4e32\u4e2d\u7684\u4f4d\u7f6e\uff0c\u4ece `0` \u5f00\u59cb\uff1b`input` \u8868\u793a\u8f93\u5165\u7684\u539f\u59cb\u5b57\u7b26\u4e32\uff0c`groups` \u8868\u793a\u6355\u83b7\u7ec4\u7684\u540d\u79f0\u3002\\n\\n```javascript\\nlet regex = /(he)(ll)(o)/g;\\n\\nlet string = \\"so hello\\";\\nlet result = regex.exec(string);\\nconsole.log(result);\\n```\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/202204181203342022-04-18-12-03-35.png\\" style={{ zoom: \\"50%\\"}} />\\n\\n\u8f93\u51fa\u4e3a\\n\\n```javascript\\n[\\n  \'hello\',\\n  \'he\',\\n  \'ll\',\\n  \'o\',\\n  index: 3,\\n  input: \'so hello\',\\n  groups: undefined\\n]\\n```\\n\\n\u5982\u679c\u6b63\u5219\u5bf9\u8c61\u7684\u6807\u5fd7\u6709 `g` \u7684\u8bdd\uff0c\u90a3\u4e48\u5728\u6267\u884c `exec()` \u65b9\u6cd5\u540e\u4f1a\u6539\u53d8 `lastIndex` \u4e3a\u5339\u914d\u5b57\u7b26\u4e32\u540e\u5b57\u7b26\u7684 `index`\uff0c\u63a5\u4e0b\u6765\u518d\u6b21\u6267\u884c `exec()` \u65b9\u6cd5\u65f6\u5c06\u4f1a\u4ece `lastIndex` \u5904\u5f00\u59cb\u5339\u914d\uff0c\u5982\\n\\n```javascript\\nlet string = \\"ab abc abc\\";\\nlet regex = /ab/g;\\n\\nconsole.log(regex.lastIndex); // 0\\nregex.exec(string);\\nconsole.log(regex.lastIndex); // 2\\n\\nregex.exec(string);\\nconsole.log(regex.lastIndex); // 5\\n\\nregex.exec(string);\\nconsole.log(regex.lastIndex); // 9\\n\\nregex.exec(string); // \u5339\u914d\u4e0d\u5230\u4f1a\u8fd4\u56de null\\nconsole.log(regex.lastIndex); // \u91cd\u65b0\u53d8\u4e3a 0\\n```\\n\\n### \u6784\u9020\u51fd\u6570RegExp\u7684\u5c5e\u6027\\n\\n\u6784\u9020\u51fd\u6570 `RegExp` \u4e2d\u6709\u4e00\u4e9b\u9759\u6001\u5c5e\u6027\uff0c\u8fd9\u4e9b\u5c5e\u6027\u4f1a\u4fdd\u5b58\u6700\u8fd1\u4e00\u6b21\u6b63\u5219\u5bf9\u8c61\u64cd\u4f5c\u7684\u4e00\u4e9b\u4fe1\u606f\uff0c\u5e76\u4e14\u8fd9\u4e9b\u5c5e\u6027\u6709\u4e24\u79cd\u65b9\u6cd5\u8bbf\u95ee\uff0c\u4e00\u79cd\u662f\u5177\u6709\u8bed\u4e49\u7684\u957f\u5c5e\u6027\u540d\uff0c\u4e00\u79cd\u662f\u7b80\u77ed\u7684\u77ed\u5c5e\u6027\u540d\uff0c\u5177\u4f53\u5982\u4e0b\uff1a\\n\\n- `input`\uff1a\u77ed\u5c5e\u6027\u540d\u4e3a `$_`\uff0c\u6700\u8fd1\u4e00\u6b21\u8981\u5339\u914d\u7684\u5b57\u7b26\u4e32\\n- `lastMatch`\uff1a`$&`\uff0c\u6700\u8fd1\u4e00\u6b21\u7684\u5339\u914d\u9879\\n- `leftContext`\uff1a$\\\\`\uff0c `input` \u4e2d `lastMatch` \u7684\u5de6\u8fb9\u90e8\u5206\\n- `rightContext`\uff1a`$\'`\uff0c`input` \u4e2d `lastMatch` \u7684\u53f3\u8fb9\u90e8\u5206\\n- `$1, $2, ...`\uff1a\u540e\u9762\u4ecb\u7ecd\\n\\n```javascript\\nlet regex = /hello/g;\\nlet string = \\"he hello llo\\";\\nregex.exec(string);\\n\\nconsole.log(RegExp.input); // he hello llo\\nconsole.log(RegExp.lastMatch); // hello\\nconsole.log(RegExp.leftContext); // he_ (\u4ece_\u8868\u793a\u7a7a\u683c)\\nconsole.log(RegExp.rightContext); // _llo\\n```\\n\\n## \u5b57\u7b26\u4e32\u65b9\u6cd5\\n\\n\u5728\u5b57\u7b26\u4e32\u4e2d\uff0c\u6709\u8bb8\u591a\u7684\u65b9\u6cd5\u4e5f\u662f\u4e0e\u6b63\u5219\u8868\u8fbe\u5f0f\u6709\u5173\u7684\uff0c\u5982 `replace`\uff0c`match`\uff0c\u4e0b\u9762\u5c31\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0b\u3002\\n\\n### replace\\n\\n`replace()` \u65b9\u6cd5\u7684\u4f5c\u7528\u662f\u4f7f\u7528\u65b0\u7684\u5b57\u7b26\u4e32\u66ff\u6362\u5b57\u7b26\u4e32\u4e2d\u7684\u67d0\u4e9b\u5185\u5bb9\uff0c\u8be5\u65b9\u6cd5\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u8868\u793a\u5b57\u7b26\u4e32\u4e2d\u8981\u88ab\u66ff\u6362\u7684\u5185\u5bb9\uff0c\u5b83\u53ef\u4ee5\u662f\u4e00\u4e2a\u5177\u4f53\u7684\u5b57\u7b26\u4e32\u6216\u8005\u662f\u4e00\u4e2a\u6b63\u5219\u5bf9\u8c61\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u8fd9\u4e2a\u53c2\u6570\u662f\u7528\u6765\u66ff\u6362\u7b2c\u4e00\u4e2a\u53c2\u6570\u7684\uff0c\u5982\\n\\n```javascript\\nlet string = \\"gello\\";\\nstring = string.replace(\'g\', \'h\'); // \u5c06 string \u4e2d\u7684 g \u66ff\u6362\u4e3a h\\nconsole.log(string); // hello\\n```\\n\\n```javascript\\nlet string = \\"abc\\";\\nstring = string.replace(/[ab]/g, \'#\'); // \u5c06\u5b57\u7b26\u4e32\u4e2d\u7684 a \u6216 b \u66ff\u6362\u4e3a #\\nconsole.log(string); // ##c\\n```\\n\\n\u5728\u4e0a\u9762\u4e2d\u4f7f\u7528\u4e86 `[ab]`\uff0c\u8fd9\u4e2a\u8868\u793a `a` \u6216\u8005 `b`\uff0c\u5177\u4f53\u4f1a\u5728\u5143\u5b57\u7b26\u90a3\u91cc\u8bb2\u89e3\u3002\\n\\n### match\\n\\n`match` \u65b9\u6cd5\u7684\u4f5c\u7528\u4e0e `exec` \u7684\u4f5c\u7528\u5dee\u4e0d\u591a\uff0c\u4e0d\u8fc7\u4e00\u4e2a\u662f `RegExp` \u5bf9\u8c61\u7684\u65b9\u6cd5\uff0c\u4e00\u4e2a\u662f `String` \u5bf9\u8c61\u7684\u65b9\u6cd5\u3002`match` \u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a\u6b63\u5219\u5bf9\u8c61\uff0c\u5b83\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\uff0c\u6839\u636e\u6b63\u5219\u5bf9\u8c61\u662f\u5426\u8bbe\u7f6e\u4e86 `g` \u6807\u5fd7\uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u4e5f\u4e0d\u76f8\u540c\u3002\\n\\n\u5982\u679c\u6ca1\u6709\u8bbe\u7f6e `g` \u6807\u5fd7\uff0c\u5373\u4e0d\u4f1a\u5168\u5c40\u5339\u914d\uff0c\u53ea\u4f1a\u5339\u914d\u4e00\u6b21\uff0c\u90a3\u4e48\u5b83\u8fd4\u56de\u7684\u7ed3\u679c\u4e0e `exec` \u8fd4\u56de\u7684\u7ed3\u679c\u76f8\u540c\uff0c\u6570\u7ec4\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u8868\u793a\u5339\u914d\u7684\u5b57\u7b26\u4e32\uff0c\u540e\u9762\u7684\u5143\u7d20\u8868\u793a\u6355\u83b7\u7ec4\uff0c\u5e76\u4e14\u4e5f\u6709 `input`\uff0c`index`\uff0c`groups`\u7b49\u5c5e\u6027\uff0c\u8868\u793a\u7684\u542b\u4e49\u4e5f\u75db `exec`\uff0c\u5982\u4e0b\\n\\n```javascript\\nlet string = \\"hello\\";\\nlet result = string.match(/(?<h>he)(?<l>ll)(o)/);\\nconsole.log(result);\\n```\\n\\n\u8f93\u51fa\u4e3a\\n\\n```javascript\\n[\\n  \'hello\',\\n  \'he\',\\n  \'ll\',\\n  \'o\',\\n  index: 0,\\n  input: \'hello\',\\n  groups: [Object: null prototype] { h: \'he\', l: \'ll\' }\\n]\\n```\\n\\n\u8fd9\u6b21\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u8ddf\u4ee5\u5f80\u7684\u4e0d\u540c\uff0c\u8fd9\u6b21\u6211\u8bbe\u7f6e\u4e86\u6355\u83b7\u7ec4\u7684\u540d\u79f0\uff0c\u5982\\n\\n```javascript\\n(?<h>he)\\n```\\n\\n\u5373\u5c06\u6355\u83b7\u7ec4 `(he)` \u7684\u540d\u79f0\u8bbe\u7f6e\u4e3a\u4e86 `h`\uff0c\u8bbe\u7f6e\u6355\u83b7\u7ec4\u540d\u79f0\u7684\u683c\u5f0f\u5982\u4e0b\\n\\n```javascript\\n(?<\u6355\u83b7\u7ec4\u540d\u79f0>\u6355\u83b7\u7ec4\u5185\u5bb9)\\n```\\n\\n\u4e3a\u6355\u83b7\u7ec4\u8bbe\u7f6e\u540d\u79f0\uff0c\u53ef\u4ee5\u65b9\u4fbf\u5728\u540e\u9762\u8fdb\u884c\u5f15\u7528\u3002\\n\\n\u5982\u679c\u8bbe\u7f6e\u4e86 `g` \u6807\u5fd7\uff0c\u8fd9\u65f6\u8fd4\u56de\u503c\u4e0e `exec` \u65b9\u6cd5\u5c31\u4e0d\u540c\u4e86\uff0c\u5b83\u4f1a\u5c06\u5b57\u7b26\u4e32\u4e2d\u6240\u6709\u7b26\u5408\u6b63\u5219\u8868\u8fbe\u5f0f\u89c4\u5219\u7684\u5185\u5bb9\u90fd\u5339\u914d\u51fa\u6765\uff0c\u5e76\u653e\u5165\u6570\u7ec4\u4e2d\uff0c\u5982\\n\\n```javascript\\nlet string = \\"hello\\";\\nlet re = /(?<h>he)(?<l>ll)(o)/g;\\nlet result = string.match(re);\\nconsole.log(result); // [ \'hello\' ]\\n\\nstring = \\"hello helloworld\\";\\nresult = string.match(re);\\nconsole.log(result); // [ \'hello\', \'hello\' ]\\n```\\n\\n\u8fd9\u65f6\u8bbe\u7f6e\u7684\u6355\u83b7\u7ec4\u7684\u4fe1\u606f\u5c31\u63d0\u53d6\u4e0d\u5230\u4e86\uff0c\u6240\u4ee5\u4ece\u67d0\u79cd\u7a0b\u5ea6\u4e0a\u8bf4\uff0c`exec` \u7684\u529f\u80fd\u6bd4 `match` \u66f4\u52a0\u7684\u5f3a\u5927\uff0c\u4e0d\u8fc7 `exec` \u5e76\u4e0d\u80fd\u4e00\u6b21\u63d0\u53d6\u51fa\u5b57\u7b26\u4e32\u4e2d\u6240\u6709\u7b26\u5408\u89c4\u5219\u7684\u5185\u5bb9\uff0c\u800c\u662f\u9700\u8981\u505a\u4e00\u4e2a\u5faa\u73af\uff0c\u5982\u4e0b\\n\\n```javascript\\nlet string = \\"hello helloworld\\";\\nlet re = /(?<h>he)(?<l>ll)(o)/g;\\nlet result;\\nlet results = new Array();\\n// \u5f53 re.exec()\u4e0d\u4e3a null \u65f6\\nwhile (result = re.exec(string)) {\\n    results.push(result[0]); // result \u4e2d\u8fd8\u5305\u542b\u4e86\u6355\u83b7\u7ec4\u7684\u4fe1\u606f\\n}\\nconsole.log(results); // [ \'hello\', \'hello\' ]\\n```\\n\\n## \u5b57\u7b26\u5339\u914d\\n\\n\u4e0a\u9762\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u8fdb\u884c\u5339\u914d\u90fd\u662f\u8fdb\u884c\u7cbe\u786e\u7684\u5339\u914d\uff0c\u5982 `/hello/`\uff0c\u5339\u914d\u5b57\u7b26\u4e32\u4e2d\u7684 `hello` \u5185\u5bb9\uff0c\u8fd9\u6837\u6211\u4eec\u6839\u672c\u65e0\u6cd5\u9886\u4f1a\u5230\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5f3a\u5927\uff0c\u6b63\u5219\u8868\u8fbe\u5f0f\u6b63\u662f\u5f3a\u5927\u5728\u5b83\u6a21\u7cca\u5339\u914d\u7684\u80fd\u529b\uff0c\u6bd4\u5982\u6211\u4eec\u5728 `Windows` \u4e2d\u8fdb\u884c\u6587\u4ef6\u67e5\u627e\uff0c\u6709\u65f6\u6211\u4eec\u4e0d\u8bb0\u5f97\u6587\u4ef6\u7684\u5177\u4f53\u540d\u79f0\uff0c\u6bd4\u5982\u5fd8\u4e86\u67d0\u4e2a\u5b57\u6bcd\uff0c\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u4f1a\u7528 `.` \u53bb\u8868\u793a\u4efb\u610f\u7684\u5b57\u6bcd\u53bb\u8fdb\u884c\u67e5\u627e\u3002\u73b0\u5728\u6211\u4eec\u5c31\u6765\u8bb2\u8bb2\u6b63\u5219\u8868\u8fbe\u5f0f\u6a21\u7cca\u5339\u914d\u7684\u80fd\u529b\u3002\\n\\n### \u5b57\u7b26\u7ec4\\n\\n\u5728\u8fdb\u884c\u5339\u914d\u7684\u65f6\u5019\uff0c\u5982\u679c\u6211\u4eec\u4e0d\u786e\u5b9a\u67d0\u4e2a\u4f4d\u7f6e\u7684\u5b57\u7b26\u662f\u4ec0\u4e48\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8868\u793a\u7279\u5b9a\u542b\u4e49\u7684\u5b57\u7b26\u6765\u5360\u636e\u8fd9\u4e2a\u4f4d\u7f6e\uff0c\u6bd4\u5982 `[abc]` \u8868\u793a\u8fd9\u4e2a\u4f4d\u7f6e\u662f `a`\uff0c`b`\uff0c`c` \u4e2d\u7684\u67d0\u4e2a\u5b57\u7b26\u3002\u5982\u679c\u6211\u4eec\u60f3\u8868\u793a\u8fd9\u4e2a\u5b57\u7b26\u662f\u5c0f\u5199\u5b57\u6bcd\uff0c\u6309\u7167\u4e0a\u9762\u7684\u5199\u6cd5\uff0c\u4f60\u53ef\u80fd\u4f1a\u8fd9\u4e48\u5199 `[abcdefghijklmnopqrstuvwxyz]`\uff0c\u8fd9\u6837\u7684\u5199\u6cd5\u6709\u70b9\u53cd\u4eba\u7c7b\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8303\u56f4\u8868\u793a\u6cd5\u6765\u4ee3\u66ff\u4e0a\u9762\u7684\u5199\u6cd5\uff0c\u5982 `[a-z]` \u7684\u5199\u6cd5\u5c31\u8868\u793a\u6240\u6709\u7684\u5c0f\u5199\u5b57\u6bcd\uff0c\u540c\u7406 `[A-Z]` \u5c31\u8868\u793a\u6240\u6709\u7684\u5927\u5199\u5b57\u6bcd\uff0c`[0-9]` \u5c31\u8868\u793a\u6570\u5b57\uff0c`[0-9a-zA-Z]` \u8868\u793a\u8fd9\u4e2a\u4f4d\u7f6e\u53ef\u4ee5\u662f\u6570\u5b57\uff0c\u5c0f\u5199\u5b57\u6bcd\uff0c\u5927\u5199\u5b57\u6bcd\u3002\u5982\u4e0b\\n\\n```java\\nlet re = /[a-zA-Z0-9]/;\\nconsole.log(re.test(\'0\')); // true\\nconsole.log(re.test(\'s\')); // true\\nconsole.log(re.test(\'S\')); // true\\nconsole.log(re.test(\'?\')); // false\\n```\\n\\n\u6211\u4eec\u53ef\u4ee5\u5728 `[]` \u4e2d\u52a0\u5165 `^` \u8868\u793a\u53d6\u53cd\uff0c\u5982 `[^0-9]` \u8868\u793a\u975e\u6570\u5b57\uff0c\u5373\u5b83\u53ef\u4ee5\u5339\u914d\u6240\u6709\u7684\u975e\u6570\u5b57\\n\\n```javascript\\nlet re = /[^0-9]/;\\nconsole.log(re.test(\\"2\\")); // false\\nconsole.log(re.test(\\"a\\")); // true\\nconsole.log(re.test(\\"?\\")); // true\\n```\\n\\n\u6211\u4eec\u8fd8\u53ef\u4ee5\u4f7f\u7528**\u5143\u5b57\u7b26**\u6765\u5360\u636e\u4f4d\u7f6e\uff0c\u6bd4\u5982 `\\\\d` \u5c31\u4ee3\u8868\u6570\u5b57\uff0c\u5b83\u7684\u4f5c\u7528\u4e0e `[0-9]` \u662f\u4e00\u6837\u7684\uff0c\u5e38\u89c1\u7684\u5143\u5b57\u7b26\u5982\u4e0b\u6240\u793a(\u4e0d\u5305\u542b\u8868\u793a\u4f4d\u7f6e\u7684\u5143\u5b57\u7b26\uff0c\u8868\u793a\u4f4d\u7f6e\u7684\u5143\u5b57\u7b26\u5728\u540e\u9762\u4ecb\u7ecd)\\n\\n| \u5143\u5b57\u7b26 | \u542b\u4e49                                                |\\n| ------ | --------------------------------------------------- |\\n| `\\\\d`   | \u8868\u793a\u6570\u5b57                                            |\\n| `\\\\s`   | \u8868\u793a\u7a7a\u767d\u5b57\u7b26\uff0c\u5305\u62ec\u7a7a\u683c\uff0c\u56de\u8f66\uff0c\u5236\u8868\u7b26\u7b49\u7b49            |\\n| `\\\\w`   | \u8868\u793a\u6570\u5b57\uff0c\u5927\u5c0f\u5199\u5b57\u6bcd\u548c\u4e0b\u5212\u7ebf\uff0c\u76f8\u5f53\u4e8e `[0-9a-zA-Z_]` |\\n| `.`    | \u8868\u793a\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26                                    |\\n\\n\u6765\u770b\u51e0\u4e2a\u4f8b\u5b50\\n\\n```javascript\\n// \u8868\u793a\u6570\u5b57\\nlet re1 = /\\\\d/;\\nconsole.log(re1.test(\\"2\\")); // true\\n\\n// \u7a7a\u767d\u5b57\u7b26\\nlet re2 = /\\\\s/;\\nconsole.log(re2.test(\\" \\")); // true\\nconsole.log(re2.test(\\"\\\\t\\")); // true\\nconsole.log(re2.test(\\"\\\\n\\")); // true\\n\\n// \u8868\u793a\u5927\u5c0f\u5199\u5b57\u6bcd\uff0c\u6570\u5b57\u548c\u4e0b\u5212\u7ebf\\nlet re3 = /\\\\w/;\\nconsole.log(re3.test(\\"2\\")); // true\\nconsole.log(re3.test(\\"a\\")); // true\\nconsole.log(re3.test(\\"A\\")); // true\\nconsole.log(re3.test(\\"_\\")); // true\\n```\\n\\n\u4e0e\u5728 `[]` \u4e2d\u52a0\u5165 `^`\u8868\u793a\u53d6\u53cd\uff0c\u4e0a\u9762\u7684\u5143\u5b57\u7b26\u4e5f\u6709\u5bf9\u5e94\u7684\u5143\u5b57\u7b26\u8868\u793a\u53d6\u53cd\u7684\u6982\u5ff5\\n\\n| \u5143\u5b57\u7b26 | \u542b\u4e49                         |\\n| ------ | ---------------------------- |\\n| `\\\\D`   | \u4e0e `\\\\d` \u76f8\u53cd\uff0c\u8868\u793a\u975e\u6570\u5b57     |\\n| `\\\\S`   | \u4e0e `\\\\s` \u76f8\u53cd\uff0c\u8868\u793a\u975e\u7a7a\u767d\u5b57\u7b26 |\\n| `\\\\W`   | \u4e0e `\\\\w` \u76f8\u53cd\uff0c\u8868\u793a\u975e\u5355\u8bcd     |\\n\\n```javascript\\nlet re1 = /\\\\D/;\\nconsole.log(re1.test(\\"2\\")); // false\\nconsole.log(re1.test(\\"\\\\n\\")); // true\\n\\nlet re2 = /\\\\S/;\\nconsole.log(re2.test(\\" \\")); // false\\nconsole.log(re2.test(\\"9\\")); // true\\n\\nlet re3 = /\\\\W/;\\nconsole.log(re3.test(\\"0\\")); // false\\nconsole.log(re3.test(\\"\\\\t\\")); // true\\n```\\n\\n### \u91cf\u8bcd\\n\\n\u73b0\u5728\u6211\u4eec\u5047\u8bbe\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u53bb\u5339\u914d\u7535\u8bdd\u53f7\u7801\uff0c\u5047\u8bbe\u7535\u8bdd\u53f7\u7801\u5c31\u662f `11` \u4f4d\u6570\u5b57\uff0c\u6240\u4ee5\u5199\u51fa\u6765\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u662f\u8fd9\u6837\u7684 `\\\\d\\\\d\\\\d\\\\d\\\\d\\\\d\\\\d\\\\d\\\\d\\\\d\\\\d`\uff0c\u8fd9\u79cd\u5199\u6cd5\u4e5f\u76f8\u5f53\u7684\u53cd\u4eba\u7c7b\uff0c\u4e0d\u4ec5\u96be\u8bfb(\u9700\u8981\u4e00\u4e2a\u4e2a\u6570\u624d\u77e5\u9053\u6709\u591a\u5c11\u4e2a\u6570)\uff0c\u800c\u4e14\u5199\u8d77\u6765\u4e5f\u9ebb\u70e6\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u91cf\u8bcd\u6765\u7b80\u5199\u4e0a\u9762\u7684\u8868\u8fbe\u5f0f\uff0c\u5982 `\\\\d{11}` \u5c31\u8868\u793a `\\\\d` \u8fde\u7eed\u51fa\u73b0 `11` \u6b21\uff0c\u5e38\u89c1\u7684\u91cf\u8bcd\u5199\u6cd5\u5982\u4e0b\\n\\n| \u91cf\u8bcd    | \u542b\u4e49                                              |\\n| ------- | ------------------------------------------------- |\\n| `{n}`   | \u8868\u793a\u8fde\u7eed\u51fa\u73b0 `n` \u6b21                               |\\n| `{m,n}` | \u8868\u793a\u8fde\u7eed\u51fa\u73b0 `m-n`\uff0c\u6700\u5c11\u51fa\u73b0 `m`\uff0c\u6700\u591a\u51fa\u73b0 `n` \u6b21 |\\n| `{n,}`  | \u8868\u793a\u8fde\u7eed\u51fa\u73b0\u6700\u5c11 `n` \u6b21(\u5305\u62ec `n` \u6b21)              |\\n| `*`     | \u8868\u793a\u8fde\u7eed\u51fa\u73b0**\u4efb\u610f**\u591a\u6b21                          |\\n| `+`     | \u8868\u793a\u8fde\u7eed\u51fa\u73b0 `1` \u6b21\u6216 `1` \u6b21\u4ee5\u4e0a                  |\\n| `?`     | \u8868\u793a\u51fa\u73b0 `0` \u6b21\u6216 `1` \u6b21                          |\\n\\n```javascript\\n// \u5339\u914d\u8fde\u7eed\u51fa\u73b0\u7684 5 \u4f4d\u6570\u5b57\\nlet re = /\\\\d{5}/g;\\nlet string = \\"123 1234 12345 654321\\";\\nconsole.log(string.match(re)); // [ \'12345\', \'65432\' ]\\n```\\n\\n```javascript\\n// \u5339\u914d\u8fde\u7eed\u51fa\u73b0\u7684 2-3 \u4f4d\u6570\u5b57\\nlet re = /\\\\d{2,3}/g;\\nlet string = \\"12 123 1234\\";\\nconsole.log(string.match(re)); // [ \'12\', \'123\', \'123\' ]\\n```\\n\\n```javascript\\n// \u5339\u914d\u8fde\u7eed\u51fa\u73b0 4 \u4f4d\u53ca 4 \u4f4d\u4ee5\u4e0a\u7684\u6570\u5b57\\nlet re = /\\\\d{4,}/g;\\nlet string = \\"12 123 1234 12345\\";\\nconsole.log(string.match(re)); // [ \'1234\', \'12345\' ]\\n```\\n\\n```javascript\\n// b \u53ef\u4ee5\u51fa\u73b0\u4efb\u610f\u6b21\\nlet re = /ab*c/g;\\nlet string = \\"ac abc abbc abbbc\\";\\nconsole.log(string.match(re)); // [ \'ac\', \'abc\', \'abbc\', \'abbbc\' ]\\n```\\n\\n```javascript\\n// b \u51fa\u73b0 1 \u6b21\u6216 1 \u6b21\u4ee5\u4e0a\\nlet re = /ab+c/g;\\nlet string = \\"ac abc abbc abbbc\\";\\nconsole.log(string.match(re)); // [ \'abc\', \'abbc\', \'abbbc\' ]\\n```\\n\\n```javascript\\n// b \u51fa\u73b0 0 \u6b21\u6216 1 \u6b21\\nlet re = /ab?c/g;\\nlet string = \\"ac abc abbc abbbc\\";\\nconsole.log(string.match(re));\\n```\\n\\n### \u8d2a\u5a6a\u5339\u914d\u4e0e\u60f0\u6027\u5339\u914d\\n\\n\u6240\u8c13\u7684\u8d2a\u5a6a\u5339\u914d\u5c31\u662f\u5c3d\u53ef\u80fd\u7684\u591a\u5339\u914d\uff0c\u5982\\n\\n```javascript\\nlet re = /ab+/g;\\nlet string = \\"abbbb\\";\\nconsole.log(string.match(re)); // [ \'abbbb\' ]\\n```\\n\\n\u660e\u660e\u5339\u914d `ab` \u4e5f\u53ef\u4ee5\uff0c\u4f46\u662f\u5b83\u4f1a\u5c3d\u53ef\u80fd\u591a\u7684\u5339\u914d\uff0c\u8fd9\u5c31\u662f\u8d2a\u5a6a\u6a21\u5f0f\uff0c\u4e0e\u6b64\u76f8\u5bf9\u7684\u662f\u60f0\u6027\u5339\u914d\uff0c\u60f0\u6027\u5339\u914d\u5c31\u662f\u5728\u6ee1\u8db3\u6761\u4ef6\u7684\u60c5\u51b5\u4e0b\u4f1a\u5c3d\u53ef\u80fd\u7684\u5c11\u5339\u914d\uff0c\u5982\u4e0a\u4f8b\u5c31\u4f1a\u5339\u914d `ab`\uff0c\u5728\u9ed8\u8ba4\u7684\u60c5\u51b5\u4e0b\u662f\u8d2a\u5a6a\u5339\u914d\uff0c\u8981\u4f7f\u7528\u60f0\u6027\u5339\u914d\u5c31\u8981\u4f7f\u7528\u60f0\u6027\u91cf\u8bcd\\n\\n| \u8d2a\u5a6a    | \u60f0\u6027     |\\n| ------- | -------- |\\n| `+`     | `+?`     |\\n| `*`     | `*?`     |\\n| `?`     | `??`     |\\n| `{n,m}` | `{n,m}?` |\\n| `{n,}`  | `{n,}?`  |\\n\\n```javascript\\nlet re = /ab+?/g;\\nlet string = \\"abbbb\\";\\nconsole.log(string.match(re)); // [ \'ab\' ]\\n```\\n\\n\u73b0\u5728\u8003\u8651\u6839\u636e `html` \u5b57\u7b26\u4e32\u83b7\u5f97\u67d0 `id` \u5c5e\u6027\uff0c\u5982 `<div id=\\"container\\" class=\\"active\\"></div>`\uff0c\u5982\u679c\u6211\u4eec\u4f7f\u7528\u8d2a\u5a6a\u5339\u914d\u7684\u8bdd\uff0c\u8003\u8651\u8fd9\u6837\u7684\u5339\u914d\u89c4\u5219 `/id=\\".*\\"/`\uff0c\u90a3\u4e48\u6355\u83b7\u5230\u7684\u5e76\u4e0d\u662f\u6211\u4eec\u60f3\u8981\u7684\\n\\n```javascript\\nlet re = /id=\\".*\\"/;\\nlet string = \\"<div id=\\\\\\"container\\\\\\" class=\\\\\\"active\\\\\\"></div>\\";\\nconsole.log(re.exec(string)[0]); // id=\\"container\\" class=\\"active\\"\\n```\\n\\n\u6211\u4eec\u53d1\u73b0\u5339\u914d\u5230\u7684\u662f `id=\\"container\\" class=\\"active\\"`\uff0c\u56e0\u4e3a\u5728\u8d2a\u5a6a\u6a21\u5f0f\u4e0b\u518d\u7b26\u5408\u6761\u4ef6\u7684\u60c5\u51b5\u4e0b\u4f1a\u5c3d\u53ef\u80fd\u591a\u7684\u5339\u914d\uff0c\u6240\u4ee5\u4f1a\u76f4\u63a5\u5339\u914d\u5230\u6700\u540e\u4e00\u4e2a\u53cc\u5f15\u53f7\uff0c\u89e3\u51b3\u529e\u6cd5\u6709\u4e24\u79cd\uff0c\u5176\u4e2d\u7b80\u5355\u7684\u89e3\u51b3\u529e\u6cd5\u5c31\u662f\u4f7f\u7528\u60f0\u6027\u5339\u914d\\n\\n```javascript\\nlet re = /id=\\".*?\\"/;\\nlet string = \\"<div id=\\\\\\"container\\\\\\" class=\\\\\\"active\\\\\\"></div>\\";\\nconsole.log(re.exec(string)[0]); // id=\\"container\\"\\n```\\n\\n\u53e6\u4e00\u79cd\u529e\u6cd5\u5c31\u6bd4\u8f83 `trick`\uff0c\u6211\u89c9\u5f97\u53ea\u53ef\u610f\u4f1a\uff0c\u96be\u4ee5\u8a00\u4f20\\n\\n```javascript\\nlet re = /id=\\"[^\\"]*\\"/;\\nlet string = \\"<div id=\\\\\\"container\\\\\\" class=\\\\\\"active\\\\\\"></div>\\";\\nconsole.log(re.exec(string)[0]); // id=\\"container\\"\\n```\\n\\n\u4ed4\u7ec6\u4f53\u4f1a\u4e0a\u9762\u7684\u5199\u6cd5\u5427\uff0c\u6211\u89c9\u5f97\u5f88\u597d\u7528\uff0c\u6bd4\u5982\u83b7\u5f97\u67d0\u6807\u7b7e\u7684\u6807\u7b7e\u540d\\n\\n```javascript\\nlet re = /<[^>]*>/;\\nlet string = \\"<div></div>\\";\\nconsole.log(re.exec(string)[0]); // <div>\\n```\\n\\n### \u5206\u652f\\n\\n\u6709\u65f6\u5019\u6211\u4eec\u9700\u8981\u5728\u591a\u4e2a\u5206\u652f\u4e4b\u95f4\u8fdb\u884c\u9009\u62e9\uff0c\u6bd4\u5982\u5339\u914d\u5341\u516d\u8fdb\u5236\u8868\u793a\u7684\u989c\u8272\uff0c\u6709\u4e24\u79cd\u8868\u793a\uff0c\u4e00\u79cd\u662f `#F4E242` \u516d\u4f4d\u7684\uff0c\u4e00\u79cd\u662f\u7b80\u5199\u7684 `#FFF` \u4e09\u4f4d\u8868\u793a\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 `|` \u6765\u8868\u793a\u6216\u7684\u5173\u7cfb\\n\\n```javascript\\nlet regex = /#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})/g;\\nlet string1 = \\"#FFF\\";\\nlet string2 = \\"#F34E23\\"\\nconsole.log(string1.match(regex)); // [ \'#FFF\' ]\\nconsole.log(string2.match(regex)); // [ \'#F34E23\' ]\\n```\\n\\n## \u62ec\u53f7\u7684\u4f5c\u7528\\n\\n### \u5206\u7ec4\u4e0e\u5206\u652f\\n\\n\u5047\u8bbe\u6211\u4eec\u8981\u5339\u914d `I love Java` \u548c `I love C` \u8fd9\u4e24\u53e5\u8bdd\uff0c\u4f60\u53ef\u80fd\u4f1a\u5199\u51fa\u8fd9\u6837\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\\n\\n```javascript\\n/I love Java|C/\\n```\\n\\n\u4f46\u662f\u8fd9\u4e2a\u6b63\u5219\u8868\u8fbe\u5f0f\u8868\u793a\u7684\u662f `I love Java` \u6216\u8005 `C` \u800c\u4e0d\u662f `I love C`\uff0c\u6b63\u786e\u7684\u5199\u6cd5\u5e94\u8be5\u662f\u8fd9\u6837\\n\\n```javascript\\n/I love (Java|C)/\\n```\\n\\n`Java` \u548c `C` \u9009\u5176\u4e00\u3002\\n\\n### \u6355\u83b7\u6570\u636e\\n\\n\u5047\u8bbe\u6211\u4eec\u8981\u5339\u914d\u4e00\u4e2a\u683c\u5f0f\u4e3a `yyyy-mm-dd` \u683c\u5f0f\u7684\u65e5\u671f\uff0c\u5e76\u4e14\u5e0c\u671b\u83b7\u5f97\u5e74\u6708\u65e5\uff0c\u90a3\u4e48\u53ef\u80fd\u4f1a\u8fd9\u4e48\u5199\\n\\n```javascript\\nlet re = /\\\\d{4}-\\\\d{2}-\\\\d{2}/;\\nlet string = \\"2020-05-27\\";\\nlet result = re.exec(string)[0]; // 2020-05-27\\nlet results = result.split(\\"-\\");\\nconsole.log(\\"year:\\" + results[0]); // year:2020\\nconsole.log(\\"month:\\" + results[1]); // month:05\\nconsole.log(\\"day:\\" + results[2]); // day:27\\n```\\n\\n\u5176\u5b9e\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u6dfb\u52a0\u62ec\u53f7\u6765\u6355\u83b7\u6570\u636e\uff0c\u5bf9\u4e8e\u88ab\u62ec\u53f7\u5305\u8d77\u6765\u7684\u6570\u636e\uff0c\u5176\u5339\u914d\u7684\u5185\u5bb9\u4f1a\u88ab\u63d0\u53d6\u51fa\u6765\uff0c\u6dfb\u52a0\u5230\u8fd4\u56de\u7684\u6570\u7ec4\u4e2d\uff0c\u5982\\n\\n```javascript\\nlet re = /(\\\\d{4})-(\\\\d{2})-(\\\\d{2})/;\\n\\nlet string = \\"2020-05-27\\";\\nlet result = re.exec(string);\\n\\nconsole.log(\\"year:\\" + result[1]); // \u7b2c\u4e00\u4e2a\u6355\u83b7\u7ec4 \\\\d{4} \u5339\u914d\u7684\u5185\u5bb9\\nconsole.log(\\"month:\\" + result[2]); // \u7b2c\u4e8c\u4e2a\u6355\u83b7\u7ec4 \\\\d{2} \u5339\u914d\u7684\u5185\u5bb9\\nconsole.log(\\"day:\\" + result[3]); // \u7b2c\u4e09\u4e2a\u6355\u83b7\u7ec4 \\\\d{2} \u5339\u914d\u7684\u5185\u5bb9\\n```\\n\\n\u4e0a\u9762\u6211\u4eec\u5bf9\u5e74\u6708\u65e5\u7684\u89c4\u5219\u4f7f\u7528\u62ec\u53f7\u5305\u4e86\u8d77\u6765\uff0c\u5728\u8fdb\u884c\u5339\u914d\u65f6\uff0c\u5bf9\u5e94\u88ab\u5339\u914d\u5230\u7684\u6570\u636e\u4f1a\u6dfb\u52a0\u5230\u6570\u7ec4\u4e2d\uff0c\u5728\u4ecb\u7ecd `exec` \u65b9\u6cd5\u65f6\uff0c\u5176\u8fd4\u56de\u7684\u6570\u7ec4\uff0c\u7b2c\u4e00\u4e2a\u5143\u7d20\u8868\u793a\u5339\u914d\u5230\u7684\u5b57\u7b26\u4e32\uff0c\u540e\u9762\u7684\u5143\u7d20\u8868\u793a\u6355\u83b7\u7ec4(\u62ec\u53f7\u5305\u8d77\u6765)\u4e2d\u6355\u83b7\u7684\u5185\u5bb9\u3002\\n\\n#### RegExp\u7684\u5c5e\u6027$1...\\n\\n\u9664\u4e86\u53ef\u4ee5\u6839\u636e\u8fd4\u56de\u7684\u6570\u7ec4 `result` \u6765\u5f97\u5230\u6355\u83b7\u7684\u6570\u636e\uff0c\u8fd8\u53ef\u4ee5\u901a\u8fc7\u5728\u4e0a\u9762\u63d0\u8fc7\u4e00\u5634\u7684 `RegExp` \u6784\u9020\u51fd\u6570\u7684\u5c5e\u6027 `$1, $2, $3 ...` \u7b49\u7b49\u6765\u83b7\u5f97\u6240\u6355\u83b7\u7684\u5185\u5bb9\uff0c\u5176\u4e2d `$1` \u8868\u793a\u7b2c\u4e00\u4e2a\u6355\u83b7\u7ec4\u6240\u5339\u914d\u7684\u5185\u5bb9\uff0c\u5982\u4e0b\\n\\n```javascript\\nlet re = /(\\\\d{4})-(\\\\d{2})-(\\\\d{2})/;\\n\\nlet string = \\"2020-05-27\\";\\nlet result = re.exec(string);\\n\\nconsole.log(\\"year:\\" + RegExp.$1); // year:2020\\nconsole.log(\\"month:\\" + RegExp.$2); // month:05\\nconsole.log(\\"day:\\" + RegExp.$3); // day:27\\n```\\n\\n\u6bcf\u6b21\u5728\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u8fdb\u884c\u5339\u914d\u65f6\uff0c`RegExp` \u4e2d\u7684 `$1, $2, $3 ...` \u4e5f\u4f1a\u76f8\u5e94\u7684\u66f4\u65b0\u3002\\n\\n#### \u62ec\u53f7\u5d4c\u5957\\n\\n\u73b0\u5728\u8003\u8651\u5982\u679c\u62ec\u53f7\u6709\u5d4c\u5957\u7684\u60c5\u51b5\uff0c\u6bd4\u5982\u4e0a\u9762\u65e5\u671f\u683c\u5f0f\u6355\u83b7\u66f4\u7cbe\u51c6\u7684\u8868\u8fbe\u5f0f\\n\\n```javascript\\n/(\\\\d{4})-((0[1-9])|(1[0-2]))-((0[1-9])|([1-2]\\\\d)|(3[0-1]))/\\n```\\n\\n\u4e0a\u9762\u62ec\u53f7\u5d4c\u5957\u7684\u5f88\u590d\u6742\uff0c\u5728\u539f\u7406\u4e0a\uff0c\u88ab\u62ec\u53f7\u5305\u8d77\u6765\u7684\u89c4\u5219\u6240\u5339\u914d\u7684\u5185\u5bb9\u90fd\u4f1a\u88ab\u6355\u83b7\uff0c\u90a3\u4e48\u5d4c\u5957\u5e26\u6765\u7684\u95ee\u9898\u5c31\u662f\uff0c\u6355\u83b7\u7684\u987a\u5e8f\u54ea\u4e2a\u5728\u524d\uff0c\u54ea\u4e2a\u5728\u540e\uff0c\u5176\u5b9e\u4e5f\u5f88\u7b80\u5355\uff0c\u6839\u636e\u5de6\u62ec\u53f7\u6765\uff0c\u6bd4\u5982\u4e0a\u5f0f\u4e2d\u7684\u6355\u83b7\u987a\u5e8f\u4e3a\\n\\n1. `(\\\\d{4})`\\n2. `((0\\\\d)|(1[0-2]))`\\n3. `(0\\\\d)`\\n4. `(1[0-2])`\\n5. `((0[1-9])|([1-2]\\\\d)|(3[0-1]))`\\n6. `(0[1-9])`\\n7. `([1-2]\\\\d)`\\n8. `(3[0-1])`\\n\\n\u6240\u4ee5\u5982\u679c\u4f7f\u7528\u4e0a\u9762\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u8fdb\u884c\u6355\u83b7\u5f97\u5230\u5e74\u6708\u65e5\u7684\u4fe1\u606f\uff0c\u6839\u636e\u5206\u6790\u5e74\u662f\u7b2c\u4e00\u6355\u83b7\u7ec4\uff0c\u6708\u662f\u7b2c\u4e8c\u6355\u83b7\u7ec4\uff0c\u65e5\u662f\u7b2c\u4e94\u6355\u83b7\u7ec4\\n\\n```javascript\\nlet re = /(\\\\d{4})-((0[1-9])|(1[0-2]))-((0[1-9])|([1-2]\\\\d)|(3[0-1]))/;\\nlet date = \\"2020-05-27\\";\\n\\nlet result = re.exec(date);\\n\\nconsole.log(result[1], result[2], result[5]); // 2020 05 27\\n```\\n\\n\u7531\u4e8e\u65e0\u7528\u7684\u6355\u83b7\u7ec4\u592a\u591a\uff0c\u5bfc\u81f4\u60f3\u8981\u63d0\u53d6\u5305\u542b\u4fe1\u606f\u7684\u6355\u83b7\u7ec4\u83b7\u53d6\u56f0\u96be\uff0c\u5176\u5b9e\u4ed4\u7ec6\u89c2\u5bdf\uff0c\u91cc\u9762\u7684\u5927\u591a\u6570\u62ec\u53f7\u4e3b\u8981\u662f\u4e3a\u5206\u652f\u505a\u51c6\u5907\u7684\uff0c\u5bf9\u4e8e\u8fd9\u4e9b\u6355\u83b7\u7ec4\uff0c\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u4e0d\u6355\u83b7\uff0c\u4ec5\u4ec5\u4f5c\u4e3a\u5206\u652f\u4f7f\u7528\uff0c\u6211\u4eec\u5728\u62ec\u53f7\u91cc\u9762\u7684\u524d\u65b9\u52a0\u5165 `?:` \u8868\u793a\u8be5\u62ec\u53f7\u5339\u914d\u7684\u5185\u5bb9\u4e0d\u8fdb\u884c\u6355\u83b7\uff0c\u5982\u4e0b\\n\\n```javascript\\nlet re = /(\\\\d{4})-((?:0[1-9])|(?:1[0-2]))-((?:0[1-9])|(?:[1-2]\\\\d)|(?:3[0-1]))/;\\nlet date = \\"2020-05-27\\";\\n\\nlet result = re.exec(date);\\n\\nconsole.log(result[1], result[2], result[3]); // 2020 05 27\\n```\\n\\n\u5982\u679c\u4f5c\u4e3a\u5206\u652f\u7684\u62ec\u53f7\u592a\u591a\uff0c\u4e3a\u6bcf\u4e00\u4e2a\u5206\u652f\u6dfb\u52a0 `?:` \u4e5f\u6bd4\u8f83\u8d39\u529b\uff0c\u90a3\u4e48\u53ef\u4ee5\u8003\u8651\u7ed9\u5305\u542b\u4fe1\u606f\u7684\u6355\u83b7\u7ec4\u547d\u540d\uff0c\u547d\u540d\u7684\u65b9\u6cd5\u5728\u4e0a\u9762\u6709\u63d0\u5230\u8fc7\\n\\n```javascript\\nlet re = /(?<year>\\\\d{4})-(?<month>(0[1-9])|(1[0-2]))-(?<day>(0[1-9])|([1-2]\\\\d)|(3[0-1]))/;\\nlet date = \\"2020-05-27\\";\\n\\nlet result = re.exec(date);\\nlet groups = result.groups;\\n\\nconsole.log(groups.year, groups.month, groups.day); // 2020 05 27\\n```\\n\\n\u901a\u8fc7\u7ed9\u6355\u83b7\u7ec4\u547d\u540d\uff0c\u53ef\u4ee5\u65b9\u4fbf\u7684\u901a\u8fc7 `groups` \u5bf9\u8c61\u5f97\u5230\u60f3\u8981\u7684\u6570\u636e\u3002\\n\\n### \u53cd\u5411\u5f15\u7528\\n\\n\u73b0\u5728\u518d\u6b21\u8003\u8651\u5339\u914d\u65e5\u671f\uff0c\u5df2\u77e5\u4e0b\u9762\u8fd9\u4e09\u79cd\u65e5\u671f\u683c\u5f0f\u90fd\u53ef\u4ee5\\n\\n```javascript\\n2017-02-12\\n2017 02 12\\n2017/02/12\\n```\\n\\n\u6240\u4ee5\u4f60\u53ef\u80fd\u4f1a\u5199\u51fa\u8fd9\u6837\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\\n\\n```javascript\\n/\\\\d{4}(-| |\\\\/)\\\\d{2}(-| |\\\\/)\\\\d{2}/\\n```\\n\\n\u7ecf\u8fc7\u6d4b\u8bd5\uff0c\u53d1\u73b0\u80fd\u7b26\u5408\u8981\u6c42\\n\\n```javascript\\nconsole.log(re.test(\\"2017-02-17\\")); // true\\nconsole.log(re.test(\\"2017 02 17\\")); // true\\nconsole.log(re.test(\\"2017/02/17\\")); // true\\n```\\n\\n\u4f46\u662f\u4f60\u4f1a\u53d1\u73b0\u4e00\u4e9b\u610f\u5916\u7684\u60c5\u51b5\\n\\n```javascript\\nconsole.log(re.test(\\"2017-02/17\\")); // true\\nconsole.log(re.test(\\"2017-02 17\\")); // true\\nconsole.log(re.test(\\"2017 02-17\\")); // true\\n```\\n\\n\u524d\u540e\u7684\u5206\u9694\u7b26\u4e0d\u4e00\u81f4\u7684\u60c5\u51b5\u4e5f\u80fd\u591f\u5339\u914d\uff0c\u800c\u6211\u4eec\u8981\u6c42\u7684\u662f\u524d\u540e\u7684\u5206\u9694\u7b26\u662f\u4e00\u6837\u7684\uff0c\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5f15\u7528\u5206\u7ec4\uff0c\u4f7f\u5f97\u524d\u9762\u548c\u540e\u9762\u7684\u5206\u9694\u7b26\u662f\u4e00\u6837\u7684\uff0c\u5982\u4e0b\\n\\n```javascript\\nlet re = /\\\\d{4}(-| |\\\\/)\\\\d{2}\\\\1\\\\d{2}/;\\n\\nconsole.log(re.test(\\"2017-02-17\\")); // true\\nconsole.log(re.test(\\"2017 02 17\\")); // true\\nconsole.log(re.test(\\"2017/02/17\\")); // true\\n\\nconsole.log(re.test(\\"2017-02/17\\")); // false\\nconsole.log(re.test(\\"2017-02 17\\")); // false\\nconsole.log(re.test(\\"2017 02-17\\")); // false\\n```\\n\\n\u6ce8\u610f\u5230\u6211\u4eec\u5bf9\u4e8e\u540e\u9762\u7684\u5206\u7ec4\uff0c\u6211\u4eec\u4f7f\u7528\u4e86 `\\\\1` \u53bb\u8fdb\u884c\u66ff\u4ee3\uff0c`\\\\1` \u7684\u610f\u601d\u5c31\u662f\u4ee3\u8868\u5f15\u7528\u7b2c\u4e00\u4e2a\u5206\u7ec4\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u505a\u5230\u8fd9\u4e2a\u5730\u65b9\u4e0e\u524d\u9762\u7684\u5206\u7ec4\u76f8\u540c\u3002\u540c\u7406\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528 `\\\\2` \u8868\u793a\u5f15\u7528\u7b2c\u4e8c\u4e2a\u5206\u7ec4(\u5982\u679c\u6709\u7684\u8bdd\uff0c\u5982\u679c\u6ca1\u6709\u5c31\u5355\u7eaf\u7684\u8868\u793a\u5339\u914d\u5b57\u7b26\u4e32 `\\"\\\\2\\"`)\u3002\\n\\n## \u4f4d\u7f6e\u5339\u914d\\n\\n### \u76f8\u5173\u5143\u5b57\u7b26\\n\\n\u6b63\u5219\u8868\u8fbe\u5f0f\u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u5185\u5bb9\u5c31\u662f\u5173\u4e8e\u4f4d\u7f6e\u7684\u5339\u914d\uff0c\u4e0e\u5b57\u7b26\u5339\u914d\u4e0d\u540c\uff0c\u4f4d\u7f6e\u5339\u914d\u65f6\u5339\u914d\u5b57\u7b26\u95f4\u7684\u4f4d\u7f6e\uff0c\u5e38\u89c1\u6709\u5173\u4f4d\u7f6e\u7684\u5143\u5b57\u7b26\u5982\u4e0b\\n\\n| \u5143\u5b57\u7b26   | \u542b\u4e49                                 |\\n| -------- | ------------------------------------ |\\n| `^`      | \u5f00\u5934\u4f4d\u7f6e                             |\\n| `$`      | \u7ed3\u5c3e\u4f4d\u7f6e                             |\\n| `\\\\b`     | \u5355\u8bcd\u8fb9\u754c\uff0c\u5373 `\\\\w` \u4e0e `\\\\W` \u4e4b\u95f4\u7684\u4f4d\u7f6e |\\n| `(?=p)`  | \u5339\u914d `p` \u6a21\u5f0f\u524d\u9762\u7684\u4f4d\u7f6e\uff0c\u5177\u4f53\u89c1\u4f8b\u5b50  |\\n| `(?<=p)` | \u5339\u914d `p` \u6a21\u5f0f\u540e\u9762\u7684\u4f4d\u7f6e              |\\n\\n```javascript\\nlet string = \\"[JS] hello\\";\\nlet result = string.replace(/^/,\\"#\\");\\nconsole.log(result); // #[JS] hello\\n\\nresult = string.replace(/$/, \\"#\\");\\nconsole.log(result); // [JS] hello#\\n\\nresult = string.replace(/\\\\b/g, \\"#\\"); // \\\\b \u662f \\\\w \u4e0e \\\\W \u4e4b\u95f4\u7684\u4f4d\u7f6e\uff0c\u8868\u793a\u5355\u8bcd\u7684\u8fb9\u754c\\nconsole.log(result); // [#JS#] #hello#\\n\\nresult = string.replace(/(?=hello)/, \\"#\\"); // hello \u524d\u9762\u7684\u4f4d\u7f6e\\nconsole.log(result); // [JS] #hello\\n\\nresult = string.replace(/(?<=hello)/, \\"#\\"); // hello \u540e\u9762\u7684\u4f4d\u7f6e\\nconsole.log(result); // [JS] hello#\\n```\\n\\n\u540c\u7406\uff0c\u4e5f\u6709\u5143\u5b57\u7b26\u8868\u793a\u4e0e\u4e0a\u9762\u76f8\u53cd\u7684\u610f\u4e49\\n\\n| \u5143\u5b57\u7b26   | \u542b\u4e49                                              |\\n| -------- | ------------------------------------------------- |\\n| `\\\\B`     | \u4e0e `\\\\b` \u76f8\u53cd\uff0c\u8868\u793a\u975e\u5355\u8bcd\u8fb9\u754c                      |\\n| `(?!p)`  | \u4e0e `(?=p)` \u76f8\u53cd\uff0c\u8868\u793a\u4e0d\u662f `p` \u524d\u9762\u4f4d\u7f6e\u7684\u6240\u6709\u4f4d\u7f6e  |\\n| `(?<!p)` | \u4e0e `(?<=p)` \u76f8\u53cd\uff0c\u8868\u793a\u4e0d\u662f `p` \u540e\u9762\u4f4d\u7f6e\u7684\u6240\u6709\u4f4d\u7f6e |\\n\\n```javascript\\nlet string = \\"[JS] hello\\";\\nlet result = string.replace(/\\\\B/g,\\"#\\");\\nconsole.log(result); // #[J#S]# h#e#l#l#o\\n\\nresult = string.replace(/(?!hello)/g, \\"#\\"); // \u4e0d\u662f hello \u524d\u9762\u4f4d\u7f6e\u7684\u6240\u6709\u4f4d\u7f6e\\nconsole.log(result); // #[#J#S#]# h#e#l#l#o#\\n\\nresult = string.replace(/(?<!hello)/g, \\"#\\"); // \u4e0d\u662f hello \u540e\u9762\u4f4d\u7f6e\u7684\u6240\u6709\u4f4d\u7f6e\\nconsole.log(result); // #[#J#S#]# #h#e#l#l#o\\n```\\n\\n### \u5343\u4f4d\u5206\u9694\u7b26\u6848\u4f8b\\n\\n\u73b0\u5728\u6765\u505a\u4e00\u4e2a\u6848\u4f8b\uff0c\u5c06\u6570\u5b57\u8f6c\u5316\u4e3a\u5343\u4f4d\u5206\u9694\u7b26\u8868\u793a\u6cd5\uff0c\u5982 `12345678` \u8f6c\u5316\u4e3a `12,345,678`\uff0c\u6211\u4eec\u9996\u5148\u627e\u5230\u540e\u4e09\u4f4d\u6570\u5b57\u7684\u524d\u9762\u4f4d\u7f6e\uff0c\u7136\u540e\u6dfb\u52a0\u9017\u53f7\uff0c\u5982\u4e0b\\n\\n```javascript\\nlet string = \\"12345678\\";\\nresult = string.replace(/(?=(\\\\d{3})$)/g,\\",\\");\\nconsole.log(result); // 12345,678\\n```\\n\\n\u8fdb\u4e00\u6b65\u5f04\u51fa\u6240\u6709\u7684\u9017\u53f7\\n\\n```javascript\\nresult = string.replace(/(?=(\\\\d{3})+$)/g,\\",\\"); // 12,345,678\\n```\\n\\n\u4f46\u662f\u8fd8\u662f\u6709\u4e00\u4e2a\u5c0f\u5c0f\u95ee\u9898\uff0c\u6d4b\u8bd5\u7684\u6570\u5b57\u4e2a\u6570\u662f\u4e09\u7684\u500d\u6570\u7684\u65f6\u5019\uff0c\u5728\u5f00\u5934\u4e5f\u4f1a\u6dfb\u52a0\u4e00\u4e2a\u9017\u53f7\\n\\n```javascript\\nlet string = \\"123456789\\";\\nresult = string.replace(/(?=(\\\\d{3})+$)/g,\\",\\");\\nconsole.log(result); // ,123,456,789\\n```\\n\\n\u6211\u4eec\u53ef\u4ee5\u4fee\u6539\u6b63\u5219\u8868\u8fbe\u5f0f\u5982\u4e0b\\n\\n```javascript\\nresult = string.replace(/(?=(?!^)(\\\\d{3})+$)/g,\\",\\");\\n```\\n\\n\u5176\u4e2d `(?!^)` \u8868\u793a\u4e0d\u662f\u5f00\u5934\u7684\u4f4d\u7f6e\u3002\u5982\u679c\u5e0c\u671b\u652f\u6301\u66f4\u591a\u7684\u683c\u5f0f\uff0c\u6bd4\u5982 `1234567 12345678` \u8f6c\u6362\u4e3a `1,234,567 12,345,678`\uff0c\u53ea\u8981\u5c06\u4e0a\u9762\u7684\u8868\u8fbe\u5f0f\u4e2d\u7684\u5f00\u5934\uff0c\u7ed3\u5c3e\u66ff\u6362\u4e3a `\\\\b` \u5373\u53ef\\n\\n```javascript\\nlet string = \\"1234567 12345678\\";\\nresult = string.replace(/(?=(?!\\\\b)(\\\\d{3})+\\\\b)/g,\\",\\");\\nconsole.log(result); // 1,234,567 12,345,678\\n```\\n\\n\u8003\u8651\u5230 `(?!\\\\b)` \u5c31\u76f8\u5f53\u4e8e `\\\\B`\uff0c\u6240\u4ee5\u4e0a\u9762\u7684\u8868\u8fbe\u5f0f\u4e5f\u53ef\u7b80\u5199\u5982\u4e0b\\n\\n```javascript\\n/(?=\\\\B(\\\\d{3})+\\\\b)/g\\n```\\n\\n### \u591a\u884c\u6a21\u5f0f\\n\\n\u6b63\u5219\u8868\u8fbe\u5f0f\u6709\u4e09\u4e2a\u5e38\u89c1\u7684\u6807\u5fd7\uff0c\u5206\u522b\u4e3a\u5168\u5c40\u6a21\u5f0f `g`\uff0c\u8868\u793a\u8fdb\u884c\u5168\u5c40\u5339\u914d\uff0c\u5982\u679c\u4e0d\u8bbe\u7f6e\u8be5\u6807\u5fd7\uff0c\u90a3\u4e48\u53ea\u4f1a\u5339\u914d\u4e00\u6b21\uff0c\u5982\u679c\u5b57\u7b26\u4e32\u540e\u9762\u8fd8\u8981\u7b26\u5408\u89c4\u5219\u7684\u5b57\u7b26\u4e32\uff0c\u662f\u4e0d\u4f1a\u88ab\u5339\u914d\u7684\uff0c\u5bf9\u4e8e `exec()` \u65b9\u6cd5\uff0c\u975e\u5168\u5c40\u6a21\u5f0f\u4e0b\u4e0d\u4f1a\u66f4\u6539 `lastIndex`\uff0c\u5373 `lastIndex` \u59cb\u7ec8\u662f `0`\u3002\\n\\n```javascript\\nlet string = \\"hello hello\\";\\n\\nlet re1 = /hello/;\\nlet re2 = /hello/g;\\n\\n// \u975e\u5168\u5c40\u66ff\u6362 \u53ea\u4f1a\u66ff\u6362\u5339\u914d\u5230\u7684\u7b2c\u4e00\u4e2a hello\\nconsole.log(string.replace(re1, \\"#\\")); // # hello\\n// \u5168\u5c40\u66ff\u6362 \u5b57\u7b26\u4e32\u4e2d\u6240\u4ee5\u7684 hello \u90fd\u4f1a\u88ab\u66ff\u6362\\nconsole.log(string.replace(re2, \\"#\\")); // # #\\n```\\n\\n\u7b2c\u4e8c\u6807\u5fd7 `i` \u5f88\u597d\u7406\u89e3\uff0c\u5373\u5ffd\u7565\u5927\u5c0f\u5199\\n\\n```javascript\\nlet re1 = /hello/;\\nlet re2 = /hello/i;\\n\\nlet string = \\"Hello\\";\\n\\n// \u4e0d\u5ffd\u7565\u5927\u5c0f\u5199\\nconsole.log(re1.test(string)); // false\\n// \u5ffd\u7565\u5927\u5c0f\u5199\\nconsole.log(re2.test(string)); // true\\n```\\n\\n\u7b2c\u4e09\u4e2a\u6807\u5fd7 `m` \u8868\u793a\u591a\u884c\u6a21\u5f0f\uff0c\u5b83\u53ea\u4f1a\u5f71\u54cd `^,$`\uff0c\u5982\u679c\u4e0d\u662f\u591a\u884c\u6a21\u5f0f\uff0c\u90a3\u4e48 `^, $` \u5c31\u8868\u793a\u5b57\u7b26\u4e32\u7684\u5f00\u5934\u548c\u7ed3\u5c3e\uff0c\u5982\u679c\u662f\u591a\u884c\u6a21\u5f0f\uff0c\u90a3\u4e48 `^,$` \u5c31\u8868\u793a\u6bcf\u4e00\u884c\u7684\u5f00\u5934\u548c\u7ed3\u5c3e\u3002\\n\\n\u975e\u591a\u884c\u6a21\u5f0f\\n\\n```javascript\\nlet string = \\"I \\\\nlove \\\\njava\\";\\n// \u975e\u591a\u884c ^,$ \u8868\u793a\u5b57\u7b26\u4e32\u7684\u5f00\u5934\u548c\u7ed3\u5c3e\\nconsole.log(string.replace(/^|$/g, \\"#\\"));\\n```\\n\\n\u8f93\u51fa\u5982\u4e0b\\n\\n```\\n#I \\nlove \\njava#\\n```\\n\\n\u591a\u884c\u6a21\u5f0f\\n\\n```javascript\\nlet string = \\"I \\\\nlove \\\\njava\\";\\n// \u591a\u884c\u6a21\u5f0f ^,$ \u8868\u793a\u6bcf\u4e00\u884c\u7684\u5f00\u5934\u548c\u7ed3\u5c3e\\nconsole.log(string.replace(/^|$/gm, \\"#\\"));\\n```\\n\\n\u8f93\u51fa\u5982\u4e0b\\n\\n```\\n#I #\\n#love #\\n#java#\\n```"},{"id":"\u9632\u6296\u4e0e\u8282\u6d41","metadata":{"permalink":"/blog/\u9632\u6296\u4e0e\u8282\u6d41","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2020-04-30-\u9632\u6296\u4e0e\u8282\u6d41.mdx","source":"@site/blog/2020-04-30-\u9632\u6296\u4e0e\u8282\u6d41.mdx","title":"\u9632\u6296\u4e0e\u8282\u6d41","description":"\u9632\u6296\u4e0e\u8282\u6d41\u662f\u4e24\u4e2a\u51fa\u4e8e\u6027\u80fd\u8003\u8651\u63d0\u51fa\u7684\u6982\u5ff5\uff0c\u5982\u679c\u5728\u77ed\u65f6\u95f4\u5185\u591a\u6b21\u89e6\u53d1\u540c\u4e00\u51fd\u6570\uff0c\u53ef\u80fd\u4f1a\u4ea7\u751f\u9875\u9762\u7684\u5361\u987f\uff0c\u4ee5\u53ca\u6027\u80fd\u7684\u964d\u4f4e\uff0c\u9488\u5bf9\u8fd9\u79cd\u60c5\u51b5\uff0c\u63d0\u51fa\u4e86\u9632\u6296\u4e0e\u8282\u6d41\u4e24\u4e2a\u89e3\u51b3\u65b9\u6848\u3002","date":"2020-04-30T00:00:00.000Z","formattedDate":"2020\u5e744\u670830\u65e5","tags":[{"label":"\u9632\u6296","permalink":"/blog/tags/\u9632\u6296"},{"label":"\u8282\u6d41","permalink":"/blog/tags/\u8282\u6d41"}],"readingTime":4.02,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"slug":"\u9632\u6296\u4e0e\u8282\u6d41","authors":"xiongtao","tags":["\u9632\u6296","\u8282\u6d41"]},"prevItem":{"title":"\u6b63\u5219\u8868\u8fbe\u5f0f","permalink":"/blog/\u6b63\u5219\u8868\u8fbe\u5f0f"},"nextItem":{"title":"Ajax\u8de8\u57df","permalink":"/blog/Ajax\u8de8\u57df"}},"content":"\u9632\u6296\u4e0e\u8282\u6d41\u662f\u4e24\u4e2a\u51fa\u4e8e\u6027\u80fd\u8003\u8651\u63d0\u51fa\u7684\u6982\u5ff5\uff0c\u5982\u679c\u5728\u77ed\u65f6\u95f4\u5185\u591a\u6b21\u89e6\u53d1\u540c\u4e00\u51fd\u6570\uff0c\u53ef\u80fd\u4f1a\u4ea7\u751f\u9875\u9762\u7684\u5361\u987f\uff0c\u4ee5\u53ca\u6027\u80fd\u7684\u964d\u4f4e\uff0c\u9488\u5bf9\u8fd9\u79cd\u60c5\u51b5\uff0c\u63d0\u51fa\u4e86\u9632\u6296\u4e0e\u8282\u6d41\u4e24\u4e2a\u89e3\u51b3\u65b9\u6848\u3002\\n\\n## \u9632\u6296\u4e0e\u8282\u6d41\u7684\u6982\u5ff5\\n\\n\u4e3a\u4e86\u89e3\u91ca\u5982\u4e0a\u7684\u4e24\u4e2a\u6982\u5ff5\uff0c\u6211\u4eec\u4ee5\u4e00\u4e2a\u4f8b\u5b50\u5f00\u59cb\u3002\u6709\u4e00\u4e2a\u641c\u7d22\u6846\uff0c\u5f53\u7528\u6237\u8f93\u5165\u641c\u7d22\u5185\u5bb9\u65f6\uff0c\u4f1a\u540c\u65f6\u5411\u540e\u7aef\u53d1\u8d77\u8bf7\u6c42\uff0c\u7ed9\u51fa\u76f8\u8fd1\u7684\u8bcd\u6761\u4ee5\u7ed9\u7528\u6237\u63d0\u793a\\n\\n<image src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting2@master/20210430214859.png\\" style={{ zoom: \'50%\'}} />\\n\\n\u5982\u679c\u5f53\u6bcf\u6b21\u7528\u6237\u8f93\u5165\u4e00\u4e2a\u5b57\u7b26\u90fd\u5411\u90fd\u7aef\u53d1\u8d77\u4e00\u4e2a\u8bf7\u6c42\uff0c\u90a3\u4e48\u53d1\u8d77\u8bf7\u6c42\u7684\u6b21\u6570\u5c31\u592a\u9891\u7e41\u4e86\uff0c\u8fd9\u65f6\u6709\u4e24\u79cd\u7b56\u7565\uff1a\\n\\n1. \u5f53\u7528\u6237\u505c\u6b62\u8f93\u5165\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u4f8b\u5982 500ms\uff0c\u6211\u4eec\u5411\u540e\u7aef\u53d1\u8d77\u4e00\u4e2a\u8bf7\u6c42\\n2. \u6bcf\u9694\u56fa\u5b9a\u7684\u65f6\u95f4\u5411\u540e\u7aef\u53d1\u8d77\u4e00\u4e2a\u8bf7\u6c42\\n\\n\u7b2c\u4e00\u79cd\u7b56\u7565\u6211\u4eec\u53eb\u505a\u9632\u6296\uff0c\u7b2c\u4e8c\u79cd\u7b56\u7565\u6211\u4eec\u79f0\u4e3a\u8282\u6d41\u3002\\n\\n\u6709\u4e00\u4e2a\u5f62\u8c61\u7684\u6bd4\u55bb\uff0c\u4ee5\u516c\u4ea4\u8f66\u53d1\u8f66\u4e3a\u4f8b\uff0c\u6709\u4e24\u79cd\u53d1\u8f66\u65b9\u6848\uff1a\\n\\n1. \u5f53\u4e58\u5ba2\u4e0a\u8f66\u540e\uff0c\u5982\u679c\u7ecf\u8fc7\u4e00\u6bb5\u65f6\u95f4\u6ca1\u6709\u4e58\u5ba2\u4e0a\u8f66\u4e86\uff0c\u5c31\u53d1\u8f66\\n2. \u53d1\u8f66\u65f6\u95f4\u56fa\u5b9a\uff0c\u6bcf\u9694\u4e00\u6bb5\u65f6\u95f4\u53d1\u4e00\u6b21\u8f66\\n\\n\u6211\u4eec\u5c06\u53d1\u8f66\u6bd4\u55bb\u4e3a\u5411\u540e\u7aef\u53d1\u8d77\u4e00\u4e2a\u8bf7\u6c42\uff0c\u90a3\u4e48\u8fd9\u4e24\u79cd\u53d1\u8f66\u7684\u7b56\u7565\u5c31\u5206\u522b\u5bf9\u5e94\u4e3a\u9632\u6296\u548c\u8282\u6d41\u3002\\n\\n\x3c!--truncate--\x3e\\n\\n## \u9632\u6296\u5b9e\u73b0\\n\\n\u6211\u4eec\u8981\u5b9e\u73b0\u4e00\u4e2a `debounce` \u51fd\u6570\uff0c\u8be5\u51fd\u6570\u63a5\u6536\u4e00\u4e2a\u51fd\u6570\u4ee5\u53ca\u65f6\u95f4\uff0c\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\uff0c`debounce` \u51fd\u6570\u7684\u4f5c\u7528\u5c31\u662f\u5c06\u4e00\u4e2a\u666e\u901a\u7684\u51fd\u6570\u53d8\u4e3a\u9632\u6296\u7684\u51fd\u6570\uff0c\u5373\u591a\u6b21\u8c03\u7528\u8be5\u51fd\u6570\uff0c\u53ea\u6709\u7ecf\u8fc7\u6307\u5b9a\u65f6\u95f4\u540e\uff0c\u51fd\u6570\u624d\u4f1a\u89e6\u53d1**\u4e00\u6b21**\\n\\n```javascript\\nconst debounce = (fn, time) => {\\n    let timerId\\n\\n    return function(...args) {\\n        clearTimeout(timerId)\\n        timerId = setTimeout(() => {\\n            fn.apply(this, args)\\n        }, time)\\n    }\\n}\\n```\\n\\n\u4e0a\u9762\u6709\u51e0\u4e2a\u6ce8\u610f\u4e8b\u9879\uff1a\\n\\n- `timerId` \u8981\u653e\u5728\u8fd4\u56de\u7684\u51fd\u6570\u4e4b\u5916\uff0c\u5f62\u6210\u95ed\u5305\uff0c\u4ee5\u786e\u4fdd\u6bcf\u6b21\u8c03\u7528\u51fd\u6570\u65f6\u8bbf\u95ee\u7684\u662f\u540c\u4e00\u4e2a `timerId`\\n\\n- \u8fd4\u56de\u7684\u51fd\u6570\u4e0d\u8981\u5199\u6210\u7bad\u5934\u51fd\u6570\u7684\u5f62\u5f0f\\n\\n  ```javascript\\n  // \u4e0d\u8981\u5199\u6210\u8fd9\u6837\\n  return (...args) => {\\n      \\n  }\\n  ```\\n\\n  \u56e0\u4e3a\u8fd9\u6837\u4f1a\u4e22\u5931 `this`\\n\\n- \u6700\u540e\u8981\u901a\u8fc7 `apply` \u65b9\u6cd5\u5c06 `this` \u4f20\u5165\\n\\n## \u8282\u6d41\u5b9e\u73b0\\n\\n\u6211\u4eec\u8981\u5b9e\u73b0\u4e00\u4e2a `throttle` \u51fd\u6570\uff0c\u8be5\u51fd\u6570\u7684\u4f5c\u7528\u662f\u5c06\u4e00\u4e2a\u666e\u901a\u51fd\u6570\u8f6c\u5316\u4e3a\u8282\u6d41\u51fd\u6570\uff0c\u4e5f\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u51fd\u6570\uff0c\u7b2c\u4e8c\u4e2a\u51fd\u6570\u4e3a\u65f6\u95f4\uff0c\u5f53\u591a\u6b21\u8c03\u7528\u8be5\u51fd\u6570\uff0c\u5728\u4e00\u6bb5\u65f6\u95f4\u5185\u53ea\u80fd\u89e6\u53d1\u4e00\u6b21\\n\\n```javascript\\nconst throttle = (fn, time) => {\\n    let pre = 0;\\n\\n    return function(...args) {\\n        let now = Date.now();\\n        if (now - pre > time) {\\n            fn.apply(this, args);\\n            pre = now;\\n        }\\n    }\\n}\\n```\\n\\n`pre` \u8868\u793a\u4e0a\u4e00\u6b21\u6267\u884c\u7684\u65f6\u95f4\uff0c\u9ed8\u8ba4\u503c\u4e3a `0`\uff0c\u8fd9\u6837\u7b2c\u4e00\u6b21\u8c03\u7528\u8be5\u51fd\u6570\u65f6\u4f1a\u7acb\u5373\u6267\u884c\u8be5\u51fd\u6570\u3002\u6bcf\u6b21\u6267\u884c\u51fd\u6570\u65f6\uff0c\u5224\u65ad\u8ddd\u4e0a\u6b21\u6267\u884c\u5df2\u7ecf\u7ecf\u8fc7\u7684\u65f6\u95f4 `Date.now() - start` \u662f\u5426\u5927\u4e8e\u8bbe\u5b9a\u7684\u65f6\u95f4\uff0c\u5927\u4e8e\u5219\u6267\u884c\uff0c\u5c0f\u4e8e\u5219\u4e0d\u6267\u884c\uff0c\u4ee5\u8fbe\u5230\u8282\u6d41\u7684\u76ee\u7684\uff0c\u6267\u884c\u51fd\u6570\u540e\uff0c\u8bbe\u7f6e `pre` \u4e3a\u5f53\u524d\u51fd\u6570\u6267\u884c\u65f6\u7684\u65f6\u523b\u3002\\n\\n:::note note\\n\\n\u8fd4\u56de\u7684\u51fd\u6570\u4e0d\u80fd\u5199\u4e3a\u7bad\u5934\u51fd\u6570\uff0c\u540c\u6837\u662f\u56e0\u4e3a\u4f1a\u4e22\u5931 `this`\u3002\\n\\n:::"},{"id":"Ajax\u8de8\u57df","metadata":{"permalink":"/blog/Ajax\u8de8\u57df","editUrl":"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2020-04-22-Ajax\u8de8\u57df.mdx","source":"@site/blog/2020-04-22-Ajax\u8de8\u57df.mdx","title":"Ajax\u8de8\u57df","description":"\u540c\u6e90\u7b56\u7565","date":"2020-04-22T00:00:00.000Z","formattedDate":"2020\u5e744\u670822\u65e5","tags":[{"label":"Ajax","permalink":"/blog/tags/ajax"},{"label":"CROS","permalink":"/blog/tags/cros"},{"label":"JSONP","permalink":"/blog/tags/jsonp"}],"readingTime":12.075,"hasTruncateMarker":true,"authors":[{"name":"\u718a\u6ed4","title":"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7","url":"https://github.com/LastKnightCoder","imageURL":"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp","key":"xiongtao"}],"frontMatter":{"slug":"Ajax\u8de8\u57df","tags":["Ajax","CROS","JSONP"],"authors":"xiongtao"},"prevItem":{"title":"\u9632\u6296\u4e0e\u8282\u6d41","permalink":"/blog/\u9632\u6296\u4e0e\u8282\u6d41"}},"content":"## \u540c\u6e90\u7b56\u7565\\n\\n\u4ec0\u4e48\u662f\u540c\u6e90\u7b56\u7565\uff1a\u540c `domain`(\u6216`IP`)\uff0c\u540c\u7aef\u53e3\uff0c\u540c\u534f\u8bae\u89c6\u4e3a\u540c\u4e00\u4e2a\u57df\uff0c\u4e00\u4e2a\u57df\u5185\u7684\u811a\u672c\u4ec5\u4ec5\u5177\u6709\u672c\u57df\u5185\u7684\u6743\u9650\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u672c\u57df\u811a\u672c\u53ea\u80fd\u8bfb\u5199\u672c\u57df\u5185\u7684\u8d44\u6e90\uff0c\u800c\u65e0\u6cd5\u8bbf\u95ee\u5176\u5b83\u57df\u7684\u8d44\u6e90\uff0c\u8fd9\u79cd\u5b89\u5168\u9650\u5236\u79f0\u4e3a\u540c\u6e90\u7b56\u7565\u3002\u6211\u4eec\u770b\u51e0\u4e2a\u4f8b\u5b50\u5224\u65ad\u4e24\u4e2a\u94fe\u63a5\u662f\u5426\u662f\u540c\u6e90\\n\\n| `url1`                       | `url2`                       | \u662f\u5426\u540c\u6e90 | \u539f\u56e0                             |\\n| ---------------------------- | ---------------------------- | -------- | -------------------------------- |\\n| http://example.com:8080      | http://example.com:80        | \u5426       | \u7aef\u53e3\u4e0d\u540c                         |\\n| http://example.com:8080      | https://example.com:8080     | \u5426       | \u534f\u8bae\u4e0d\u540c                         |\\n| http://www.baidu.com         | http://www.taobao.com        | \u5426       | \u57df\u540d\u4e0d\u540c                         |\\n| http://127.0.0.1:8080        | http://localhost:8080        | \u5426       | \u57df\u540d\u4e0e\u57df\u540d\u5bf9\u5e94\u7684IP\u5730\u5740\u4e0d\u540c\u6e90     |\\n| http://example.com:8000/a.js | http://example.com:8000/b.js | \u662f       | \u534f\u8bae\uff0c\u57df\u540d\uff0c\u7aef\u53e3\u76f8\u540c\uff0c\u5b50\u57df\u540d\u4e0d\u540c |\\n\\n\x3c!--truncate--\x3e\\n\\n\u6211\u4eec\u9996\u5148\u542f\u52a8\u4e00\u4e2a `Node` \u7a0b\u5e8f\u4f5c\u4e3a\u670d\u52a1\u7aef\uff0c\u542f\u52a8\u5728\u672c\u5730\u7684 `4000` \u7aef\u53e3\uff0c\u5982\u4e0bjjjjj\\n\\n```javascript\\nconst http = require(\'http\');\\n\\nconst server = http.createServer();\\n\\nserver.on(\'request\', function(req, res) {\\n    res.end(\'hello world\');\\n})\\n\\nserver.listen(4000, function() {\\n    console.log(\'\u670d\u52a1\u542f\u52a8\u57284000\u7aef\u53e3...\');\\n})\\n```\\n\\n\u73b0\u5728\u6211\u4eec\u540c\u65f6\u5728\u672c\u5730\u7684 `5501` \u7aef\u53e3\u542f\u52a8\u4e00\u4e2a\u9759\u6001\u670d\u52a1\u5668\u663e\u793a\u7f51\u9875\uff0c\u5728\u7f51\u9875\u4e2d\u6211\u4eec\u53d1\u8d77\u4e00\u4e2a `ajax` \u8bf7\u6c42\uff0c\u5411\u672c\u5730\u7684 `4000` \u7aef\u53e3\u8bf7\u6c42\u6570\u636e\uff0c\u5373\u6211\u4eec\u521a\u521a\u642d\u7684 Node \u7a0b\u5e8f\\n\\n```javascript\\nconst xhr = new XMLHttpRequest();\\nxhr.onreadystatechange = function () { \\n    if (xhr.readyState == 4 && xhr.status == 200) {\\n        console.log(xhr.responseText);\\n    } \\n }\\n xhr.onerror = function() {\\n     console.error(\'\u51fa\u9519\u4e86\')\\n }\\nxhr.open(\'get\', \'http://127.0.0.1:4000\');\\nxhr.send(null);\\n```\\n\\n\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u6253\u5f00\u63a7\u5236\u53f0\uff0c\u53d1\u73b0\u7ed9\u51fa\u8fd9\u6837\u7684\u9519\u8bef\u4fe1\u606f\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/202204211942172022-04-21-19-42-19.png\\" style={{ zoom: \'50%\'}}/>\\n\\n\u56e0\u4e3a\u7f51\u9875\u7684\u5730\u5740 `http://127.0.0.1:5501` \u4e0e\u670d\u52a1\u5668\u7684\u5730\u5740 `http://127.0.0.1:4000` \u5b83\u4eec\u7684\u57df\u540d\u662f\u4e0d\u540c\u7684\uff0c\u6240\u4ee5\u5b83\u4eec\u662f\u4e0d\u540c\u6e90\u7684\uff0c\u6240\u4ee5\u8fd9\u4e2a\u8bf7\u6c42\u662f\u8de8\u57df\u7684\u8bf7\u6c42\uff0c\u800c\u6d4f\u89c8\u5668\u662f\u4e0d\u5141\u8bb8\u8de8\u57df\u8bf7\u6c42\u7684\u3002\u90a3\u4e48\u6d4f\u89c8\u5668\u4e3a\u4ec0\u4e48\u4f1a\u63d0\u51fa\u540c\u6e90\u7b56\u7565\uff0c\u8fd9\u662f\u51fa\u4e8e\u5b89\u5168\u7684\u8003\u8651\u3002\u540c\u6e90\u7b56\u7565\u5305\u62ec\u4e24\u79cd\uff1a\\n\\n1. `DOM` \u540c\u6e90\u7b56\u7565\uff1a\u7981\u6b62\u5bf9\u4e0d\u540c\u6e90\u9875\u9762 `DOM` \u8fdb\u884c\u64cd\u4f5c\uff0c\u8fd9\u91cc\u4e3b\u8981\u573a\u666f\u662f `iframe` \u8de8\u57df\u7684\u60c5\u51b5\uff0c\u4e0d\u540c\u57df\u540d\u7684 `iframe` \u662f\u9650\u5236\u4e92\u76f8\u8bbf\u95ee\u7684\\n2. `XMLHttpRequest` \u540c\u6e90\u7b56\u7565\uff1a\u7981\u6b62\u4f7f\u7528 `xhr` \u5bf9\u8c61\u5411\u4e0d\u540c\u6e90\u7684\u670d\u52a1\u5668\u5730\u5740\u53d1\u8d77 `HTTP` \u8bf7\u6c42\\n\\n\u5728\u8fd9\u91cc\u6211\u4eec\u53ea\u5173\u6ce8 `ajax` \u8de8\u57df\uff0c\u6211\u4eec\u6765\u770b\u4e00\u4e0b\u5982\u679c\u6ca1\u6709\u540c\u6e90\u7b56\u7565\u4f1a\u6709\u4ec0\u4e48\u5371\u5bb3\uff1a\\n\\n1. \u7528\u6237\u767b\u5f55\u4e86\u81ea\u5df1\u7684\u94f6\u884c\u9875\u9762 http://mybank.com\uff0chttp://mybank.com \u5411\u7528\u6237\u7684 `cookie` \u4e2d\u6dfb\u52a0\u7528\u6237\u6807\u8bc6\\n2. \u7528\u6237\u6d4f\u89c8\u4e86\u6076\u610f\u9875\u9762 http://evil.com\uff0c\u6267\u884c\u4e86\u9875\u9762\u4e2d\u7684\u6076\u610f `AJAX` \u8bf7\u6c42\u4ee3\u7801\\n3. http://evil.com \u5411 http://mybank.com \u53d1\u8d77 `AJAX HTTP` \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f1a\u9ed8\u8ba4\u628a http://mybank.com \u5bf9\u5e94 `cookie` \u4e5f\u540c\u65f6\u53d1\u9001\u8fc7\u53bb\\n4. \u94f6\u884c\u9875\u9762\u4ece\u53d1\u9001\u7684 `cookie` \u4e2d\u63d0\u53d6\u7528\u6237\u6807\u8bc6\uff0c\u9a8c\u8bc1\u7528\u6237\u65e0\u8bef\uff0c`response` \u4e2d\u8fd4\u56de\u8bf7\u6c42\u6570\u636e\uff0c\u6b64\u65f6\u6570\u636e\u5c31\u6cc4\u9732\u4e86\\n5. \u800c\u4e14\u7531\u4e8e `Ajax` \u5728\u540e\u53f0\u6267\u884c\uff0c\u7528\u6237\u65e0\u6cd5\u611f\u77e5\u8fd9\u4e00\u8fc7\u7a0b\\n\\n\u6240\u4ee5\u6709\u4e86\u540c\u6e90\u7b56\u7565\u6211\u4eec\u624d\u80fd\u591f\u5b89\u5168\u7684\u4e0a\u7f51\uff0c\u4f46\u662f\u5f88\u591a\u65f6\u5019\u6211\u4eec\u8fd8\u662f\u6709\u8de8\u57df\u7684\u9700\u6c42\u7684\uff0c\u5e76\u4e14\u73b0\u5728\u968f\u7740\u524d\u540e\u7aef\u5206\u79bb\u7684\u6d41\u884c\uff0c\u524d\u7aef\u4e0e\u540e\u7aef\u7684\u4e0d\u540c\u6e90\u662f\u5f88\u6709\u53ef\u80fd\uff0c\u6240\u4ee5\u8feb\u5207\u9700\u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u4e0b\u9762\u5c31\u4ecb\u7ecd\u4e24\u79cd\u8de8\u57df\u7684\u65b9\u6cd5\u3002\\n\\n## JSONP\\n\\n\u540c\u6e90\u7b56\u7565\u63d0\u5347\u4e86 `Web` \u524d\u7aef\u7684\u5b89\u5168\u6027\uff0c\u4f46\u727a\u7272\u4e86 `Web` \u62d3\u5c55\u4e0a\u7684\u7075\u6d3b\u6027\u3002\u8bbe\u60f3\u82e5\u628a `html`\u3001`js`\u3001`css`\u3001`flash`\u3001`image` \u7b49\u6587\u4ef6\u5168\u90e8\u5e03\u7f6e\u5728\u4e00\u53f0\u670d\u52a1\u5668\u4e0a\uff0c\u5c0f\u7f51\u7ad9\u8fd9\u6837\u51d1\u6d3b\u8fd8\u884c\uff0c\u5927\u4e2d\u7f51\u7ad9\u5982\u679c\u8fd9\u6837\u505a\u670d\u52a1\u5668\u6839\u672c\u53d7\u4e0d\u4e86\u7684\u3002\u6240\u4ee5\uff0c**\u73b0\u4ee3\u6d4f\u89c8\u5668\u5728\u5b89\u5168\u6027\u548c\u53ef\u7528\u6027\u4e4b\u95f4\u9009\u62e9\u4e86\u4e00\u4e2a\u5e73\u8861\u70b9\u3002\u5728\u9075\u5faa\u540c\u6e90\u7b56\u7565\u7684\u57fa\u7840\u4e0a\uff0c\u9009\u62e9\u6027\u5730\u4e3a\u540c\u6e90\u7b56\u7565\u5f00\u653e\u4e86\u540e\u95e8\uff0c** \u4f8b\u5982 `img` `script` `style` \u7b49\u6807\u7b7e\uff0c\u90fd\u5141\u8bb8\u57ae\u57df\u5f15\u7528\u8d44\u6e90\uff0c\u4e25\u683c\u8bf4\u8fd9\u90fd\u662f\u4e0d\u7b26\u5408\u540c\u6e90\u8981\u6c42\u7684\u3002\\n\\n\u6b63\u662f\u5229\u7528 `script` \u7b49\u6807\u7b7e\u5f15\u7528\u7684\u8d44\u6e90\u6ca1\u6709\u540c\u6e90\u7b56\u7565\u7684\u9650\u5236\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 `script` \u5411\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\uff0c\u800c\u670d\u52a1\u5668\u8fd4\u56de\u4e00\u4e2a\u56de\u8c03\uff0c\u5c06\u6570\u636e\u4f5c\u4e3a\u53c2\u6570\u8fd4\u56de\uff0c\u53ef\u80fd\u4f60\u73b0\u5728\u4e0d\u80fd\u660e\u767d\u662f\u4ec0\u4e48\u610f\u601d\uff0c\u770b\u4e0b\u9762\u7684\u4ee3\u7801\uff0c\u6211\u4eec\u5728\u9875\u9762\u4e2d\u6dfb\u52a0\u4e0b\u9762\u7684\u5185\u5bb9\\n\\n```html\\n<script>\\n    function getData(data) {\\n        console.log(data);\\n    }\\n    // \u521b\u5efa\u4e00\u4e2a script \u6807\u7b7e\u7528\u4ee5\u8bf7\u6c42\u6570\u636e\\n    let scriptElement = document.createElement(\'script\');\\n    // \u8bbe\u7f6e\u8bf7\u6c42\u7684\u5730\u5740 \u5e76\u4e14\u8bbe\u7f6e\u4e86\u56de\u8c03\u51fd\u6570\\n    scriptElement.src = \'http://127.0.0.1:4000?callback=getData\';\\n    // \u8fd9\u4e00\u6b65\u5f88\u91cd\u8981\uff0c\u4e0d\u8bbe\u7f6e\u7684\u8bdd\u6d4f\u89c8\u5668\u4f1a\u62a5\u9519 Uncaught SyntaxError: Unexpected identifier\\n    scriptElement.setAttribute(\'type\', \'text/javascript\');\\n    // \u5c06\u8fd9\u4e2a script \u6807\u7b7e\u6dfb\u52a0\u5230 body \u4e2d\\n    document.getElementsByTagName(\'body\')[0].appendChild(scriptElement);\\n<\/script>\\n```\\n\\nNode \u670d\u52a1\u7aef\u7684\u4ee3\u7801\\n\\n```javascript\\nconst http = require(\'http\');\\nconst querystring = require(\'querystring\');\\n\\nconst server = http.createServer();\\n\\nserver.on(\'request\', function(req, res) {\\n    let qs = querystring.parse(req.url.split(\'?\')[1]); // \u89e3\u6790\u8bf7\u6c42\u53c2\u6570\\n    \\n    let data = \\"Hello World\\"; // \u8fd4\u56de\u7684\u6570\u636e\\n    \\n    // \u4e00\u5b9a\u8981\u5728 ${data} \u4e24\u7aef\u52a0\u4e0a\u53cc\u5f15\u53f7\uff0c\u5426\u5219\u6d4f\u89c8\u5668\u5f97\u5230\u7684\u662f getData(Hello World)\u4f1a\u62a5\u9519\\n    res.end(`${qs.callback}(\\"${data}\\")`); // \u5373getData(data)\\n})\\n\\nserver.listen(4000, function() {\\n    console.log(\'\u670d\u52a1\u542f\u52a8\u57284000\u7aef\u53e3...\');\\n})\\n```\\n\\n\u7ed3\u679c\u5982\u4e0b\\n\\n\\n<img src=\\"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting3@master/202204211943002022-04-21-19-43-01.png\\" style={{ zoom: \'50%\'}}/>\\n\\n\u6211\u6765\u7406\u4e00\u4e0b\u4e0a\u9762\u7684\u6b65\u9aa4\\n\\n1. \u9996\u5148\u521b\u5efa\u4e86\u4e00\u4e2a\u51fd\u6570 `getData`\uff0c\u8be5\u51fd\u6570\u7684\u4f5c\u7528\u662f\u7528\u6765\u5904\u7406\u6570\u636e\u7684\uff0c\u63a5\u6536\u7684\u90a3\u4e2a\u53c2\u6570\u5c31\u662f\u6570\u636e\\n\\n   ```javascript\\n   function getData(data) {\\n       console.log(data);\\n   }\\n   ```\\n\\n2. \u521b\u5efa\u4e00\u4e2a `script` \u6807\u7b7e\uff0c\u5e76\u4e14\u8bbe\u7f6e\u4e86\u8bf7\u6c42\u7684\u5730\u5740\uff0c\u4ee5\u53ca\u5c06\u5904\u7406\u6570\u636e\u51fd\u6570\u7684\u540d\u79f0\u5373 `getData` \u4f5c\u4e3a\u53c2\u6570\u4f20\u5165\\n\\n   ```javascript\\n   script.src = \'http://127.0.0.1:4000?callback=getData\';\\n   ```\\n\\n3. \u670d\u52a1\u5668\u63a5\u5230\u8bf7\u6c42\uff0c\u5c06\u8981\u8fd4\u56de\u7684\u6570\u636e\u4f5c\u4e3a\u4f20\u5165\u7684\u56de\u8c03\u51fd\u6570\u7684\u53c2\u6570\u4f20\u5165\\n\\n   ```javascript\\n   res.end(`${qs.callback}(\\"${data}\\")`); // \u5373getData(data)\\n   ```\\n\\n4. `script` \u6807\u7b7e\u5f97\u5230\u670d\u52a1\u5668\u8fd4\u56de\u7684\u6570\u636e\uff0c\u5373 `getData(\\"Hello World\\")`\uff0c\u7136\u540e\u6267\u884c\uff0c\u8fd9\u6837\u6570\u636e `Hello World` \u5c31\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9\u4e86 `getData()`\\n\\n:::note note\\n\\n\u4f18\u70b9\uff1a\\n\\n- \u4f7f\u7528\u7b80\u4fbf\uff0c\u6ca1\u6709\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u662f\u76ee\u524d\u6700\u6d41\u884c\u7684\u8de8\u57df\u65b9\u6cd5\\n\\n\u7f3a\u70b9\uff1a\\n\\n- \u53ea\u652f\u6301 `GET` \u8bf7\u6c42\uff0c\u5e76\u4e14\u4ee3\u7801\u662f\u4ece\u5176\u4ed6\u57df\u5f97\u5230\u7684\uff0c\u4e0d\u6392\u9664\u53ef\u80fd\u6709\u6076\u610f\u4ee3\u7801\uff0c\u6240\u4ee5\u4f7f\u7528\u8be5\u65b9\u6cd5\uff0c\u670d\u52a1\u7aef\u5fc5\u987b\u786e\u4fdd\u503c\u5f97\u4fe1\u4efb\\n- \u8981\u786e\u5b9a `JSONP` \u8bf7\u6c42\u5931\u8d25\u5e76\u4e0d\u5bb9\u6613\\n\\n:::\\n\\n## CORS\\n\\n`CORS`(`Cross-origin resource sharing`\uff0c\u8de8\u57df\u8d44\u6e90\u5171\u4eab) \u662f\u4e00\u4e2a `W3C` \u6807\u51c6\uff0c\u5b9a\u4e49\u4e86\u5728\u5fc5\u987b\u8bbf\u95ee\u8de8\u57df\u8d44\u6e90\u65f6\uff0c\u6d4f\u89c8\u5668\u4e0e\u670d\u52a1\u5668\u5e94\u8be5\u5982\u4f55\u6c9f\u901a\u3002`CORS` \u80cc\u540e\u7684\u57fa\u672c\u601d\u60f3\uff0c\u5c31\u662f\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684 `HTTP` \u5934\u90e8\u8ba9\u6d4f\u89c8\u5668\u4e0e\u670d\u52a1\u5668\u8fdb\u884c\u6c9f\u901a\uff0c\u4ece\u800c\u51b3\u5b9a\u8bf7\u6c42\u6216\u54cd\u5e94\u662f\u5e94\u8be5\u6210\u529f\uff0c\u8fd8\u662f\u5e94\u8be5\u5931\u8d25\u3002`CORS` \u9700\u8981\u6d4f\u89c8\u5668\u548c\u670d\u52a1\u5668\u540c\u65f6\u652f\u6301\u3002\u76ee\u524d\uff0c\u6240\u6709\u6d4f\u89c8\u5668\u90fd\u652f\u6301\u8be5\u529f\u80fd\uff0c`IE` \u6d4f\u89c8\u5668\u4e0d\u80fd\u4f4e\u4e8e `IE10`\u3002\\n\\n\u5bf9\u4e8e\u5f00\u53d1\u8005\u6765\u8bf4\uff0c\u6211\u4eec\u53ea\u8981\u6b63\u5e38\u7684\u53d1\u51fa `ajax` \u8bf7\u6c42\u5373\u53ef\uff0c\u4e0e\u4e4b\u524d\u6ca1\u6709\u4efb\u4f55\u533a\u522b\uff0c\u5982\\n\\n```javascript\\nconst xhr = new XMLHttpRequest();\\nxhr.onreadystatechange = function () { \\n    if (xhr.readyState == 4 && xhr.status == 200) {\\n        console.log(xhr.responseText);\\n    } \\n }\\n xhr.onerror = function() {\\n     console.error(\'\u51fa\u9519\u4e86\')\\n }\\nxhr.open(\'get\', \'http://127.0.0.1:4000\');\\nxhr.send(null);\\n```\\n\\n\u4f46\u662f\u5728\u670d\u52a1\u7aef\uff0c\u6211\u4eec\u8981\u8bbe\u7f6e\u4e00\u4e0b\u4fe1\u8d56\u7684\u8bf7\u6c42\u6765\u6e90\uff0c\u5982\u4e0b\\n\\n```javascript\\nconst http = require(\'http\');\\n\\nconst server = http.createServer();\\n\\nserver.on(\'request\', function(req, res) {\\n    // \u8868\u793a\u6765\u81ea http://127.0.0.1:5501 \u7684\u8bf7\u6c42\u53ef\u4ee5\u62ff\u5230\u6570\u636e\\n    res.setHeader(\'Access-Control-Allow-Origin\', \'http://127.0.0.1:5501\')\\n    res.end(\'hello world\');\\n})\\n\\nserver.listen(4000, function() {\\n    console.log(\'\u670d\u52a1\u542f\u52a8\u57284000\u7aef\u53e3...\');\\n})\\n```\\n\\n\u9664\u4e86\u53ef\u4ee5\u8bbe\u7f6e\u8bf7\u6c42\u6765\u6e90\uff0c\u8fd8\u53ef\u4ee5\u8bbe\u7f6e\u5141\u8bb8\u7684\u65b9\u6cd5\uff0c\u5141\u8bb8\u7684\u5934\u90e8\u7b49\u7b49\\n\\n| \u54cd\u5e94\u5934                       | \u4f5c\u7528                                                 |\\n| ---------------------------- | ---------------------------------------------------- |\\n| Access-Control-Allow-Origin  | \u8bbe\u7f6e\u5141\u8bb8\u7684\u8bf7\u6c42\u6765\u6e90\uff0c\u5982\u679c\u5141\u8bb8\u4efb\u610f\u6765\u6e90\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a `*` |\\n| Access-Control-Allow-Methods | \u5141\u8bb8\u7684\u65b9\u6cd5\uff0c\u591a\u4e2a\u4ee5\u9017\u53f7\u5206\u9694\uff0c\u5982 `GET`, `POST`         |\\n| Access-Control-Allow-Headers | \u5141\u8bb8\u7684\u8bf7\u6c42\u5934\uff0c\u591a\u4e2a\u4ee5\u9017\u53f7\u5206\u9694                         |\\n\\n\u6d4f\u89c8\u5668\u5c06 `CORS` \u8bf7\u6c42\u5206\u4e3a\u4e24\u7c7b\uff0c\u5206\u522b\u4e3a\u7b80\u5355\u8bf7\u6c42\u548c\u975e\u7b80\u5355\u8bf7\u6c42\u3002\u5982\u679c\u6ee1\u8db3\u4ee5\u4e0b\u4e24\u7c7b\u8bf7\u6c42\uff0c\u5c31\u662f\u7b80\u5355\u8bf7\u6c42\\n\\n1. \u8bf7\u6c42\u65b9\u6cd5\u662f\u4ee5\u4e0b\u4e09\u79cd\u65b9\u6cd5\u4e4b\u4e00\uff1a\\n   - `GET`\\n   - `POST`\\n   - `HEAD`\\n2. HTTP\u7684\u5934\u4fe1\u606f\u4e0d\u8d85\u51fa\u4ee5\u4e0b\u51e0\u79cd\u5b57\u6bb5\uff1a\\n   - `Accept`\\n   - `Accept-Language`\\n   - `Content-Language`\\n   - `Last-Event-ID`\\n   - `Content-Type`\uff1a\u53ea\u9650\u4e8e\u4e09\u4e2a\u503c `application/x-www-form-urlencoded`\u3001`multipart/form-data`\u3001`text/plain`\\n\\n\u5982\u679c\u4e0d\u6ee1\u8db3\u4ee5\u4e0a\u7684\u4e24\u5927\u6761\u4ef6\uff0c\u90a3\u4e48\u5c31\u662f\u975e\u7b80\u5355\u8bf7\u6c42\uff0c\u800c\u6d4f\u89c8\u5668\u5bf9\u4e8e\u7b80\u5355\u8bf7\u6c42\u548c\u975e\u7b80\u5355\u8bf7\u6c42\u7684\u5904\u7406\u662f\u4e0d\u4e00\u6837\u7684\u3002\\n\\n**\u7b80\u5355\u8bf7\u6c42**\\n\\n1. \u5728\u8bf7\u6c42\u4e2d\u9700\u8981\u9644\u52a0\u4e00\u4e2a\u989d\u5916\u7684 `Origin` \u5934\u90e8\uff0c\u5176\u4e2d\u5305\u542b\u8bf7\u6c42\u9875\u9762\u7684\u6e90\u4fe1\u606f\uff08\u534f\u8bae\u3001\u57df\u540d\u548c\u7aef\u53e3\uff09\uff0c\u4ee5\u4fbf\u670d\u52a1\u5668\u6839\u636e\u8fd9\u4e2a\u5934\u90e8\u4fe1\u606f\u6765\u51b3\u5b9a\u662f\u5426\u7ed9\u4e88\u54cd\u5e94\u3002\u4f8b\u5982\uff1a`Origin: http://127.0.0.1:5501`\\n\\n2. \u5982\u679c\u670d\u52a1\u5668\u8ba4\u4e3a\u8fd9\u4e2a\u8bf7\u6c42\u53ef\u4ee5\u63a5\u53d7\uff0c\u5c31\u5728 `Access-Control-Allow-Origin` \u5934\u90e8\u4e2d\u56de\u53d1\u76f8\u540c\u7684\u6e90\u4fe1\u606f(\u5982\u679c\u662f\u516c\u5171\u8d44\u6e90\uff0c\u53ef\u4ee5\u56de\u53d1 `*`)\uff0c\u4f8b\u5982\uff1a`Access-Control-Allow-Origin\uff1ahttp://127.0.0.1:5501`\\n\\n3. \u6ca1\u6709\u8fd9\u4e2a\u5934\u90e8\u6216\u8005\u6709\u8fd9\u4e2a\u5934\u90e8\u4f46\u6e90\u4fe1\u606f\u4e0d\u5339\u914d\uff0c\u6d4f\u89c8\u5668\u5c31\u4f1a\u9a73\u56de\u8bf7\u6c42\uff0c\u6ce8\u610f\uff0c\u8bf7\u6c42\u548c\u54cd\u5e94\u90fd\u4e0d\u5305\u542b `cookie` \u4fe1\u606f\\n\\n4. \u5982\u679c\u9700\u8981\u5305\u542b `cookie` \u4fe1\u606f\uff0c`ajax` \u8bf7\u6c42\u9700\u8981\u8bbe\u7f6e `xhr` \u7684\u5c5e\u6027 `withCredentials` \u4e3a `true`\uff0c\u670d\u52a1\u5668\u9700\u8981\u8bbe\u7f6e\u54cd\u5e94\u5934\u90e8 `Access-Control-Allow-Credentials: true`\\n\\n**\u975e\u7b80\u5355\u8bf7\u6c42**\\n\\n\u975e\u7b80\u5355\u8bf7\u6c42\u53ef\u80fd\u5bf9\u670d\u52a1\u5668\u6570\u636e\u4ea7\u751f\u526f\u4f5c\u7528\uff0c\u6d4f\u89c8\u5668\u5fc5\u987b\u9996\u5148\u4f7f\u7528 `OPTIONS` \u65b9\u6cd5\u53d1\u8d77\u4e00\u4e2a\u9884\u68c0\u8bf7\u6c42(`preflight request`)\uff0c\u4ece\u800c\u83b7\u77e5\u670d\u52a1\u7aef\u662f\u5426\u5141\u8bb8\u8be5\u8de8\u57df\u8bf7\u6c42\uff1a\\n\\n- `Origin`\uff1a\u4e0e\u7b80\u5355\u7684\u8bf7\u6c42\u76f8\u540c\\n- `Access-Control-Request-Method`: \u8bf7\u6c42\u81ea\u8eab\u4f7f\u7528\u7684\u65b9\u6cd5\\n- `Access-Control-Request-Headers`: (\u53ef\u9009)\u81ea\u5b9a\u4e49\u7684\u5934\u90e8\u4fe1\u606f\uff0c\u591a\u4e2a\u5934\u90e8\u4ee5\u9017\u53f7\u5206\u9694\\n\\n```http\\nOrigin: http://127.0.0.1:5501\\nAccess-Control-Request-Method: POST\\nAccess-Control-Request-Headers: NCZ\\n```\\n\\n\u53d1\u9001\u8fd9\u4e2a\u8bf7\u6c42\u540e\uff0c\u670d\u52a1\u5668\u53ef\u4ee5\u51b3\u5b9a\u662f\u5426\u5141\u8bb8\u8fd9\u79cd\u7c7b\u578b\u7684\u8bf7\u6c42\uff0c\u4e00\u65e6\u670d\u52a1\u5668\u901a\u8fc7 `Preflight` \u8bf7\u6c42\uff0c\u5141\u8bb8\u8be5\u8bf7\u6c42\u4e4b\u540e\uff0c\u4ee5\u540e\u6bcf\u6b21\u6d4f\u89c8\u5668\u6b63\u5e38\u7684 `CORS` \u8bf7\u6c42\uff0c\u5c31\u90fd\u8ddf\u7b80\u5355\u8bf7\u6c42\u4e00\u6837\u4e86\u3002\\n\\n:::note note\\n\u4f18\u70b9\uff1a\\n\\n- `CORS` \u901a\u4fe1\u4e0e\u540c\u6e90\u7684 `AJAX` \u901a\u4fe1\u6ca1\u6709\u5dee\u522b\uff0c\u4ee3\u7801\u5b8c\u5168\u4e00\u6837\uff0c\u5bb9\u6613\u7ef4\u62a4\\n- \u652f\u6301\u6240\u6709\u7c7b\u578b\u7684 `HTTP` \u8bf7\u6c42\\n\\n\u7f3a\u70b9\uff1a\\n\\n- \u5b58\u5728\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u7279\u522b\u662f `IE10` \u4ee5\u4e0b\u7684\u6d4f\u89c8\u5668\\n- \u7b2c\u4e00\u6b21\u53d1\u9001\u975e\u7b80\u5355\u8bf7\u6c42\u65f6\u4f1a\u591a\u4e00\u6b21\u8bf7\u6c42\\n\\n:::\\n\\n## \u53c2\u8003\u94fe\u63a5\\n\\n- [\u8de8\u57df\u7684\u90a3\u4e9b\u4e8b\u513f](https://zhuanlan.zhihu.com/p/28562290)\\n- [\u6d4f\u89c8\u5668\u540c\u6e90\u7b56\u7565\u53ca\u8de8\u57df\u7684\u89e3\u51b3\u65b9\u6cd5](https://juejin.im/post/5ba1d4fe6fb9a05ce873d4ad)"}]}')}}]);