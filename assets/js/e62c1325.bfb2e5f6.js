"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[6485],{3905:(e,n,t)=>{t.d(n,{Zo:()=>o,kt:()=>k});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var i=a.createContext({}),m=function(e){var n=a.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):p(p({},n),e)),t},o=function(e){var n=m(e.components);return a.createElement(i.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,s=e.originalType,i=e.parentName,o=l(e,["components","mdxType","originalType","parentName"]),d=m(t),k=r,u=d["".concat(i,".").concat(k)]||d[k]||c[k]||s;return t?a.createElement(u,p(p({ref:n},o),{},{components:t})):a.createElement(u,p({ref:n},o))}));function k(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var s=t.length,p=new Array(s);p[0]=d;var l={};for(var i in n)hasOwnProperty.call(n,i)&&(l[i]=n[i]);l.originalType=e,l.mdxType="string"==typeof e?e:r,p[1]=l;for(var m=2;m<s;m++)p[m]=t[m];return a.createElement.apply(null,p)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},5244:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>p,default:()=>c,frontMatter:()=>s,metadata:()=>l,toc:()=>m});var a=t(7462),r=(t(7294),t(3905));const s={alug:"stream",authors:"xiongtao",tags:["Node","Stream"]},p=void 0,l={permalink:"/blog/2021/03/06/Stream",editUrl:"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2021-03-06-Stream.mdx",source:"@site/blog/2021-03-06-Stream.mdx",title:"Stream",description:"\u5f15\u5165 Stream",date:"2021-03-06T00:00:00.000Z",formattedDate:"2021\u5e743\u67086\u65e5",tags:[{label:"Node",permalink:"/blog/tags/node"},{label:"Stream",permalink:"/blog/tags/stream"}],readingTime:20.41,hasTruncateMarker:!0,authors:[{name:"\u718a\u6ed4",title:"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7",url:"https://github.com/LastKnightCoder",imageURL:"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp",key:"xiongtao"}],frontMatter:{alug:"stream",authors:"xiongtao",tags:["Node","Stream"]},prevItem:{title:"EventEmitter",permalink:"/blog/EventEmitter"},nextItem:{title:"Buffer",permalink:"/blog/Buffer"}},i={authorsImageUrls:[void 0]},m=[{value:"\u5f15\u5165 Stream",id:"\u5f15\u5165-stream",level:2},{value:"Stream \u7684\u5206\u7c7b",id:"stream-\u7684\u5206\u7c7b",level:2},{value:"Readable Stream",id:"readable-stream",level:3},{value:"Writable Stream",id:"writable-stream",level:3},{value:"Duplex Stream \u4e0e Transform Stream",id:"duplex-stream-\u4e0e-transform-stream",level:3},{value:"pipe",id:"pipe",level:2},{value:"\u5b9e\u73b0\u6d41",id:"\u5b9e\u73b0\u6d41",level:2},{value:"\u5b9e\u73b0\u53ef\u8bfb\u6d41",id:"\u5b9e\u73b0\u53ef\u8bfb\u6d41",level:3},{value:"\u5b9e\u73b0\u53ef\u5199\u6d41",id:"\u5b9e\u73b0\u53ef\u5199\u6d41",level:3},{value:"\u5b9e\u73b0\u53cc\u5de5\u6d41",id:"\u5b9e\u73b0\u53cc\u5de5\u6d41",level:3},{value:"\u5b9e\u73b0\u8f6c\u6362\u6d41",id:"\u5b9e\u73b0\u8f6c\u6362\u6d41",level:3},{value:"\u53c2\u8003\u6587\u732e",id:"\u53c2\u8003\u6587\u732e",level:2}],o={toc:m};function c(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,a.Z)({},o,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"\u5f15\u5165-stream"},"\u5f15\u5165 Stream"),(0,r.kt)("p",null,"\u5047\u8bbe\u6211\u4eec\u6709\u8fd9\u4e48\u4e00\u4e2a\u9700\u6c42\uff0c\u6211\u4eec\u9700\u8981\u590d\u5236\u4e00\u4e2a\u6587\u4ef6\u4e2d\u7684\u5185\u5bb9\u5230\u53e6\u4e00\u4e2a\u6587\u4ef6\u4e2d\uff0c\u6211\u4eec\u4f1a\u5199\u51fa\u4ee5\u4e0b\u4ee3\u7801"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const fs = require('fs');\nconst path = require('path');\n\nconst copy = (source, target) => {\n    fs.readFile(path.resolve(source), (err, data) => {\n        if(err) {\n            throw new Error(err.toString());\n            return;\n        }\n        fs.writeFile(path.resolve(target), data, (err) => {\n            if(!err) {\n                console.log(\"\u590d\u5236\u6210\u529f\uff01\");\n            }\n        })\n    })\n}\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u7684\u4ee3\u7801\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u5148\u8bfb\u53d6 ",(0,r.kt)("inlineCode",{parentName:"p"},"source")," \u6587\u4ef6\u91cc\u9762\u7684\u5185\u5bb9\uff0c\u7136\u540e\u5c06\u5185\u5bb9\u5199\u5165\u5230 ",(0,r.kt)("inlineCode",{parentName:"p"},"target")," \u6587\u4ef6\u4e2d\u3002\u5b83\u7684\u7279\u70b9\u662f\u9700\u8981\u8bfb\u53d6\u5b8c ",(0,r.kt)("inlineCode",{parentName:"p"},"source")," \u91cc\u9762\u7684",(0,r.kt)("strong",{parentName:"p"},"\u6240\u6709\u5185\u5bb9"),"\uff0c\u7136\u540e\u5c06\u5185\u5bb9\u5199\u5165\u5230 ",(0,r.kt)("inlineCode",{parentName:"p"},"target")," \u4e2d\u3002"),(0,r.kt)("p",null,"\u8fd9\u6837\u505a\u5c31\u6709\u4e00\u4e2a\u7f3a\u70b9\uff0c\u5f53\u6211\u4eec\u8bfb\u53d6\u5927\u6587\u4ef6\u65f6\uff0c\u53ef\u80fd\u4f1a\u53d1\u751f\u5185\u5b58\u4e0d\u591f\u7528\u7684\u60c5\u51b5\uff0c\u56e0\u4e3a\u5b83\u4f1a\u5148\u5c06\u6587\u4ef6\u7684\u6240\u6709\u5185\u5bb9\u90fd\u8bfb\u53d6\u5230\u5185\u5b58\uff1b\u53e6\u5916\u8fd8\u5c31\u662f\u65f6\u95f4\uff0c\u4e00\u6b21\u6027\u8bfb\u53d6\u4e00\u4e2a\u5927\u6587\u4ef6\u5230\u5185\u5b58\uff0c\u662f\u9700\u8981\u6bd4\u8f83\u957f\u7684\u65f6\u95f4\u7684\uff0c\u7528\u6237\u53ef\u80fd\u4f1a\u6709\u5361\u987f\u7684\u611f\u89c9\u3002"),(0,r.kt)("p",null,"\u53e6\u4e00\u79cd\u89e3\u51b3\u529e\u6cd5\u5c31\u662f\u8fb9\u8bfb\u8fb9\u5199\uff0c\u8bfb\u53d6\u90e8\u5206\u6587\u4ef6\u5185\u5bb9\uff0c\u7136\u540e\u5c06\u5185\u5bb9\u5199\u5165\u5230\u65b0\u6587\u4ef6\u4e2d\uff0c\u8fd9\u6837\u5728\u5185\u5b58\u4e2d\u7684\u6570\u636e\u53ea\u662f\u90e8\u5206\u5185\u5bb9\uff0c\u4e0d\u4f1a\u5360\u6709\u592a\u591a\u7684\u5185\u5b58\uff0c\u7531\u4e8e\u662f\u8fb9\u8bfb\u7f16\u5199\uff0c\u7528\u6237\u53ef\u4ee5\u5f88\u5feb\u7684\u5f97\u5230\u54cd\u5e94\uff0c\u63d0\u9ad8\u7528\u6237\u4f53\u9a8c\u3002"),(0,r.kt)("p",null,"\u5728",(0,r.kt)("a",{parentName:"p",href:"https://www.cnblogs.com/vajoy/p/6349817.html"},"\u7f51\u4e0a"),"\u627e\u5230\u4e00\u5e45\u52a8\u56fe\u6765\u5f62\u8c61\u7684\u5c55\u793a\u4f7f\u7528\u6d41\u524d\u540e\u6570\u636e\u7684\u6d41\u52a8\u60c5\u51b5"),(0,r.kt)("img",{src:"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20210305123350.gif"}),(0,r.kt)("img",{src:"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20210305123407.gif"}),(0,r.kt)("p",null,"Node.js \u7ed9\u6211\u4eec\u63d0\u4f9b Stream \u7684 API\uff0c\u5b83\u662f\u4e13\u95e8\u7528\u6765\u5904\u7406\u5927\u6587\u4ef6\u7684\u3002\u56e0\u4e3a\u6570\u636e\u662f\u4e00\u90e8\u5206\u4e00\u90e8\u5206\u7684\u5904\u7406\uff0c\u5c31\u50cf\u662f\u6c34\u6d41\u4e00\u6837\uff0c\u6240\u4ee5\u8fd9\u4e2a\u6a21\u5757\u7684\u540d\u79f0\u5c31\u79f0\u4e3a Stream\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const fs = require('fs');\n\nfunction copy(source, target) {\n    const rs = fs.createReadStream(source);\n    const ws = fs.createWriteStream(target);\n\n    rs.on('data', data => {\n        ws.write(data);\n    });\n\n    rs.on('end', () => {\n        ws.end();\n    });\n}\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u7684\u7ec6\u8282\u5c06\u5728\u540e\u6587\u63ed\u6653\u3002"),(0,r.kt)("h2",{id:"stream-\u7684\u5206\u7c7b"},"Stream \u7684\u5206\u7c7b"),(0,r.kt)("p",null,"Stream \u53ef\u4ee5\u5206\u4e3a\u56db\u7c7b"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Readable\uff1a\u53ef\u8bfb\u6d41\uff0c\u6570\u636e\u7684\u63d0\u4f9b\u8005"),(0,r.kt)("li",{parentName:"ul"},"Writeable\uff1a\u53ef\u5199\u6d41\uff0c\u6570\u636e\u7684\u6d88\u8d39\u8005"),(0,r.kt)("li",{parentName:"ul"},"Duplex\uff1a\u53ef\u5199\u53ef\u8bfb\u6d41(\u53cc\u5de5\u6d41)"),(0,r.kt)("li",{parentName:"ul"},"Transform\uff1a\u662f Duplex \u7684\u7279\u6b8a\u60c5\u51b5\uff0c\u8f6c\u6362\u6d41\uff0c\u5bf9\u8f93\u5165\u7684\u6570\u636e\u8fdb\u884c\u5904\u7406\uff0c\u7136\u540e\u8f93\u51fa")),(0,r.kt)("p",null,"\u53ef\u8bfb\u6d41\u4e0e\u53ef\u5199\u6d41\u662f\u57fa\u7840\uff0c\u5e38\u89c1\u7684\u53ef\u8bfb\u6d41\u4e0e\u53ef\u5199\u6d41\u5982\u4e0b"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u53ef\u8bfb\u6d41"),(0,r.kt)("th",{parentName:"tr",align:null},"\u53ef\u5199\u6d41"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"HTTP Request"),(0,r.kt)("td",{parentName:"tr",align:null},"HTTP Reponse")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"fs read streams"),(0,r.kt)("td",{parentName:"tr",align:null},"fs write streams")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"process.stdin"),(0,r.kt)("td",{parentName:"tr",align:null},"process.stdout")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"TCP sockets"),(0,r.kt)("td",{parentName:"tr",align:null},"TCP sockets")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"zlib streams"),(0,r.kt)("td",{parentName:"tr",align:null},"zlib streams")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"crypto streams"),(0,r.kt)("td",{parentName:"tr",align:null},"crypto streams")))),(0,r.kt)("p",null,"Stream \u662f EventEmitter \u7684\u5b9e\u4f8b\uff0c\u6709\u81ea\u5b9a\u4e49\u7684\u4e8b\u4ef6\u3002"),(0,r.kt)("h3",{id:"readable-stream"},"Readable Stream"),(0,r.kt)("p",null,"\u53ef\u8bfb\u6d41\u6709\u4e24\u4e2a\u6a21\u5f0f\uff0c\u6682\u505c\u6a21\u5f0f\u4e0e\u6d41\u52a8\u6a21\u5f0f\u3002\u5f53\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u6d41\u65f6\uff0c\u5982\u679c\u6211\u4eec\u76d1\u542c\u4e86 ",(0,r.kt)("inlineCode",{parentName:"p"},"readable")," \u4e8b\u4ef6\uff0c\u5b83\u5c31\u4f1a\u6765\u5230\u6682\u505c\u6a21\u5f0f\uff0c\u5728\u6682\u505c\u6a21\u5f0f\u4e0b\uff0c\u5b83\u4f1a\u4e0d\u65ad\u7684\u8bfb\u53d6\u6570\u636e\u5230\u7f13\u51b2\u533a\uff0c\u5f53\u8bfb\u53d6\u5230\u7684\u6570\u636e\u8d85\u8fc7\u9884\u8bbe\u7684\u5927\u5c0f\u65f6\uff0c\u5b83\u7531\u5c5e\u6027 ",(0,r.kt)("inlineCode",{parentName:"p"},"highWaterMark")," \u6307\u5b9a(\u9ed8\u8ba4\u4e3a 64kB)\uff0c\u4fbf\u4f1a\u89e6\u53d1 ",(0,r.kt)("inlineCode",{parentName:"p"},"readable")," \u4e8b\u4ef6\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"readable")," \u4e8b\u4ef6\u7684\u89e6\u53d1\u6709\u4e24\u79cd\u60c5\u51b5\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7f13\u5b58\u533a\u4e2d\u7684\u6570\u636e\u8fbe\u5230 ",(0,r.kt)("inlineCode",{parentName:"li"},"highWaterMark")," \u9884\u8bbe\u7684\u5927\u5c0f"),(0,r.kt)("li",{parentName:"ul"},"\u6570\u636e\u6e90\u7684\u6570\u636e\u5df2\u7ecf\u88ab\u8bfb\u53d6\u5b8c\u6bd5")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const fs = require('fs');\n\nconst rs = fs.createReadStream('a.txt', {\n    highWaterMark: 1 // \u7f13\u5b58\u533a\u6700\u591a\u5b58\u50a8 1 \u5b57\u8282\n});\n\nrs.on('readable', () => {\n    let data;\n    while(data=rs.read()) {\n        console.log(data.toString());\n    }\n})\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u7684\u7a0b\u5e8f\u8bbe\u7f6e ",(0,r.kt)("inlineCode",{parentName:"p"},"highWaterMark")," \u4e3a 1\uff0c\u5373\u6bcf\u6b21\u8bfb\u53d6\u5230\u4e00\u4e2a\u5b57\u8282\u4fbf\u4f1a\u89e6\u53d1 ",(0,r.kt)("inlineCode",{parentName:"p"},"readable")," \u547d\u4ee4\uff0c\u6bcf\u6b21\u5f53\u89e6\u53d1 ",(0,r.kt)("inlineCode",{parentName:"p"},"readable")," \u547d\u4ee4\u65f6\uff0c\u6211\u4eec\u8c03\u7528\u53ef\u8bfb\u6d41\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"read([size])")," \u65b9\u6cd5\u4ece\u7f13\u51b2\u533a\u4e2d\u8bfb\u53d6\u6570\u636e(\u8bfb\u53d6\u5230\u7684\u6570\u636e\u4e3a Buffer)\uff0c\u7136\u540e\u6253\u5370\u5230\u63a7\u5236\u53f0\u3002"),(0,r.kt)("p",null,"\u5f53\u6211\u4eec\u4e3a\u53ef\u8bfb\u6d41\u7ed1\u5b9a ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," \u4e8b\u4ef6\u65f6\uff0c\u53ef\u8bfb\u6d41\u4fbf\u4f1a\u5207\u6362\u5230\u6d41\u52a8\u72b6\u6001\uff0c\u5f53\u4f4d\u4e8e\u6d41\u52a8\u72b6\u6001\u65f6\uff0c\u53ef\u8bfb\u6d41\u4f1a\u81ea\u52a8\u7684\u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\u5185\u5bb9\u5230\u7f13\u51b2\u533a\uff0c\u5f53\u7f13\u51b2\u533a\u4e2d\u7684\u5185\u5bb9\u5927\u4e8e\u8bbe\u5b9a\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"highWaterMark")," \u7684\u5927\u5c0f\u65f6\uff0c\u4fbf\u4f1a\u89e6\u53d1 ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," \u4e8b\u4ef6\uff0c\u5c06\u7f13\u51b2\u533a\u4e2d\u7684\u6570\u636e\u4f20\u9012\u7ed9 ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," \u4e8b\u4ef6\u7ed1\u5b9a\u7684\u51fd\u6570\u3002\u4ee5\u4e0a\u8fc7\u7a0b\u4f1a\u81ea\u52a8\u4e0d\u65ad\u8fdb\u884c\u3002\u5f53\u6587\u4ef6\u4e2d\u7684\u6240\u6709\u5185\u5bb9\u90fd\u88ab\u8bfb\u53d6\u5b8c\u6210\u65f6\uff0c\u90a3\u4e48\u5c31\u4f1a\u89e6\u53d1 ",(0,r.kt)("inlineCode",{parentName:"p"},"end")," \u4e8b\u4ef6\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const fs = require('fs');\n\nconst rs = fs.createReadStream('a.txt', {\n    highWaterMark: 2\n});\n\nrs.on('data', data => {\n    console.log(data.toString());\n});\n\nrs.on('end', () => {\n    console.log(\"\u6587\u4ef6\u8bfb\u53d6\u5b8c\u6bd5\uff01\");\n});\n")),(0,r.kt)("p",null,"\u6682\u505c\u6a21\u5f0f\u50cf\u662f\u624b\u52a8\u6b65\u67aa\uff0c\u800c\u6d41\u52a8\u6a21\u5f0f\u5219\u50cf\u662f\u81ea\u52a8\u6b65\u67aa\u3002\u6682\u505c\u6a21\u5f0f\u4e0e\u6d41\u52a8\u6a21\u5f0f\u4e5f\u53ef\u4ee5\u76f8\u4e92\u5207\u6362\uff0c\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"pause()")," \u53ef\u4ee5\u4ece\u6d41\u52a8\u72b6\u6001\u5207\u6362\u5230\u6682\u505c\u72b6\u6001\uff0c\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"resume()")," \u5219\u53ef\u4ee5\u4ece\u6682\u505c\u6a21\u5f0f\u5207\u6362\u5230\u6d41\u52a8\u6a21\u5f0f\u3002"),(0,r.kt)("p",null,"\u53ef\u8bfb\u6d41\u7684\u4e00\u4e2a\u7ecf\u5178\u5b9e\u4f8b\u5c31\u662f ",(0,r.kt)("inlineCode",{parentName:"p"},"http")," \u4e2d\u7684\u8bf7\u6c42\u5bf9\u8c61 ",(0,r.kt)("inlineCode",{parentName:"p"},"req"),"\uff0c\u4e0b\u9762\u7684\u7a0b\u5e8f\u5c55\u793a\u4e86\u901a\u8fc7\u76d1\u542c ",(0,r.kt)("inlineCode",{parentName:"p"},"req")," \u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," \u4e8b\u4ef6\u6765\u8bfb\u53d6 HTTP \u8bf7\u6c42\u4f53\u4e2d\u7684\u5185\u5bb9"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const http = require('http');\n\nconst app = http.createServer();\n\napp.on('request', (req, res) => {\n    let datas = [];\n    req.on('data', data => {\n        datas.push(data);\n    });\n\n    req.on('end', () => {\n        req.body = Buffer.concat(datas);\n        // \u5f53\u8bfb\u53d6\u5b8c body \u4e2d\u7684\u5185\u5bb9\u4e4b\u540e\uff0c\u5c06\u5185\u5bb9\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\n        res.end(req.body);\n    });\n})\n\napp.listen(3000, () => {\n    console.log(\"\u670d\u52a1\u542f\u52a8\u5728 3000 \u7aef\u53e3... ...\");\n})\n")),(0,r.kt)("img",{src:"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20210305204222.png",style:{zoom:"50%"}}),(0,r.kt)("h3",{id:"writable-stream"},"Writable Stream"),(0,r.kt)("p",null,"\u53ef\u5199\u6d41\u4e0e\u53ef\u8bfb\u6d41\u76f8\u4f3c\uff0c\u5f53\u6211\u4eec\u5411\u53ef\u5199\u6d41\u5199\u5165\u6570\u636e\u65f6(\u901a\u8fc7\u53ef\u5199\u6d41\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"write()")," \u65b9\u6cd5\u5199\u6570\u636e)\uff0c\u4f1a\u76f4\u63a5\u5c06\u6570\u636e\u5199\u5165\u5230\u6587\u4ef6\u4e2d\uff0c\u5982\u679c\u5199\u5165\u7684\u6570\u636e\u6bd4\u8f83\u6162\u7684\u8bdd\uff0c\u90a3\u5c31\u5c31\u4f1a\u5c06\u6570\u636e\u5199\u5165\u5230\u7f13\u51b2\u533a\uff0c\u5f53\u7f13\u51b2\u533a\u4e2d\u7684\u5185\u5bb9\u8fbe\u5230 ",(0,r.kt)("inlineCode",{parentName:"p"},"highWaterMark")," \u8bbe\u5b9a\u7684\u5927\u5c0f\u65f6\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"write")," \u65b9\u6cd5\u5c31\u4f1a\u8fd4\u56de\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"false"),"\uff0c\u8868\u660e\u4e0d\u80fd\u63a5\u53d7\u66f4\u591a\u7684\u6570\u636e\u4e86\u3002"),(0,r.kt)("p",null,"\u5f53\u7f13\u51b2\u533a\u4e2d\u7684\u6570\u636e\u5168\u90e8\u88ab\u6d88\u8d39\u5b8c\u4e86(\u5199\u5165\u4e86\u6587\u4ef6\u4e2d\u6216\u8005\u88ab\u522b\u7684\u6d41\u6d88\u8d39\u4e86)\uff0c\u90a3\u4e48\u5c31\u4f1a\u89e6\u53d1 ",(0,r.kt)("inlineCode",{parentName:"p"},"drain")," \u4e8b\u4ef6\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const fs = require('fs');\n\nconst ws = fs.createWriteStream('b.txt', {\n    highWaterMark: 16 * 1024\n});\n\nfunction writeMillionTimes(writer, data, encoding, callback) {\n    let i = 10000;\n    \n    write();\n\n    function write() {\n        // \u8868\u793a\u662f\u5426\u53ef\u4ee5\u5411\u53ef\u5199\u6d41\u4e2d\u5199\u5165\u6570\u636e\n        let ok = true;\n        while(i-- > 0 && ok) {\n            // \u5f53 writer.write() \u65b9\u6cd5\u8fd4\u56de  false \u8868\u793a\u4e0d\u53ef\u5199\u5165\u6570\u636e\n            ok = writer.write(data, encoding, i === 0 ? callback : null);\n        }\n\n        if(i > 0) {\n            // \u8bf4\u660e ok \u4e3a false\uff0c\u5373\u4e0d\u80fd\u5411\u7f13\u51b2\u533a\u4e2d\u5199\u5165\u5185\u5bb9\u4e86\n            console.log(\"drain\", i);\n            // \u76d1\u542c drain \u4e8b\u4ef6\uff0c\u5f53\u961f\u5217\u6d88\u8d39\u5b8c\u6bd5\u65f6\u7ee7\u7eed\u8c03\u7528 write() \u65b9\u6cd5\u5199\u5165\n            writer.once('drain', write);\n        }\n    }\n}\n\nwriteMillionTimes(ws, 'simple', 'utf-8', () => {\n    console.log(\"end\");\n})\n")),(0,r.kt)("p",null,"\u8f93\u51fa\u4e3a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"drain 7268\ndrain 4536\ndrain 1804\nend\n")),(0,r.kt)("p",null,"\u8bf4\u660e\u6709\u4e09\u6b21\u7f13\u51b2\u533a\u4e2d\u7684\u5185\u5bb9\u8fbe\u5230\u4e86 16KB\uff0c\u53ef\u4ee5\u9a8c\u7b97\u4e0a\u9762\u7684\u6570\u5b57\u4e4b\u95f4\u7684\u5dee\u503c\uff0c\u5728\u4e58\u4ee5 ",(0,r.kt)("inlineCode",{parentName:"p"},"6"),"(simple \u7684\u5b57\u8282\u6570)\uff0c\u5927\u5c0f\u5927\u7ea6\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"16 * 1024")," \u5de6\u53f3\uff0c\u5982"),(0,r.kt)("div",{className:"math math-display"},(0,r.kt)("span",{parentName:"div",className:"katex-display"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mo",{parentName:"mrow",stretchy:"false"},"("),(0,r.kt)("mn",{parentName:"mrow"},"7268"),(0,r.kt)("mo",{parentName:"mrow"},"\u2212"),(0,r.kt)("mn",{parentName:"mrow"},"4536"),(0,r.kt)("mo",{parentName:"mrow",stretchy:"false"},")"),(0,r.kt)("mo",{parentName:"mrow"},"\u2217"),(0,r.kt)("mn",{parentName:"mrow"},"6"),(0,r.kt)("mo",{parentName:"mrow"},"="),(0,r.kt)("mn",{parentName:"mrow"},"16392"),(0,r.kt)("mo",{parentName:"mrow"},"\u2248"),(0,r.kt)("mn",{parentName:"mrow"},"16384"),(0,r.kt)("mo",{parentName:"mrow"},"="),(0,r.kt)("mn",{parentName:"mrow"},"16"),(0,r.kt)("mo",{parentName:"mrow"},"\u2217"),(0,r.kt)("mn",{parentName:"mrow"},"1024")),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"(7268 - 4536) * 6 = 16392 \\approx 16384 = 16 * 1024")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,r.kt)("span",{parentName:"span",className:"mopen"},"("),(0,r.kt)("span",{parentName:"span",className:"mord"},"7268"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}}),(0,r.kt)("span",{parentName:"span",className:"mbin"},"\u2212"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}})),(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,r.kt)("span",{parentName:"span",className:"mord"},"4536"),(0,r.kt)("span",{parentName:"span",className:"mclose"},")"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}}),(0,r.kt)("span",{parentName:"span",className:"mbin"},"\u2217"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}})),(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,r.kt)("span",{parentName:"span",className:"mord"},"6"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}}),(0,r.kt)("span",{parentName:"span",className:"mrel"},"="),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}})),(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,r.kt)("span",{parentName:"span",className:"mord"},"16392"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}}),(0,r.kt)("span",{parentName:"span",className:"mrel"},"\u2248"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}})),(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,r.kt)("span",{parentName:"span",className:"mord"},"16384"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}}),(0,r.kt)("span",{parentName:"span",className:"mrel"},"="),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}})),(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,r.kt)("span",{parentName:"span",className:"mord"},"16"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}}),(0,r.kt)("span",{parentName:"span",className:"mbin"},"\u2217"),(0,r.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}})),(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6444em"}}),(0,r.kt)("span",{parentName:"span",className:"mord"},"1024")))))),(0,r.kt)("p",null,"\u6211\u4eec\u8fd8\u53ef\u4ee5\u8c03\u7528\u53ef\u5199\u6d41\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"end()")," \u65b9\u6cd5\uff0c\u8868\u793a\u5c06\u7f13\u5b58\u4e2d\u7684\u5185\u5bb9\u6e05\u7a7a\u5199\u5165\u6587\u4ef6\uff0c\u5e76\u5173\u95ed\u6587\u4ef6\uff0c\u6b64\u65f6\u4f1a\u89e6\u53d1 ",(0,r.kt)("inlineCode",{parentName:"p"},"close")," \u4e8b\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const fs = require('fs');\n\nconst ws = fs.createWriteStream('b.txt');\n\nws.write('Hello');\nws.write('World');\nws.end('!');\n\nws.on('close', () => {\n    console.log(\"close\"); // close\n})\n")),(0,r.kt)("p",null,"\u5f53\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"end()")," \u65b9\u6cd5\u4e4b\u540e\u5c31\u4e0d\u80fd\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"write()")," \u65b9\u6cd5\u4e86\uff0c\u5426\u5219\u4f1a\u62a5\u9519"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const fs = require('fs');\n\nconst ws = fs.createWriteStream('b.txt');\n\nws.write('Hello');\nws.write('World');\nws.end('!');\n\nws.write('write again'); // Error [ERR_STREAM_WRITE_AFTER_END]: write after end\n")),(0,r.kt)("p",null,"\u5f53\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"end()")," \u65b9\u6cd5\u4e4b\u540e\uff0c\u5e76\u4e14\u6570\u636e\u7f13\u51b2\u533a\u4e2d\u7684\u6570\u636e\u5df2\u7ecf\u5199\u5165\u4e4b\u540e\u4f1a\u89e6\u53d1\u53ef\u5199\u6d41\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"finish")," \u4e8b\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const fs = require('fs');\n\nconst ws = fs.createWriteStream('b.txt');\n\nws.write('Hello');\nws.write('World');\nws.end('!');\n\nws.on('close', () => {\n    console.log(\"close\");\n});\n\nws.on('finish', () => {\n    console.log(\"finish\");\n});\n")),(0,r.kt)("p",null,"\u6253\u5370\u7ed3\u679c\u662f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"finish\nclose\n")),(0,r.kt)("p",null,"\u8bf4\u660e ",(0,r.kt)("inlineCode",{parentName:"p"},"finish")," \u4e8b\u4ef6\u4f1a\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"close")," \u4e8b\u4ef6\u4e4b\u524d\u88ab\u89e6\u53d1\u3002"),(0,r.kt)("p",null,"\u53ef\u5199\u6d41\u7684\u7ecf\u5178\u4f8b\u5b50\u5c31\u662f ",(0,r.kt)("inlineCode",{parentName:"p"},"http")," \u6a21\u5757\u7684\u54cd\u5e94\u5bf9\u8c61 ",(0,r.kt)("inlineCode",{parentName:"p"},"res"),"\uff0c\u4e0b\u9762\u7684\u7a0b\u5e8f\u6f14\u793a\u4e86\u5f53\u8bf7\u6c42\u5230\u6765\u65f6\uff0c\u6211\u4eec\u8bfb\u53d6\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"html")," \u9875\u9762\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const http = require('http');\nconst fs = require('fs');\n\nconst app = http.createServer();\n\napp.on('request', (req, res) => {\n    const rs = fs.createReadStream('index.html');\n    \n    rs.on('data', data => {\n        res.write(data);\n    })\n\n    rs.on('end', () => {\n        res.end()\n    });\n});\n\napp.listen(3000, () => {\n    console.log(\"\u670d\u52a1\u542f\u52a8\u5728 3000 \u7aef\u53e3 ... ...\");\n})\n")),(0,r.kt)("h3",{id:"duplex-stream-\u4e0e-transform-stream"},"Duplex Stream \u4e0e Transform Stream"),(0,r.kt)("p",null,"Duplex\uff0c\u5373\u53cc\u5de5\u7684\u610f\u601d\uff0c\u5b83\u65e2\u53ef\u4ee5\u63a5\u6536\u6570\u636e\uff0c\u4e5f\u53ef\u4ee5\u8f93\u51fa\u6570\u636e\uff0c\u5b83\u7684\u8f93\u5165\u548c\u8f93\u51fa\u4e4b\u95f4\u53ef\u4ee5\u6ca1\u6709\u4efb\u4f55\u7684\u5173\u7cfb\uff0c\u5c31\u50cf\u662f\u4e00\u4e2a\u90e8\u4ef6\u5185\u90e8\u6709\u4e24\u4e2a\u72ec\u7acb\u7684\u7cfb\u7edf\u3002Duplex \u7ee7\u627f\u4e86\u53ef\u8bfb\u6d41(Readable)\uff0c\u5e76\u4e14\u62e5\u6709\u53ef\u5199\u6d41(Writable)\u7684\u6240\u6709\u65b9\u6cd5\u3002 "),(0,r.kt)("p",null,"Transform Stream \u7ee7\u627f\u4e86 Duplex Stream\uff0c\u5b83\u540c\u6837\u5177\u6709\u53ef\u8bfb\u6d41\u4e0e\u53ef\u5199\u6d41\u7684\u80fd\u529b\uff0c\u5e76\u4e14\u5b83\u7684\u8f93\u51fa\u4e0e\u8f93\u5165\u4e4b\u95f4\u662f\u6709\u5173\u7cfb\u7684\uff0c\u4e2d\u95f4\u505a\u4e86\u4e00\u6b21\u8f6c\u6362\u3002\u5e38\u89c1\u7684\u8f6c\u6362\u6d41\u6709 ",(0,r.kt)("inlineCode",{parentName:"p"},"zlib"),"\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"crypto"),"\u3002"),(0,r.kt)("p",null,"\u51fa\u4e8e\u6587\u7ae0\u7ed3\u6784\u7684\u8003\u8651\uff0c\u5728\u8fd9\u91cc\u4e0d\u8be6\u7ec6\u8bb2\u89e3\u8fd9\u4e24\u4e2a\u6d41\uff0c\u5728\u540e\u6587\u4e2d\u4f1a\u5b9e\u73b0\u8fd9\u4e24\u4e2a\u6d41\uff0c\u4ee5\u52a0\u6df1\u5bf9\u8fd9\u4e24\u4e2a\u6d41\u7684\u7406\u89e3\u3002"),(0,r.kt)("h2",{id:"pipe"},"pipe"),(0,r.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u6df7\u5408\u4f7f\u7528\u53ef\u8bfb\u6d41\u4e0e\u53ef\u5199\u6d41\u6765\u8fdb\u884c\u6587\u4ef6\u7684\u590d\u5236"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const fs = require('fs');\n\nfunction copy(source, target) {\n    const rs = fs.createReadStream(source);\n    const ws = fs.createWriteStream(target);\n\n    rs.on('data', data => {\n        ws.write(data);\n    });\n\n    rs.on('end', () => {\n        ws.end();\n    });\n}\n\ncopy('a.txt', 'b.txt');\n")),(0,r.kt)("p",null,"\u4f46\u662f\u4e0a\u9762\u7684\u5199\u6cd5\u5374\u4e0d\u88ab\u5efa\u8bae\u4f7f\u7528\uff0c\u56e0\u4e3a\u6ca1\u6709\u8003\u8651\u5230\u53ef\u8bfb\u6d41\u4e0e\u53ef\u5199\u6d41\u901f\u5ea6\u4e4b\u95f4\u7684\u5dee\u5f02\uff0c\u5982\u679c\u53ef\u8bfb\u6d41\u8f93\u51fa\u6570\u636e\u7684\u901f\u5ea6\u5927\u4e8e\u53ef\u5199\u6d41\u5199\u5165\u6570\u636e\u7684\u901f\u5ea6\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u4f1a\u6709\u6570\u636e\u4e00\u76f4\u5806\u538b\u5728\u7f13\u5b58\u533a\uff0c\u5bfc\u81f4\u5360\u7528\u8fc7\u9ad8\u7684\u5185\u5b58\uff0c\u4e13\u4e1a\u672f\u8bed\u53eb\u505a\u79ef\u538b\u3002"),(0,r.kt)("p",null,"\u6211\u4eec\u9700\u8981\u6539\u5584\u4e0a\u9762\u7684\u7a0b\u5e8f\uff0c\u5177\u4f53\u505a\u6cd5\u5c31\u662f\u5f53 ",(0,r.kt)("inlineCode",{parentName:"p"},"write()")," \u65b9\u6cd5\u8fd4\u56de  ",(0,r.kt)("inlineCode",{parentName:"p"},"false")," \u65f6\uff0c\u6211\u4eec\u5207\u6362\u53ef\u8bfb\u6d41\u7684\u6a21\u5f0f\u4e3a\u6682\u505c\u6a21\u5f0f\uff0c\u5f53\u53ef\u5199\u6d41\u89e6\u53d1\u4e86 ",(0,r.kt)("inlineCode",{parentName:"p"},"drain")," \u4e8b\u4ef6\u65f6\uff0c\u6211\u4eec\u4fbf\u5c06\u53ef\u8bfb\u6d41\u7684\u72b6\u6001\u5207\u6362\u4e3a\u6d41\u52a8\u6a21\u5f0f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const fs = require('fs');\n\nfunction copy(source, target) {\n    const rs = fs.createReadStream(source);\n    const ws = fs.createWriteStream(target);\n\n    rs.on('data', data => {\n        if (!ws.write(data)) {\n            rs.pause();\n        }\n    });\n\n    rs.on('end', () => {\n        ws.end();\n    });\n\n    ws.on('drain', () => {\n        rs.resume();\n    })\n}\n")),(0,r.kt)("p",null,"\u90a3\u662f\u4e0d\u662f\u6bcf\u6b21\u6211\u4eec\u4f7f\u7528\u6d41\u90fd\u9700\u8981\u5199\u8fd9\u4e48\u591a\u7684\u4ee3\u7801\uff0c\u5f53\u7136\u4e0d\u662f\u3002\u5b98\u65b9\u4e3a\u53ef\u8bfb\u6d41\u63d0\u4f9b\u4e86\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"pipe(ws)")," \u65b9\u6cd5\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"pipe")," \u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a\u53ef\u5199\u6d41\uff0c\u5b83\u7684\u4f5c\u7528\u5c31\u662f\u5c06\u53ef\u8bfb\u6d41\u4e2d\u6570\u636e\u5199\u5165\u5230\u53ef\u5199\u6d41\u4e2d\u53bb\uff0c\u5e76\u4e14\u5b83\u5185\u90e8\u6709\u505a\u901f\u5ea6\u5dee\u5f02\u7684\u5904\u7406\u3002\u6240\u4ee5\u4e0a\u9762\u7684\u5199\u6cd5\u53ef\u4ee5\u6539\u4e3a\u4e0b\u9762\u7684\u7248\u672c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const fs = require('fs');\n\nfunction copy(source, target) {\n    const rs = fs.createReadStream(source);\n    const ws = fs.createWriteStream(target);\n\n    rs.pipe(ws);\n}\n")),(0,r.kt)("p",null,"\u5f53\u6211\u4eec\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"pipe")," \u65b9\u6cd5\u65f6\uff0c\u4f1a\u89e6\u53d1\u53ef\u5199\u6d41\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"pipe")," \u4e8b\u4ef6\u3002",(0,r.kt)("inlineCode",{parentName:"p"},"pipe")," \u7684\u5b9e\u73b0\u53c2\u8003\u5982\u4e0b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"Readable.prototype.pipe = function(ws) {\n    this.on('data', data => {\n        if (!ws.write(data)) {\n            this.pause();\n        }\n    });\n\n    ws.on('drain', () => {\n        this.resume();\n    });\n\n    // \u89e6\u53d1 pipe \u4e8b\u4ef6\n    ws.emit('pipe', this);\n\n    // \u8fd4\u56de\u53ef\u5199\u6d41\uff0c\u4ee5\u652f\u6301\u94fe\u5f0f\u8c03\u7528\n    return ws;\n}\n")),(0,r.kt)("p",null,"\u8fd9\u91cc\u7ed9\u51fa\u5b98\u7f51\u753b\u7684\u4e00\u4e2a\u6709\u5173 ",(0,r.kt)("inlineCode",{parentName:"p"},"pipe")," \u7684\u6d41\u7a0b\u56fe"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"                                                     +===================+\n                         x--\x3e  Piping functions   +--\x3e   src.pipe(dest)  |\n                         x     are set up during     |===================|\n                         x     the .pipe method.     |  Event callbacks  |\n  +===============+      x                           |-------------------|\n  |   Your Data   |      x     They exist outside    | .on('close', cb)  |\n  +=======+=======+      x     the data flow, but    | .on('data', cb)   |\n          |              x     importantly attach    | .on('drain', cb)  |\n          |              x     events, and their     | .on('unpipe', cb) |\n+---------v---------+    x     respective callbacks. | .on('error', cb)  |\n|  Readable Stream  +----+                           | .on('finish', cb) |\n+-^-------^-------^-+    |                           | .on('end', cb)    |\n  ^       |       ^      |                           +-------------------+\n  |       |       |      |\n  |       ^       |      |\n  ^       ^       ^      |    +-------------------+         +=================+\n  ^       |       ^      +----\x3e  Writable Stream  +---------\x3e  .write(chunk)  |\n  |       |       |           +-------------------+         +=======+=========+\n  |       |       |                                                 |\n  |       ^       |                              +------------------v---------+\n  ^       |       +-> if (!chunk)                |    Is this chunk too big?  |\n  ^       |       |     emit .end();             |    Is the queue busy?      |\n  |       |       +-> else                       +-------+----------------+---+\n  |       ^       |     emit .write();                   |                |\n  |       ^       ^                                   +--v---+        +---v---+\n  |       |       ^-----------------------------------<  No  |        |  Yes  |\n  ^       |                                           +------+        +---v---+\n  ^       |                                                               |\n  |       ^               emit .pause();          +=================+     |\n  |       ^---------------^-----------------------+  return false;  <-----+---+\n  |                                               +=================+         |\n  |                                                                           |\n  ^            when queue is empty     +============+                         |\n  ^------------^-----------------------<  Buffering |                         |\n               |                       |============|                         |\n               +> emit .drain();       |  ^Buffer^  |                         |\n               +> emit .resume();      +------------+                         |\n                                       |  ^Buffer^  |                         |\n                                       +------------+   add chunk to queue    |\n                                       |            <---^---------------------<\n                                       +============+\n")),(0,r.kt)("h2",{id:"\u5b9e\u73b0\u6d41"},"\u5b9e\u73b0\u6d41"),(0,r.kt)("p",null,"\u5728\u672c\u8282\u4e2d\u6211\u4eec\u6765\u5b9e\u73b0\u5177\u4f53\u7684\u6d41\uff0c\u901a\u8fc7\u5b9e\u73b0\u6d41\u53ef\u4ee5\u8fdb\u4e00\u6b65\u52a0\u6df1\u5bf9 Stream \u5185\u90e8\u5de5\u4f5c\u7ec6\u8282\u7684\u7406\u89e3\u3002"),(0,r.kt)("h3",{id:"\u5b9e\u73b0\u53ef\u8bfb\u6d41"},"\u5b9e\u73b0\u53ef\u8bfb\u6d41"),(0,r.kt)("p",null,"\u4e0a\u9762\u6211\u4eec\u90fd\u662f\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"fs.createReadableStream()")," \u65b9\u6cd5\u6765\u5f97\u5230\u4e00\u4e2a\u53ef\u8bfb\u6d41\u7684\uff0c\u5728\u8fd9\u91cc\u6211\u4eec\u81ea\u5df1\u5b9e\u73b0\u4e00\u4e2a\u53ef\u8bfb\u6d41\u3002\u5b9e\u73b0\u53ef\u8bfb\u6d41\u53ea\u9700\u8981\u7ee7\u627f ",(0,r.kt)("inlineCode",{parentName:"p"},"Readable")," \u7c7b\uff0c\u7136\u540e\u5b9e\u73b0 ",(0,r.kt)("inlineCode",{parentName:"p"},"_read()")," \u65b9\u6cd5\u5373\u53ef"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const { Readable } = require('stream');\n\nclass IeteratorReadableStream extends Readable {\n    constructor(iterator) {\n        super();\n        this.iterator = iterator;\n    }\n\n    _read() {\n        let data = this.iterator.next();\n        // console.log(data);\n        if(data.done) {\n            this.push(null);\n        } else {\n            // \u5fc5\u987b push \u5b57\u7b26\u4e32\u6216\u8005 Buffer\n            this.push(data.value+'');\n        }\n    }\n}\n\nmodule.exports = IeteratorReadableStream;\n")),(0,r.kt)("p",null,"\u4e0a\u8ff0\u6211\u4eec\u5b9e\u73b0\u4e86\u4e00\u4e2a\u53ef\u8bfb\u6d41\uff0c\u53ef\u8bfb\u6d41\u63a5\u6536\u4e00\u4e2a\u8fed\u4ee3\u5668\u4f5c\u4e3a\u53c2\u6570\uff0c\u8fd9\u4e2a\u8fed\u4ee3\u5668\u4f5c\u4e3a\u8fd9\u4e2a\u53ef\u8bfb\u6d41\u7684\u6570\u636e\u6e90\u3002\u53ef\u8bfb\u6d41\u4f1a\u81ea\u52a8\u7684\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"_read")," \u83b7\u53d6\u6570\u636e\uff0c\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"_read")," \u65b9\u6cd5\u4e2d\u6211\u4eec\u4ece\u8fed\u4ee3\u5668\u4e2d\u83b7\u53d6\u6570\u636e\uff0c\u5e76\u4e14\u8c03\u7528\u4e86 ",(0,r.kt)("inlineCode",{parentName:"p"},"push")," \u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u7684\u4f5c\u7528\u5c31\u662f\u5c06\u6570\u636e\u653e\u5165\u5230\u7f13\u5b58\u533a\u4e2d\uff0c\u53ea\u80fd\u5411\u5176\u4e2d ",(0,r.kt)("inlineCode",{parentName:"p"},"push")," \u5b57\u7b26\u4e32\u6216\u8005 Buffer\uff0c\u5f53\u6211\u4eec\u5411\u5176\u4e2d ",(0,r.kt)("inlineCode",{parentName:"p"},"push")," null \u65f6\u5c31\u8868\u793a\u6570\u636e\u5df2\u7ecf\u88ab\u5168\u90e8\u8bfb\u53d6\u5b8c\u6bd5\u3002"),(0,r.kt)("p",null,"\u6240\u4ee5\u53ef\u8bfb\u6d41\u7684\u6267\u884c\u903b\u8f91\u4e3a\uff0c\u6bcf\u6b21\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"_read")," \u65b9\u6cd5\u4ece\u6570\u636e\u6e90\u8bfb\u53d6\u6570\u636e\uff0c\u5e76\u5c06\u6570\u636e\u5b58\u5165\u7f13\u5b58\u533a\uff0c\u7136\u540e\u89e6\u53d1 ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," \u4e8b\u4ef6\uff0c\u5c06\u7f13\u5b58\u533a\u4e2d\u7684\u6570\u636e\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9 ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," \u4e8b\u4ef6\u7ed1\u5b9a\u7684\u56de\u8c03\u51fd\u6570\uff0c\u5faa\u73af\u4e0a\u8ff0\u8fc7\u7a0b\u76f4\u5230\u5411\u7f13\u5b58\u533a ",(0,r.kt)("inlineCode",{parentName:"p"},"push")," null \u65f6\uff0c\u5c31\u8868\u793a\u6570\u636e\u6e90\u4e2d\u7684\u6570\u636e\u5df2\u7ecf\u88ab\u8bfb\u53d6\u5b8c\u6bd5\uff0c\u6b64\u65f6\u4f1a\u89e6\u53d1 ",(0,r.kt)("inlineCode",{parentName:"p"},"end")," \u4e8b\u4ef6\u3002"),(0,r.kt)("p",null,"\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u8fed\u4ee3\u5668\u4f5c\u4e3a\u6570\u636e\u6e90\u4f20\u5165"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const IeteratorReadableStream = require('./IteratorReadableStream');\n\nfunction *getData() {\n    for(let i = 0; i < 5; i++) {\n        yield i;\n    }\n}\n\nlet rs = new IeteratorReadableStream(getData());\n\nrs.on('data', data => {\n    console.log(data.toString());\n});\n\nrs.on('end', () => {\n    console.log(\"\u8fed\u4ee3\u7ed3\u675f\");\n});\n")),(0,r.kt)("p",null,"\u8f93\u51fa\u4e3a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"0\n1\n2\n3\n4\n\u8fed\u4ee3\u7ed3\u675f\n")),(0,r.kt)("h3",{id:"\u5b9e\u73b0\u53ef\u5199\u6d41"},"\u5b9e\u73b0\u53ef\u5199\u6d41"),(0,r.kt)("p",null,"\u5b9e\u73b0\u53ef\u5199\u6d41\u7684\u8fc7\u7a0b\u540c\u5b9e\u73b0\u53ef\u8bfb\u6d41\u7684\u8fc7\u7a0b\u7c7b\u4f3c\uff0c\u9996\u5148\u9700\u8981\u7ee7\u627f ",(0,r.kt)("inlineCode",{parentName:"p"},"Writable")," \u7c7b\uff0c\u63a5\u7740\u5b9e\u73b0 ",(0,r.kt)("inlineCode",{parentName:"p"},"_write")," \u65b9\u6cd5\u5373\u53ef"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const fs = require('fs');\nconst { Writable } = require('stream');\n\nclass FileWritableStream extends Writable {\n    constructor(filepath) {\n        super();\n        this.filepath = filepath;\n    }\n\n    _write(chunk, encoding, callback) {\n        fs.appendFile(this.filepath, chunk, {\n            encoding\n        }, callback)\n    }\n}\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u6211\u4eec\u5b9e\u73b0\u4e86\u4e00\u4e2a\u53ef\u5199\u6d41\uff0c\u8fd9\u4e2a\u53ef\u5199\u6d41\u63a5\u6536\u4e00\u4e2a\u6587\u4ef6\u8def\u5f84\u4f5c\u4e3a\u53c2\u6570\uff0c\u5b83\u7684\u4f5c\u7528\u5c31\u662f\u5411\u8fd9\u4e2a\u6587\u4ef6\u4e2d\u8ffd\u52a0\u6570\u636e\uff0c\u6bcf\u6b21\u5f53\u6211\u4eec\u8c03\u7528\u53ef\u5199\u6d41\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"write()")," \u65b9\u6cd5\u65f6\uff0c\u5b83\u4f1a\u5411\u7f13\u51b2\u533a\u5199\u5165\u6570\u636e\uff0c\u5f53\u8fbe\u5230\u9608\u503c\u65f6\uff0c\u4fbf\u4f1a\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"_write()")," \u65b9\u6cd5\u5c06\u6570\u636e\u65b0\u589e\u5230\u6587\u4ef6\u4e2d\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"process.stdin.pipe(new FileWritableStream('c.txt'));\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u8fd9\u884c\u4ee3\u7801\u7684\u4f5c\u7528\u5c31\u662f\u5c06\u4ece\u6807\u51c6\u8f93\u5165\u7684\u5b57\u7b26\u8f93\u51fa\u5230 ",(0,r.kt)("inlineCode",{parentName:"p"},"c.txt")," \u4e2d\u3002"),(0,r.kt)("h3",{id:"\u5b9e\u73b0\u53cc\u5de5\u6d41"},"\u5b9e\u73b0\u53cc\u5de5\u6d41"),(0,r.kt)("p",null,"Duplex Stream \u65e2\u53ef\u4ee5\u4f5c\u4e3a\u53ef\u8bfb\u6d41\uff0c\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u53ef\u5199\u6d41\uff0c\u5e76\u4e14\u5b83\u7684\u8f93\u5165\u4e0e\u8f93\u51fa\u4e4b\u95f4\u53ef\u4ee5\u6ca1\u6709\u5173\u7cfb\u3002Duplex Stream \u7ee7\u627f\u4e86 Readable\uff0c\u5e76\u4e14\u62e5\u6709 Writable \u7684\u6240\u6709\uff0c\u6211\u4eec\u53ea\u8981\u5206\u522b\u5b9e\u73b0 ",(0,r.kt)("inlineCode",{parentName:"p"},"_read()")," \u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"_write()")," \u65b9\u6cd5\u5373\u53ef"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const { Duplex } = require('stream');\n\nclass CustomDuplexStream extends Duplex {\n    constructor() {\n        super();\n        this.currentCharCode = 65;\n    }\n\n    _read() {\n        if(this.currentCharCode <= 90) {\n            this.push(String.fromCharCode(this.currentCharCode++))\n        } else {\n            this.push(null);\n        }\n    }\n\n    _write(chunk, encoding, callback) {\n        console.log(chunk.toString());\n        callback();\n    }\n}\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u53cc\u5de5\u6d41\u7684\u53ef\u8bfb\u6d41\u90e8\u5206\u5c31\u662f\u5c06\u5927\u5199\u7684 26 \u4e2a\u5b57\u6bcd\u6dfb\u52a0\u8fdb\u4e86\u7f13\u5b58\u533a\uff0c\u800c\u53ef\u5199\u6d41\u90e8\u5206\u5c31\u662f\u76f4\u63a5\u5c06\u6570\u636e\u8f93\u51fa\u5230\u63a7\u5236\u53f0\u3002\u53ef\u89c1\u53cc\u5de5\u6d41\u53ef\u8bfb\u6d41\u4e0e\u53ef\u5199\u6d41\u4e4b\u95f4\u5e76\u6ca1\u6709\u4efb\u4f55\u7684\u5173\u7cfb"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'const dp = new CustomDuplexStream();\n\ndp.write("1");\ndp.write("2");\ndp.end();\n\ndp.pipe(process.stdout);\n')),(0,r.kt)("p",null,"\u8f93\u51fa\u4e3a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"1\n2\nABCDEFGHIJKLMNOPQRSTUVWXYZ\n")),(0,r.kt)("h3",{id:"\u5b9e\u73b0\u8f6c\u6362\u6d41"},"\u5b9e\u73b0\u8f6c\u6362\u6d41"),(0,r.kt)("p",null,"Tranform Stream \u662f Duplex \u7684\u7279\u4f8b\uff0c\u5b83\u4e5f\u662f\u4e00\u4e2a\u53cc\u5de5\u6d41\uff0c\u4e0d\u8fc7\u5b83\u7684\u8f93\u5165\u548c\u8f93\u51fa\u4e4b\u95f4\u6709\u5173\u8054\uff0c\u5b83\u7684\u5185\u90e8\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"_transform()")," \u65b9\u6cd5\u5c06\u53ef\u5199\u6d41\u63a5\u6536\u5230\u7684\u6570\u636e\u7ecf\u8fc7\u8f6c\u6362\u540e\u4f20\u5165\u5230\u53ef\u8bfb\u6d41\u4e2d\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u5b9e\u73b0\u8f6c\u6362\u6d41\uff0c\u53ea\u9700\u8981\u5b9e\u73b0 ",(0,r.kt)("inlineCode",{parentName:"p"},"_transform()")," \u65b9\u6cd5\u5373\u53ef"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const { Transform } = require('stream');\n\nclass UpperTransformStream extends Transform {\n    _transform(chunk, encoding, callback) {\n        this.push(chunk.toString().toUpperCase());\n        callback();\n    }\n}\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u6211\u4eec\u5b9e\u73b0\u4e86\u4e00\u4e2a\u8f6c\u6362\u6d41\uff0c\u5b83\u53ef\u4ee5\u5c06\u8f93\u5165\u7684\u5c0f\u5199\u5b57\u7b26\u8f6c\u5316\u4e3a\u5927\u5199\u5b57\u7b26\u7136\u540e\u8f93\u51fa"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const ts = new UpperTransformStream();\nconst rs = fs.createReadStream('a.txt');\nrs.pipe(ts).pipe(process.stdout);\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u7a0b\u5e8f\u4f1a\u8bfb\u53d6 ",(0,r.kt)("inlineCode",{parentName:"p"},"a.txt")," \u4e2d\u7684\u6240\u6709\u5b57\u7b26\uff0c\u5c06\u5b57\u7b26\u8f6c\u6362\u4e3a\u5927\u5199\u7136\u540e\u8f93\u51fa\u5728\u63a7\u5236\u53f0\u3002"),(0,r.kt)("p",null,"\u8f6c\u6362\u6d41\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u8fd8\u662f\u6bd4\u8f83\u591a\u7684\uff0c\u8fd9\u91cc\u4ecb\u7ecd\u4e00\u4e2a Node.js \u5185\u7f6e\u7684\u8f6c\u6362\u6d41 ",(0,r.kt)("inlineCode",{parentName:"p"},"zlib"),"\uff0c\u5b83\u7684\u4f5c\u7528\u5bf9\u6587\u4ef6\u8fdb\u884c\u89e3\u538b\u7f29\uff0c\u5c06\u6587\u4ef6\u538b\u7f29\u4e3a\u538b\u7f29\u6587\u4ef6\uff0c\u6216\u8005\u5c06\u538b\u7f29\u6587\u4ef6\u89e3\u538b\u4e3a\u6b63\u5e38\u6587\u4ef6\uff0c\u8fd9\u4e0d\u5c31\u662f\u4e00\u4e2a\u5178\u578b\u7684\u8f6c\u6362\u6d41\u561b\uff01"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const zlib = require('zlib');\nconst fs = require('fs');\n\nconst args = process.argv.slice(2);\n\nconst source = fs.createReadStream(args[0]);\nconst target = fs.createWriteStream(args[1]);\nconst gzip = zlib.createGzip();\n\nsource.pipe(gzip).pipe(target);\n")),(0,r.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"node gzip.js Graph.md Graph.md.gz\n")),(0,r.kt)("p",null,"\u6765\u8fd0\u884c\u4e0a\u9762\u7684\u7a0b\u5e8f\uff0c\u5b83\u53ef\u4ee5\u5c06 Graph.md \u4f7f\u7528 gzip \u538b\u7f29\u4e3a Graph.md.gz\u3002"),(0,r.kt)("img",{src:"https://cdn.jsdelivr.net/gh/LastKnightCoder/ImgHosting/20210306094436.png",style:{zoom:"50%"}}),(0,r.kt)("p",null,"\u6587\u4ef6\u5927\u5c0f\u4ece ",(0,r.kt)("inlineCode",{parentName:"p"},"201KB")," \u538b\u7f29\u5230\u4e86 ",(0,r.kt)("inlineCode",{parentName:"p"},"51KB"),"\u3002"),(0,r.kt)("p",null,"\u540c\u6837\u7684\u6211\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7 ",(0,r.kt)("inlineCode",{parentName:"p"},"zlib.createGunzip()")," \u6765\u521b\u5efa\u4e00\u4e2a\u89e3\u538b\u7f29\u7684\u8f6c\u6362\u6d41\uff0c\u5177\u4f53\u7ec6\u8282\u540c\u538b\u7f29\u6587\u4ef6\u76f8\u540c\uff0c\u4e0d\u505a\u4ecb\u7ecd\u3002"),(0,r.kt)("p",null,"\u672c\u7bc7\u6587\u7ae0\u5230\u6b64\u7ed3\u675f\uff0c\u60f3\u5fc5\u5230\u8fd9\u91cc\u5df2\u7ecf\u5bf9 Stream \u7684\u4f7f\u7528\u5df2\u7ecf\u6709\u6240\u4e86\u89e3\u4e86\uff0c\u4f46\u662f\u672c\u7bc7\u6587\u7ae0\u5e76\u6ca1\u6709\u5217\u4e3e\u6240\u6709\u6709\u5173 Stream \u7684 API\uff0c\u5982\u679c\u60f3\u66f4\u52a0\u8be6\u7ec6\u7684\u4e86\u89e3 Stream \u7684 API\uff0c\u90a3\u4e48\u63a5\u4e0b\u53bb\u5c31\u53ef\u4ee5\u9605\u8bfb",(0,r.kt)("a",{parentName:"p",href:"http://nodejs.cn/api/stream.html"},"\u5b98\u65b9\u6587\u6863"),"\u4e86\u3002"),(0,r.kt)("h2",{id:"\u53c2\u8003\u6587\u732e"},"\u53c2\u8003\u6587\u732e"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://jscomplete.com/learn/node-beyond-basics/node-streams"},"Node's Stream")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://nodejs.org/zh-cn/docs/guides/backpressuring-in-streams/"},"\u6570\u636e\u6d41\u4e2d\u7684\u79ef\u538b\u95ee\u9898")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://mp.weixin.qq.com/s/D54-txCSPjKdK-QewPG9Kw"},"\u6df1\u5165\u7406\u89e3 Node.js Stream \u5185\u90e8\u673a\u5236")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://tech.meituan.com/2016/07/08/stream-basics.html"},"Node.js Stream - \u57fa\u7840\u7bc7"))))}c.isMDXComponent=!0}}]);