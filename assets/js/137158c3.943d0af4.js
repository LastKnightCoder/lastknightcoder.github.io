"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[9647],{3905:(e,a,t)=>{t.d(a,{Zo:()=>c,kt:()=>h});var n=t(7294);function s(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function r(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function p(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?r(Object(t),!0).forEach((function(a){s(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function m(e,a){if(null==e)return{};var t,n,s=function(e,a){if(null==e)return{};var t,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||(s[t]=e[t]);return s}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}var l=n.createContext({}),i=function(e){var a=n.useContext(l),t=a;return e&&(t="function"==typeof e?e(a):p(p({},a),e)),t},c=function(e){var a=i(e.components);return n.createElement(l.Provider,{value:a},e.children)},o={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},d=n.forwardRef((function(e,a){var t=e.components,s=e.mdxType,r=e.originalType,l=e.parentName,c=m(e,["components","mdxType","originalType","parentName"]),d=i(t),h=s,N=d["".concat(l,".").concat(h)]||d[h]||o[h]||r;return t?n.createElement(N,p(p({ref:a},c),{},{components:t})):n.createElement(N,p({ref:a},c))}));function h(e,a){var t=arguments,s=a&&a.mdxType;if("string"==typeof e||s){var r=t.length,p=new Array(r);p[0]=d;var m={};for(var l in a)hasOwnProperty.call(a,l)&&(m[l]=a[l]);m.originalType=e,m.mdxType="string"==typeof e?e:s,p[1]=m;for(var i=2;i<r;i++)p[i]=t[i];return n.createElement.apply(null,p)}return n.createElement.apply(null,t)}d.displayName="MDXCreateElement"},9850:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>l,contentTitle:()=>p,default:()=>o,frontMatter:()=>r,metadata:()=>m,toc:()=>i});var n=t(7462),s=(t(7294),t(3905));const r={authors:"xiongtao",tags:["Canvas","\u9ad8\u5206\u5c4f"]},p=void 0,m={permalink:"/blog/2021/12/10/Canvas\u7ed8\u56fe\u6a21\u7cca",editUrl:"https://github.com/LastKnightCoder/lastknightcoder/tree/master/blog/2021-12-10-Canvas\u7ed8\u56fe\u6a21\u7cca.mdx",source:"@site/blog/2021-12-10-Canvas\u7ed8\u56fe\u6a21\u7cca.mdx",title:"Canvas\u7ed8\u56fe\u6a21\u7cca",description:"\u5728\u9ad8\u5206\u8fa8\u7387\u5c4f\u5e55 (dpr > 1) \u4e0a\u8fdb\u884c\u7ed8\u56fe\u65f6\uff0c\u4f1a\u53d1\u73b0\u7ed8\u5236\u7684\u56fe\u50cf\u6bd4\u8f83\u6a21\u7cca\uff0c\u8fd9\u662f\u56e0\u4e3a Canvas \u753b\u5e03\u7684\u5355\u4f4d\u4e0d\u662f\u4e00\u4e2a CSS \u50cf\u7d20\u5927\u5c0f\uff0c\u800c\u662f\u4e00\u4e2a\u7269\u7406\u50cf\u7d20\u5927\u5c0f\u3002\u800c CSS \u50cf\u7d20\u5927\u5c0f\u4e0e\u7269\u7406\u50cf\u7d20\u5927\u5c0f\u76f8\u5dee dpr \u500d\u3002\u5f53\u6211\u4eec\u8bbe\u7f6e Canvas \u5927\u5c0f\u4e0e CSS \u5927\u5c0f\u76f8\u540c\u65f6\uff0c\u7531\u4e8e CSS \u5927\u5c0f\u662f Canvas \u5927\u5c0f\u7684 dpr \u500d\uff0c\u6240\u4ee5\u4f1a\u53d1\u751f\u62c9\u4f38\uff0c\u5bfc\u81f4\u56fe\u50cf\u6a21\u7cca",date:"2021-12-10T00:00:00.000Z",formattedDate:"2021\u5e7412\u670810\u65e5",tags:[{label:"Canvas",permalink:"/blog/tags/canvas"},{label:"\u9ad8\u5206\u5c4f",permalink:"/blog/tags/\u9ad8\u5206\u5c4f"}],readingTime:2.55,hasTruncateMarker:!1,authors:[{name:"\u718a\u6ed4",title:"\u524d\u7aef\u5de5\u7a0b\u5e08 @ \u9ad8\u5fb7",url:"https://github.com/LastKnightCoder",imageURL:"https://cdn.staticaly.com/gh/LastKnightCoder/ImgHosting3@master/wallhaven-8opwwy.3cbn7rc981c0.webp",key:"xiongtao"}],frontMatter:{authors:"xiongtao",tags:["Canvas","\u9ad8\u5206\u5c4f"]},prevItem:{title:"\u4ece\u624b\u6284\u7b14\u8bb0\u5230\u4e2a\u4eba\u535a\u5ba2",permalink:"/blog/2022/01/12/\u4ece\u624b\u6284\u7b14\u8bb0\u5230\u4e2a\u4eba\u535a\u5ba2"},nextItem:{title:"\u6211\u662f\u5982\u4f55\u6210\u4e3a\u4e00\u540d\u7a0b\u5e8f\u5458\u7684",permalink:"/blog/2021/11/25/\u6211\u662f\u5982\u4f55\u6210\u4e3a\u4e00\u540d\u7a0b\u5e8f\u5458\u7684"}},l={authorsImageUrls:[void 0]},i=[],c={toc:i};function o(e){let{components:a,...t}=e;return(0,s.kt)("wrapper",(0,n.Z)({},c,t,{components:a,mdxType:"MDXLayout"}),(0,s.kt)("p",null,"\u5728\u9ad8\u5206\u8fa8\u7387\u5c4f\u5e55 ",(0,s.kt)("inlineCode",{parentName:"p"},"(dpr > 1)")," \u4e0a\u8fdb\u884c\u7ed8\u56fe\u65f6\uff0c\u4f1a\u53d1\u73b0\u7ed8\u5236\u7684\u56fe\u50cf\u6bd4\u8f83\u6a21\u7cca\uff0c\u8fd9\u662f\u56e0\u4e3a Canvas \u753b\u5e03\u7684\u5355\u4f4d\u4e0d\u662f\u4e00\u4e2a CSS \u50cf\u7d20\u5927\u5c0f\uff0c\u800c\u662f\u4e00\u4e2a\u7269\u7406\u50cf\u7d20\u5927\u5c0f\u3002\u800c CSS \u50cf\u7d20\u5927\u5c0f\u4e0e\u7269\u7406\u50cf\u7d20\u5927\u5c0f\u76f8\u5dee ",(0,s.kt)("inlineCode",{parentName:"p"},"dpr")," \u500d\u3002\u5f53\u6211\u4eec\u8bbe\u7f6e Canvas \u5927\u5c0f\u4e0e CSS \u5927\u5c0f\u76f8\u540c\u65f6\uff0c\u7531\u4e8e CSS \u5927\u5c0f\u662f Canvas \u5927\u5c0f\u7684 ",(0,s.kt)("inlineCode",{parentName:"p"},"dpr")," \u500d\uff0c\u6240\u4ee5\u4f1a\u53d1\u751f\u62c9\u4f38\uff0c\u5bfc\u81f4\u56fe\u50cf\u6a21\u7cca"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-html"},'<style>\n  #canvas {\n    width: 100px;\n    height: 100px;\n  }\n</style>\n<canvas id="canvas" width="100" height="100"></canvas>\n')),(0,s.kt)("p",null,"\u5982\u4e0a\u9762\u7684\u4ee3\u7801\uff0c\u867d\u7136\u6570\u503c\u4e0a\u753b\u5e03\u5927\u5c0f\u548c\u5176 CSS \u5927\u5c0f\u90fd\u662f ",(0,s.kt)("inlineCode",{parentName:"p"},"100"),"\uff0c\u4f46\u5b9e\u9645\u4e0a\u5b83\u4eec\u76f8\u5dee ",(0,s.kt)("inlineCode",{parentName:"p"},"dpr")," \u500d\uff0c\u56e0\u6b64\u753b\u5e03\u4f1a\u88ab\u62c9\u4f38\u653e\u5927\uff0c\u56e0\u6b64\u4f1a\u5bfc\u81f4\u6a21\u7cca\u3002"),(0,s.kt)("p",null,"\u65e2\u7136\u77e5\u9053\u4e86\u539f\u56e0\uff0c\u90a3\u6211\u4eec\u53ea\u8981\u8bbe\u7f6e\u753b\u5e03\u5927\u5c0f\u4e3a CSS \u5927\u5c0f\u7684 ",(0,s.kt)("inlineCode",{parentName:"p"},"dpr")," \u500d\uff0c\u8fd9\u6837\u753b\u5e03\u5c31\u4e0d\u4f1a\u88ab\u62c9\u4f38\u4e86\u3002\u800c\u4e3a\u4e86\u4f7f\u5f97\u5728\u753b\u5e03\u4e2d\u4f7f\u7528\u7684\u5355\u4f4d\u662f CSS \u50cf\u7d20\uff0c\u6211\u4eec\u53ef\u4ee5\u8bbe\u7f6e ",(0,s.kt)("inlineCode",{parentName:"p"},"ctx.scale(dpr)")," \uff0c\u8fd9\u6837\u6211\u4eec\u4f7f\u7528\u7684\u5355\u4f4d\u5c31\u76f8\u5f53\u4e8e CSS \u50cf\u7d20"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"ctx.scale(dpr);\n// \u8fd9\u6837\u7ed8\u5236\u7684\u77e9\u5f62\u5c31\u662f (100px, 100px) \u7684\u4e86\nctx.fillRect(0, 0, 100, 100);\n")),(0,s.kt)("p",null,"\u770b\u4e2a\u4f8b\u5b50\u8fdb\u884c\u5bf9\u6bd4\uff1a"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-html"},'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Document</title>\n    <style>\n      #canvas,\n      #canvas2 {\n        width: 300px;\n        height: 300px;\n      }\n    </style>\n  </head>\n  <body>\n    <canvas id="canvas"></canvas>\n    <canvas id="canvas2"></canvas>\n\n    <script>\n      const canvas = document.getElementById("canvas");\n      const { width: w, height: h } = window.getComputedStyle(canvas);\n      canvas.width = parseInt(w);\n      canvas.height = parseInt(h);\n\n      const ctx = canvas.getContext("2d");\n      ctx.fillStyle = "#e77c8e";\n      ctx.fillRect(100, 100, 100, 100);\n\n      const canvas2 = document.getElementById("canvas2");\n      const { width: w2, height: h2 } = window.getComputedStyle(canvas2);\n      canvas2.width = parseInt(w2) * window.devicePixelRatio;\n      canvas2.height = parseInt(h2) * window.devicePixelRatio;\n\n      const ctx2 = canvas2.getContext("2d");\n      ctx2.scale(window.devicePixelRatio, window.devicePixelRatio);\n      ctx2.fillStyle = "#e77c8e";\n      ctx2.fillRect(100, 100, 100, 100);\n    <\/script>\n  </body>\n</html>\n')),(0,s.kt)("p",null,"\u6709\u4e24\u4e2a ",(0,s.kt)("inlineCode",{parentName:"p"},"Canvas")," \u753b\u5e03\uff0c\u5b83\u7684\u5927\u5c0f\u90fd\u662f ",(0,s.kt)("span",{parentName:"p",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("mn",{parentName:"mrow"},"300"),(0,s.kt)("mtext",{parentName:"mrow"},"px"),(0,s.kt)("mo",{parentName:"mrow"},"\xd7"),(0,s.kt)("mn",{parentName:"mrow"},"300"),(0,s.kt)("mtext",{parentName:"mrow"},"px")),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"300\\text{px}\\times300\\text{px}")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"0.8389em",verticalAlign:"-0.1944em"}}),(0,s.kt)("span",{parentName:"span",className:"mord"},"300"),(0,s.kt)("span",{parentName:"span",className:"mord text"},(0,s.kt)("span",{parentName:"span",className:"mord"},"px")),(0,s.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}}),(0,s.kt)("span",{parentName:"span",className:"mbin"},"\xd7"),(0,s.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}})),(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"0.8389em",verticalAlign:"-0.1944em"}}),(0,s.kt)("span",{parentName:"span",className:"mord"},"300"),(0,s.kt)("span",{parentName:"span",className:"mord text"},(0,s.kt)("span",{parentName:"span",className:"mord"},"px")))))),"\uff0c\u753b\u5e03\u7684\u5927\u5c0f\u7b2c\u4e00\u4e2a\u8bbe\u7f6e\u7684\u6570\u503c\u4e0e CSS \u5927\u5c0f\u4e00\u6837\uff0c\u7b2c\u4e8c\u4e2a\u8bbe\u7f6e\u4e3a ",(0,s.kt)("inlineCode",{parentName:"p"},"dpr")," \u500d\uff0c\u5e76\u4e14\u7b2c\u4e8c\u4e2a\u753b\u5e03\u8bbe\u7f6e\u4e86 ",(0,s.kt)("inlineCode",{parentName:"p"},"ctx.scale(dpr)")," \uff0c\u770b\u4e00\u4e0b\u6548\u679c"),(0,s.kt)("iframe",{width:"100%",height:"330",src:"https://lastknightcoder.github.io/canvas-demos/75.html"}),(0,s.kt)("p",null,"\u7b2c\u4e8c\u4e2a\u77e9\u5f62\u660e\u663e\u6bd4\u7b2c\u4e00\u4e2a\u6e05\u6670\u8bb8\u591a\u3002"),(0,s.kt)("admonition",{type:"note"},(0,s.kt)("p",{parentName:"admonition"},"\u4f7f\u7528\u8fd9\u79cd\u65b9\u6cd5\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6b64\u65f6\u753b\u5e03\u7684\u5927\u5c0f\u88ab\u8bbe\u7f6e\u4e3a\u4e86 ",(0,s.kt)("span",{parentName:"p",className:"math math-inline"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("mn",{parentName:"mrow"},"300"),(0,s.kt)("mo",{parentName:"mrow"},"\xd7"),(0,s.kt)("mtext",{parentName:"mrow"},"dpr")),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"300 \\times \\text{dpr}")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,s.kt)("span",{parentName:"span",className:"mord"},"300"),(0,s.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}}),(0,s.kt)("span",{parentName:"span",className:"mbin"},"\xd7"),(0,s.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}})),(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,s.kt)("span",{parentName:"span",className:"mord text"},(0,s.kt)("span",{parentName:"span",className:"mord"},"dpr")))))),"\uff0c\u4f46\u662f\u6211\u4eec\u8981\u5c06\u5176\u770b\u4f5c\u662f ",(0,s.kt)("inlineCode",{parentName:"p"},"300px")," \u7684\u5927\u5c0f\u3002")))}o.isMDXComponent=!0}}]);